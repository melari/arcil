/*! For license information please see main.min.js.LICENSE.txt */
(()=>{var __webpack_modules__={9187:(e,t)=>{"use strict";function n(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function r(...e){const t=(e,t)=>n=>e(t(n));return{encode:Array.from(e).reverse().reduce(((e,n)=>e?t(e,n.encode):n.encode),void 0),decode:e.reduce(((e,n)=>e?t(e,n.decode):n.decode),void 0)}}function i(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(n(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function o(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function s(e,t="="){if(n(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function a(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function c(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let i=0;const o=[],s=Array.from(e);for(s.forEach((e=>{if(n(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,n=!0;for(let o=i;o<s.length;o++){const a=s[o],c=t*e+a;if(!Number.isSafeInteger(c)||t*e/t!==e||c-a!=t*e)throw new Error("convertRadix: carry overflow");if(e=c%r,s[o]=Math.floor(c/r),!Number.isSafeInteger(s[o])||s[o]*r+e!==c)throw new Error("convertRadix: carry overflow");n&&(s[o]?n=!1:i=o)}if(o.push(e),n)break}for(let t=0;t<e.length-1&&0===e[t];t++)o.push(0);return o.reverse()}Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64url=t.base64=t.base32crockford=t.base32hex=t.base32=t.base16=t.utils=t.assertNumber=void 0,t.assertNumber=n;const l=(e,t)=>t?l(t,e%t):e,u=(e,t)=>e+(t-l(e,t));function h(e,t,r,i){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(u(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${u(t,r)}`);let o=0,s=0;const a=2**r-1,c=[];for(const i of e){if(n(i),i>=2**t)throw new Error(`convertRadix2: invalid data word=${i} from=${t}`);if(o=o<<t|i,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=r;s-=r)c.push((o>>s-r&a)>>>0);o&=2**s-1}if(o=o<<r-s&a,!i&&s>=t)throw new Error("Excess padding");if(!i&&o)throw new Error(`Non-zero padding: ${o}`);return i&&s>0&&c.push(o>>>0),c}function d(e){return n(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return c(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(c(t,e,256))}}}function f(e,t=!1){if(n(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(u(8,e)>32||u(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return h(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(h(n,e,8,t))}}}function p(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}function y(e,t){if(n(e),"function"!=typeof t)throw new Error("checksum fn should be function");return{encode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),i=new Uint8Array(n.length+e);return i.set(n),i.set(r,n.length),i},decode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),i=t(r).slice(0,e),o=n.slice(-e);for(let t=0;t<e;t++)if(i[t]!==o[t])throw new Error("Invalid checksum");return r}}}t.utils={alphabet:i,chain:r,checksum:y,radix:d,radix2:f,join:o,padding:s},t.base16=r(f(4),i("0123456789ABCDEF"),o("")),t.base32=r(f(5),i("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),s(5),o("")),t.base32hex=r(f(5),i("0123456789ABCDEFGHIJKLMNOPQRSTUV"),s(5),o("")),t.base32crockford=r(f(5),i("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),o(""),a((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),t.base64=r(f(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),s(6),o("")),t.base64url=r(f(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),s(6),o(""));const g=e=>r(d(58),i(e),o(""));t.base58=g("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=g("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=g("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const w=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(e){let n="";for(let r=0;r<e.length;r+=8){const i=e.subarray(r,r+8);n+=t.base58.encode(i).padStart(w[i.length],"1")}return n},decode(e){let n=[];for(let r=0;r<e.length;r+=11){const i=e.slice(r,r+11),o=w.indexOf(i.length),s=t.base58.decode(i);for(let e=0;e<s.length-o;e++)if(0!==s[e])throw new Error("base58xmr: wrong padding");n=n.concat(Array.from(s.slice(s.length-o)))}return Uint8Array.from(n)}},t.base58check=e=>r(y(4,(t=>e(e(t)))),t.base58);const b=r(i("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),o("")),m=[996825010,642813549,513874426,1027748829,705979059];function v(e){const t=e>>25;let n=(33554431&e)<<5;for(let e=0;e<m.length;e++)1==(t>>e&1)&&(n^=m[e]);return n}function E(e,t,n=1){const r=e.length;let i=1;for(let t=0;t<r;t++){const n=e.charCodeAt(t);if(n<33||n>126)throw new Error(`Invalid prefix (${e})`);i=v(i)^n>>5}i=v(i);for(let t=0;t<r;t++)i=v(i)^31&e.charCodeAt(t);for(let e of t)i=v(i)^e;for(let e=0;e<6;e++)i=v(i);return i^=n,b.encode(h([i%2**30],30,5,!1))}function k(e){const t="bech32"===e?1:734539939,n=f(5),r=n.decode,i=n.encode,o=p(r);function s(e,n=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==n&&e.length>n)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${n})`);const r=e.toLowerCase();if(e!==r&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=(e=r).lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const o=e.slice(0,i),s=e.slice(i+1);if(s.length<6)throw new Error("Data must be at least 6 characters long");const a=b.decode(s).slice(0,-6),c=E(o,a,t);if(!s.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:o,words:a}}return{encode:function(e,n,r=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof n);const i=e.length+7+n.length;if(!1!==r&&i>r)throw new TypeError(`Length ${i} exceeds limit ${r}`);return`${e=e.toLowerCase()}1${b.encode(n)}${E(e,n,t)}`},decode:s,decodeToBytes:function(e){const{prefix:t,words:n}=s(e,!1);return{prefix:t,words:n,bytes:r(n)}},decodeUnsafe:p(s),fromWords:r,fromWordsUnsafe:o,toWords:i}}t.bech32=k("bech32"),t.bech32m=k("bech32m"),t.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},t.hex=r(f(4),i("0123456789abcdef"),o(""),a((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));const _={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},x=`Invalid encoding type. Available types: ${Object.keys(_).join(", ")}`;t.bytesToString=(e,t)=>{if("string"!=typeof e||!_.hasOwnProperty(e))throw new TypeError(x);if(!(t instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return _[e].encode(t)},t.str=t.bytesToString,t.stringToBytes=(e,t)=>{if(!_.hasOwnProperty(e))throw new TypeError(x);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return _[e].decode(t)},t.bytes=t.stringToBytes},9742:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=a(e),s=o[0],c=o[1],l=new i(function(e,t,n){return 3*(t+n)/4-n}(0,s,c)),u=0,h=c>0?s-4:s;for(n=0;n<h;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===c&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[u++]=255&t),1===c&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=16383,a=0,l=r-i;a<l;a+=s)o.push(c(e,a,a+s>l?l:a+s));return 1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=o[s],r[o.charCodeAt(s)]=s;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,r){for(var i,o,s=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},8764:(e,t,n)=>{"use strict";const r=n(9742),i=n(645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.lW=c,t.h2=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|y(e,t);let r=a(n);const i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(G(e,Uint8Array)){const t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(G(e,ArrayBuffer)||e&&G(e.buffer,ArrayBuffer))return f(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(G(e,SharedArrayBuffer)||e&&G(e.buffer,SharedArrayBuffer)))return f(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return c.from(r,t,n);const i=function(e){if(c.isBuffer(e)){const t=0|p(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||J(e.length)?a(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return u(e),a(e<0?0:0|p(e))}function d(e){const t=e.length<0?0:0|p(e.length),n=a(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,c.prototype),r}function p(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function y(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||G(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(i)return r?-1:W(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function w(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),J(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){let o,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let r=-1;for(o=n;o<a;o++)if(l(e,o)===l(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===c)return r*s}else-1!==r&&(o-=o-r),r=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){let n=!0;for(let r=0;r<c;r++)if(l(e,o+r)!==l(t,r)){n=!1;break}if(n)return o}return-1}function v(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=t.length;let s;for(r>o/2&&(r=o/2),s=0;s<r;++s){const r=parseInt(t.substr(2*s,2),16);if(J(r))return s;e[n+s]=r}return s}function E(e,t,n,r){return Z(W(t,e.length-n),e,n,r)}function k(e,t,n,r){return Z(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return Z(V(t),e,n,r)}function x(e,t,n,r){return Z(function(e,t){let n,r,i;const o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=n){let n,r,a,c;switch(s){case 1:t<128&&(o=t);break;case 2:n=e[i+1],128==(192&n)&&(c=(31&t)<<6|63&n,c>127&&(o=c));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(c=(15&t)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:n=e[i+1],r=e[i+2],a=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(c=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return function(e){const t=e.length;if(t<=B)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=B));return n}(r)}c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},c.allocUnsafe=function(e){return h(e)},c.allocUnsafeSlow=function(e){return h(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(G(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),G(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=c.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(G(t,Uint8Array))i+t.length>r.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},c.byteLength=y,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)w(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):g.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const n=t.h2;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(e,t,n,r,i){if(G(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0);const a=Math.min(o,s),l=this.slice(r,i),u=e.slice(t,n);for(let e=0;e<a;++e)if(l[e]!==u[e]){o=l[e],s=u[e];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return E(this,e,t,n);case"ascii":case"latin1":case"binary":return k(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const B=4096;function C(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function R(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function N(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=Y[e[r]];return i}function U(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function I(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function T(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r,i){H(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,n}function O(e,t,n,r,i){H(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=s,s>>=8,e[n+2]=s,s>>=8,e[n+1]=s,s>>=8,e[n]=s,n+8}function L(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,o){return t=+t,n>>>=0,o||L(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function D(e,t,n,r,o){return t=+t,n>>>=0,o||L(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=X((function(e){K(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||j(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),c.prototype.readBigUInt64BE=X((function(e){K(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||j(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),c.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let r=t,i=1,o=this[e+--r];for(;r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=X((function(e){K(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||j(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=X((function(e){K(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||j(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||T(this,e,t,n,Math.pow(2,8*n)-1,0);let i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||T(this,e,t,n,Math.pow(2,8*n)-1,0);let i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=X((function(e,t=0){return P(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=X((function(e,t=0){return O(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);T(this,e,t,n,r-1,-r)}let i=0,o=1,s=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);T(this,e,t,n,r-1,-r)}let i=n-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=X((function(e,t=0){return P(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=X((function(e,t=0){return O(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const o=c.isBuffer(e)?e:c.from(e,r),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%s]}return this};const $={};function M(e,t,n){$[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function z(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function H(e,t,n,r,i,o){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new $.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){K(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||j(t,e.length-(n+1))}(r,i,o)}function K(e,t){if("number"!=typeof e)throw new $.ERR_INVALID_ARG_TYPE(t,"number",e)}function j(e,t,n){if(Math.floor(e)!==e)throw K(e,n),new $.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new $.ERR_BUFFER_OUT_OF_BOUNDS;throw new $.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}M("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),M("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),M("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=z(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=z(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r}),RangeError);const q=/[^+/0-9A-Za-z-_]/g;function W(e,t){let n;t=t||1/0;const r=e.length;let i=null;const o=[];for(let s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Z(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function G(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function J(e){return e!=e}const Y=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function X(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},452:function(e,t,n){var r;e.exports=(r=n(8249),n(8269),n(8214),n(888),n(5109),function(){var e=r,t=e.lib.BlockCipher,n=e.algo,i=[],o=[],s=[],a=[],c=[],l=[],u=[],h=[],d=[],f=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,r=0;for(t=0;t<256;t++){var p=r^r<<1^r<<2^r<<3^r<<4;p=p>>>8^255&p^99,i[n]=p,o[p]=n;var y=e[n],g=e[y],w=e[g],b=257*e[p]^16843008*p;s[n]=b<<24|b>>>8,a[n]=b<<16|b>>>16,c[n]=b<<8|b>>>24,l[n]=b,b=16843009*w^65537*g^257*y^16843008*n,u[p]=b<<24|b>>>8,h[p]=b<<16|b>>>16,d[p]=b<<8|b>>>24,f[p]=b,n?(n=y^e[e[e[w^y]]],r^=e[e[r]]):n=r=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],y=n.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],s=0;s<r;s++)s<n?o[s]=t[s]:(l=o[s-1],s%n?n>6&&s%n==4&&(l=i[l>>>24]<<24|i[l>>>16&255]<<16|i[l>>>8&255]<<8|i[255&l]):(l=i[(l=l<<8|l>>>24)>>>24]<<24|i[l>>>16&255]<<16|i[l>>>8&255]<<8|i[255&l],l^=p[s/n|0]<<24),o[s]=o[s-n]^l);for(var a=this._invKeySchedule=[],c=0;c<r;c++){if(s=r-c,c%4)var l=o[s];else l=o[s-4];a[c]=c<4||s<=4?l:u[i[l>>>24]]^h[i[l>>>16&255]]^d[i[l>>>8&255]]^f[i[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,c,l,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,h,d,f,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,s,a){for(var c=this._nRounds,l=e[t]^n[0],u=e[t+1]^n[1],h=e[t+2]^n[2],d=e[t+3]^n[3],f=4,p=1;p<c;p++){var y=r[l>>>24]^i[u>>>16&255]^o[h>>>8&255]^s[255&d]^n[f++],g=r[u>>>24]^i[h>>>16&255]^o[d>>>8&255]^s[255&l]^n[f++],w=r[h>>>24]^i[d>>>16&255]^o[l>>>8&255]^s[255&u]^n[f++],b=r[d>>>24]^i[l>>>16&255]^o[u>>>8&255]^s[255&h]^n[f++];l=y,u=g,h=w,d=b}y=(a[l>>>24]<<24|a[u>>>16&255]<<16|a[h>>>8&255]<<8|a[255&d])^n[f++],g=(a[u>>>24]<<24|a[h>>>16&255]<<16|a[d>>>8&255]<<8|a[255&l])^n[f++],w=(a[h>>>24]<<24|a[d>>>16&255]<<16|a[l>>>8&255]<<8|a[255&u])^n[f++],b=(a[d>>>24]<<24|a[l>>>16&255]<<16|a[u>>>8&255]<<8|a[255&h])^n[f++],e[t]=y,e[t+1]=g,e[t+2]=w,e[t+3]=b},keySize:8});e.AES=t._createHelper(y)}(),r.AES)},7407:function(e,t,n){var r;e.exports=(r=n(8249),n(8269),n(8214),n(888),n(5109),function(){var e=r,t=e.lib.BlockCipher,n=e.algo;const i=16,o=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var a={pbox:[],sbox:[]};function c(e,t){let n=t>>24&255,r=t>>16&255,i=t>>8&255,o=255&t,s=e.sbox[0][n]+e.sbox[1][r];return s^=e.sbox[2][i],s+=e.sbox[3][o],s}function l(e,t,n){let r,o=t,s=n;for(let t=0;t<i;++t)o^=e.pbox[t],s=c(e,o)^s,r=o,o=s,s=r;return r=o,o=s,s=r,s^=e.pbox[i],o^=e.pbox[i+1],{left:o,right:s}}var u=n.Blowfish=t.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4;!function(e,t,n){for(let t=0;t<4;t++){e.sbox[t]=[];for(let n=0;n<256;n++)e.sbox[t][n]=s[t][n]}let r=0;for(let s=0;s<i+2;s++)e.pbox[s]=o[s]^t[r],r++,r>=n&&(r=0);let a=0,c=0,u=0;for(let t=0;t<i+2;t+=2)u=l(e,a,c),a=u.left,c=u.right,e.pbox[t]=a,e.pbox[t+1]=c;for(let t=0;t<4;t++)for(let n=0;n<256;n+=2)u=l(e,a,c),a=u.left,c=u.right,e.sbox[t][n]=a,e.sbox[t][n+1]=c}(a,t,n)}},encryptBlock:function(e,t){var n=l(a,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},decryptBlock:function(e,t){var n=function(e,t,n){let r,o=t,s=n;for(let t=i+1;t>1;--t)o^=e.pbox[t],s=c(e,o)^s,r=o,o=s,s=r;return r=o,o=s,s=r,s^=e.pbox[1],o^=e.pbox[0],{left:o,right:s}}(a,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},blockSize:2,keySize:4,ivSize:2});e.Blowfish=t._createHelper(u)}(),r.Blowfish)},5109:function(e,t,n){var r,i,o,s,a,c,l,u,h,d,f,p,y,g,w,b,m,v,E;e.exports=(r=n(8249),n(888),void(r.lib.Cipher||(i=r,o=i.lib,s=o.Base,a=o.WordArray,c=o.BufferedBlockAlgorithm,l=i.enc,l.Utf8,u=l.Base64,h=i.algo.EvpKDF,d=o.Cipher=c.extend({cfg:s.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?E:m}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()}),o.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),f=i.mode={},p=o.BlockCipherMode=s.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),y=f.CBC=function(){var e=p.extend();function t(e,t,n){var r,i=this._iv;i?(r=i,this._iv=void 0):r=this._prevBlock;for(var o=0;o<n;o++)e[t+o]^=r[o]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize;t.call(this,e,n,i),r.encryptBlock(e,n),this._prevBlock=e.slice(n,n+i)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,o=e.slice(n,n+i);r.decryptBlock(e,n),t.call(this,e,n,i),this._prevBlock=o}}),e}(),g=(i.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,i=r<<24|r<<16|r<<8|r,o=[],s=0;s<r;s+=4)o.push(i);var c=a.create(o,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},o.BlockCipher=d.extend({cfg:d.cfg.extend({mode:y,padding:g}),reset:function(){var e;d.reset.call(this);var t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),w=o.CipherParams=s.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),b=(i.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?a.create([1398893684,1701076831]).concat(n).concat(t):t).toString(u)},parse:function(e){var t,n=u.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=a.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),w.create({ciphertext:n,salt:t})}},m=o.SerializableCipher=s.extend({cfg:s.extend({format:b}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r),o=i.finalize(t),s=i.cfg;return w.create({ciphertext:o,key:n,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),v=(i.kdf={}).OpenSSL={execute:function(e,t,n,r,i){if(r||(r=a.random(8)),i)o=h.create({keySize:t+n,hasher:i}).compute(e,r);else var o=h.create({keySize:t+n}).compute(e,r);var s=a.create(o.words.slice(t),4*n);return o.sigBytes=4*t,w.create({key:o,iv:s,salt:r})}},E=o.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:v}),encrypt:function(e,t,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize,r.salt,r.hasher);r.iv=i.iv;var o=m.encrypt.call(this,e,t,i.key,r);return o.mixIn(i),o},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=r.kdf.execute(n,e.keySize,e.ivSize,t.salt,r.hasher);return r.iv=i.iv,m.decrypt.call(this,e,t,i.key,r)}}))))},8249:function(e,t,n){var r;e.exports=(r=r||function(e,t){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(2480)}catch(e){}var i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},a=s.lib={},c=a.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=a.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=s<<24-(r+o)%4*8}else for(var a=0;a<i;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(i());return new l.init(t,e)}}),u=s.enc={},h=u.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new l.init(n,t/2)}},d=u.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new l.init(n,t)}},f=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},p=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,s=this.blockSize,a=o/(4*s),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,u=e.min(4*c,o);if(c){for(var h=0;h<c;h+=s)this._doProcessBlock(i,h);n=i.splice(0,c),r.sigBytes-=u}return new l.init(n,u)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),y=(a.Hasher=p.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new y.HMAC.init(e,n).finalize(t)}}}),s.algo={});return s}(Math),r)},8269:function(e,t,n){var r,i,o;e.exports=(r=n(8249),o=(i=r).lib.WordArray,i.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)i.push(r.charAt(s>>>6*(3-a)&63));var c=r.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var i=0;i<n.length;i++)r[n.charCodeAt(i)]=i}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return function(e,t,n){for(var r=[],i=0,s=0;s<t;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2|n[e.charCodeAt(s)]>>>6-s%4*2;r[i>>>2]|=a<<24-i%4*8,i++}return o.create(r,i)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64)},3786:function(e,t,n){var r,i,o;e.exports=(r=n(8249),o=(i=r).lib.WordArray,i.enc.Base64url={stringify:function(e,t){void 0===t&&(t=!0);var n=e.words,r=e.sigBytes,i=t?this._safe_map:this._map;e.clamp();for(var o=[],s=0;s<r;s+=3)for(var a=(n[s>>>2]>>>24-s%4*8&255)<<16|(n[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|n[s+2>>>2]>>>24-(s+2)%4*8&255,c=0;c<4&&s+.75*c<r;c++)o.push(i.charAt(a>>>6*(3-c)&63));var l=i.charAt(64);if(l)for(;o.length%4;)o.push(l);return o.join("")},parse:function(e,t){void 0===t&&(t=!0);var n=e.length,r=t?this._safe_map:this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var s=0;s<r.length;s++)i[r.charCodeAt(s)]=s}var a=r.charAt(64);if(a){var c=e.indexOf(a);-1!==c&&(n=c)}return function(e,t,n){for(var r=[],i=0,s=0;s<t;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2|n[e.charCodeAt(s)]>>>6-s%4*2;r[i>>>2]|=a<<24-i%4*8,i++}return o.create(r,i)}(e,n,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},r.enc.Base64url)},298:function(e,t,n){var r;e.exports=(r=n(8249),function(){var e=r,t=e.lib.WordArray,n=e.enc;function i(e){return e<<8&4278255360|e>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i+=2){var o=t[i>>>2]>>>16-i%4*8&65535;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var n=e.length,r=[],i=0;i<n;i++)r[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return t.create(r,2*n)}},n.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o+=2){var s=i(t[o>>>2]>>>16-o%4*8&65535);r.push(String.fromCharCode(s))}return r.join("")},parse:function(e){for(var n=e.length,r=[],o=0;o<n;o++)r[o>>>1]|=i(e.charCodeAt(o)<<16-o%2*16);return t.create(r,2*n)}}}(),r.enc.Utf16)},888:function(e,t,n){var r,i,o,s,a,c,l,u;e.exports=(u=n(8249),n(2783),n(9824),o=(i=(r=u).lib).Base,s=i.WordArray,c=(a=r.algo).MD5,l=a.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,i=r.hasher.create(),o=s.create(),a=o.words,c=r.keySize,l=r.iterations;a.length<c;){n&&i.update(n),n=i.update(e).finalize(t),i.reset();for(var u=1;u<l;u++)n=i.finalize(n),i.reset();o.concat(n)}return o.sigBytes=4*c,o}}),r.EvpKDF=function(e,t,n){return l.create(n).compute(e,t)},u.EvpKDF)},2209:function(e,t,n){var r,i,o,s;e.exports=(s=n(8249),n(5109),i=(r=s).lib.CipherParams,o=r.enc.Hex,r.format.Hex={stringify:function(e){return e.ciphertext.toString(o)},parse:function(e){var t=o.parse(e);return i.create({ciphertext:t})}},s.format.Hex)},9824:function(e,t,n){var r,i,o;e.exports=(i=(r=n(8249)).lib.Base,o=r.enc.Utf8,void(r.algo.HMAC=i.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),s=this._iKey=t.clone(),a=i.words,c=s.words,l=0;l<n;l++)a[l]^=1549556828,c[l]^=909522486;i.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))},1354:function(e,t,n){var r;e.exports=(r=n(8249),n(4938),n(4433),n(298),n(8269),n(3786),n(8214),n(2783),n(2153),n(7792),n(34),n(7460),n(3327),n(706),n(9824),n(2112),n(888),n(5109),n(8568),n(4242),n(9968),n(7660),n(1148),n(3615),n(2807),n(1077),n(6475),n(6991),n(2209),n(452),n(4253),n(1857),n(4454),n(3974),n(7407),r)},4433:function(e,t,n){var r;e.exports=(r=n(8249),function(){if("function"==typeof ArrayBuffer){var e=r.lib.WordArray,t=e.init,n=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=e[i]<<24-i%4*8;t.call(this,r,n)}else t.apply(this,arguments)};n.prototype=e}}(),r.lib.WordArray)},8214:function(e,t,n){var r;e.exports=(r=n(8249),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,s=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=s.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,s=e[t+0],c=e[t+1],f=e[t+2],p=e[t+3],y=e[t+4],g=e[t+5],w=e[t+6],b=e[t+7],m=e[t+8],v=e[t+9],E=e[t+10],k=e[t+11],_=e[t+12],x=e[t+13],A=e[t+14],S=e[t+15],B=o[0],C=o[1],R=o[2],N=o[3];B=l(B,C,R,N,s,7,a[0]),N=l(N,B,C,R,c,12,a[1]),R=l(R,N,B,C,f,17,a[2]),C=l(C,R,N,B,p,22,a[3]),B=l(B,C,R,N,y,7,a[4]),N=l(N,B,C,R,g,12,a[5]),R=l(R,N,B,C,w,17,a[6]),C=l(C,R,N,B,b,22,a[7]),B=l(B,C,R,N,m,7,a[8]),N=l(N,B,C,R,v,12,a[9]),R=l(R,N,B,C,E,17,a[10]),C=l(C,R,N,B,k,22,a[11]),B=l(B,C,R,N,_,7,a[12]),N=l(N,B,C,R,x,12,a[13]),R=l(R,N,B,C,A,17,a[14]),B=u(B,C=l(C,R,N,B,S,22,a[15]),R,N,c,5,a[16]),N=u(N,B,C,R,w,9,a[17]),R=u(R,N,B,C,k,14,a[18]),C=u(C,R,N,B,s,20,a[19]),B=u(B,C,R,N,g,5,a[20]),N=u(N,B,C,R,E,9,a[21]),R=u(R,N,B,C,S,14,a[22]),C=u(C,R,N,B,y,20,a[23]),B=u(B,C,R,N,v,5,a[24]),N=u(N,B,C,R,A,9,a[25]),R=u(R,N,B,C,p,14,a[26]),C=u(C,R,N,B,m,20,a[27]),B=u(B,C,R,N,x,5,a[28]),N=u(N,B,C,R,f,9,a[29]),R=u(R,N,B,C,b,14,a[30]),B=h(B,C=u(C,R,N,B,_,20,a[31]),R,N,g,4,a[32]),N=h(N,B,C,R,m,11,a[33]),R=h(R,N,B,C,k,16,a[34]),C=h(C,R,N,B,A,23,a[35]),B=h(B,C,R,N,c,4,a[36]),N=h(N,B,C,R,y,11,a[37]),R=h(R,N,B,C,b,16,a[38]),C=h(C,R,N,B,E,23,a[39]),B=h(B,C,R,N,x,4,a[40]),N=h(N,B,C,R,s,11,a[41]),R=h(R,N,B,C,p,16,a[42]),C=h(C,R,N,B,w,23,a[43]),B=h(B,C,R,N,v,4,a[44]),N=h(N,B,C,R,_,11,a[45]),R=h(R,N,B,C,S,16,a[46]),B=d(B,C=h(C,R,N,B,f,23,a[47]),R,N,s,6,a[48]),N=d(N,B,C,R,b,10,a[49]),R=d(R,N,B,C,A,15,a[50]),C=d(C,R,N,B,g,21,a[51]),B=d(B,C,R,N,_,6,a[52]),N=d(N,B,C,R,p,10,a[53]),R=d(R,N,B,C,E,15,a[54]),C=d(C,R,N,B,c,21,a[55]),B=d(B,C,R,N,m,6,a[56]),N=d(N,B,C,R,S,10,a[57]),R=d(R,N,B,C,w,15,a[58]),C=d(C,R,N,B,x,21,a[59]),B=d(B,C,R,N,y,6,a[60]),N=d(N,B,C,R,k,10,a[61]),R=d(R,N,B,C,f,15,a[62]),C=d(C,R,N,B,v,21,a[63]),o[0]=o[0]+B|0,o[1]=o[1]+C|0,o[2]=o[2]+R|0,o[3]=o[3]+N|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296),s=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,c=a.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,n,r,i,o,s){var a=e+(t&n|~t&r)+i+s;return(a<<o|a>>>32-o)+t}function u(e,t,n,r,i,o,s){var a=e+(t&r|n&~r)+i+s;return(a<<o|a>>>32-o)+t}function h(e,t,n,r,i,o,s){var a=e+(t^n^r)+i+s;return(a<<o|a>>>32-o)+t}function d(e,t,n,r,i,o,s){var a=e+(n^(t|~r))+i+s;return(a<<o|a>>>32-o)+t}t.MD5=o._createHelper(c),t.HmacMD5=o._createHmacHelper(c)}(Math),r.MD5)},8568:function(e,t,n){var r;e.exports=(r=n(8249),n(5109),r.mode.CFB=function(){var e=r.lib.BlockCipherMode.extend();function t(e,t,n,r){var i,o=this._iv;o?(i=o.slice(0),this._iv=void 0):i=this._prevBlock,r.encryptBlock(i,0);for(var s=0;s<n;s++)e[t+s]^=i[s]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize;t.call(this,e,n,i,r),this._prevBlock=e.slice(n,n+i)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,o=e.slice(n,n+i);t.call(this,e,n,i,r),this._prevBlock=o}}),e}(),r.mode.CFB)},9968:function(e,t,n){var r;e.exports=(r=n(8249),n(5109),r.mode.CTRGladman=function(){var e=r.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}var n=e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,o=this._iv,s=this._counter;o&&(s=this._counter=o.slice(0),this._iv=void 0),function(e){0===(e[0]=t(e[0]))&&(e[1]=t(e[1]))}(s);var a=s.slice(0);r.encryptBlock(a,0);for(var c=0;c<i;c++)e[n+c]^=a[c]}});return e.Decryptor=n,e}(),r.mode.CTRGladman)},4242:function(e,t,n){var r,i,o;e.exports=(o=n(8249),n(5109),o.mode.CTR=(i=(r=o.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var s=o.slice(0);n.encryptBlock(s,0),o[r-1]=o[r-1]+1|0;for(var a=0;a<r;a++)e[t+a]^=s[a]}}),r.Decryptor=i,r),o.mode.CTR)},1148:function(e,t,n){var r,i;e.exports=(i=n(8249),n(5109),i.mode.ECB=((r=i.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),r.Decryptor=r.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),r),i.mode.ECB)},7660:function(e,t,n){var r,i,o;e.exports=(o=n(8249),n(5109),o.mode.OFB=(i=(r=o.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var s=0;s<r;s++)e[t+s]^=o[s]}}),r.Decryptor=i,r),o.mode.OFB)},3615:function(e,t,n){var r;e.exports=(r=n(8249),n(5109),r.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,i=r-n%r,o=n+i-1;e.clamp(),e.words[o>>>2]|=i<<24-o%4*8,e.sigBytes+=i},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},r.pad.Ansix923)},2807:function(e,t,n){var r;e.exports=(r=n(8249),n(5109),r.pad.Iso10126={pad:function(e,t){var n=4*t,i=n-e.sigBytes%n;e.concat(r.lib.WordArray.random(i-1)).concat(r.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},r.pad.Iso10126)},1077:function(e,t,n){var r;e.exports=(r=n(8249),n(5109),r.pad.Iso97971={pad:function(e,t){e.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(e,t)},unpad:function(e){r.pad.ZeroPadding.unpad(e),e.sigBytes--}},r.pad.Iso97971)},6991:function(e,t,n){var r;e.exports=(r=n(8249),n(5109),r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding)},6475:function(e,t,n){var r;e.exports=(r=n(8249),n(5109),r.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},r.pad.ZeroPadding)},2112:function(e,t,n){var r,i,o,s,a,c,l,u,h;e.exports=(h=n(8249),n(2153),n(9824),o=(i=(r=h).lib).Base,s=i.WordArray,c=(a=r.algo).SHA256,l=a.HMAC,u=a.PBKDF2=o.extend({cfg:o.extend({keySize:4,hasher:c,iterations:25e4}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=l.create(n.hasher,e),i=s.create(),o=s.create([1]),a=i.words,c=o.words,u=n.keySize,h=n.iterations;a.length<u;){var d=r.update(t).finalize(o);r.reset();for(var f=d.words,p=f.length,y=d,g=1;g<h;g++){y=r.finalize(y),r.reset();for(var w=y.words,b=0;b<p;b++)f[b]^=w[b]}i.concat(d),c[0]++}return i.sigBytes=4*u,i}}),r.PBKDF2=function(e,t,n){return u.create(n).compute(e,t)},h.PBKDF2)},3974:function(e,t,n){var r;e.exports=(r=n(8249),n(8269),n(8214),n(888),n(5109),function(){var e=r,t=e.lib.StreamCipher,n=e.algo,i=[],o=[],s=[],a=n.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var i=0;i<4;i++)c.call(this);for(i=0;i<8;i++)r[i]^=n[i+4&7];if(t){var o=t.words,s=o[0],a=o[1],l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),h=l>>>16|4294901760&u,d=u<<16|65535&l;for(r[0]^=l,r[1]^=h,r[2]^=u,r[3]^=d,r[4]^=l,r[5]^=h,r[6]^=u,r[7]^=d,i=0;i<4;i++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),e[t+r]^=i[r]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)o[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],i=65535&r,a=r>>>16,c=((i*i>>>17)+i*a>>>15)+a*a,l=((4294901760&r)*r|0)+((65535&r)*r|0);s[n]=c^l}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}e.RabbitLegacy=t._createHelper(a)}(),r.RabbitLegacy)},4454:function(e,t,n){var r;e.exports=(r=n(8249),n(8269),n(8214),n(888),n(5109),function(){var e=r,t=e.lib.StreamCipher,n=e.algo,i=[],o=[],s=[],a=n.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)c.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(t){var o=t.words,s=o[0],a=o[1],l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),h=l>>>16|4294901760&u,d=u<<16|65535&l;for(i[0]^=l,i[1]^=h,i[2]^=u,i[3]^=d,i[4]^=l,i[5]^=h,i[6]^=u,i[7]^=d,n=0;n<4;n++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),e[t+r]^=i[r]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)o[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],i=65535&r,a=r>>>16,c=((i*i>>>17)+i*a>>>15)+a*a,l=((4294901760&r)*r|0)+((65535&r)*r|0);s[n]=c^l}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}e.Rabbit=t._createHelper(a)}(),r.Rabbit)},1857:function(e,t,n){var r;e.exports=(r=n(8249),n(8269),n(8214),n(888),n(5109),function(){var e=r,t=e.lib.StreamCipher,n=e.algo,i=n.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],i=0;i<256;i++)r[i]=i;i=0;for(var o=0;i<256;i++){var s=i%n,a=t[s>>>2]>>>24-s%4*8&255;o=(o+r[i]+a)%256;var c=r[i];r[i]=r[o],r[o]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var e=this._S,t=this._i,n=this._j,r=0,i=0;i<4;i++){n=(n+e[t=(t+1)%256])%256;var o=e[t];e[t]=e[n],e[n]=o,r|=e[(e[t]+e[n])%256]<<24-8*i}return this._i=t,this._j=n,r}e.RC4=t._createHelper(i);var s=n.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)o.call(this)}});e.RC4Drop=t._createHelper(s)}(),r.RC4)},706:function(e,t,n){var r;e.exports=(r=n(8249),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,s=t.algo,a=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),l=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=i.create([0,1518500249,1859775393,2400959708,2840853838]),d=i.create([1352829926,1548603684,1836072691,2053994217,0]),f=s.RIPEMD160=o.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o,s,f,v,E,k,_,x,A,S,B,C=this._hash.words,R=h.words,N=d.words,U=a.words,I=c.words,T=l.words,P=u.words;for(k=o=C[0],_=s=C[1],x=f=C[2],A=v=C[3],S=E=C[4],n=0;n<80;n+=1)B=o+e[t+U[n]]|0,B+=n<16?p(s,f,v)+R[0]:n<32?y(s,f,v)+R[1]:n<48?g(s,f,v)+R[2]:n<64?w(s,f,v)+R[3]:b(s,f,v)+R[4],B=(B=m(B|=0,T[n]))+E|0,o=E,E=v,v=m(f,10),f=s,s=B,B=k+e[t+I[n]]|0,B+=n<16?b(_,x,A)+N[0]:n<32?w(_,x,A)+N[1]:n<48?g(_,x,A)+N[2]:n<64?y(_,x,A)+N[3]:p(_,x,A)+N[4],B=(B=m(B|=0,P[n]))+S|0,k=S,S=A,A=m(x,10),x=_,_=B;B=C[1]+f+A|0,C[1]=C[2]+v+S|0,C[2]=C[3]+E+k|0,C[3]=C[4]+o+_|0,C[4]=C[0]+s+x|0,C[0]=B},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i=this._hash,o=i.words,s=0;s<5;s++){var a=o[s];o[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return i},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,n){return e^t^n}function y(e,t,n){return e&t|~e&n}function g(e,t,n){return(e|~t)^n}function w(e,t,n){return e&n|t&~n}function b(e,t,n){return e^(t|~n)}function m(e,t){return e<<t|e>>>32-t}t.RIPEMD160=o._createHelper(f),t.HmacRIPEMD160=o._createHmacHelper(f)}(Math),r.RIPEMD160)},2783:function(e,t,n){var r,i,o,s,a,c,l,u;e.exports=(i=(r=u=n(8249)).lib,o=i.WordArray,s=i.Hasher,a=r.algo,c=[],l=a.SHA1=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=0;l<80;l++){if(l<16)c[l]=0|e[t+l];else{var u=c[l-3]^c[l-8]^c[l-14]^c[l-16];c[l]=u<<1|u>>>31}var h=(r<<5|r>>>27)+a+c[l];h+=l<20?1518500249+(i&o|~i&s):l<40?1859775393+(i^o^s):l<60?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,a=s,s=o,o=i<<30|i>>>2,i=r,r=h}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=s._createHelper(l),r.HmacSHA1=s._createHmacHelper(l),u.SHA1)},7792:function(e,t,n){var r,i,o,s,a,c;e.exports=(c=n(8249),n(2153),i=(r=c).lib.WordArray,o=r.algo,s=o.SHA256,a=o.SHA224=s.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=s._doFinalize.call(this);return e.sigBytes-=4,e}}),r.SHA224=s._createHelper(a),r.HmacSHA224=s._createHmacHelper(a),c.SHA224)},2153:function(e,t,n){var r;e.exports=(r=n(8249),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,s=t.algo,a=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(a[i]=n(e.pow(r,.5))),c[i]=n(e.pow(r,1/3)),i++),r++}();var l=[],u=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],u=n[5],h=n[6],d=n[7],f=0;f<64;f++){if(f<16)l[f]=0|e[t+f];else{var p=l[f-15],y=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,g=l[f-2],w=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;l[f]=y+l[f-7]+w+l[f-16]}var b=r&i^r&o^i&o,m=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),v=d+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&h)+c[f]+l[f];d=h,h=u,u=a,a=s+v|0,s=o,o=i,i=r,r=v+(m+b)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+u|0,n[6]=n[6]+h|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(u),t.HmacSHA256=o._createHmacHelper(u)}(Math),r.SHA256)},3327:function(e,t,n){var r;e.exports=(r=n(8249),n(4938),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,s=t.x64.Word,a=t.algo,c=[],l=[],u=[];!function(){for(var e=1,t=0,n=0;n<24;n++){c[e+5*t]=(n+1)*(n+2)/2%64;var r=(2*e+3*t)%5;e=t%5,t=r}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var i=1,o=0;o<24;o++){for(var a=0,h=0,d=0;d<7;d++){if(1&i){var f=(1<<d)-1;f<32?h^=1<<f:a^=1<<f-32}128&i?i=i<<1^113:i<<=1}u[o]=s.create(a,h)}}();var h=[];!function(){for(var e=0;e<25;e++)h[e]=s.create()}();var d=a.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,i=0;i<r;i++){var o=e[t+2*i],s=e[t+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),(C=n[i]).high^=s,C.low^=o}for(var a=0;a<24;a++){for(var d=0;d<5;d++){for(var f=0,p=0,y=0;y<5;y++)f^=(C=n[d+5*y]).high,p^=C.low;var g=h[d];g.high=f,g.low=p}for(d=0;d<5;d++){var w=h[(d+4)%5],b=h[(d+1)%5],m=b.high,v=b.low;for(f=w.high^(m<<1|v>>>31),p=w.low^(v<<1|m>>>31),y=0;y<5;y++)(C=n[d+5*y]).high^=f,C.low^=p}for(var E=1;E<25;E++){var k=(C=n[E]).high,_=C.low,x=c[E];x<32?(f=k<<x|_>>>32-x,p=_<<x|k>>>32-x):(f=_<<x-32|k>>>64-x,p=k<<x-32|_>>>64-x);var A=h[l[E]];A.high=f,A.low=p}var S=h[0],B=n[0];for(S.high=B.high,S.low=B.low,d=0;d<5;d++)for(y=0;y<5;y++){var C=n[E=d+5*y],R=h[E],N=h[(d+1)%5+5*y],U=h[(d+2)%5+5*y];C.high=R.high^~N.high&U.high,C.low=R.low^~N.low&U.low}C=n[0];var I=u[a];C.high^=I.high,C.low^=I.low}},_doFinalize:function(){var t=this._data,n=t.words,r=(this._nDataBytes,8*t.sigBytes),o=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(e.ceil((r+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var s=this._state,a=this.cfg.outputLength/8,c=a/8,l=[],u=0;u<c;u++){var h=s[u],d=h.high,f=h.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),l.push(f),l.push(d)}return new i.init(l,a)},clone:function(){for(var e=o.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});t.SHA3=o._createHelper(d),t.HmacSHA3=o._createHmacHelper(d)}(Math),r.SHA3)},7460:function(e,t,n){var r,i,o,s,a,c,l,u;e.exports=(u=n(8249),n(4938),n(34),i=(r=u).x64,o=i.Word,s=i.WordArray,a=r.algo,c=a.SHA512,l=a.SHA384=c.extend({_doReset:function(){this._hash=new s.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var e=c._doFinalize.call(this);return e.sigBytes-=16,e}}),r.SHA384=c._createHelper(l),r.HmacSHA384=c._createHmacHelper(l),u.SHA384)},34:function(e,t,n){var r;e.exports=(r=n(8249),n(4938),function(){var e=r,t=e.lib.Hasher,n=e.x64,i=n.Word,o=n.WordArray,s=e.algo;function a(){return i.create.apply(i,arguments)}var c=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],l=[];!function(){for(var e=0;e<80;e++)l[e]=a()}();var u=s.SHA512=t.extend({_doReset:function(){this._hash=new o.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],u=n[5],h=n[6],d=n[7],f=r.high,p=r.low,y=i.high,g=i.low,w=o.high,b=o.low,m=s.high,v=s.low,E=a.high,k=a.low,_=u.high,x=u.low,A=h.high,S=h.low,B=d.high,C=d.low,R=f,N=p,U=y,I=g,T=w,P=b,O=m,L=v,F=E,D=k,$=_,M=x,z=A,H=S,K=B,j=C,q=0;q<80;q++){var W,V,Z=l[q];if(q<16)V=Z.high=0|e[t+2*q],W=Z.low=0|e[t+2*q+1];else{var G=l[q-15],J=G.high,Y=G.low,X=(J>>>1|Y<<31)^(J>>>8|Y<<24)^J>>>7,Q=(Y>>>1|J<<31)^(Y>>>8|J<<24)^(Y>>>7|J<<25),ee=l[q-2],te=ee.high,ne=ee.low,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,ie=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),oe=l[q-7],se=oe.high,ae=oe.low,ce=l[q-16],le=ce.high,ue=ce.low;V=(V=(V=X+se+((W=Q+ae)>>>0<Q>>>0?1:0))+re+((W+=ie)>>>0<ie>>>0?1:0))+le+((W+=ue)>>>0<ue>>>0?1:0),Z.high=V,Z.low=W}var he,de=F&$^~F&z,fe=D&M^~D&H,pe=R&U^R&T^U&T,ye=N&I^N&P^I&P,ge=(R>>>28|N<<4)^(R<<30|N>>>2)^(R<<25|N>>>7),we=(N>>>28|R<<4)^(N<<30|R>>>2)^(N<<25|R>>>7),be=(F>>>14|D<<18)^(F>>>18|D<<14)^(F<<23|D>>>9),me=(D>>>14|F<<18)^(D>>>18|F<<14)^(D<<23|F>>>9),ve=c[q],Ee=ve.high,ke=ve.low,_e=K+be+((he=j+me)>>>0<j>>>0?1:0),xe=we+ye;K=z,j=H,z=$,H=M,$=F,M=D,F=O+(_e=(_e=(_e=_e+de+((he+=fe)>>>0<fe>>>0?1:0))+Ee+((he+=ke)>>>0<ke>>>0?1:0))+V+((he+=W)>>>0<W>>>0?1:0))+((D=L+he|0)>>>0<L>>>0?1:0)|0,O=T,L=P,T=U,P=I,U=R,I=N,R=_e+(ge+pe+(xe>>>0<we>>>0?1:0))+((N=he+xe|0)>>>0<he>>>0?1:0)|0}p=r.low=p+N,r.high=f+R+(p>>>0<N>>>0?1:0),g=i.low=g+I,i.high=y+U+(g>>>0<I>>>0?1:0),b=o.low=b+P,o.high=w+T+(b>>>0<P>>>0?1:0),v=s.low=v+L,s.high=m+O+(v>>>0<L>>>0?1:0),k=a.low=k+D,a.high=E+F+(k>>>0<D>>>0?1:0),x=u.low=x+M,u.high=_+$+(x>>>0<M>>>0?1:0),S=h.low=S+H,h.high=A+z+(S>>>0<H>>>0?1:0),C=d.low=C+j,d.high=B+K+(C>>>0<j>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(u),e.HmacSHA512=t._createHmacHelper(u)}(),r.SHA512)},4253:function(e,t,n){var r;e.exports=(r=n(8249),n(8269),n(8214),n(888),n(5109),function(){var e=r,t=e.lib,n=t.WordArray,i=t.BlockCipher,o=e.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=o.DES=i.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var r=s[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(var i=this._subKeys=[],o=0;o<16;o++){var l=i[o]=[],u=c[o];for(n=0;n<24;n++)l[n/6|0]|=t[(a[n]-1+u)%28]<<31-n%6,l[4+(n/6|0)]|=t[28+(a[n+24]-1+u)%28]<<31-n%6;for(l[0]=l[0]<<1|l[0]>>>31,n=1;n<7;n++)l[n]=l[n]>>>4*(n-1)+3;l[7]=l[7]<<5|l[7]>>>27}var h=this._invSubKeys=[];for(n=0;n<16;n++)h[n]=i[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),d.call(this,1,1431655765);for(var r=0;r<16;r++){for(var i=n[r],o=this._lBlock,s=this._rBlock,a=0,c=0;c<8;c++)a|=l[c][((s^i[c])&u[c])>>>0];this._lBlock=s,this._rBlock=o^a}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,d.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function f(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}e.DES=i._createHelper(h);var p=o.TripleDES=i.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),r=e.length<4?e.slice(0,2):e.slice(2,4),i=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=h.createEncryptor(n.create(t)),this._des2=h.createEncryptor(n.create(r)),this._des3=h.createEncryptor(n.create(i))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=i._createHelper(p)}(),r.TripleDES)},4938:function(e,t,n){var r,i,o,s,a,c;e.exports=(r=n(8249),o=(i=r).lib,s=o.Base,a=o.WordArray,(c=i.x64={}).Word=s.extend({init:function(e,t){this.high=e,this.low=t}}),c.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var i=e[r];n.push(i.high),n.push(i.low)}return a.create(n,this.sigBytes)},clone:function(){for(var e=s.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}}),r)},1227:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(2447)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2447:(e,t,n)=>{e.exports=function(e){function t(e){let n,i,o,s=null;function a(...e){if(!a.enabled)return;const r=a,i=Number(new Date),o=i-(n||i);r.diff=o,r.prev=n,r.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];n=o.call(r,t),e.splice(s,1),s--}return n})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(7824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},645:(e,t)=>{t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,l=c>>1,u=-7,h=n?i-1:0,d=n?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+e[t+h],h+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+e[t+h],h+=d,u-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=l}return(f?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,c,l=8*o-i-1,u=(1<<l)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(t*c-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;e[n+f]=255&s,f+=p,s/=256,l-=8);e[n+f-p]|=128*y}},2632:(e,t,n)=>{const{bech32:r,hex:i,utf8:o}=n(9187),s={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},a={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},c={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},l={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},u=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],h={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},d=BigInt("2100000000000000000"),f=BigInt(1e11),p={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},y={};for(let e=0,t=Object.keys(p);e<t.length;e++){const n=t[e],r=p[t[e]].toString();y[r]=n}const g={1:e=>i.encode(r.fromWordsUnsafe(e)),16:e=>i.encode(r.fromWordsUnsafe(e)),13:e=>o.encode(r.fromWordsUnsafe(e)),19:e=>i.encode(r.fromWordsUnsafe(e)),23:e=>i.encode(r.fromWordsUnsafe(e)),27:e=>i.encode(r.fromWordsUnsafe(e)),6:b,24:b,3:function(e){const t=[];let n,o,s,a,c,l=r.fromWordsUnsafe(e);for(;l.length>0;)n=i.encode(l.slice(0,33)),o=i.encode(l.slice(33,41)),s=parseInt(i.encode(l.slice(41,45)),16),a=parseInt(i.encode(l.slice(45,49)),16),c=parseInt(i.encode(l.slice(49,51)),16),l=l.slice(51),t.push({pubkey:n,short_channel_id:o,fee_base_msat:s,fee_proportional_millionths:a,cltv_expiry_delta:c});return t},5:function(e){const t=e.slice().reverse().map((e=>[!!(1&e),!!(2&e),!!(4&e),!!(8&e),!!(16&e)])).reduce(((e,t)=>e.concat(t)),[]);for(;t.length<2*u.length;)t.push(!1);const n={};u.forEach(((e,r)=>{let i;i=t[2*r]?"required":t[2*r+1]?"supported":"unsupported",n[e]=i}));const r=t.slice(2*u.length);return n.extra_bits={start_bit:2*u.length,bits:r,has_required:r.reduce(((e,t,n)=>n%2!=0?e||!1:e||t),!1)},n}};function w(e){return t=>({tagCode:parseInt(e),words:r.encode("unknown",t,Number.MAX_SAFE_INTEGER)})}function b(e){return e.reverse().reduce(((e,t,n)=>e+t*Math.pow(32,n)),0)}function m(e,t){let n,r;if(e.slice(-1).match(/^[munp]$/))n=e.slice(-1),r=e.slice(0,-1);else{if(e.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");r=e}if(!r.match(/^\d+$/))throw new Error("Not a valid human readable amount");const i=BigInt(r),o=n?i*f/h[n]:i*f;if("p"===n&&i%BigInt(10)!==BigInt(0)||o>d)throw new Error("Amount is outside of valid range");return t?o.toString():o}e.exports={decode:function(e,t){if("string"!=typeof e)throw new Error("Lightning Payment Request must be string");if("ln"!==e.slice(0,2).toLowerCase())throw new Error("Not a proper lightning payment request");const n=[],o=r.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();const u=o.prefix;let h=o.words,d=e.slice(u.length+1),f=h.slice(-104);h=h.slice(0,-104);let v=u.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(v&&!v[2]&&(v=u.match(/^ln(\S+)$/)),!v)throw new Error("Not a proper lightning payment request");n.push({name:"lightning_network",letters:"ln"});const E=v[1];let k;if(t){if(void 0===t.bech32||void 0===t.pubKeyHash||void 0===t.scriptHash||!Array.isArray(t.validWitnessVersions))throw new Error("Invalid network");k=t}else switch(E){case s.bech32:k=s;break;case a.bech32:k=a;break;case c.bech32:k=c;break;case l.bech32:k=l}if(!k||k.bech32!==E)throw new Error("Unknown coin bech32 prefix");n.push({name:"coin_network",letters:E,value:k});const _=v[2];let x;_?(x=m(_+v[3],!0),n.push({name:"amount",letters:v[2]+v[3],value:x})):x=null,n.push({name:"separator",letters:"1"});const A=b(h.slice(0,7));let S,B,C,R;for(h=h.slice(7),n.push({name:"timestamp",letters:d.slice(0,7),value:A}),d=d.slice(7);h.length>0;){const e=h[0].toString();S=y[e]||"unknown_tag",B=g[e]||w(e),h=h.slice(1),C=b(h.slice(0,2)),h=h.slice(2),R=h.slice(0,C),h=h.slice(C),n.push({name:S,tag:d[0],letters:d.slice(0,3+C),value:B(R)}),d=d.slice(3+C)}n.push({name:"signature",letters:d.slice(0,104),value:i.encode(r.fromWordsUnsafe(f))}),d=d.slice(104),n.push({name:"checksum",letters:d});let N={paymentRequest:e,sections:n,get expiry(){let e=n.find((e=>"expiry"===e.name));if(e)return U("timestamp")+e.value},get route_hints(){return n.filter((e=>"route_hint"===e.name)).map((e=>e.value))}};for(let e in p)"route_hint"!==e&&Object.defineProperty(N,e,{get:()=>U(e)});return N;function U(e){let t=n.find((t=>t.name===e));return t?t.value:void 0}},hrpToMillisat:m}},7824:e=>{var t=1e3,n=60*t,r=60*n,i=24*r;function o(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,s){s=s||{};var a,c,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===l&&isFinite(e))return s.long?(a=e,(c=Math.abs(a))>=i?o(a,c,i,"day"):c>=r?o(a,c,r,"hour"):c>=n?o(a,c,n,"minute"):c>=t?o(a,c,t,"second"):a+" ms"):function(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=r?Math.round(e/r)+"h":o>=n?Math.round(e/n)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},9372:e=>{class t{constructor(){return this._childPaths={},this._data=[],this}add(e,n){const r=(e||"").split(""),i=r.length-1;let o=this;for(let e=i;e>=0;e--){const n=r[i-e];o=o._childPaths[n]?o._childPaths[n]:o._childPaths[n]=new t}return o._data.push(n),o}getNode(e){const t=(e||"").split(""),n=t.length-1;let r=this;for(let e=n;e>=0;e--)if(r=r._childPaths[t[n-e]]||null,null===r)return null;return r}getData(e){const t=this.getNode(e);if(!t)return null;const n=[t],r=[];for(let e=0;e<n.length;e++){const t=n[e];t._data.length&&r.push.apply(r,t._data);const i=Object.values(t._childPaths);i.length&&n.push.apply(n,i)}return r}}e.exports=t},2787:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;var i=n(5674),o=n(4942);function s(e,t,n,r,i,o){var s=this.events[e];return!!s&&0!==s.length&&(s.argsNum<6?s.call(t,n,r,i,o):s.call.apply(void 0,arguments),!0)}function a(e,t,n,r,i,o){var s=this.events[e];if(s){if(0===s.length)return!1;s.argsNum<6?s.call(t,n,r,i,o):s.call.apply(void 0,arguments)}var a=this.onceEvents[e];if(a){if("function"==typeof a)this.onceEvents[e]=void 0,arguments.length<6?a(t,n,r,i,o):a.apply(void 0,arguments);else{var c=a;if(this.onceEvents[e]=void 0,arguments.length<6)for(var l=0;l<c.length;++l)c[l](t,n,r,i,o);else for(l=0;l<c.length;++l)c[l].apply(void 0,arguments)}return!0}return!!s}var c=function(){function e(){this.events=(0,o.nullObj)(),this.onceEvents=(0,o.nullObj)(),this._symbolKeys=new Set,this.maxListeners=1/0}return Object.defineProperty(e.prototype,"_eventsCount",{get:function(){return this.eventNames().length},enumerable:!1,configurable:!0}),e}();function l(e,t,n){if(void 0===n&&(n=t.length),"function"!=typeof t)throw new TypeError("The listener must be a function");var r=this.events[e];return r?(r.push(t),r.growArgsNum(n),this.maxListeners!==1/0&&this.maxListeners<=r.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" event!'))):(this.events[e]=new i.TaskCollection(n,!0,t,!1),"symbol"==typeof e&&this._symbolKeys.add(e)),this}function u(e,t){var n=this.events[e];n&&n.removeLast(t);var r=this.onceEvents[e];return r&&("function"==typeof r?this.onceEvents[e]=void 0:"object"==typeof r&&(1===r.length&&r[0]===t?this.onceEvents[e]=void 0:(0,i._fast_remove_single)(r,r.lastIndexOf(t)))),this}t.EventEmitter=c,c.prototype.emit=s,c.prototype.on=l,c.prototype.once=function(e,t){switch(this.emit===s&&(this.emit=a),typeof this.onceEvents[e]){case"undefined":this.onceEvents[e]=t,"symbol"==typeof e&&this._symbolKeys.add(e);break;case"function":this.onceEvents[e]=[this.onceEvents[e],t];break;case"object":this.onceEvents[e].push(t)}return this},c.prototype.addListener=l,c.prototype.removeListener=u,c.prototype.addListenerBound=function(e,t,n,r){void 0===n&&(n=this),void 0===r&&(r=t.length),this.boundFuncs||(this.boundFuncs=new Map);var i=t.bind(n);return this.boundFuncs.set(t,i),this.addListener(e,i,r)},c.prototype.removeListenerBound=function(e,t){var n,r,i=null===(n=this.boundFuncs)||void 0===n?void 0:n.get(t);return null===(r=this.boundFuncs)||void 0===r||r.delete(t),this.removeListener(e,i)},c.prototype.hasListeners=function(e){return this.events[e]&&!!this.events[e].length},c.prototype.prependListener=function(e,t,n){if(void 0===n&&(n=t.length),"function"!=typeof t)throw new TypeError("The listener must be a function");var r=this.events[e];return r&&r instanceof i.TaskCollection?(r.insert(0,t),r.growArgsNum(n),this.maxListeners!==1/0&&this.maxListeners<=r.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" event!'))):(r=this.events[e]=new i.TaskCollection(n,!0,t,!1),"symbol"==typeof e&&this._symbolKeys.add(e)),this},c.prototype.prependOnceListener=function(e,t){this.emit===s&&(this.emit=a);var n=this.onceEvents[e];if(n&&"object"==typeof n)throw new Error("FIXME");return n=this.onceEvents[e]=[t],"symbol"==typeof e&&this._symbolKeys.add(e),this},c.prototype.off=u,c.prototype.removeAllListeners=function(e){return void 0===e?(this.events=(0,o.nullObj)(),this.onceEvents=(0,o.nullObj)(),this._symbolKeys=new Set):(this.events[e]=void 0,this.onceEvents[e]=void 0,"symbol"==typeof e&&this._symbolKeys.delete(e)),this},c.prototype.setMaxListeners=function(e){return this.maxListeners=e,this},c.prototype.getMaxListeners=function(){return this.maxListeners},c.prototype.listeners=function(e){return this.emit===s?this.events[e]?this.events[e].tasksAsArray().slice():[]:this.events[e]&&this.onceEvents[e]?r(r([],this.events[e].tasksAsArray(),!0),"function"==typeof this.onceEvents[e]?[this.onceEvents[e]]:this.onceEvents[e],!0):this.events[e]?this.events[e].tasksAsArray():this.onceEvents[e]?"function"==typeof this.onceEvents[e]?[this.onceEvents[e]]:this.onceEvents[e]:[]},c.prototype.eventNames=function(){var e=this;if(this.emit===s){var t=Object.keys(this.events);return r(r([],t,!0),Array.from(this._symbolKeys),!0).filter((function(t){return t in e.events&&e.events[t]&&e.events[t].length}))}t=Object.keys(this.events).filter((function(t){return e.events[t]&&e.events[t].length}));var n=Object.keys(this.onceEvents).filter((function(t){return e.onceEvents[t]&&e.onceEvents[t].length}));return r(r(r([],t,!0),n,!0),Array.from(this._symbolKeys).filter((function(t){return t in e.events&&e.events[t]&&e.events[t].length||t in e.onceEvents&&e.onceEvents[t]&&e.onceEvents[t].length})),!0)},c.prototype.listenerCount=function(e){return this.emit===s?this.events[e]&&this.events[e].length||0:(this.events[e]&&this.events[e].length||0)+(this.onceEvents[e]&&this.onceEvents[e].length||0)}},8669:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(7050),t),i(n(2787),t)},404:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bakeCollectionVariadic=exports.bakeCollectionAwait=exports.bakeCollection=exports.BAKED_EMPTY_FUNC=void 0,exports.BAKED_EMPTY_FUNC=function(){};var FORLOOP_FALLBACK=1500;function generateArgsDefCode(e){var t="";if(0===e)return t;for(var n=0;n<e-1;++n)t+="arg"+String(n)+", ";return t+"arg"+String(e-1)}function generateBodyPartsCode(e,t){for(var n="",r="",i=0;i<t;++i)n+="var f".concat(i," = collection[").concat(i,"];\n"),r+="f".concat(i,"(").concat(e,")\n");return{funcDefCode:n,funcCallCode:r}}function generateBodyPartsVariadicCode(e){for(var t="",n="",r=0;r<e;++r)t+="var f".concat(r," = collection[").concat(r,"];\n"),n+="f".concat(r,".apply(undefined, arguments)\n");return{funcDefCode:t,funcCallCode:n}}function bakeCollection(collection,fixedArgsNum){if(0===collection.length)return exports.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function(").concat(argsDefCode,") {\n                ").concat(funcCallCode,"\n            });\n        })")}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);funcFactoryCode=collection.length%10==0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 10) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                        collection[i+3](").concat(argsDefCode,");\n                        collection[i+4](").concat(argsDefCode,");\n                        collection[i+5](").concat(argsDefCode,");\n                        collection[i+6](").concat(argsDefCode,");\n                        collection[i+7](").concat(argsDefCode,");\n                        collection[i+8](").concat(argsDefCode,");\n                        collection[i+9](").concat(argsDefCode,");\n                    }\n                });\n            })"):collection.length%4==0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 4) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                        collection[i+3](").concat(argsDefCode,");\n                    }\n                });\n            })"):collection.length%3==0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 3) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                    }\n                });\n            })"):"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; ++i) {\n                        collection[i](").concat(argsDefCode,");\n                    }\n                });\n            })")}var bakeCollection_1=void 0,fixedArgsNum_1=void 0,bakeCollectionVariadic_1=void 0,bakeCollectionAwait_1=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}function bakeCollectionAwait(collection,fixedArgsNum){if(0===collection.length)return exports.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function(").concat(argsDefCode,") {\n                return Promise.all([ ").concat(funcCallCode," ]);\n            });\n        })")}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);funcFactoryCode="(function(collection) {\n            return (function(".concat(argsDefCode,") {\n                var promises = Array(collection.length);\n                for (var i = 0; i < collection.length; ++i) {\n                    promises[i] = collection[i](").concat(argsDefCode,");\n                }\n                return Promise.all(promises);\n            });\n        })")}var bakeCollection_2=void 0,fixedArgsNum_2=void 0,bakeCollectionVariadic_2=void 0,bakeCollectionAwait_2=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}function bakeCollectionVariadic(collection){if(0===collection.length)return exports.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var _a=generateBodyPartsVariadicCode(collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function() {\n                ").concat(funcCallCode,"\n            });\n        })")}else funcFactoryCode="(function(collection) {\n            return (function() {\n                for (var i = 0; i < collection.length; ++i) {\n                    collection[i].apply(undefined, arguments);\n                }\n            });\n        })";var bakeCollection_3=void 0,fixedArgsNum=void 0,bakeCollectionVariadic_3=void 0,bakeCollectionAwait_3=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}exports.bakeCollection=bakeCollection,exports.bakeCollectionAwait=bakeCollectionAwait,exports.bakeCollectionVariadic=bakeCollectionVariadic},5674:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(2023),t)},2023:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.TaskCollection=t._fast_remove_single=void 0;var i=n(404);function o(e,t){var n,r=this.length;if(r>1)t?((n=this._tasks).push.apply(n,arguments),this.length+=arguments.length):(this._tasks.push(e),this.length++);else if(t){var i;1===r?((i=Array(1+arguments.length)).push(i),i.push.apply(i,arguments),this._tasks=i):((i=Array(arguments.length)).push.apply(i,arguments),this._tasks=i),this.length+=arguments.length}else this._tasks=1===r?[this._tasks,e]:e,this.length++}function s(e,t){var n,r=this.length;if(r>1)t?((n=this._tasks).push.apply(n,arguments),this.length+=arguments.length):(this._tasks.push(e),this.length++);else if(t){var i;1===r?((i=Array(1+arguments.length)).push(i),i.push.apply(i,arguments),this._tasks=i):((i=Array(arguments.length)).push.apply(i,arguments),this._tasks=i),this.length+=arguments.length}else this._tasks=1===r?[this._tasks,e]:e,this.length++;this.firstEmitBuildStrategy?this.call=p:this.rebuild()}function a(e,t){-1!==t&&(0===t?e.shift():t===e.length-1?e.length=e.length-1:e.splice(t,1))}function c(e){0!==this.length&&(1===this.length?this._tasks===e&&(this.length=0):(a(this._tasks,this._tasks.lastIndexOf(e)),1===this._tasks.length?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length))}function l(e){if(0!==this.length){if(1===this.length)return this._tasks===e&&(this.length=0),this.firstEmitBuildStrategy?void(this.call=i.BAKED_EMPTY_FUNC):void this.rebuild();a(this._tasks,this._tasks.lastIndexOf(e)),1===this._tasks.length?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length,this.firstEmitBuildStrategy?this.call=p:this.rebuild()}}function u(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];0===this.length?(this._tasks=n,this.length=1):1===this.length?(n.unshift(this._tasks),this._tasks=n,this.length=this._tasks.length):((t=this._tasks).splice.apply(t,r([e,0],n,!1)),this.length=this._tasks.length)}function h(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];0===this.length?(this._tasks=n,this.length=1):1===this.length?(n.unshift(this._tasks),this._tasks=n,this.length=this._tasks.length):((t=this._tasks).splice.apply(t,r([e,0],n,!1)),this.length=this._tasks.length),this.firstEmitBuildStrategy?this.call=p:this.rebuild()}function d(){0===this.length?this.call=i.BAKED_EMPTY_FUNC:1===this.length?this.call=this._tasks:this.call=(0,i.bakeCollection)(this._tasks,this.argsNum)}function f(){0===this.length?this.call=i.BAKED_EMPTY_FUNC:1===this.length?this.call=this._tasks:this.call=(0,i.bakeCollectionAwait)(this._tasks,this.argsNum)}function p(){this.rebuild(),this.call.apply(void 0,arguments)}t._fast_remove_single=a;var y=function(e,t,n,r){void 0===t&&(t=!0),void 0===n&&(n=null),void 0===r&&(r=!1),this.awaitTasks=r,this.call=i.BAKED_EMPTY_FUNC,this.argsNum=e,this.firstEmitBuildStrategy=!0,this.rebuild=r?f.bind(this):d.bind(this),this.setAutoRebuild(t),n?"function"==typeof n?(this._tasks=n,this.length=1):(this._tasks=n,this.length=n.length):(this._tasks=null,this.length=0),t&&this.rebuild()};t.TaskCollection=y,y.prototype.fastClear=function(){this._tasks=null,this.length=0,this.call=i.BAKED_EMPTY_FUNC},y.prototype.clear=function(){this._tasks=null,this.length=0,this.call=i.BAKED_EMPTY_FUNC},y.prototype.growArgsNum=function(e){this.argsNum<e&&(this.argsNum=e,this.firstEmitBuildStrategy?this.call=p:this.rebuild())},y.prototype.setAutoRebuild=function(e){e?(this.push=s.bind(this),this.insert=h.bind(this),this.removeLast=l.bind(this)):(this.push=o.bind(this),this.insert=u.bind(this),this.removeLast=c.bind(this))},y.prototype.tasksAsArray=function(){return 0===this.length?[]:1===this.length?[this._tasks]:this._tasks},y.prototype.setTasks=function(e){0===e.length?(this.length=0,this.call=i.BAKED_EMPTY_FUNC):1===e.length?(this.length=1,this.call=e[0],this._tasks=e[0]):(this.length=e.length,this._tasks=e,this.firstEmitBuildStrategy?this.call=p:this.rebuild())}},7050:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4942:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nullObj=void 0,t.nullObj=function(){return{__proto__:null,prototype:null}}},3088:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=void 0;const r=n(4556);class i{constructor(e){this.lookupTable=new Map,this.head=null,this.tail=null;const{maxSize:t=25,entryExpirationTimeInMS:n=null,onEntryEvicted:r,onEntryMarkedAsMostRecentlyUsed:i,cloneFn:o,clone:s}=null!=e?e:{};if(Number.isNaN(t)||t<=0)throw new Error("maxSize must be greater than 0.");if("number"==typeof n&&(n<=0||Number.isNaN(n)))throw new Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.maxSizeInternal=t,this.entryExpirationTimeInMS=n,this.onEntryEvicted=r,this.onEntryMarkedAsMostRecentlyUsed=i,this.clone=s,this.cloneFn=o}get size(){return this.cleanCache(),this.lookupTable.size}get remainingSize(){return this.maxSizeInternal-this.size}get newest(){return this.head?this.head.isExpired?(this.removeNodeFromListAndLookupTable(this.head),this.newest):this.mapNodeToEntry(this.head):null}get oldest(){return this.tail?this.tail.isExpired?(this.removeNodeFromListAndLookupTable(this.tail),this.oldest):this.mapNodeToEntry(this.tail):null}get maxSize(){return this.maxSizeInternal}set maxSize(e){if(Number.isNaN(e)||e<=0)throw new Error("maxSize must be greater than 0.");this.maxSizeInternal=e,this.enforceSizeLimit()}set(e,t,n){const i=this.lookupTable.get(e);i&&this.removeNodeFromListAndLookupTable(i);const o=new r.LRUCacheNode(e,t,{entryExpirationTimeInMS:this.entryExpirationTimeInMS,onEntryEvicted:this.onEntryEvicted,onEntryMarkedAsMostRecentlyUsed:this.onEntryMarkedAsMostRecentlyUsed,clone:this.clone,cloneFn:this.cloneFn,...n});return this.setNodeAsHead(o),this.lookupTable.set(e,o),this.enforceSizeLimit(),this}get(e){const t=this.lookupTable.get(e);return t?t.isExpired?(this.removeNodeFromListAndLookupTable(t),null):(this.setNodeAsHead(t),t.value):null}peek(e){const t=this.lookupTable.get(e);return t?t.isExpired?(this.removeNodeFromListAndLookupTable(t),null):t.value:null}delete(e){const t=this.lookupTable.get(e);return!!t&&this.removeNodeFromListAndLookupTable(t)}has(e){const t=this.lookupTable.get(e);return!(!t||t.isExpired&&(this.removeNodeFromListAndLookupTable(t),1))}clear(){this.head=null,this.tail=null,this.lookupTable.clear()}find(e){let t=this.head;for(;t;){if(t.isExpired){const e=t.next;this.removeNodeFromListAndLookupTable(t),t=e;continue}const n=this.mapNodeToEntry(t);if(e(n))return this.setNodeAsHead(t),n;t=t.next}return null}forEach(e){let t=this.head,n=0;for(;t;)if(t.isExpired){const e=t.next;this.removeNodeFromListAndLookupTable(t),t=e}else e(t.value,t.key,n),t=t.next,n++}*values(){let e=this.head;for(;e;)if(e.isExpired){const t=e.next;this.removeNodeFromListAndLookupTable(e),e=t}else yield e.value,e=e.next}*keys(){let e=this.head;for(;e;)if(e.isExpired){const t=e.next;this.removeNodeFromListAndLookupTable(e),e=t}else yield e.key,e=e.next}*entries(){let e=this.head;for(;e;)if(e.isExpired){const t=e.next;this.removeNodeFromListAndLookupTable(e),e=t}else yield this.mapNodeToEntry(e),e=e.next}*[Symbol.iterator](){let e=this.head;for(;e;)if(e.isExpired){const t=e.next;this.removeNodeFromListAndLookupTable(e),e=t}else yield this.mapNodeToEntry(e),e=e.next}enforceSizeLimit(){let e=this.tail;for(;null!==e&&this.size>this.maxSizeInternal;){const t=e.prev;this.removeNodeFromListAndLookupTable(e),e=t}}mapNodeToEntry({key:e,value:t}){return{key:e,value:t}}setNodeAsHead(e){this.removeNodeFromList(e),this.head?(e.next=this.head,this.head.prev=e,this.head=e):(this.head=e,this.tail=e),e.invokeOnEntryMarkedAsMostRecentlyUsed()}removeNodeFromList(e){null!==e.prev&&(e.prev.next=e.next),null!==e.next&&(e.next.prev=e.prev),this.head===e&&(this.head=e.next),this.tail===e&&(this.tail=e.prev),e.next=null,e.prev=null}removeNodeFromListAndLookupTable(e){return e.invokeOnEvicted(),this.removeNodeFromList(e),this.lookupTable.delete(e.key)}cleanCache(){if(!this.entryExpirationTimeInMS)return;const e=[];for(const t of this.lookupTable.values())t.isExpired&&e.push(t);e.forEach((e=>this.removeNodeFromListAndLookupTable(e)))}}t.LRUCache=i},4556:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCacheNode=void 0,t.LRUCacheNode=class{constructor(e,t,n){const{entryExpirationTimeInMS:r=null,next:i=null,prev:o=null,onEntryEvicted:s,onEntryMarkedAsMostRecentlyUsed:a,clone:c,cloneFn:l}=null!=n?n:{};if("number"==typeof r&&(r<=0||Number.isNaN(r)))throw new Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.clone=null!=c&&c,this.cloneFn=null!=l?l:this.defaultClone,this.key=e,this.internalValue=this.clone?this.cloneFn(t):t,this.created=Date.now(),this.entryExpirationTimeInMS=r,this.next=i,this.prev=o,this.onEntryEvicted=s,this.onEntryMarkedAsMostRecentlyUsed=a}get value(){return this.clone?this.cloneFn(this.internalValue):this.internalValue}get isExpired(){return"number"==typeof this.entryExpirationTimeInMS&&Date.now()-this.created>this.entryExpirationTimeInMS}invokeOnEvicted(){if(this.onEntryEvicted){const{key:e,value:t,isExpired:n}=this;this.onEntryEvicted({key:e,value:t,isExpired:n})}}invokeOnEntryMarkedAsMostRecentlyUsed(){if(this.onEntryMarkedAsMostRecentlyUsed){const{key:e,value:t}=this;this.onEntryMarkedAsMostRecentlyUsed({key:e,value:t})}}defaultClone(e){return"boolean"==typeof e||"string"==typeof e||"number"==typeof e?e:JSON.parse(JSON.stringify(e))}}},2653:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(3088),t)},6672:(e,t,n)=>{"use strict";n.r(t);var r=n(6213),i=n(2445),o=n(2171);const s=n(9372);function a(){$("#notes-list").empty(),(0,r.zs)().then((()=>{window.notesModal=new bootstrap.Modal("#myNotesModal",{}),window.notesModal.show(),$("#note-search-box").focus(),function(){noteTitleTrie=new s,notes={};const e={authors:[window.nostrUser.hexpubkey],kinds:[30023]};window.ndk.fetchEvents(e).then((function(e){e.forEach((function(e){c(e)})),l()})).catch((e=>(0,o.x2)(e.message)))}()}))}function c(e){const t=Note.fromNostrEvent(e);notes[e.id]=t,t.title.split(" ").forEach((function(t){noteTitleTrie.add(t.toLowerCase(),e.id)}))}function l(){$("#notes-list").empty();const e=new Set;$("#note-search-box").val().toLowerCase().split(" ").forEach((function(t){const n=noteTitleTrie.getData(t);n&&n.forEach((function(t){e.add(t)}))}));let t=0;e.forEach((function(e){const n=window.notes[e];t>20||($("#notes-list").append("<button class='list-group-item list-group-item-action' onclick=\"editNote('"+n.id+"')\">"+n.title+"</button>"),t++)}))}async function u(e){PageContext.instance.setNote(window.notes[e])}function h(){window.notesModal&&window.notesModal.hide(),window.MDEditor.value("# Welcome to Tagayasu\n\nThis is the note editor, where you can create and edit your content.\n\nTo publish a note, make sure to enter a title below, then click `Publish`!"),$("#note-title").val(""),PageContext.instance.setNoteByAuthorPubkey(PageContext.instance.note.authorPubkey)}window.noteTitleTrie=new s,window.notes={},window.connectWalletApp=function(){(0,r.Ti)().then((()=>{window.nip07signer&&window.router.pageName===Router.EDITOR&&a()}))},window.showMyNotes=a,window.showPublishModal=function(){window.publishModal=new bootstrap.Modal("#publish-modal",{}),window.publishModal.show()},window.loadNote=function(){if(!PageContext.instance.noteIdentifierFromUrl())return window.nip07signer?a():h();(0,r.zs)().then((()=>{const e=PageContext.instance.noteFilterFromUrl();window.ndk.fetchEvent(e).then((function(t){if(t)t.pubkey==window.nostrUser.hexpubkey&&(c(t),u(t.id));else if(e["#d"]&&e["#d"][0].startsWith("tagayasu-")){const t=e["#d"][0].slice(9).split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ");window.MDEditor.value(`# ${t}`),$("#note-title").val(t)}}))}))},window.searchNotes=l,window.editNote=u,window.newNote=h,window.saveNote=function(){window.publishModal&&window.publishModal.hide(),(0,r.zs)().then((()=>{const e=$("#note-title").val();if("tagayasu-"==(0,r.oF)(e))return void(0,o.x2)("Title cannot be empty");const t=new i._C(window.ndk);t.kind=30023,t.content=window.MDEditor.value(),t.tags=[["d",(0,r.oF)(e)],["title",e],["published_at",Math.floor(Date.now()/1e3).toString()]],MarkdownRenderer.instance.parse(window.MDEditor.value()).backrefs.forEach((function(e){t.tags.push(["a",e])})),console.log(t),t.publish().then((function(e){(0,o.s6)("Your note has been published!"),PageContext.instance.setNoteByNostrEvent(t)}))}))},window.savePrivateNote=function(){window.publishModal&&window.publishModal.hide(),(0,r.zs)().then((async()=>{const e=$("#note-title").val();if("tagayasu-"==(0,r.oF)(e))return void(0,o.x2)("Title cannot be empty");const t=new i._C(window.ndk);t.kind=30023,t.content=await(0,r.DE)(window.MDEditor.value()),t.tags=[["d",(0,r.oF)(e)],["title",e],["private","true"],["published_at",Math.floor(Date.now()/1e3).toString()]],t.publish().then((function(e){(0,o.s6)("Your note has been saved privately."),PageContext.instance.setNoteByNostrEvent(t)}))}))},window.viewPublishedNote=function(){window.location.href=window.router.urlFor(Router.BROWSER,PageContext.instance.note.handle)}},2451:(e,t,n)=>{"use strict";n.r(t);var r=n(6213);window.connectWalletBrowse=function(){(0,r.Ti)()},window.browseNote=function(){(0,r.lD)();const e=PageContext.instance.noteFilterFromUrl();e.authors&&PageContext.instance.setNoteByAuthorPubkey(e.authors[0]),window.ndk.fetchEvent(e).then((async function(e){e&&PageContext.instance.setNoteByNostrEvent(e)}))},window.openNoteInEditor=function(){window.location.href=window.router.urlFor(Router.EDITOR,PageContext.instance.noteIdentifierFromUrl())},window.lookupNpubFromDns=async function(){const e=`https://1.1.1.1/dns-query?name=npub.${window.location.hostname}&type=TXT`;return await fetch(e,{headers:{accept:"application/dns-json"}}).then((e=>e.json())).then((e=>e.Answer[0].data.replace(/[^a-zA-Z0-9]/g,""))).catch((e=>{console.error("Error:",e)}))}},6213:(e,t,n)=>{"use strict";n.d(t,{Mf:()=>xi,Gk:()=>Si,oF:()=>ki,DE:()=>Ai,zs:()=>gi,lD:()=>wi,e:()=>Bi,vK:()=>_i,Ti:()=>pi});var r={};n.r(r),n.d(r,{dQ:()=>L,ci:()=>B,bytesToNumberBE:()=>N,ty:()=>U,eV:()=>O,n$:()=>M,ql:()=>P,hexToBytes:()=>R,tL:()=>I,S5:()=>T,FF:()=>H});var i=n(2445);function o(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function s(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}const c="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,l=e=>e instanceof Uint8Array,u=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),h=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function d(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!l(e))throw new Error("expected Uint8Array, got "+typeof e);return e}class f{clone(){return this._cloneInto()}}function p(e){const t=t=>e().update(d(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function y(e=32){if(c&&"function"==typeof c.getRandomValues)return c.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}class g extends f{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=u(this.buffer)}update(e){a(this);const{view:t,buffer:n,blockLen:r}=this,i=(e=d(e)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)n.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=u(e);for(;r<=i-o;o+=r)this.process(t,o)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){a(this),function(e,t){s(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let e=o;e<r;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),c=r?4:0,l=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+l,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const c=u(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=l/4,d=this.get();if(h>d.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<h;e++)c.setUint32(4*e,d[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return e.length=r,e.pos=s,e.finished=i,e.destroyed=o,r%t&&e.buffer.set(n),e}}const w=(e,t,n)=>e&t^e&n^t&n,b=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),m=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),v=new Uint32Array(64);class E extends g{constructor(){super(64,32,8,!1),this.A=0|m[0],this.B=0|m[1],this.C=0|m[2],this.D=0|m[3],this.E=0|m[4],this.F=0|m[5],this.G=0|m[6],this.H=0|m[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:o,G:s,H:a}=this;return[e,t,n,r,i,o,s,a]}set(e,t,n,r,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let n=0;n<16;n++,t+=4)v[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=v[e-15],n=v[e-2],r=h(t,7)^h(t,18)^t>>>3,i=h(n,17)^h(n,19)^n>>>10;v[e]=i+v[e-7]+r+v[e-16]|0}let{A:n,B:r,C:i,D:o,E:s,F:a,G:c,H:l}=this;for(let e=0;e<64;e++){const t=l+(h(s,6)^h(s,11)^h(s,25))+((u=s)&a^~u&c)+b[e]+v[e]|0,d=(h(n,2)^h(n,13)^h(n,22))+w(n,r,i)|0;l=c,c=a,a=s,s=o+t|0,o=i,i=r,r=n,n=t+d|0}var u;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,r,i,o,s,a,c,l)}roundClean(){v.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const k=p((()=>new E)),_=(BigInt(0),BigInt(1)),x=BigInt(2),A=e=>e instanceof Uint8Array,S=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function B(e){if(!A(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=S[e[n]];return t}function C(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function R(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const r=2*t,i=e.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[t]=o}return n}function N(e){return C(B(e))}function U(e){if(!A(e))throw new Error("Uint8Array expected");return C(B(Uint8Array.from(e).reverse()))}function I(e,t){return R(e.toString(16).padStart(2*t,"0"))}function T(e,t){return I(e,t).reverse()}function P(e,t,n){let r;if("string"==typeof t)try{r=R(t)}catch(n){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${n}`)}else{if(!A(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function O(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!A(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t}const L=e=>(x<<BigInt(e-1))-_,F=e=>new Uint8Array(e),D=e=>Uint8Array.from(e);function M(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=F(e),i=F(e),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},a=(...e)=>n(i,r,...e),c=(e=F())=>{i=a(D([0]),e),r=a(),0!==e.length&&(i=a(D([1]),e),r=a())},l=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return O(...n)};return(e,t)=>{let n;for(s(),c(e);!(n=t(l()));)c();return s(),n}}const z={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function H(e,t,n={}){const r=(t,n,r)=>{const i=z[n];if("function"!=typeof i)throw new Error(`Invalid validator "${n}", expected function`);const o=e[t];if(!(r&&void 0===o||i(o,e)))throw new Error(`Invalid param ${String(t)}=${o} (${typeof o}), expected ${n}`)};for(const[e,n]of Object.entries(t))r(e,n,!1);for(const[e,t]of Object.entries(n))r(e,t,!0);return e}const K=BigInt(0),j=BigInt(1),q=BigInt(2),W=BigInt(3),V=BigInt(4),Z=BigInt(5),G=BigInt(8);function J(e,t){const n=e%t;return n>=K?n:t+n}function Y(e,t,n){if(n<=K||t<K)throw new Error("Expected power/modulo > 0");if(n===j)return K;let r=j;for(;t>K;)t&j&&(r=r*e%n),e=e*e%n,t>>=j;return r}function X(e,t,n){let r=e;for(;t-- >K;)r*=r,r%=n;return r}function Q(e,t){if(e===K||t<=K)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=J(e,t),r=t,i=K,o=j,s=j,a=K;for(;n!==K;){const e=r/n,t=r%n,c=i-s*e,l=o-a*e;r=n,n=t,i=s,o=a,s=c,a=l}if(r!==j)throw new Error("invert: does not exist");return J(i,t)}BigInt(9),BigInt(16);const ee=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function te(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function ne(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function re(e){const t=ne(e);return t+Math.ceil(t/2)}class ie extends f{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");o(e.outputLen),o(e.blockLen)}(e);const n=d(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return a(this),this.iHash.update(e),this}digestInto(e){a(this),s(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const oe=(e,t,n)=>new ie(e,t).update(n).digest();oe.create=(e,t)=>new ie(e,t);const se=BigInt(0),ae=BigInt(1);function ce(e){return H(e.Fp,ee.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),H(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...te(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{bytesToNumberBE:le,hexToBytes:ue}=r,he={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=he;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(128&r[0])throw new t("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:le(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=he,n="string"==typeof e?ue(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:o}=he._parseInt(n.subarray(2)),{d:s,l:a}=he._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},r=t(n(e.s)),i=t(n(e.r)),o=r.length/2,s=i.length/2,a=n(o),c=n(s);return`30${n(s+o+4)}02${c}${i}02${a}${r}`}},de=BigInt(0),fe=BigInt(1),pe=(BigInt(2),BigInt(3));function ye(e){const t=function(e){const t=ce(e);return H(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,i=n.BYTES+1,o=2*n.BYTES+1;function s(e){return J(e,r)}function a(e){return Q(e,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:h}=function(e){const t=function(e){const t=ce(e);H(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=t.toBytes||((e,t,r)=>{const i=t.toAffine();return O(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function o(e){const{a:r,b:i}=t,o=n.sqr(e),s=n.mul(o,e);return n.add(n.add(s,n.mul(e,r)),i)}if(!n.eql(n.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(e){return"bigint"==typeof e&&de<e&&e<t.n}function a(e){if(!s(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:o}=t;if(n&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=B(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*r,"0")}let s;try{s="bigint"==typeof e?e:N(P("private key",e,r))}catch(t){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof e}`)}return i&&(s=J(s,o)),a(s),s}const l=new Map;function u(e){if(!(e instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof h)throw new Error("projective point not allowed");const i=e=>n.eql(e,n.ZERO);return i(t)&&i(r)?h.ZERO:new h(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(h.fromAffine)}static fromHex(e){const t=h.fromAffine(i(P("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(c(e))}_setWindowSize(e){this._WINDOW_SIZE=e,l.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:r}=this.toAffine();if(!n.isValid(e)||!n.isValid(r))throw new Error("bad point: x or y not FE");const i=n.sqr(r),s=o(e);if(!n.eql(i,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){u(e);const{px:t,py:r,pz:i}=this,{px:o,py:s,pz:a}=e,c=n.eql(n.mul(t,a),n.mul(o,i)),l=n.eql(n.mul(r,a),n.mul(s,i));return c&&l}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,i=n.mul(r,pe),{px:o,py:s,pz:a}=this;let c=n.ZERO,l=n.ZERO,u=n.ZERO,d=n.mul(o,o),f=n.mul(s,s),p=n.mul(a,a),y=n.mul(o,s);return y=n.add(y,y),u=n.mul(o,a),u=n.add(u,u),c=n.mul(e,u),l=n.mul(i,p),l=n.add(c,l),c=n.sub(f,l),l=n.add(f,l),l=n.mul(c,l),c=n.mul(y,c),u=n.mul(i,u),p=n.mul(e,p),y=n.sub(d,p),y=n.mul(e,y),y=n.add(y,u),u=n.add(d,d),d=n.add(u,d),d=n.add(d,p),d=n.mul(d,y),l=n.add(l,d),p=n.mul(s,a),p=n.add(p,p),d=n.mul(p,y),c=n.sub(c,d),u=n.mul(p,f),u=n.add(u,u),u=n.add(u,u),new h(c,l,u)}add(e){u(e);const{px:r,py:i,pz:o}=this,{px:s,py:a,pz:c}=e;let l=n.ZERO,d=n.ZERO,f=n.ZERO;const p=t.a,y=n.mul(t.b,pe);let g=n.mul(r,s),w=n.mul(i,a),b=n.mul(o,c),m=n.add(r,i),v=n.add(s,a);m=n.mul(m,v),v=n.add(g,w),m=n.sub(m,v),v=n.add(r,o);let E=n.add(s,c);return v=n.mul(v,E),E=n.add(g,b),v=n.sub(v,E),E=n.add(i,o),l=n.add(a,c),E=n.mul(E,l),l=n.add(w,b),E=n.sub(E,l),f=n.mul(p,v),l=n.mul(y,b),f=n.add(l,f),l=n.sub(w,f),f=n.add(w,f),d=n.mul(l,f),w=n.add(g,g),w=n.add(w,g),b=n.mul(p,b),v=n.mul(y,v),w=n.add(w,b),b=n.sub(g,b),b=n.mul(p,b),v=n.add(v,b),g=n.mul(w,v),d=n.add(d,g),g=n.mul(E,v),l=n.mul(m,l),l=n.sub(l,g),g=n.mul(m,w),f=n.mul(E,f),f=n.add(f,g),new h(l,d,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return f.wNAFCached(this,l,e,(e=>{const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(h.fromAffine)}))}multiplyUnsafe(e){const r=h.ZERO;if(e===de)return r;if(a(e),e===fe)return this;const{endo:i}=t;if(!i)return f.unsafeLadder(this,e);let{k1neg:o,k1:s,k2neg:c,k2:l}=i.splitScalar(e),u=r,d=r,p=this;for(;s>de||l>de;)s&fe&&(u=u.add(p)),l&fe&&(d=d.add(p)),p=p.double(),s>>=fe,l>>=fe;return o&&(u=u.negate()),c&&(d=d.negate()),d=new h(n.mul(d.px,i.beta),d.py,d.pz),u.add(d)}multiply(e){a(e);let r,i,o=e;const{endo:s}=t;if(s){const{k1neg:e,k1:t,k2neg:a,k2:c}=s.splitScalar(o);let{p:l,f:u}=this.wNAF(t),{p:d,f:p}=this.wNAF(c);l=f.constTimeNegate(e,l),d=f.constTimeNegate(a,d),d=new h(n.mul(d.px,s.beta),d.py,d.pz),r=l.add(d),i=u.add(p)}else{const{p:e,f:t}=this.wNAF(o);r=e,i=t}return h.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(e,t,n){const r=h.BASE,i=(e,t)=>t!==de&&t!==fe&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,n));return o.is0()?void 0:o}toAffine(e){const{px:t,py:r,pz:i}=this,o=this.is0();null==e&&(e=o?n.ONE:n.inv(i));const s=n.mul(t,e),a=n.mul(r,e),c=n.mul(i,e);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===fe)return!0;if(n)return n(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===fe?this:n?n(h,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),r(h,this,e)}toHex(e=!0){return B(this.toRawBytes(e))}}h.BASE=new h(t.Gx,t.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const d=t.nBitLength,f=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,i=t;for(;n>se;)n&ae&&(r=r.add(i)),i=i.double(),n>>=ae;return r},precomputeWindow(e,t){const{windows:n,windowSize:i}=r(t),o=[];let s=e,a=s;for(let e=0;e<n;e++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(t,i,o){const{windows:s,windowSize:a}=r(t);let c=e.ZERO,l=e.BASE;const u=BigInt(2**t-1),h=2**t,d=BigInt(t);for(let e=0;e<s;e++){const t=e*a;let r=Number(o&u);o>>=d,r>a&&(r-=h,o+=ae);const s=t,f=t+Math.abs(r)-1,p=e%2!=0,y=r<0;0===r?l=l.add(n(p,i[s])):c=c.add(n(y,i[f]))}return{p:c,f:l}},wNAFCached(e,t,n,r){const i=e._WINDOW_SIZE||1;let o=t.get(e);return o||(o=this.precomputeWindow(e,i),1!==i&&t.set(e,r(o))),this.wNAF(i,o,n)}}}(h,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}({...t,toBytes(e,t,r){const i=t.toAffine(),o=n.toBytes(i.x),s=O;return r?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,n.toBytes(i.y))},fromBytes(e){const t=e.length,r=e[0],s=e.subarray(1);if(t!==i||2!==r&&3!==r){if(t===o&&4===r)return{x:n.fromBytes(s.subarray(0,n.BYTES)),y:n.fromBytes(s.subarray(n.BYTES,2*n.BYTES))};throw new Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const e=N(s);if(!(de<(a=e)&&a<n.ORDER))throw new Error("Point is not on curve");const t=u(e);let i=n.sqrt(t);return 1==(1&r)!=((i&fe)===fe)&&(i=n.neg(i)),{x:e,y:i}}var a}}),d=e=>B(I(e,t.nByteLength));function f(e){return e>r>>fe}const p=(e,t,n)=>N(e.slice(t,n));class y{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=P("compactSignature",e,2*n),new y(p(e,0,n),p(e,n,2*n))}static fromDER(e){const{r:t,s:n}=he.toSig(P("DER",e));return new y(t,n)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new y(this.r,this.s,e)}recoverPublicKey(e){const{r,s:i,recovery:o}=this,l=m(P("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const u=2===o||3===o?r+t.n:r;if(u>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=0==(1&o)?"02":"03",f=c.fromHex(h+d(u)),p=a(u),y=s(-l*p),g=s(i*p),w=c.BASE.multiplyAndAddUnsafe(f,y,g);if(!w)throw new Error("point at infinify");return w.assertValidity(),w}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return R(this.toDERHex())}toDERHex(){return he.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return R(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const g={isValidPrivateKey(e){try{return l(e),!0}catch(e){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const e=re(t.n);return function(e,t,n=!1){const r=e.length,i=ne(t),o=re(t);if(r<16||r<o||r>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${r}`);const s=J(n?N(e):U(e),t-j)+j;return n?T(s,i):I(s,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function w(e){const t=e instanceof Uint8Array,n="string"==typeof e,r=(t||n)&&e.length;return t?r===i||r===o:n?r===2*i||r===2*o:e instanceof c}const b=t.bits2int||function(e){const n=N(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},m=t.bits2int_modN||function(e){return s(b(e))},v=L(t.nBitLength);function E(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(de<=e&&e<v))throw new Error(`bigint expected < 2^${t.nBitLength}`);return I(e,t.nByteLength)}const k={lowS:t.lowS,prehash:!1},_={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(w(e))throw new Error("first arg must be private key");if(!w(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(l(e)).toRawBytes(n)},sign:function(e,r,i=k){const{seed:o,k2sig:u}=function(e,r,i=k){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:u}=t;let{lowS:d,prehash:p,extraEntropy:g}=i;null==d&&(d=!0),e=P("msgHash",e),p&&(e=P("prehashed msgHash",o(e)));const w=m(e),v=l(r),_=[E(v),E(w)];if(null!=g){const e=!0===g?u(n.BYTES):g;_.push(P("extraEntropy",e))}const x=O(..._),A=w;return{seed:x,k2sig:function(e){const t=b(e);if(!h(t))return;const n=a(t),r=c.BASE.multiply(t).toAffine(),i=s(r.x);if(i===de)return;const o=s(n*s(A+i*v));if(o===de)return;let l=(r.x===i?0:2)|Number(r.y&fe),u=o;return d&&f(o)&&(u=function(e){return f(e)?s(-e):e}(o),l^=1),new y(i,u,l)}}}(e,r,i),d=t;return M(d.hash.outputLen,d.nByteLength,d.hmac)(o,u)},verify:function(e,n,r,i=_){const o=e;if(n=P("msgHash",n),r=P("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:l,prehash:u}=i;let h,d;try{if("string"==typeof o||o instanceof Uint8Array)try{h=y.fromDER(o)}catch(e){if(!(e instanceof he.Err))throw e;h=y.fromCompact(o)}else{if("object"!=typeof o||"bigint"!=typeof o.r||"bigint"!=typeof o.s)throw new Error("PARSE");{const{r:e,s:t}=o;h=new y(e,t)}}d=c.fromHex(r)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(l&&h.hasHighS())return!1;u&&(n=t.hash(n));const{r:f,s:p}=h,g=m(n),w=a(p),b=s(g*w),v=s(f*w),E=c.BASE.multiplyAndAddUnsafe(d,b,v)?.toAffine();return!!E&&s(E.x)===f},ProjectivePoint:c,Signature:y,utils:g}}function ge(e){return{hash:e,hmac:(t,...n)=>oe(e,t,function(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!l(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t}(...n)),randomBytes:y}}BigInt(4);const we=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),be=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),me=BigInt(1),ve=BigInt(2),Ee=(e,t)=>(e+t/ve)/t;function ke(e){const t=we,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),l=e*e*e%t,u=l*l*e%t,h=X(u,n,t)*u%t,d=X(h,n,t)*u%t,f=X(d,ve,t)*l%t,p=X(f,i,t)*f%t,y=X(p,o,t)*p%t,g=X(y,a,t)*y%t,w=X(g,c,t)*g%t,b=X(w,a,t)*y%t,m=X(b,n,t)*u%t,v=X(m,s,t)*p%t,E=X(v,r,t)*l%t,k=X(E,ve,t);if(!_e.eql(_e.sqr(k),e))throw new Error("Cannot find square root");return k}const _e=function(e,t,n=!1,r={}){if(e<=K)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:o}=te(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=function(e){if(e%V===W){const t=(e+j)/V;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%G===Z){const t=(e-Z)/G;return function(e,n){const r=e.mul(n,q),i=e.pow(r,t),o=e.mul(n,i),s=e.mul(e.mul(o,q),i),a=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-j)/q;let n,r,i;for(n=e-j,r=0;n%q===K;n/=q,r++);for(i=q;i<e&&Y(i,t,e)!==e-j;i++);if(1===r){const t=(e+j)/V;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const o=(n+j)/q;return function(e,s){if(e.pow(s,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=r,c=e.pow(e.mul(e.ONE,i),n),l=e.pow(s,o),u=e.pow(s,n);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(u);t<a&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const n=e.pow(c,j<<BigInt(a-t-1));c=e.sqr(n),l=e.mul(l,n),u=e.mul(u,c),a=t}return l}}(e)}(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:L(i),ZERO:K,ONE:j,create:t=>J(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return K<=t&&t<e},is0:e=>e===K,isOdd:e=>(e&j)===j,neg:t=>J(-t,e),eql:(e,t)=>e===t,sqr:t=>J(t*t,e),add:(t,n)=>J(t+n,e),sub:(t,n)=>J(t-n,e),mul:(t,n)=>J(t*n,e),pow:(e,t)=>function(e,t,n){if(n<K)throw new Error("Expected power > 0");if(n===K)return e.ONE;if(n===j)return t;let r=e.ONE,i=t;for(;n>K;)n&j&&(r=e.mul(r,i)),i=e.sqr(i),n>>=j;return r}(a,e,t),div:(t,n)=>J(t*Q(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Q(t,e),sqrt:r.sqrt||(e=>s(a,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce(((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r))),e.ONE),i=e.inv(r);return t.reduceRight(((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r))),i),n}(a,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?T(e,o):I(e,o),fromBytes:e=>{if(e.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${e.length}`);return n?U(e):N(e)}});return Object.freeze(a)}(we,void 0,void 0,{sqrt:ke}),xe=function(e,t){const n=t=>ye({...e,...ge(t)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:_e,n:be,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=be,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-me*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),a=Ee(o*e,t),c=Ee(-r*e,t);let l=J(e-a*n-c*i,t),u=J(-a*r-c*o,t);const h=l>s,d=u>s;if(h&&(l=t-l),d&&(u=t-u),l>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:l,k2neg:d,k2:u}}}},k),Ae=BigInt(0),Se=e=>"bigint"==typeof e&&Ae<e&&e<we,Be=e=>"bigint"==typeof e&&Ae<e&&e<be,Ce={};function Re(e,...t){let n=Ce[e];if(void 0===n){const t=k(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=O(t,t),Ce[e]=n}return k(O(n,...t))}const Ne=e=>e.toRawBytes(!0).slice(1),Ue=e=>I(e,32),Ie=e=>J(e,we),Te=e=>J(e,be),Pe=xe.ProjectivePoint,Oe=(e,t,n)=>Pe.BASE.multiplyAndAddUnsafe(e,t,n);function Le(e){let t=xe.utils.normPrivateKeyToScalar(e),n=Pe.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:Te(-t),bytes:Ne(n)}}function Fe(e){if(!Se(e))throw new Error("bad x: need 0 < x < p");const t=Ie(e*e);let n=ke(Ie(t*e+BigInt(7)));n%ve!==Ae&&(n=Ie(-n));const r=new Pe(e,n,me);return r.assertValidity(),r}function De(...e){return Te(N(Re("BIP0340/challenge",...e)))}function $e(e){return Le(e).bytes}function Me(e,t,n=y(32)){const r=P("message",e),{bytes:i,scalar:o}=Le(t),s=P("auxRand",n,32),a=Ue(o^N(Re("BIP0340/aux",s))),c=Re("BIP0340/nonce",a,i,r),l=Te(N(c));if(l===Ae)throw new Error("sign failed: k is zero");const{bytes:u,scalar:h}=Le(l),d=De(u,i,r),f=new Uint8Array(64);if(f.set(u,0),f.set(Ue(Te(h+d*o)),32),!ze(f,r,i))throw new Error("sign: Invalid signature produced");return f}function ze(e,t,n){const r=P("signature",e,64),i=P("message",t),o=P("publicKey",n,32);try{const e=Fe(N(o)),t=N(r.subarray(0,32));if(!Se(t))return!1;const n=N(r.subarray(32,64));if(!Be(n))return!1;const s=De(Ue(t),Ne(e),i),a=Oe(e,n,Te(-s));return!(!a||!a.hasEvenY()||a.toAffine().x!==t)}catch(e){return!1}}const He=(()=>({getPublicKey:$e,sign:Me,verify:ze,utils:{randomPrivateKey:xe.utils.randomPrivateKey,lift_x:Fe,pointToBytes:Ne,numberToBytesBE:I,bytesToNumberBE:N,taggedHash:Re,mod:J}}))();var Ke=n(3486),je=n(7748),qe=n(7410),We=n(282),Ve=n(4207),Ze=n(7518),Ge=n(9905),Je=Object.defineProperty,Ye=(e,t)=>{for(var n in t)Je(e,n,{get:t[n],enumerable:!0})},Xe=Symbol("verified"),Qe=e=>e instanceof Object;function et(e){if(!Qe(e))return!1;if("number"!=typeof e.kind)return!1;if("string"!=typeof e.content)return!1;if("number"!=typeof e.created_at)return!1;if("string"!=typeof e.pubkey)return!1;if(!e.pubkey.match(/^[a-f0-9]{64}$/))return!1;if(!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let e=0;e<n.length;e++)if("object"==typeof n[e])return!1}return!0}Ye({},{Queue:()=>ct,QueueNode:()=>at,binarySearch:()=>st,insertEventIntoAscendingList:()=>ot,insertEventIntoDescendingList:()=>it,normalizeURL:()=>rt,utf8Decoder:()=>tt,utf8Encoder:()=>nt});var tt=new TextDecoder("utf-8"),nt=new TextEncoder;function rt(e){-1===e.indexOf("://")&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),("80"===t.port&&"ws:"===t.protocol||"443"===t.port&&"wss:"===t.protocol)&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function it(e,t){const[n,r]=st(e,(e=>t.id===e.id?0:t.created_at===e.created_at?-1:e.created_at-t.created_at));return r||e.splice(n,0,t),e}function ot(e,t){const[n,r]=st(e,(e=>t.id===e.id?0:t.created_at===e.created_at?-1:t.created_at-e.created_at));return r||e.splice(n,0,t),e}function st(e,t){let n=0,r=e.length-1;for(;n<=r;){const i=Math.floor((n+r)/2),o=t(e[i]);if(0===o)return[i,!0];o<0?r=i-1:n=i+1}return[n,!1]}var at=class{value;next=null;prev=null;constructor(e){this.value=e}},ct=class{first;last;constructor(){this.first=null,this.last=null}enqueue(e){const t=new at(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const e=this.first;return this.first=null,this.last=null,e.value}const e=this.first;return this.first=e.next,e.value}};function lt(e){let t=(0,je.J)(nt.encode(function(e){if(!et(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}(e)));return(0,Ke.ci)(t)}var ut=new class{generateSecretKey(){return He.utils.randomPrivateKey()}getPublicKey(e){return(0,Ke.ci)(He.getPublicKey(e))}finalizeEvent(e,t){const n=e;return n.pubkey=(0,Ke.ci)(He.getPublicKey(t)),n.id=lt(n),n.sig=(0,Ke.ci)(He.sign(lt(n),t)),n[Xe]=!0,n}verifyEvent(e){if("boolean"==typeof e[Xe])return e[Xe];const t=lt(e);if(t!==e.id)return e[Xe]=!1,!1;try{const n=He.verify(e.sig,t,e.pubkey);return e[Xe]=n,n}catch(t){return e[Xe]=!1,!1}}},ht=(ut.generateSecretKey,ut.getPublicKey,ut.finalizeEvent),dt=ut.verifyEvent;function ft(e){return 1e3<=e&&e<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(e)}function pt(e){return[0,3].includes(e)||1e4<=e&&e<2e4}function yt(e){return 2e4<=e&&e<3e4}function gt(e){return 3e4<=e&&e<4e4}function wt(e){return ft(e)?"regular":pt(e)?"replaceable":yt(e)?"ephemeral":gt(e)?"parameterized":"unknown"}Ye({},{Application:()=>Bn,BadgeAward:()=>Bt,BadgeDefinition:()=>vn,BlockedRelaysList:()=>tn,BookmarkList:()=>Xt,Bookmarksets:()=>wn,Calendar:()=>Pn,CalendarEventRSVP:()=>On,ChannelCreation:()=>Rt,ChannelHideMessage:()=>It,ChannelMessage:()=>Ut,ChannelMetadata:()=>Nt,ChannelMuteUser:()=>Tt,ClassifiedListing:()=>Nn,ClientAuth:()=>ln,CommunitiesList:()=>Qt,CommunityDefinition:()=>Dn,CommunityPostApproval:()=>zt,Contacts:()=>Et,CreateOrUpdateProduct:()=>_n,CreateOrUpdateStall:()=>kn,Curationsets:()=>bn,Date:()=>In,DraftClassifiedListing:()=>Un,DraftLong:()=>An,Emojisets:()=>Sn,EncryptedDirectMessage:()=>kt,EncryptedDirectMessages:()=>_t,EventDeletion:()=>xt,FileMetadata:()=>Ot,FileServerPreference:()=>sn,Followsets:()=>pn,GenericRepost:()=>Ct,Genericlists:()=>yn,HTTPAuth:()=>fn,Handlerinformation:()=>Fn,Handlerrecommendation:()=>Ln,Highlights:()=>Zt,InterestsList:()=>rn,Interestsets:()=>En,JobFeedback:()=>jt,JobRequest:()=>Ht,JobResult:()=>Kt,Label:()=>Mt,LightningPubRPC:()=>cn,LiveChatMessage:()=>Lt,LiveEvent:()=>Cn,LongFormArticle:()=>xn,Metadata:()=>bt,Mutelist:()=>Gt,NWCWalletInfo:()=>an,NWCWalletRequest:()=>un,NWCWalletResponse:()=>hn,NostrConnect:()=>dn,OpenTimestamps:()=>Pt,Pinlist:()=>Jt,ProblemTracker:()=>Ft,ProfileBadges:()=>mn,PublicChatsList:()=>en,Reaction:()=>St,RecommendRelay:()=>vt,RelayList:()=>Yt,Relaysets:()=>gn,Report:()=>Dt,Reporting:()=>$t,Repost:()=>At,SearchRelaysList:()=>nn,ShortTextNote:()=>mt,Time:()=>Tn,UserEmojiList:()=>on,UserStatuses:()=>Rn,Zap:()=>Vt,ZapGoal:()=>qt,ZapRequest:()=>Wt,classifyKind:()=>wt,isEphemeralKind:()=>yt,isParameterizedReplaceableKind:()=>gt,isRegularKind:()=>ft,isReplaceableKind:()=>pt});var bt=0,mt=1,vt=2,Et=3,kt=4,_t=4,xt=5,At=6,St=7,Bt=8,Ct=16,Rt=40,Nt=41,Ut=42,It=43,Tt=44,Pt=1040,Ot=1063,Lt=1311,Ft=1971,Dt=1984,$t=1984,Mt=1985,zt=4550,Ht=5999,Kt=6999,jt=7e3,qt=9041,Wt=9734,Vt=9735,Zt=9802,Gt=1e4,Jt=10001,Yt=10002,Xt=10003,Qt=10004,en=10005,tn=10006,nn=10007,rn=10015,on=10030,sn=10096,an=13194,cn=21e3,ln=22242,un=23194,hn=23195,dn=24133,fn=27235,pn=3e4,yn=30001,gn=30002,wn=30003,bn=30004,mn=30008,vn=30009,En=30015,kn=30017,_n=30018,xn=30023,An=30024,Sn=30030,Bn=30078,Cn=30311,Rn=30315,Nn=30402,Un=30403,In=31922,Tn=31923,Pn=31924,On=31925,Ln=31989,Fn=31990,Dn=34550;function $n(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,i=e.slice(r).indexOf('"')+r+1;return e.slice(i,i+64)}function Mn(e,t){let n=t.length,r=e.indexOf(`"${t}":`)+n+3,i=e.slice(r),o=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,o),10)}function zn(e){let t=e.slice(0,22).indexOf('"EVENT"');if(-1===t)return null;let n=e.slice(t+7+1).indexOf('"');if(-1===n)return null;let r=t+7+1+n,i=e.slice(r+1,80).indexOf('"');if(-1===i)return null;let o=r+1+i;return e.slice(r+1,o)}function Hn(e,t){return t===$n(e,"id")}function Kn(e,t){return t===$n(e,"pubkey")}function jn(e,t){return t===Mn(e,"kind")}function qn(e,t){return{kind:ln,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}Ye({},{getHex64:()=>$n,getInt:()=>Mn,getSubscriptionId:()=>zn,matchEventId:()=>Hn,matchEventKind:()=>jn,matchEventPubkey:()=>Kn}),Ye({},{makeAuthEvent:()=>qn});var Wn={};Ye(Wn,{BECH32_REGEX:()=>Zn,decode:()=>Gn,naddrEncode:()=>ir,neventEncode:()=>rr,noteEncode:()=>Qn,nprofileEncode:()=>nr,npubEncode:()=>Xn,nrelayEncode:()=>or,nsecEncode:()=>Yn});var Vn=5e3,Zn=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function Gn(e){let{prefix:t,words:n}=qe.gW.decode(e,Vn),r=new Uint8Array(qe.gW.fromWords(n));switch(t){case"nprofile":{let e=Jn(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:(0,Ke.ci)(e[0][0]),relays:e[1]?e[1].map((e=>tt.decode(e))):[]}}}case"nevent":{let e=Jn(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nevent");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");if(e[2]&&32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(e[3]&&4!==e[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:(0,Ke.ci)(e[0][0]),relays:e[1]?e[1].map((e=>tt.decode(e))):[],author:e[2]?.[0]?(0,Ke.ci)(e[2][0]):void 0,kind:e[3]?.[0]?parseInt((0,Ke.ci)(e[3][0]),16):void 0}}}case"naddr":{let e=Jn(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!e[2]?.[0])throw new Error("missing TLV 2 for naddr");if(32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(!e[3]?.[0])throw new Error("missing TLV 3 for naddr");if(4!==e[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:tt.decode(e[0][0]),pubkey:(0,Ke.ci)(e[2][0]),kind:parseInt((0,Ke.ci)(e[3][0]),16),relays:e[1]?e[1].map((e=>tt.decode(e))):[]}}}case"nrelay":{let e=Jn(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:tt.decode(e[0][0])}}case"nsec":return{type:t,data:r};case"npub":case"note":return{type:t,data:(0,Ke.ci)(r)};default:throw new Error(`unknown prefix ${t}`)}}function Jn(e){let t={},n=e;for(;n.length>0;){let e=n[0],r=n[1],i=n.slice(2,2+r);if(n=n.slice(2+r),i.length<r)throw new Error(`not enough data to read on TLV ${e}`);t[e]=t[e]||[],t[e].push(i)}return t}function Yn(e){return tr("nsec",e)}function Xn(e){return tr("npub",(0,Ke.nr)(e))}function Qn(e){return tr("note",(0,Ke.nr)(e))}function er(e,t){let n=qe.gW.toWords(t);return qe.gW.encode(e,n,Vn)}function tr(e,t){return er(e,t)}function nr(e){return er("nprofile",sr({0:[(0,Ke.nr)(e.pubkey)],1:(e.relays||[]).map((e=>nt.encode(e)))}))}function rr(e){let t;return void 0!==e.kind&&(t=function(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=255&e,t}(e.kind)),er("nevent",sr({0:[(0,Ke.nr)(e.id)],1:(e.relays||[]).map((e=>nt.encode(e))),2:e.author?[(0,Ke.nr)(e.author)]:[],3:t?[new Uint8Array(t)]:[]}))}function ir(e){let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e.kind,!1),er("naddr",sr({0:[nt.encode(e.identifier)],1:(e.relays||[]).map((e=>nt.encode(e))),2:[(0,Ke.nr)(e.pubkey)],3:[new Uint8Array(t)]}))}function or(e){return er("nrelay",sr({0:[nt.encode(e)]}))}function sr(e){let t=[];return Object.entries(e).reverse().forEach((([e,n])=>{n.forEach((n=>{let r=new Uint8Array(n.length+2);r.set([parseInt(e)],0),r.set([n.length],1),r.set(n,2),t.push(r)}))})),(0,Ke.eV)(...t)}async function ar(e,t,n){const r=e instanceof Uint8Array?(0,Ke.ci)(e):e,i=lr(xe.getSharedSecret(r,"02"+t));let o=Uint8Array.from((0,Ke.O6)(16)),s=nt.encode(n),a=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["encrypt"]),c=await crypto.subtle.encrypt({name:"AES-CBC",iv:o},a,s);return`${qe.US.encode(new Uint8Array(c))}?iv=${qe.US.encode(new Uint8Array(o.buffer))}`}async function cr(e,t,n){const r=e instanceof Uint8Array?(0,Ke.ci)(e):e;let[i,o]=n.split("?iv="),s=lr(xe.getSharedSecret(r,"02"+t)),a=await crypto.subtle.importKey("raw",s,{name:"AES-CBC"},!1,["decrypt"]),c=qe.US.decode(i),l=qe.US.decode(o),u=await crypto.subtle.decrypt({name:"AES-CBC",iv:l},a,c);return tt.decode(u)}function lr(e){return e.slice(1,33)}Ye({},{decrypt:()=>cr,encrypt:()=>ar}),"undefined"!=typeof crypto&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle),Ye({},{NIP05_REGEX:()=>hr,queryProfile:()=>pr,searchDomain:()=>fr,useFetchImplementation:()=>dr});var ur,hr=/^(?:([\w.+-]+)@)?([\w.-]+)$/;try{ur=fetch}catch{}function dr(e){ur=e}async function fr(e,t=""){try{return(await(await ur(`https://${e}/.well-known/nostr.json?name=${t}`)).json()).names}catch(e){return{}}}async function pr(e){const t=e.match(hr);if(!t)return null;const[n,r="_",i]=t;try{const e=await ur(`https://${i}/.well-known/nostr.json?name=${r}`),{names:t,relays:n}=function(e){const t={names:{}};for(const[n,r]of Object.entries(e.names))"string"==typeof n&&"string"==typeof r&&(t.names[n]=r);if(e.relays){t.relays={};for(const[n,r]of Object.entries(e.relays))"string"==typeof n&&Array.isArray(r)&&(t.relays[n]=r.filter((e=>"string"==typeof e)))}return t}(await e.json()),o=t[r];return o?{pubkey:o,relays:n?.[o]}:null}catch(e){return null}}function yr(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of e.tags)"e"===r[0]&&r[1]&&n.push(r),"p"===r[0]&&r[1]&&t.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let e=0;e<n.length;e++){const r=n[e],[i,o,s,a]=r,c={id:o,relays:s?[s]:[]},l=0===e,u=e===n.length-1;"root"!==a?"reply"!==a?"mention"!==a?l?t.root=c:u?t.reply=c:t.mentions.push(c):t.mentions.push(c):t.reply=c:t.root=c}return t}Ye({},{parse:()=>yr}),Ye({},{fetchRelayInformation:()=>wr,useFetchImplementation:()=>gr});try{fetch}catch{}function gr(e){}async function wr(e){return await(await fetch(e.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}function br(e){let t=0;for(let n=0;n<e.length;n++){const r=parseInt(e[n],16);if(0!==r){t+=Math.clz32(r)-28;break}t+=4}return t}function mr(e,t){let n=0;const r=e,i=["nonce",n.toString(),t.toString()];for(r.tags.push(i);;){const e=Math.floor((new Date).getTime()/1e3);if(e!==r.created_at&&(n=0,r.created_at=e),i[1]=(++n).toString(),r.id=lt(r),br(r.id)>=t)break}return r}function vr(e,t,n,r){return ht({kind:At,tags:[...e.tags??[],["e",t.id,n],["p",t.pubkey]],content:""===e.content?"":JSON.stringify(t),created_at:e.created_at},r)}function Er(e){if(e.kind!==At)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const i=e.tags[r];i.length>=2&&("e"===i[0]&&void 0===t?t=i:"p"===i[0]&&void 0===n&&(n=i))}return void 0!==t?{id:t[1],relays:[t[2],n?.[2]].filter((e=>"string"==typeof e)),author:n?.[1]}:void 0}function kr(e,{skipVerification:t}={}){const n=Er(e);if(void 0===n||""===e.content)return;let r;try{r=JSON.parse(e.content)}catch(e){return}return r.id===n.id&&(t||dt(r))?r:void 0}Ye({},{getPow:()=>br,minePow:()=>mr}),Ye({},{finishRepostEvent:()=>vr,getRepostedEvent:()=>kr,getRepostedEventPointer:()=>Er}),Ye({},{NOSTR_URI_REGEX:()=>_r,parse:()=>Ar,test:()=>xr});var _r=new RegExp(`nostr:(${Zn.source})`);function xr(e){return"string"==typeof e&&new RegExp(`^${_r.source}$`).test(e)}function Ar(e){const t=e.match(new RegExp(`^${_r.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:Gn(t[1])}}function Sr(e,t,n){const r=t.tags.filter((e=>e.length>=2&&("e"===e[0]||"p"===e[0])));return ht({...e,kind:St,tags:[...e.tags??[],...r,["e",t.id],["p",t.pubkey]],content:e.content??"+"},n)}function Br(e){if(e.kind!==St)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const i=e.tags[r];i.length>=2&&("e"===i[0]&&void 0===t?t=i:"p"===i[0]&&void 0===n&&(n=i))}return void 0!==t&&void 0!==n?{id:t[1],relays:[t[2],n[2]].filter((e=>void 0!==e)),author:n[1]}:void 0}Ye({},{finishReactionEvent:()=>Sr,getReactedEventPointer:()=>Br}),Ye({},{matchAll:()=>Rr,regex:()=>Cr,replaceAll:()=>Nr});var Cr=()=>new RegExp(`\\b${_r.source}\\b`,"g");function*Rr(e){const t=e.matchAll(Cr());for(const e of t)try{const[t,n]=e;yield{uri:t,value:n,decoded:Gn(n),start:e.index,end:e.index+t.length}}catch(e){}}function Nr(e,t){return e.replaceAll(Cr(),((e,n)=>t({uri:e,value:n,decoded:Gn(n)})))}Ye({},{channelCreateEvent:()=>Ur,channelHideMessageEvent:()=>Pr,channelMessageEvent:()=>Tr,channelMetadataEvent:()=>Ir,channelMuteUserEvent:()=>Or});var Ur=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return ht({kind:Rt,tags:[...e.tags??[]],content:n,created_at:e.created_at},t)},Ir=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return ht({kind:Nt,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},Tr=(e,t)=>{const n=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&n.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),ht({kind:Ut,tags:[...n,...e.tags??[]],content:e.content,created_at:e.created_at},t)},Pr=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return ht({kind:It,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},Or=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return ht({kind:Tt,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:n,created_at:e.created_at},t)};Ye({},{EMOJI_SHORTCODE_REGEX:()=>Fr,matchAll:()=>$r,regex:()=>Dr,replaceAll:()=>Mr});var Lr,Fr=/:(\w+):/,Dr=()=>new RegExp(`\\B${Fr.source}\\B`,"g");function*$r(e){const t=e.matchAll(Dr());for(const e of t)try{const[t,n]=e;yield{shortcode:t,name:n,start:e.index,end:e.index+t.length}}catch(e){}}function Mr(e,t){return e.replaceAll(Dr(),((e,n)=>t({shortcode:e,name:n})))}Ye({},{useFetchImplementation:()=>zr,validateGithub:()=>Hr});try{Lr=fetch}catch{}function zr(e){Lr=e}async function Hr(e,t,n){try{return await(await Lr(`https://gist.github.com/${t}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch(e){return!1}}Ye({},{default:()=>Vr,v2:()=>Wr});var Kr,jr=new TextDecoder,qr={minPlaintextSize:1,maxPlaintextSize:65535,utf8Encode:Ke.iY,utf8Decode:e=>jr.decode(e),getConversationKey(e,t){const n=xe.getSharedSecret(e,"02"+t).subarray(1,33);return(0,Ze.Kl)(je.J,n,"nip44-v2")},getMessageKeys(e,t){(0,Ve.ql)(e,32),(0,Ve.ql)(t,32);const n=(0,Ze.jn)(je.J,e,t,76);return{chacha_key:n.subarray(0,32),chacha_nonce:n.subarray(32,44),hmac_key:n.subarray(44,76)}},calcPaddedLen(e){if(!Number.isSafeInteger(e)||e<1)throw new Error("expected positive integer");if(e<=32)return 32;const t=1<<Math.floor(Math.log2(e-1))+1,n=t<=256?32:t/8;return n*(Math.floor((e-1)/n)+1)},writeU16BE(e){if(!Number.isSafeInteger(e)||e<qr.minPlaintextSize||e>qr.maxPlaintextSize)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const t=new Uint8Array(2);return new DataView(t.buffer).setUint16(0,e,!1),t},pad(e){const t=qr.utf8Encode(e),n=t.length,r=qr.writeU16BE(n),i=new Uint8Array(qr.calcPaddedLen(n)-n);return(0,Ke.eV)(r,t,i)},unpad(e){const t=new DataView(e.buffer).getUint16(0),n=e.subarray(2,2+t);if(t<qr.minPlaintextSize||t>qr.maxPlaintextSize||n.length!==t||e.length!==2+qr.calcPaddedLen(t))throw new Error("invalid padding");return qr.utf8Decode(n)},hmacAad(e,t,n){if(32!==n.length)throw new Error("AAD associated data must be 32 bytes");const r=(0,Ke.eV)(n,t);return(0,Ge.b)(je.J,e,r)},decodePayload(e){if("string"!=typeof e)throw new Error("payload must be a valid string");const t=e.length;if(t<132||t>87472)throw new Error("invalid payload length: "+t);if("#"===e[0])throw new Error("unknown encryption version");let n;try{n=qe.US.decode(e)}catch(e){throw new Error("invalid base64: "+e.message)}const r=n.length;if(r<99||r>65603)throw new Error("invalid data length: "+r);const i=n[0];if(2!==i)throw new Error("unknown encryption version "+i);return{nonce:n.subarray(1,33),ciphertext:n.subarray(33,-32),mac:n.subarray(-32)}}},Wr={utils:qr,encrypt:function(e,t,n=(0,Ke.O6)(32)){const{chacha_key:r,chacha_nonce:i,hmac_key:o}=qr.getMessageKeys(t,n),s=qr.pad(e),a=(0,We.a0)(r,i,s),c=qr.hmacAad(o,a,n);return qe.US.encode((0,Ke.eV)(new Uint8Array([2]),n,a,c))},decrypt:function(e,t){const{nonce:n,ciphertext:r,mac:i}=qr.decodePayload(e),{chacha_key:o,chacha_nonce:s,hmac_key:a}=qr.getMessageKeys(t,n),c=qr.hmacAad(a,r,n);if(!(0,Ve.Wd)(c,i))throw new Error("invalid MAC");const l=(0,We.a0)(o,s,r);return qr.unpad(l)}},Vr={v2:Wr};function Zr(e){const{pathname:t,searchParams:n}=new URL(e),r=t,i=n.get("relay"),o=n.get("secret");if(!r||!i||!o)throw new Error("invalid connection string");return{pubkey:r,relay:i,secret:o}}async function Gr(e,t,n){const r={method:"pay_invoice",params:{invoice:n}},i=await ar(t,e,JSON.stringify(r)),o={kind:un,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e]]};return ht(o,t)}Ye({},{makeNwcRequestEvent:()=>Gr,parseConnectionString:()=>Zr}),Ye({},{getZapEndpoint:()=>Yr,makeZapReceipt:()=>ei,makeZapRequest:()=>Xr,useFetchImplementation:()=>Jr,validateZapRequest:()=>Qr});try{Kr=fetch}catch{}function Jr(e){Kr=e}async function Yr(e){try{let t="",{lud06:n,lud16:r}=JSON.parse(e.content);if(n){let{words:e}=qe.gW.decode(n,1e3),r=qe.gW.fromWords(e);t=tt.decode(r)}else{if(!r)return null;{let[e,n]=r.split("@");t=new URL(`/.well-known/lnurlp/${e}`,`https://${n}`).toString()}}let i=await Kr(t),o=await i.json();if(o.allowsNostr&&o.nostrPubkey)return o.callback}catch(e){}return null}function Xr({profile:e,event:t,amount:n,relays:r,comment:i=""}){if(!n)throw new Error("amount not given");if(!e)throw new Error("profile not given");let o={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e],["amount",n.toString()],["relays",...r]]};return t&&o.tags.push(["e",t]),o}function Qr(e){let t;try{t=JSON.parse(e)}catch(e){return"Invalid zap request JSON."}if(!et(t))return"Zap request is not a valid Nostr event.";if(!dt(t))return"Invalid signature on zap request.";let n=t.tags.find((([e,t])=>"p"===e&&t));if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=t.tags.find((([e,t])=>"e"===e&&t));return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find((([e,t])=>"relays"===e&&t))?null:"Zap request doesn't have a 'relays' tag."}function ei({zapRequest:e,preimage:t,bolt11:n,paidAt:r}){let i=JSON.parse(e),o=i.tags.filter((([e])=>"e"===e||"p"===e||"a"===e)),s={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...o,["P",i.pubkey],["bolt11",n],["description",e]]};return t&&s.tags.push(["preimage",t]),s}Ye({},{getToken:()=>ni,hashPayload:()=>li,unpackEventFromToken:()=>ii,validateEvent:()=>hi,validateEventKind:()=>si,validateEventMethodTag:()=>ci,validateEventPayloadTag:()=>ui,validateEventTimestamp:()=>oi,validateEventUrlTag:()=>ai,validateToken:()=>ri});var ti="Nostr ";async function ni(e,t,n,r=!1,i){const o={kind:fn,tags:[["u",e],["method",t]],created_at:Math.round((new Date).getTime()/1e3),content:""};i&&o.tags.push(["payload",li(i)]);const s=await n(o);return(r?ti:"")+qe.US.encode(nt.encode(JSON.stringify(s)))}async function ri(e,t,n){const r=await ii(e).catch((e=>{throw e})),i=await hi(r,t,n).catch((e=>{throw e}));return i}async function ii(e){if(!e)throw new Error("Missing token");e=e.replace(ti,"");const t=tt.decode(qe.US.decode(e));if(!t||0===t.length||!t.startsWith("{"))throw new Error("Invalid token");return JSON.parse(t)}function oi(e){return!!e.created_at&&Math.round((new Date).getTime()/1e3)-e.created_at<60}function si(e){return e.kind===fn}function ai(e,t){const n=e.tags.find((e=>"u"===e[0]));return!!n&&n.length>0&&n[1]===t}function ci(e,t){const n=e.tags.find((e=>"method"===e[0]));return!!n&&n.length>0&&n[1].toLowerCase()===t.toLowerCase()}function li(e){const t=(0,je.J)(nt.encode(JSON.stringify(e)));return(0,Ke.ci)(t)}function ui(e,t){const n=e.tags.find((e=>"payload"===e[0]));if(!n)return!1;const r=li(t);return n.length>0&&n[1]===r}async function hi(e,t,n,r){if(!dt(e))throw new Error("Invalid nostr event, signature invalid");if(!si(e))throw new Error("Invalid nostr event, kind invalid");if(!oi(e))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!ai(e,t))throw new Error("Invalid nostr event, url tag invalid");if(!ci(e,n))throw new Error("Invalid nostr event, method tag invalid");if(Boolean(r)&&"object"==typeof r&&Object.keys(r).length>0&&!ui(e,r))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}var di=n(2171);window.buffer=n(8764).lW;const fi=n(1354);function pi(){return window.nip07signer?(window.nip07signer=null,window.ndk=null,window.nostrUser=null,delete window.sessionStorage.privateKey,delete window.sessionStorage.lastKeyProvider,$(".connect-wallet").text("Connect"),wi().then((()=>{window.dispatchEvent(new Event(Wallet.WALLET_DISCONNECTED_EVENT))}))):gi()}async function yi(){return window.nip07signer&&bi()?Promise.resolve("already connected"):"nip07"==window.sessionStorage.lastKeyProvider&&window.nostr?vi():"private-key"==window.sessionStorage.lastKeyProvider&&window.sessionStorage.privateKey?Ei(window.sessionStorage.privateKey):Promise.reject("no seamless connection possible")}async function gi(){return yi().catch((()=>window.nostr?vi():window.ethereum?async function(){const e=(await window.ethereum.request({method:"eth_requestAccounts"}).catch((e=>{4001===e.code?(0,di.x2)("User rejected the connection request"):(0,di.x2)(e.message)})))[0];console.log(e);const t=`0x${window.buffer.from("Sign this message to approve the current website *unlimited* access to your Tagayasu account.\n\nPlease be very careful to make sure you are on the correct website (tagayasu.xyz) to prevent phising attacks!","utf8").toString("hex")}`;return await ethereum.request({method:"personal_sign",params:[t,e]}).then((e=>Ei(fi.SHA256(e).toString(fi.enc.Hex).slice(0,64)))).catch((e=>{4001===e.code?(0,di.x2)("User rejected the signature request"):(0,di.x2)(e.message)}))}():new Promise(((e,t)=>{const n=new bootstrap.Modal("#keyEntryModal",{});n.show(),n._element.addEventListener("hidden.bs.modal",(function e(){n._element.removeEventListener("hidden.bs.modal",e),t("no suitable key store found")}));const r=document.getElementById("connectWithPassPhraseButton");r.addEventListener("click",(function t(){r.removeEventListener("click",t),n.hide(),Ei(fi.SHA256($("#pass-phrase").val()).toString(fi.enc.Hex).slice(0,64)).then(e("user logged in with passphrase"))}))}))))}function wi(){return bi()||(window.ndk=new i.ZP({explicitRelayUrls:window.relays.active}),window.ndk.connect()),Promise.resolve("connected")}function bi(){if(!window.ndk)return!1;const e=window.ndk.pool.stats();return e.connected/e.total>=.5}async function mi(e){return window.nip07signer=e,window.ndk=new i.ZP({signer:window.nip07signer,explicitRelayUrls:window.relays.active}),await e.user().then((async e=>{e.npub&&(window.nostrUser=e,console.log("Permission granted to read their public key:",e.npub),window.ndk.connect(),window.dispatchEvent(new Event(Wallet.WALLET_CONNECTED_EVENT)))}))}async function vi(){return window.sessionStorage.lastKeyProvider="nip07",mi(new i.fJ)}async function Ei(e){return window.sessionStorage.privateKey=e,window.sessionStorage.lastKeyProvider="private-key",mi(new i.Gg(window.sessionStorage.privateKey))}function ki(e){return"tagayasu-"+e.replace(/[^\w\s]/g,"").toLowerCase().replace(/\s+/g,"-")}function _i(e,t){const n=new i._C(window.ndk);return n.kind=30023,n.pubkey=t,n.tags=[["d",ki(e)]],n.encode()}function xi(e,t){return`30023:${t}:${ki(e)}`}async function Ai(e){return window.nostr&&window.nostr.nip04?window.nostr.nip04.encrypt(window.nostrUser.hexpubkey,e):window.sessionStorage.privateKey?Promise.resolve(fi.AES.encrypt(e,window.sessionStorage.privateKey).toString()):Promise.reject("Did not find any encryption compatible wallet")}async function Si(e){return window.nostr&&window.nostr.nip04?window.nostr.nip04.decrypt(window.nostrUser.hexpubkey,e):window.sessionStorage.privateKey?Promise.resolve(fi.AES.decrypt(e,window.sessionStorage.privateKey).toString(fi.enc.Utf8)):Promise.reject("Did not find any encryption compatible wallet")}function Bi(e){let t;if(e.match(Ci)){const[t,n,r]=e.split(":"),i={authors:[n],kinds:[parseInt(t)]};return r&&(i["#d"]=[r]),i}try{switch(t=Wn.decode(e),t.type){case"nevent":return{ids:[t.data.id]};case"note":return{ids:[t.data]};case"naddr":return{authors:[t.data.pubkey],"#d":[t.data.identifier],kinds:[t.data.kind]}}}catch(e){}return{ids:[e]}}window.relays={default:["wss://relay.damus.io","wss://nos.lol"],active:[]},window.relays.active=window.relays.default,window.trySeamlessConnection=yi;const Ci=/^(\d+):([0-9A-Fa-f]+)(?::(.*))?$/},5857:()=>{class e{_baseUrl="https://1.1.1.1/dns-query?type=TXT&name=";_headers={accept:"application/dns-json"};static instance=new e;constructor(){if(e.instance)throw new Error("Use singleton instance")}async txt(e){return fetch(this._baseUrl+e,{headers:this._headers}).then((e=>e.json())).then((e=>e.Answer?e.Answer[0].data.replace(/[^a-zA-Z0-9]/g,""):"")).catch((e=>(console.error("Error:",e),null)))}_npubs={};async npub(e){if(this._npubs[e])return this._npubs[e];const t=await this.txt(`npub.${e}`);return this._npubs[e]=t,this._npubs[e]}}window.DnsClient=e},2171:(e,t,n)=>{"use strict";n.d(t,{FZ:()=>i,qi:()=>r,s6:()=>s,x2:()=>o});const r="error-event",i="notice-event";function o(e){console.error(e),window.dispatchEvent(new CustomEvent(r,{detail:{message:e}}))}function s(e){console.log(e),window.dispatchEvent(new CustomEvent(i,{detail:{message:e}}))}},6044:(e,t,n)=>{"use strict";n.r(t);var r=n(6213);class i{static instance=new i;constructor(){if(i.instance)throw new Error("Use singleton instance")}renderHtml(e){return self.MarkdownRenderer.instance.parse(e).html}parse(e){const t={link(e){const t=e.match(/^\[\[([^\]\n]+)\]\]/);if(t){this.lexer.state.inLink=!0;const e=(0,r.vK)(t[1],PageContext.instance.note.authorPubkey),n={type:"link",raw:t[0],href:window.router.urlFor(Router.BROWSER,e),title:t[1],text:t[1],tokens:this.lexer.inlineTokens(t[1])};return this.lexer.state.inLink=!1,window.foo.push((0,r.Mf)(t[1],PageContext.instance.note.authorPubkey)),n}return!1}};return window.foo=[],marked.use({tokenizer:t}),marked.use(markedKatex({throwOnError:!0})),{html:DOMPurify.sanitize(marked.parse(e)),backrefs:window.foo}}}window.MarkdownRenderer=i},3797:(e,t,n)=>{"use strict";n.r(t);var r=n(2445);class i{static fromNostrEvent(e){const t=new i;return t.id=e.id,t.nostrEvent=e,t.title=e.tags.find((e=>"title"==e[0]))[1],t.private=!!e.tags.find((e=>"private"==e[0])),t.content=e.content,t.authorPubkey=e.pubkey,t}static fromHexPubkey(e){const t=new i;return t.authorPubkey=e,t}get handle(){const e=new r._C(window.ndk);return e.kind=30023,e.pubkey=this.authorPubkey,e.tags=[["d",this.dtag]],e.encode()}get dtag(){return"tagayasu-"+this.title.replace(/[^\w\s]/g,"").toLowerCase().replace(/\s+/g,"-")}}window.Note=i},5284:(e,t,n)=>{"use strict";n.r(t);var r=n(6213);class i{static NOTE_IN_FOCUS_CHANGED="note-in-focus-changed";static NADDR_PARAM_NAME="n";static instance=new i;constructor(){if(i.instance)throw new Error("Use singleton instance")}_note=new Note;get note(){return this._note}setNote(e){this._note=e,window.dispatchEvent(new Event(i.NOTE_IN_FOCUS_CHANGED))}setNoteByNostrEvent(e){this._note=Note.fromNostrEvent(e),window.dispatchEvent(new Event(i.NOTE_IN_FOCUS_CHANGED))}setNoteByAuthorPubkey(e){if(e&&e.startsWith("npub"))throw new Error("Expected hexpubkey, got npub");this._note=Note.fromHexPubkey(e),window.dispatchEvent(new Event(i.NOTE_IN_FOCUS_CHANGED))}_dnslinkNpub=null;async dnslinkNpub(){if(null!==this._dnslinkNpub)return this._dnslinkNpub;const e=await DnsClient.instance.npub(window.location.hostname);return null!==e&&e.startsWith("npub")?this._dnslinkNpub=e:this._dnslinkNpub="",this._dnslinkNpub}noteFilterFromUrl(){const e=(0,r.e)(this.noteIdentifierFromUrl());return e.kinds||(e.kinds=[30023]),e}noteIdentifierFromUrl(){return this._urlParam(i.NADDR_PARAM_NAME)}_urlParam(e){if(window.router.inlineParams[e])return window.router.inlineParams[e];var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?null:decodeURI(t[1])||0}}window.PageContext=i},7909:(e,t,n)=>{"use strict";n.r(t);var r=n(6213),i=n(2445),o=n(2171);class s{static PREFERENCES_CHANGED_EVENT="preferences-changed";static D_TAG="tagayasu/preferences";static KIND=30078;static DEFAULTS={spellCheckEnabled:!0};current=s.DEFAULTS;static instance=new s;constructor(){if(s.instance)throw new Error("Use singleton instance")}async set(e){this.current=Object.assign(this.current,e),window.dispatchEvent(new Event(s.PREFERENCES_CHANGED_EVENT)),await this.saveToNostr()}async setFromNostr(){const e={authors:[window.nostrUser.hexpubkey],kinds:[s.KIND],"#d":[s.D_TAG]};window.ndk.fetchEvent(e).then((async e=>{if(e){const t=JSON.parse(await(0,r.Gk)(e.content));this.current=Object.assign({...s.DEFAULTS},t),window.dispatchEvent(new Event(s.PREFERENCES_CHANGED_EVENT))}}))}async saveToNostr(){await(0,r.zs)().then((async()=>{const e=new i._C(window.ndk);e.kind=s.KIND,e.tags=[["d",s.D_TAG],["published_at",Math.floor(Date.now()/1e3).toString()]],e.content=await(0,r.DE)(JSON.stringify(this.current)),e.publish().then((()=>{(0,o.s6)("Your preferences have been saved.")}))}))}}window.Preferences=s,window.addEventListener(Wallet.WALLET_CONNECTED_EVENT,(async function(e){s.instance.setFromNostr()}))},8751:()=>{class e{editorDomains=["app.tagayasu.xyz","melari-organic-goggles-g4q45x579r2v4w6-8080.app.github.dev"];static EDITOR="editor";static BROWSER="browser";static DNSLINK_HELP="dnslinkHelp";static ALL_PAGES=[e.EDITOR,e.BROWSER,e.DNSLINK_HELP];_pageName=null;get pageName(){if(this._pageName)return this._pageName;throw new Error("Call route() first")}_defaultPageName=null;get defaultPageName(){if(this._defaultPageName)return this._defaultPageName;throw new Error("call route() first")}_inlineParams=null;get inlineParams(){if(this._inlineParams)return this._inlineParams;throw new Error("call route() first")}async route(){this.editorDomains.includes(window.location.hostname)?this._defaultPageName=e.EDITOR:await PageContext.instance.dnslinkNpub()?this._defaultPageName=e.BROWSER:this._defaultPageName=e.DNSLINK_HELP;const t=window.location.pathname.split("/").filter((e=>e));return e.ALL_PAGES.includes(t[0])?(this._pageName=t[0],this._parseInlineParams(this._pageName,t.slice(1)),this):(this._pageName=this._defaultPageName,this._parseInlineParams(this._pageName,t),this)}urlFor(t,n){if(!e.ALL_PAGES.includes(t))throw new Error(t+" is not a valid page");const r=n.startsWith("/")?n:"/"+n;return t==this.defaultPageName?window.location.origin+r:window.location.origin+"/"+t+r}_parseInlineParams(e,t){this._inlineParams={},this._inlineParams[PageContext.NADDR_PARAM_NAME]=t[0]}}window.Router=e},8281:(e,t,n)=>{"use strict";n.r(t);var r=n(6213),i=n(2171);function o(){window.MDEditor&&window.MDEditor.toTextArea(),window.MDEditor=new SimpleMDE({toolbar:$(window).width()>=750?["bold","italic","strikethrough","heading","|","code","quote","unordered-list","ordered-list","|","link","image","table","horizontal-rule","|","preview","side-by-side","fullscreen","|","guide"]:["bold","italic","heading","|","link","image","|","preview","guide"],spellChecker:Preferences.instance.current.spellCheckEnabled,renderingConfig:{codeSyntaxHighlighting:!0},tabSize:2,previewRender:MarkdownRenderer.instance.renderHtml})}function s({hover:e}){$(".connect-wallet").each((function(t,n){if($(this).width("auto"),!window.nip07signer)return;const r=$(this).width();$(this).text(e?" Disconnect":window.nostrUser?window.nostrUser.npub.slice(0,8)+""+window.nostrUser.npub.slice(59,63):"Connect"),$(this).width(e?`${r}px`:"auto")}))}function a(){PageContext.instance.note.authorPubkey&&window.nostrUser&&PageContext.instance.note.authorPubkey==window.nostrUser.hexpubkey?$(".owner-only").show():$(".owner-only").hide()}function c(e){$("#toast-content").html(e),window.toast=bootstrap.Toast.getOrCreateInstance(document.getElementById("toast")),toast.show()}$(window).on("load",(async function(){o(),window.router=await(new Router).route(),$("#page-"+window.router.pageName).show(),await window.trySeamlessConnection(),"editor"==window.router.pageName?window.loadNote():"browser"==window.router.pageName&&window.browseNote()})),window.addEventListener(Wallet.WALLET_CONNECTED_EVENT,(function(e){$("#help-npub").html(window.nostrUser.npub),window.router.pageName==Router.EDITOR&&PageContext.instance.setNoteByAuthorPubkey(window.nostrUser.hexpubkey)})),window.addEventListener(Wallet.WALLET_CONNECTION_CHANGED,(function(e){s({hover:!1}),a()})),window.addEventListener(PageContext.NOTE_IN_FOCUS_CHANGED,(async function(e){a();const t=PageContext.instance.note;t.nostrEvent?(t.private?($("#note-content").html(MarkdownRenderer.instance.renderHtml(await(0,r.Gk)(t.content))),window.MDEditor.value(await(0,r.Gk)(t.content))):($("#note-content").html(MarkdownRenderer.instance.renderHtml(t.content)),window.MDEditor.value(t.content)),function(){(0,r.lD)(),$("#backref-content").empty();const e={authors:[PageContext.instance.note.nostrEvent.pubkey],kinds:[30023],"#a":[(0,r.Mf)(PageContext.instance.note.nostrEvent.tags.find((e=>"title"==e[0]))[1],PageContext.instance.note.nostrEvent.pubkey)]};window.ndk.fetchEvents(e).then((function(e){e.forEach((function(e){const t=window.router.urlFor(Router.BROWSER,e.encode()),n=e.tags.find((e=>"title"==e[0]))[1];$("#backref-content").append(`<li><a href='${t}'>${n}</a></li>`)}))}))}()):$("#note-content").html("<center><h3>note not found!</h3>Either this version of the note no longer exists or it's on a different nostr relay."),window.notesModal&&window.notesModal.hide(),$("#note-title").val(t.title)})),$("#myNotesModal").on("shown.bs.modal",(function(){$("#note-search-box").focus()})),$(".connect-wallet").mouseenter((function(){s({hover:!0})})),$(".connect-wallet").mouseleave((function(){s({hover:!1})})),window.addEventListener(i.qi,(function(e){$("#toast").removeClass("text-bg-success"),$("#toast").addClass("text-bg-danger"),c(e.detail.message)})),window.addEventListener(i.FZ,(function(e){$("#toast").removeClass("text-bg-danger"),$("#toast").addClass("text-bg-success"),c(e.detail.message)})),$("#toast").on("click",(function(){window.toast&&window.toast.hide()})),window.addEventListener(Preferences.PREFERENCES_CHANGED_EVENT,(function(e){o()}))},5123:()=>{class e{static WALLET_CONNECTED_EVENT="wallet-connected-event";static WALLET_DISCONNECTED_EVENT="wallet-disconnected-event";static WALLET_CONNECTION_CHANGED="wallet-connection-changed";static instance=new e;constructor(){if(e.instance)throw new Error("Use singleton instance")}}window.Wallet=e,window.addEventListener(e.WALLET_CONNECTED_EVENT,(function(t){window.dispatchEvent(new Event(e.WALLET_CONNECTION_CHANGED))})),window.addEventListener(e.WALLET_DISCONNECTED_EVENT,(function(t){window.dispatchEvent(new Event(e.WALLET_CONNECTION_CHANGED))}))},2480:()=>{},282:(e,t,n)=>{"use strict";n.d(t,{a0:()=>y});var r=n(4207);function i(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function o(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}const s={number:i,bool:function(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:o,hash:function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("hash must be wrapped by utils.wrapConstructor");i(e.outputLen),i(e.blockLen)},exists:function(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){o(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},a=(e,t)=>255&e[t++]|(255&e[t++])<<8;class c{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,r.O0)(e),(0,r.ql)(e,32);const t=a(e,0),n=a(e,2),i=a(e,4),o=a(e,6),s=a(e,8),c=a(e,10),l=a(e,12),u=a(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|n<<3),this.r[2]=7939&(n>>>10|i<<6),this.r[3]=8191&(i>>>7|o<<9),this.r[4]=255&(o>>>4|s<<12),this.r[5]=s>>>1&8190,this.r[6]=8191&(s>>>14|c<<2),this.r[7]=8065&(c>>>11|l<<5),this.r[8]=8191&(l>>>8|u<<8),this.r[9]=u>>>5&127;for(let t=0;t<8;t++)this.pad[t]=a(e,16+2*t)}process(e,t,n=!1){const r=n?0:2048,{h:i,r:o}=this,s=o[0],c=o[1],l=o[2],u=o[3],h=o[4],d=o[5],f=o[6],p=o[7],y=o[8],g=o[9],w=a(e,t+0),b=a(e,t+2),m=a(e,t+4),v=a(e,t+6),E=a(e,t+8),k=a(e,t+10),_=a(e,t+12),x=a(e,t+14);let A=i[0]+(8191&w),S=i[1]+(8191&(w>>>13|b<<3)),B=i[2]+(8191&(b>>>10|m<<6)),C=i[3]+(8191&(m>>>7|v<<9)),R=i[4]+(8191&(v>>>4|E<<12)),N=i[5]+(E>>>1&8191),U=i[6]+(8191&(E>>>14|k<<2)),I=i[7]+(8191&(k>>>11|_<<5)),T=i[8]+(8191&(_>>>8|x<<8)),P=i[9]+(x>>>5|r),O=0,L=O+A*s+S*(5*g)+B*(5*y)+C*(5*p)+R*(5*f);O=L>>>13,L&=8191,L+=N*(5*d)+U*(5*h)+I*(5*u)+T*(5*l)+P*(5*c),O+=L>>>13,L&=8191;let F=O+A*c+S*s+B*(5*g)+C*(5*y)+R*(5*p);O=F>>>13,F&=8191,F+=N*(5*f)+U*(5*d)+I*(5*h)+T*(5*u)+P*(5*l),O+=F>>>13,F&=8191;let D=O+A*l+S*c+B*s+C*(5*g)+R*(5*y);O=D>>>13,D&=8191,D+=N*(5*p)+U*(5*f)+I*(5*d)+T*(5*h)+P*(5*u),O+=D>>>13,D&=8191;let $=O+A*u+S*l+B*c+C*s+R*(5*g);O=$>>>13,$&=8191,$+=N*(5*y)+U*(5*p)+I*(5*f)+T*(5*d)+P*(5*h),O+=$>>>13,$&=8191;let M=O+A*h+S*u+B*l+C*c+R*s;O=M>>>13,M&=8191,M+=N*(5*g)+U*(5*y)+I*(5*p)+T*(5*f)+P*(5*d),O+=M>>>13,M&=8191;let z=O+A*d+S*h+B*u+C*l+R*c;O=z>>>13,z&=8191,z+=N*s+U*(5*g)+I*(5*y)+T*(5*p)+P*(5*f),O+=z>>>13,z&=8191;let H=O+A*f+S*d+B*h+C*u+R*l;O=H>>>13,H&=8191,H+=N*c+U*s+I*(5*g)+T*(5*y)+P*(5*p),O+=H>>>13,H&=8191;let K=O+A*p+S*f+B*d+C*h+R*u;O=K>>>13,K&=8191,K+=N*l+U*c+I*s+T*(5*g)+P*(5*y),O+=K>>>13,K&=8191;let j=O+A*y+S*p+B*f+C*d+R*h;O=j>>>13,j&=8191,j+=N*u+U*l+I*c+T*s+P*(5*g),O+=j>>>13,j&=8191;let q=O+A*g+S*y+B*p+C*f+R*d;O=q>>>13,q&=8191,q+=N*h+U*u+I*l+T*c+P*s,O+=q>>>13,q&=8191,O=(O<<2)+O|0,O=O+L|0,L=8191&O,O>>>=13,F+=O,i[0]=L,i[1]=F,i[2]=D,i[3]=$,i[4]=M,i[5]=z,i[6]=H,i[7]=K,i[8]=j,i[9]=q}finalize(){const{h:e,pad:t}=this,n=new Uint16Array(10);let r=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=r,r=e[t]>>>13,e[t]&=8191;e[0]+=5*r,r=e[0]>>>13,e[0]&=8191,e[1]+=r,r=e[1]>>>13,e[1]&=8191,e[2]+=r,n[0]=e[0]+5,r=n[0]>>>13,n[0]&=8191;for(let t=1;t<10;t++)n[t]=e[t]+r,r=n[t]>>>13,n[t]&=8191;n[9]-=8192;let i=(1^r)-1;for(let e=0;e<10;e++)n[e]&=i;i=~i;for(let t=0;t<10;t++)e[t]=e[t]&i|n[t];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let o=e[0]+t[0];e[0]=65535&o;for(let n=1;n<8;n++)o=(e[n]+t[n]|0)+(o>>>16)|0,e[n]=65535&o}update(e){s.exists(this);const{buffer:t,blockLen:n}=this,i=(e=(0,r.O0)(e)).length;for(let r=0;r<i;){const o=Math.min(n-this.pos,i-r);if(o!==n)t.set(e.subarray(r,r+o),this.pos),this.pos+=o,r+=o,this.pos===n&&(this.process(t,0,!1),this.pos=0);else for(;n<=i-r;r+=n)this.process(e,r)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){s.exists(this),s.output(e,this),this.finished=!0;const{buffer:t,h:n}=this;let{pos:r}=this;if(r){for(t[r++]=1;r<16;r++)t[r]=0;this.process(t,0,!0)}this.finalize();let i=0;for(let t=0;t<8;t++)e[i++]=n[t]>>>0,e[i++]=n[t]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}}!function(e){const t=(t,n)=>e(n).update((0,r.O0)(t)).digest(),n=e(new Uint8Array(32));t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t)}((e=>new c(e)));const l=(0,r.iY)("expand 16-byte k"),u=(0,r.iY)("expand 32-byte k"),h=(0,r.Jq)(l),d=(0,r.Jq)(u),f=e=>!(e.byteOffset%4),p=(e,t)=>e<<t|e>>>32-t;const y=(e=>{const{core:t,rounds:n,counterRight:i,counterLen:o,allow128bitKeys:a,extendNonceFn:c,blockLen:l}=(0,r.U5)({rounds:20,counterRight:!1,counterLen:8,allow128bitKeys:!0,blockLen:64},e);s.number(o),s.number(n),s.number(l),s.bool(i),s.bool(a);const u=l/4;if(l%4!=0)throw new Error("Salsa/ChaCha: blockLen must be aligned to 4 bytes");return(e,p,y,g,w=0)=>{if(s.bytes(e),s.bytes(p),s.bytes(y),g||(g=new Uint8Array(y.length)),s.bytes(g),s.number(w),w<0||w>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");if(g.length<y.length)throw new Error(`Salsa/ChaCha: output (${g.length}) is shorter than data (${y.length})`);const b=[];let m,v;if(32===e.length)m=e,v=d;else{if(16!==e.length||!a)throw new Error(`Salsa/ChaCha: invalid 32-byte key, got length=${e.length}`);m=new Uint8Array(32),m.set(e),m.set(e,16),v=h,b.push(m)}if(c){if(p.length<=16)throw new Error("Salsa/ChaCha: extended nonce must be bigger than 16 bytes");m=c(v,m,p.subarray(0,16),new Uint8Array(32)),b.push(m),p=p.subarray(16)}const E=16-o;if(p.length!==E)throw new Error(`Salsa/ChaCha: nonce must be ${E} or 16 bytes`);if(12!==E){const e=new Uint8Array(12);e.set(p,i?0:12-p.length),b.push(p=e)}const k=new Uint8Array(l),_=(0,r.Jq)(k),x=(0,r.Jq)(m),A=(0,r.Jq)(p),S=f(y)&&(0,r.Jq)(y),B=f(g)&&(0,r.Jq)(g);b.push(_);const C=y.length;for(let e=0,r=w;e<C;r++){if(t(v,x,A,_,r,n),r>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");const i=Math.min(l,C-e);if(i===l&&B&&S){const t=e/4;if(e%4!=0)throw new Error("Salsa/ChaCha: invalid block position");for(let e=0;e<u;e++)B[t+e]=S[t+e]^_[e];e+=l}else{for(let t=0;t<i;t++)g[e+t]=y[e+t]^k[t];e+=i}}for(let e=0;e<b.length;e++)b[e].fill(0);return g}})({core:function(e,t,n,r,i,o=20){let s=e[0],a=e[1],c=e[2],l=e[3],u=t[0],h=t[1],d=t[2],f=t[3],y=t[4],g=t[5],w=t[6],b=t[7],m=i,v=n[0],E=n[1],k=n[2],_=s,x=a,A=c,S=l,B=u,C=h,R=d,N=f,U=y,I=g,T=w,P=b,O=m,L=v,F=E,D=k;for(let e=0;e<o;e+=2)_=_+B|0,O=p(O^_,16),U=U+O|0,B=p(B^U,12),_=_+B|0,O=p(O^_,8),U=U+O|0,B=p(B^U,7),x=x+C|0,L=p(L^x,16),I=I+L|0,C=p(C^I,12),x=x+C|0,L=p(L^x,8),I=I+L|0,C=p(C^I,7),A=A+R|0,F=p(F^A,16),T=T+F|0,R=p(R^T,12),A=A+R|0,F=p(F^A,8),T=T+F|0,R=p(R^T,7),S=S+N|0,D=p(D^S,16),P=P+D|0,N=p(N^P,12),S=S+N|0,D=p(D^S,8),P=P+D|0,N=p(N^P,7),_=_+C|0,D=p(D^_,16),T=T+D|0,C=p(C^T,12),_=_+C|0,D=p(D^_,8),T=T+D|0,C=p(C^T,7),x=x+R|0,O=p(O^x,16),P=P+O|0,R=p(R^P,12),x=x+R|0,O=p(O^x,8),P=P+O|0,R=p(R^P,7),A=A+N|0,L=p(L^A,16),U=U+L|0,N=p(N^U,12),A=A+N|0,L=p(L^A,8),U=U+L|0,N=p(N^U,7),S=S+B|0,F=p(F^S,16),I=I+F|0,B=p(B^I,12),S=S+B|0,F=p(F^S,8),I=I+F|0,B=p(B^I,7);let $=0;r[$++]=s+_|0,r[$++]=a+x|0,r[$++]=c+A|0,r[$++]=l+S|0,r[$++]=u+B|0,r[$++]=h+C|0,r[$++]=d+R|0,r[$++]=f+N|0,r[$++]=y+U|0,r[$++]=g+I|0,r[$++]=w+T|0,r[$++]=b+P|0,r[$++]=m+O|0,r[$++]=v+L|0,r[$++]=E+F|0,r[$++]=k+D|0},counterRight:!1,counterLen:4,allow128bitKeys:!1})},4207:(e,t,n)=>{"use strict";n.d(t,{Jq:()=>i,O0:()=>s,U5:()=>c,Wd:()=>u,iY:()=>o,ql:()=>l});const r=e=>e instanceof Uint8Array,i=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function o(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function s(e){if("string"==typeof e&&(e=o(e)),!r(e))throw new Error("expected Uint8Array, got "+typeof e);return e}const a=e=>"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object;function c(e,t){if(void 0!==t&&("object"!=typeof t||!a(t)))throw new Error("options must be object or undefined");return Object.assign(e,t)}function l(e,t){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");if("number"==typeof t&&e.length!==t)throw new Error(`Uint8Array length ${t} expected`)}function u(e,t){if(e.length!==t.length)throw new Error("equalBytes: Different size of Uint8Arrays");let n=!0;for(let r=0;r<e.length;r++)n&&(n=e[r]===t[r]);return n}},3527:(e,t,n)=>{"use strict";function r(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function i(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}n.d(t,{ZP:()=>o,aI:()=>i});const o={number:r,bool:function(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:i,hash:function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)},exists:function(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){i(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}}},3313:(e,t,n)=>{"use strict";n.d(t,{N:()=>o});var r=n(3527),i=n(3486);class o extends i.kb{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.GL)(this.buffer)}update(e){r.ZP.exists(this);const{view:t,buffer:n,blockLen:o}=this,s=(e=(0,i.O0)(e)).length;for(let r=0;r<s;){const a=Math.min(o-this.pos,s-r);if(a!==o)n.set(e.subarray(r,r+a),this.pos),this.pos+=a,r+=a,this.pos===o&&(this.process(t,0),this.pos=0);else{const t=(0,i.GL)(e);for(;o<=s-r;r+=o)this.process(t,r)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){r.ZP.exists(this),r.ZP.output(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:o,isLE:s}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(n,0),a=0);for(let e=a;e<o;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),c=r?4:0,l=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+l,a,r)}(n,o-8,BigInt(8*this.length),s),this.process(n,0);const c=(0,i.GL)(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)c.setUint32(4*e,h[e],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return e.length=r,e.pos=s,e.finished=i,e.destroyed=o,r%t&&e.buffer.set(n),e}}},7518:(e,t,n)=>{"use strict";n.d(t,{Di:()=>u,Kl:()=>s,jn:()=>l});var r=n(3527),i=n(3486),o=n(9905);function s(e,t,n){return r.ZP.hash(e),void 0===n&&(n=new Uint8Array(e.outputLen)),(0,o.b)(e,(0,i.O0)(n),(0,i.O0)(t))}const a=new Uint8Array([0]),c=new Uint8Array;function l(e,t,n,i=32){if(r.ZP.hash(e),r.ZP.number(i),i>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(i/e.outputLen);void 0===n&&(n=c);const l=new Uint8Array(s*e.outputLen),u=o.b.create(e,t),h=u._cloneInto(),d=new Uint8Array(u.outputLen);for(let t=0;t<s;t++)a[0]=t+1,h.update(0===t?c:d).update(n).update(a).digestInto(d),l.set(d,e.outputLen*t),u._cloneInto(h);return u.destroy(),h.destroy(),d.fill(0),a.fill(0),l.slice(0,i)}const u=(e,t,n,r,i)=>l(e,s(e,t,n),r,i)},9905:(e,t,n)=>{"use strict";n.d(t,{b:()=>s});var r=n(3527),i=n(3486);class o extends i.kb{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,r.ZP.hash(e);const n=(0,i.O0)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(n.length>o?e.create().update(n).digest():n);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return r.ZP.exists(this),this.iHash.update(e),this}digestInto(e){r.ZP.exists(this),r.ZP.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const s=(e,t,n)=>new o(e,t).update(n).digest();s.create=(e,t)=>new o(e,t)},7748:(e,t,n)=>{"use strict";n.d(t,{J:()=>h});var r=n(3313),i=n(3486);const o=(e,t,n)=>e&t^e&n^t&n,s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint32Array(64);class l extends r.N{constructor(){super(64,32,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4],this.F=0|a[5],this.G=0|a[6],this.H=0|a[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:o,G:s,H:a}=this;return[e,t,n,r,i,o,s,a]}set(e,t,n,r,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let n=0;n<16;n++,t+=4)c[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=c[e-15],n=c[e-2],r=(0,i.np)(t,7)^(0,i.np)(t,18)^t>>>3,o=(0,i.np)(n,17)^(0,i.np)(n,19)^n>>>10;c[e]=o+c[e-7]+r+c[e-16]|0}let{A:n,B:r,C:a,D:l,E:u,F:h,G:d,H:f}=this;for(let e=0;e<64;e++){const t=f+((0,i.np)(u,6)^(0,i.np)(u,11)^(0,i.np)(u,25))+((p=u)&h^~p&d)+s[e]+c[e]|0,y=((0,i.np)(n,2)^(0,i.np)(n,13)^(0,i.np)(n,22))+o(n,r,a)|0;f=d,d=h,h=u,u=l+t|0,l=a,a=r,r=n,n=t+y|0}var p;n=n+this.A|0,r=r+this.B|0,a=a+this.C|0,l=l+this.D|0,u=u+this.E|0,h=h+this.F|0,d=d+this.G|0,f=f+this.H|0,this.set(n,r,a,l,u,h,d,f)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class u extends l{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const h=(0,i.hE)((()=>new l));(0,i.hE)((()=>new u))},3486:(e,t,n)=>{"use strict";n.d(t,{kb:()=>f,ci:()=>c,U5:()=>y,eV:()=>d,GL:()=>o,nr:()=>l,O6:()=>w,np:()=>s,O0:()=>h,iY:()=>u,hE:()=>g});const r="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,i=e=>e instanceof Uint8Array,o=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),s=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");const a=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function c(e){if(!i(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=a[e[n]];return t}function l(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const r=2*t,i=e.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[t]=o}return n}function u(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function h(e){if("string"==typeof e&&(e=u(e)),!i(e))throw new Error("expected Uint8Array, got "+typeof e);return e}function d(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!i(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t}class f{clone(){return this._cloneInto()}}const p=e=>"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object;function y(e,t){if(void 0!==t&&("object"!=typeof t||!p(t)))throw new Error("Options should be object or undefined");return Object.assign(e,t)}function g(e){const t=t=>e().update(h(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function w(e=32){if(r&&"function"==typeof r.getRandomValues)return r.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}},2445:(e,t,n)=>{"use strict";n.d(t,{_C:()=>Hr,fJ:()=>ti,Gg:()=>ni,ZP:()=>ci});var r={};n.r(r),n.d(r,{dQ:()=>m,ci:()=>u,bytesToNumberBE:()=>f,ty:()=>p,eV:()=>b,n$:()=>k,ql:()=>w,hexToBytes:()=>d,tL:()=>y,S5:()=>g,FF:()=>x});var i=n(7748),o=n(3486);BigInt(0);const s=BigInt(1),a=BigInt(2),c=e=>e instanceof Uint8Array,l=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function u(e){if(!c(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=l[e[n]];return t}function h(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function d(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const r=2*t,i=e.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[t]=o}return n}function f(e){return h(u(e))}function p(e){if(!c(e))throw new Error("Uint8Array expected");return h(u(Uint8Array.from(e).reverse()))}function y(e,t){return d(e.toString(16).padStart(2*t,"0"))}function g(e,t){return y(e,t).reverse()}function w(e,t,n){let r;if("string"==typeof t)try{r=d(t)}catch(n){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${n}`)}else{if(!c(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function b(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!c(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t}const m=e=>(a<<BigInt(e-1))-s,v=e=>new Uint8Array(e),E=e=>Uint8Array.from(e);function k(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=v(e),i=v(e),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},a=(...e)=>n(i,r,...e),c=(e=v())=>{i=a(E([0]),e),r=a(),0!==e.length&&(i=a(E([1]),e),r=a())},l=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return b(...n)};return(e,t)=>{let n;for(s(),c(e);!(n=t(l()));)c();return s(),n}}const _={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function x(e,t,n={}){const r=(t,n,r)=>{const i=_[n];if("function"!=typeof i)throw new Error(`Invalid validator "${n}", expected function`);const o=e[t];if(!(r&&void 0===o||i(o,e)))throw new Error(`Invalid param ${String(t)}=${o} (${typeof o}), expected ${n}`)};for(const[e,n]of Object.entries(t))r(e,n,!1);for(const[e,t]of Object.entries(n))r(e,t,!0);return e}const A=BigInt(0),S=BigInt(1),B=BigInt(2),C=BigInt(3),R=BigInt(4),N=BigInt(5),U=BigInt(8);function I(e,t){const n=e%t;return n>=A?n:t+n}function T(e,t,n){if(n<=A||t<A)throw new Error("Expected power/modulo > 0");if(n===S)return A;let r=S;for(;t>A;)t&S&&(r=r*e%n),e=e*e%n,t>>=S;return r}function P(e,t,n){let r=e;for(;t-- >A;)r*=r,r%=n;return r}function O(e,t){if(e===A||t<=A)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=I(e,t),r=t,i=A,o=S,s=S,a=A;for(;n!==A;){const e=r/n,t=r%n,c=i-s*e,l=o-a*e;r=n,n=t,i=s,o=a,s=c,a=l}if(r!==S)throw new Error("invert: does not exist");return I(i,t)}BigInt(9),BigInt(16);const L=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function F(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}const D=BigInt(0),$=BigInt(1);function M(e){return x(e.Fp,L.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),x(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...F(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{bytesToNumberBE:z,hexToBytes:H}=r,K={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=K;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(128&r[0])throw new t("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:z(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=K,n="string"==typeof e?H(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:o}=K._parseInt(n.subarray(2)),{d:s,l:a}=K._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},r=t(n(e.s)),i=t(n(e.r)),o=r.length/2,s=i.length/2,a=n(o),c=n(s);return`30${n(s+o+4)}02${c}${i}02${a}${r}`}},j=BigInt(0),q=BigInt(1),W=(BigInt(2),BigInt(3));function V(e){const t=function(e){const t=M(e);return x(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,i=n.BYTES+1,o=2*n.BYTES+1;function s(e){return I(e,r)}function a(e){return O(e,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:h,isWithinCurveOrder:g}=function(e){const t=function(e){const t=M(e);x(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=t.toBytes||((e,t,r)=>{const i=t.toAffine();return b(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function o(e){const{a:r,b:i}=t,o=n.sqr(e),s=n.mul(o,e);return n.add(n.add(s,n.mul(e,r)),i)}if(!n.eql(n.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(e){return"bigint"==typeof e&&j<e&&e<t.n}function a(e){if(!s(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:o}=t;if(n&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=u(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*r,"0")}let s;try{s="bigint"==typeof e?e:f(w("private key",e,r))}catch(t){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof e}`)}return i&&(s=I(s,o)),a(s),s}const l=new Map;function h(e){if(!(e instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof d)throw new Error("projective point not allowed");const i=e=>n.eql(e,n.ZERO);return i(t)&&i(r)?d.ZERO:new d(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(d.fromAffine)}static fromHex(e){const t=d.fromAffine(i(w("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return d.BASE.multiply(c(e))}_setWindowSize(e){this._WINDOW_SIZE=e,l.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:e,y:r}=this.toAffine();if(!n.isValid(e)||!n.isValid(r))throw new Error("bad point: x or y not FE");const i=n.sqr(r),s=o(e);if(!n.eql(i,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){h(e);const{px:t,py:r,pz:i}=this,{px:o,py:s,pz:a}=e,c=n.eql(n.mul(t,a),n.mul(o,i)),l=n.eql(n.mul(r,a),n.mul(s,i));return c&&l}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,i=n.mul(r,W),{px:o,py:s,pz:a}=this;let c=n.ZERO,l=n.ZERO,u=n.ZERO,h=n.mul(o,o),f=n.mul(s,s),p=n.mul(a,a),y=n.mul(o,s);return y=n.add(y,y),u=n.mul(o,a),u=n.add(u,u),c=n.mul(e,u),l=n.mul(i,p),l=n.add(c,l),c=n.sub(f,l),l=n.add(f,l),l=n.mul(c,l),c=n.mul(y,c),u=n.mul(i,u),p=n.mul(e,p),y=n.sub(h,p),y=n.mul(e,y),y=n.add(y,u),u=n.add(h,h),h=n.add(u,h),h=n.add(h,p),h=n.mul(h,y),l=n.add(l,h),p=n.mul(s,a),p=n.add(p,p),h=n.mul(p,y),c=n.sub(c,h),u=n.mul(p,f),u=n.add(u,u),u=n.add(u,u),new d(c,l,u)}add(e){h(e);const{px:r,py:i,pz:o}=this,{px:s,py:a,pz:c}=e;let l=n.ZERO,u=n.ZERO,f=n.ZERO;const p=t.a,y=n.mul(t.b,W);let g=n.mul(r,s),w=n.mul(i,a),b=n.mul(o,c),m=n.add(r,i),v=n.add(s,a);m=n.mul(m,v),v=n.add(g,w),m=n.sub(m,v),v=n.add(r,o);let E=n.add(s,c);return v=n.mul(v,E),E=n.add(g,b),v=n.sub(v,E),E=n.add(i,o),l=n.add(a,c),E=n.mul(E,l),l=n.add(w,b),E=n.sub(E,l),f=n.mul(p,v),l=n.mul(y,b),f=n.add(l,f),l=n.sub(w,f),f=n.add(w,f),u=n.mul(l,f),w=n.add(g,g),w=n.add(w,g),b=n.mul(p,b),v=n.mul(y,v),w=n.add(w,b),b=n.sub(g,b),b=n.mul(p,b),v=n.add(v,b),g=n.mul(w,v),u=n.add(u,g),g=n.mul(E,v),l=n.mul(m,l),l=n.sub(l,g),g=n.mul(m,w),f=n.mul(E,f),f=n.add(f,g),new d(l,u,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(d.ZERO)}wNAF(e){return y.wNAFCached(this,l,e,(e=>{const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(d.fromAffine)}))}multiplyUnsafe(e){const r=d.ZERO;if(e===j)return r;if(a(e),e===q)return this;const{endo:i}=t;if(!i)return y.unsafeLadder(this,e);let{k1neg:o,k1:s,k2neg:c,k2:l}=i.splitScalar(e),u=r,h=r,f=this;for(;s>j||l>j;)s&q&&(u=u.add(f)),l&q&&(h=h.add(f)),f=f.double(),s>>=q,l>>=q;return o&&(u=u.negate()),c&&(h=h.negate()),h=new d(n.mul(h.px,i.beta),h.py,h.pz),u.add(h)}multiply(e){a(e);let r,i,o=e;const{endo:s}=t;if(s){const{k1neg:e,k1:t,k2neg:a,k2:c}=s.splitScalar(o);let{p:l,f:u}=this.wNAF(t),{p:h,f}=this.wNAF(c);l=y.constTimeNegate(e,l),h=y.constTimeNegate(a,h),h=new d(n.mul(h.px,s.beta),h.py,h.pz),r=l.add(h),i=u.add(f)}else{const{p:e,f:t}=this.wNAF(o);r=e,i=t}return d.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(e,t,n){const r=d.BASE,i=(e,t)=>t!==j&&t!==q&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,n));return o.is0()?void 0:o}toAffine(e){const{px:t,py:r,pz:i}=this,o=this.is0();null==e&&(e=o?n.ONE:n.inv(i));const s=n.mul(t,e),a=n.mul(r,e),c=n.mul(i,e);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===q)return!0;if(n)return n(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===q?this:n?n(d,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),r(d,this,e)}toHex(e=!0){return u(this.toRawBytes(e))}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const p=t.nBitLength,y=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,i=t;for(;n>D;)n&$&&(r=r.add(i)),i=i.double(),n>>=$;return r},precomputeWindow(e,t){const{windows:n,windowSize:i}=r(t),o=[];let s=e,a=s;for(let e=0;e<n;e++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(t,i,o){const{windows:s,windowSize:a}=r(t);let c=e.ZERO,l=e.BASE;const u=BigInt(2**t-1),h=2**t,d=BigInt(t);for(let e=0;e<s;e++){const t=e*a;let r=Number(o&u);o>>=d,r>a&&(r-=h,o+=$);const s=t,f=t+Math.abs(r)-1,p=e%2!=0,y=r<0;0===r?l=l.add(n(p,i[s])):c=c.add(n(y,i[f]))}return{p:c,f:l}},wNAFCached(e,t,n,r){const i=e._WINDOW_SIZE||1;let o=t.get(e);return o||(o=this.precomputeWindow(e,i),1!==i&&t.set(e,r(o))),this.wNAF(i,o,n)}}}(d,t.endo?Math.ceil(p/2):p);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}({...t,toBytes(e,t,r){const i=t.toAffine(),o=n.toBytes(i.x),s=b;return r?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,n.toBytes(i.y))},fromBytes(e){const t=e.length,r=e[0],s=e.subarray(1);if(t!==i||2!==r&&3!==r){if(t===o&&4===r)return{x:n.fromBytes(s.subarray(0,n.BYTES)),y:n.fromBytes(s.subarray(n.BYTES,2*n.BYTES))};throw new Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const e=f(s);if(!(j<(a=e)&&a<n.ORDER))throw new Error("Point is not on curve");const t=h(e);let i=n.sqrt(t);return 1==(1&r)!=((i&q)===q)&&(i=n.neg(i)),{x:e,y:i}}var a}}),v=e=>u(y(e,t.nByteLength));function E(e){return e>r>>q}const _=(e,t,n)=>f(e.slice(t,n));class A{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=w("compactSignature",e,2*n),new A(_(e,0,n),_(e,n,2*n))}static fromDER(e){const{r:t,s:n}=K.toSig(w("DER",e));return new A(t,n)}assertValidity(){if(!g(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!g(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new A(this.r,this.s,e)}recoverPublicKey(e){const{r,s:i,recovery:o}=this,l=N(w("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const u=2===o||3===o?r+t.n:r;if(u>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=0==(1&o)?"02":"03",d=c.fromHex(h+v(u)),f=a(u),p=s(-l*f),y=s(i*f),g=c.BASE.multiplyAndAddUnsafe(d,p,y);if(!g)throw new Error("point at infinify");return g.assertValidity(),g}hasHighS(){return E(this.s)}normalizeS(){return this.hasHighS()?new A(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return d(this.toDERHex())}toDERHex(){return K.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return d(this.toCompactHex())}toCompactHex(){return v(this.r)+v(this.s)}}const B={isValidPrivateKey(e){try{return l(e),!0}catch(e){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>y(function(e,t,n=!1){const r=(e=w("privateHash",e)).length,i=F(t).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);return I(n?p(e):f(e),t-S)+S}(t.randomBytes(n.BYTES+8),r),t.nByteLength),precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function C(e){const t=e instanceof Uint8Array,n="string"==typeof e,r=(t||n)&&e.length;return t?r===i||r===o:n?r===2*i||r===2*o:e instanceof c}const R=t.bits2int||function(e){const n=f(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},N=t.bits2int_modN||function(e){return s(R(e))},U=m(t.nBitLength);function T(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(j<=e&&e<U))throw new Error(`bigint expected < 2^${t.nBitLength}`);return y(e,t.nByteLength)}const P={lowS:t.lowS,prehash:!1},L={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(C(e))throw new Error("first arg must be private key");if(!C(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(l(e)).toRawBytes(n)},sign:function(e,r,i=P){const{seed:o,k2sig:u}=function(e,r,i=P){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:u}=t;let{lowS:h,prehash:d,extraEntropy:f}=i;null==h&&(h=!0),e=w("msgHash",e),d&&(e=w("prehashed msgHash",o(e)));const p=N(e),y=l(r),m=[T(y),T(p)];if(null!=f){const e=!0===f?u(n.BYTES):f;m.push(w("extraEntropy",e,n.BYTES))}const v=b(...m),k=p;return{seed:v,k2sig:function(e){const t=R(e);if(!g(t))return;const n=a(t),r=c.BASE.multiply(t).toAffine(),i=s(r.x);if(i===j)return;const o=s(n*s(k+i*y));if(o===j)return;let l=(r.x===i?0:2)|Number(r.y&q),u=o;return h&&E(o)&&(u=function(e){return E(e)?s(-e):e}(o),l^=1),new A(i,u,l)}}}(e,r,i),h=t;return k(h.hash.outputLen,h.nByteLength,h.hmac)(o,u)},verify:function(e,n,r,i=L){const o=e;if(n=w("msgHash",n),r=w("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:l,prehash:u}=i;let h,d;try{if("string"==typeof o||o instanceof Uint8Array)try{h=A.fromDER(o)}catch(e){if(!(e instanceof K.Err))throw e;h=A.fromCompact(o)}else{if("object"!=typeof o||"bigint"!=typeof o.r||"bigint"!=typeof o.s)throw new Error("PARSE");{const{r:e,s:t}=o;h=new A(e,t)}}d=c.fromHex(r)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(l&&h.hasHighS())return!1;u&&(n=t.hash(n));const{r:f,s:p}=h,y=N(n),g=a(p),b=s(y*g),m=s(f*g),v=c.BASE.multiplyAndAddUnsafe(d,b,m)?.toAffine();return!!v&&s(v.x)===f},ProjectivePoint:c,Signature:A,utils:B}}BigInt(4);var Z=n(9905);function G(e){return{hash:e,hmac:(t,...n)=>(0,Z.b)(e,t,(0,o.eV)(...n)),randomBytes:o.O6}}const J=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Y=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),X=BigInt(1),Q=BigInt(2),ee=(e,t)=>(e+t/Q)/t;function te(e){const t=J,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),l=e*e*e%t,u=l*l*e%t,h=P(u,n,t)*u%t,d=P(h,n,t)*u%t,f=P(d,Q,t)*l%t,p=P(f,i,t)*f%t,y=P(p,o,t)*p%t,g=P(y,a,t)*y%t,w=P(g,c,t)*g%t,b=P(w,a,t)*y%t,m=P(b,n,t)*u%t,v=P(m,s,t)*p%t,E=P(v,r,t)*l%t,k=P(E,Q,t);if(!ne.eql(ne.sqr(k),e))throw new Error("Cannot find square root");return k}const ne=function(e,t,n=!1,r={}){if(e<=A)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:o}=F(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=function(e){if(e%R===C){const t=(e+S)/R;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%U===N){const t=(e-N)/U;return function(e,n){const r=e.mul(n,B),i=e.pow(r,t),o=e.mul(n,i),s=e.mul(e.mul(o,B),i),a=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-S)/B;let n,r,i;for(n=e-S,r=0;n%B===A;n/=B,r++);for(i=B;i<e&&T(i,t,e)!==e-S;i++);if(1===r){const t=(e+S)/R;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const o=(n+S)/B;return function(e,s){if(e.pow(s,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=r,c=e.pow(e.mul(e.ONE,i),n),l=e.pow(s,o),u=e.pow(s,n);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(u);t<a&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const n=e.pow(c,S<<BigInt(a-t-1));c=e.sqr(n),l=e.mul(l,n),u=e.mul(u,c),a=t}return l}}(e)}(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:m(i),ZERO:A,ONE:S,create:t=>I(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return A<=t&&t<e},is0:e=>e===A,isOdd:e=>(e&S)===S,neg:t=>I(-t,e),eql:(e,t)=>e===t,sqr:t=>I(t*t,e),add:(t,n)=>I(t+n,e),sub:(t,n)=>I(t-n,e),mul:(t,n)=>I(t*n,e),pow:(e,t)=>function(e,t,n){if(n<A)throw new Error("Expected power > 0");if(n===A)return e.ONE;if(n===S)return t;let r=e.ONE,i=t;for(;n>A;)n&S&&(r=e.mul(r,i)),i=e.sqr(i),n>>=S;return r}(a,e,t),div:(t,n)=>I(t*O(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>O(t,e),sqrt:r.sqrt||(e=>s(a,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce(((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r))),e.ONE),i=e.inv(r);return t.reduceRight(((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r))),i),n}(a,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?g(e,o):y(e,o),fromBytes:e=>{if(e.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${e.length}`);return n?p(e):f(e)}});return Object.freeze(a)}(J,void 0,void 0,{sqrt:te}),re=function(e,t){const n=t=>V({...e,...G(t)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:ne,n:Y,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Y,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-X*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),a=ee(o*e,t),c=ee(-r*e,t);let l=I(e-a*n-c*i,t),u=I(-a*r-c*o,t);const h=l>s,d=u>s;if(h&&(l=t-l),d&&(u=t-u),l>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:l,k2neg:d,k2:u}}}},i.J),ie=BigInt(0),oe=e=>"bigint"==typeof e&&ie<e&&e<J,se=e=>"bigint"==typeof e&&ie<e&&e<Y,ae={};function ce(e,...t){let n=ae[e];if(void 0===n){const t=(0,i.J)(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=b(t,t),ae[e]=n}return(0,i.J)(b(n,...t))}const le=e=>e.toRawBytes(!0).slice(1),ue=e=>y(e,32),he=e=>I(e,J),de=e=>I(e,Y),fe=re.ProjectivePoint,pe=(e,t,n)=>fe.BASE.multiplyAndAddUnsafe(e,t,n);function ye(e){let t=re.utils.normPrivateKeyToScalar(e),n=fe.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:de(-t),bytes:le(n)}}function ge(e){if(!oe(e))throw new Error("bad x: need 0 < x < p");const t=he(e*e);let n=te(he(t*e+BigInt(7)));n%Q!==ie&&(n=he(-n));const r=new fe(e,n,X);return r.assertValidity(),r}function we(...e){return de(f(ce("BIP0340/challenge",...e)))}function be(e){return ye(e).bytes}function me(e,t,n=(0,o.O6)(32)){const r=w("message",e),{bytes:i,scalar:s}=ye(t),a=w("auxRand",n,32),c=ue(s^f(ce("BIP0340/aux",a))),l=ce("BIP0340/nonce",c,i,r),u=de(f(l));if(u===ie)throw new Error("sign failed: k is zero");const{bytes:h,scalar:d}=ye(u),p=we(h,i,r),y=new Uint8Array(64);if(y.set(h,0),y.set(ue(de(d+p*s)),32),!ve(y,r,i))throw new Error("sign: Invalid signature produced");return y}function ve(e,t,n){const r=w("signature",e,64),i=w("message",t),o=w("publicKey",n,32);try{const e=ge(f(o)),t=f(r.subarray(0,32));if(!oe(t))return!1;const n=f(r.subarray(32,64));if(!se(n))return!1;const s=we(ue(t),le(e),i),a=pe(e,n,de(-s));return!(!a||!a.hasEvenY()||a.toAffine().x!==t)}catch(e){return!1}}const Ee=(()=>({getPublicKey:be,sign:me,verify:ve,utils:{randomPrivateKey:re.utils.randomPrivateKey,lift_x:ge,pointToBytes:le,numberToBytesBE:y,bytesToNumberBE:f,taggedHash:ce,mod:I}}))();var ke=n(7410);const _e="abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n");var xe=n(3527);var Ae=n(3313);const Se=BigInt(2**32-1),Be=BigInt(32);function Ce(e,t=!1){return t?{h:Number(e&Se),l:Number(e>>Be&Se)}:{h:0|Number(e>>Be&Se),l:0|Number(e&Se)}}const Re=function(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=Ce(e[i],t);[n[i],r[i]]=[o,s]}return[n,r]},Ne=(e,t,n)=>e>>>n,Ue=(e,t,n)=>e<<32-n|t>>>n,Ie=(e,t,n)=>e>>>n|t<<32-n,Te=(e,t,n)=>e<<32-n|t>>>n,Pe=(e,t,n)=>e<<64-n|t>>>n-32,Oe=(e,t,n)=>e>>>n-32|t<<64-n,Le=function(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:0|i}},Fe=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),De=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,$e=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),Me=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,ze=(e,t,n,r,i,o)=>t+n+r+i+o+(e/2**32|0)|0,He=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),[Ke,je]=Re(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),qe=new Uint32Array(80),We=new Uint32Array(80);class Ve extends Ae.N{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:i,Cl:o,Dh:s,Dl:a,Eh:c,El:l,Fh:u,Fl:h,Gh:d,Gl:f,Hh:p,Hl:y}=this;return[e,t,n,r,i,o,s,a,c,l,u,h,d,f,p,y]}set(e,t,n,r,i,o,s,a,c,l,u,h,d,f,p,y){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|y}process(e,t){for(let n=0;n<16;n++,t+=4)qe[n]=e.getUint32(t),We[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|qe[e-15],n=0|We[e-15],r=Ie(t,n,1)^Ie(t,n,8)^Ne(t,n,7),i=Te(t,n,1)^Te(t,n,8)^Ue(t,n,7),o=0|qe[e-2],s=0|We[e-2],a=Ie(o,s,19)^Pe(o,s,61)^Ne(o,s,6),c=Te(o,s,19)^Oe(o,s,61)^Ue(o,s,6),l=$e(i,c,We[e-7],We[e-16]),u=Me(l,r,a,qe[e-7],qe[e-16]);qe[e]=0|u,We[e]=0|l}let{Ah:n,Al:r,Bh:i,Bl:o,Ch:s,Cl:a,Dh:c,Dl:l,Eh:u,El:h,Fh:d,Fl:f,Gh:p,Gl:y,Hh:g,Hl:w}=this;for(let e=0;e<80;e++){const t=Ie(u,h,14)^Ie(u,h,18)^Pe(u,h,41),b=Te(u,h,14)^Te(u,h,18)^Oe(u,h,41),m=u&d^~u&p,v=He(w,b,h&f^~h&y,je[e],We[e]),E=ze(v,g,t,m,Ke[e],qe[e]),k=0|v,_=Ie(n,r,28)^Pe(n,r,34)^Pe(n,r,39),x=Te(n,r,28)^Oe(n,r,34)^Oe(n,r,39),A=n&i^n&s^i&s,S=r&o^r&a^o&a;g=0|p,w=0|y,p=0|d,y=0|f,d=0|u,f=0|h,({h:u,l:h}=Le(0|c,0|l,0|E,0|k)),c=0|s,l=0|a,s=0|i,a=0|o,i=0|n,o=0|r;const B=Fe(k,x,S);n=De(B,E,_,A),r=0|B}({h:n,l:r}=Le(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:o}=Le(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=Le(0|this.Ch,0|this.Cl,0|s,0|a)),({h:c,l}=Le(0|this.Dh,0|this.Dl,0|c,0|l)),({h:u,l:h}=Le(0|this.Eh,0|this.El,0|u,0|h)),({h:d,l:f}=Le(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:y}=Le(0|this.Gh,0|this.Gl,0|p,0|y)),({h:g,l:w}=Le(0|this.Hh,0|this.Hl,0|g,0|w)),this.set(n,r,i,o,s,a,c,l,u,h,d,f,p,y,g,w)}roundClean(){qe.fill(0),We.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Ze extends Ve{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class Ge extends Ve{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Je extends Ve{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Ye=(0,o.hE)((()=>new Ve)),Xe=((0,o.hE)((()=>new Ze)),(0,o.hE)((()=>new Ge)),(0,o.hE)((()=>new Je)),e=>""===e[0]);function Qe(e){if("string"!=typeof e)throw new TypeError("Invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function et(e){const t=Qe(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function tt(e){xe.ZP.bytes(e,16,20,24,28,32)}const nt=e=>{const t=8-e.length/4;return new Uint8Array([(0,i.J)(e)[0]>>t<<t])};function rt(e){if(!Array.isArray(e)||2048!==e.length||"string"!=typeof e[0])throw new Error("Worlist: expected array of 2048 strings");return e.forEach((e=>{if("string"!=typeof e)throw new Error(`Wordlist: non-string element: ${e}`)})),ke.P6.chain(ke.P6.checksum(1,nt),ke.P6.radix2(11,!0),ke.P6.alphabet(e))}const it=e=>Qe(`mnemonic${e}`);function ot(e,t=""){return function(e,t,n,r){const{c:i,dkLen:s,DK:a,PRF:c,PRFSalt:l}=function(e,t,n,r){xe.ZP.hash(e);const i=(0,o.U5)({dkLen:32,asyncTick:10},r),{c:s,dkLen:a,asyncTick:c}=i;if(xe.ZP.number(s),xe.ZP.number(a),xe.ZP.number(c),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=(0,o.O0)(t),u=(0,o.O0)(n),h=new Uint8Array(a),d=Z.b.create(e,l),f=d._cloneInto().update(u);return{c:s,dkLen:a,asyncTick:c,DK:h,PRF:d,PRFSalt:f}}(e,t,n,{c:2048,dkLen:64});let u;const h=new Uint8Array(4),d=(0,o.GL)(h),f=new Uint8Array(c.outputLen);for(let e=1,t=0;t<s;e++,t+=c.outputLen){const n=a.subarray(t,t+c.outputLen);d.setInt32(0,e,!1),(u=l._cloneInto(u)).update(h).digestInto(f),n.set(f.subarray(0,n.length));for(let e=1;e<i;e++){c._cloneInto(u).update(f).digestInto(f);for(let e=0;e<n.length;e++)n[e]^=f[e]}}return function(e,t,n,r,i){return e.destroy(),t.destroy(),r&&r.destroy(),i.fill(0),n}(c,l,a,u,f)}(Ye,et(e).nfkd,it(t))}const st=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),at=Uint8Array.from({length:16},((e,t)=>t)),ct=at.map((e=>(9*e+5)%16));let lt=[at],ut=[ct];for(let e=0;e<4;e++)for(let t of[lt,ut])t.push(t[e].map((e=>st[e])));const ht=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),dt=lt.map(((e,t)=>e.map((e=>ht[t][e])))),ft=ut.map(((e,t)=>e.map((e=>ht[t][e])))),pt=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),yt=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),gt=(e,t)=>e<<t|e>>>32-t;function wt(e,t,n,r){return 0===e?t^n^r:1===e?t&n|~t&r:2===e?(t|~n)^r:3===e?t&r|n&~r:t^(n|~r)}const bt=new Uint32Array(16);class mt extends Ae.N{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:r,h4:i}=this;return[e,t,n,r,i]}set(e,t,n,r,i){this.h0=0|e,this.h1=0|t,this.h2=0|n,this.h3=0|r,this.h4=0|i}process(e,t){for(let n=0;n<16;n++,t+=4)bt[n]=e.getUint32(t,!0);let n=0|this.h0,r=n,i=0|this.h1,o=i,s=0|this.h2,a=s,c=0|this.h3,l=c,u=0|this.h4,h=u;for(let e=0;e<5;e++){const t=4-e,d=pt[e],f=yt[e],p=lt[e],y=ut[e],g=dt[e],w=ft[e];for(let t=0;t<16;t++){const r=gt(n+wt(e,i,s,c)+bt[p[t]]+d,g[t])+u|0;n=u,u=c,c=0|gt(s,10),s=i,i=r}for(let e=0;e<16;e++){const n=gt(r+wt(t,o,a,l)+bt[y[e]]+f,w[e])+h|0;r=h,h=l,l=0|gt(a,10),a=o,o=n}}this.set(this.h1+s+l|0,this.h2+c+h|0,this.h3+u+r|0,this.h4+n+o|0,this.h0+i+a|0)}roundClean(){bt.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const vt=(0,o.hE)((()=>new mt)),Et=re.ProjectivePoint,kt=(0,ke.Av)(i.J);function _t(e){return BigInt(`0x${(0,o.ci)(e)}`)}const xt=(0,o.iY)("Bitcoin seed"),At={private:76066276,public:76067358},St=2147483648,Bt=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const t=new Uint8Array(4);return(0,o.GL)(t).setUint32(0,e,!1),t};class Ct{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return e=this.pubHash,(0,o.GL)(e).getUint32(0,!1);var e}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const e=this.privateKey;if(!e)throw new Error("No private key");return kt.encode(this.serialize(this.versions.private,(0,o.eV)(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return kt.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,t=At){if((0,xe.aI)(e),8*e.length<128||8*e.length>512)throw new Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=(0,Z.b)(Ye,xt,e);return new Ct({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(e,t=At){const n=kt.decode(e),r=(0,o.GL)(n),i=r.getUint32(0,!1),s={versions:t,depth:n[4],parentFingerprint:r.getUint32(5,!1),index:r.getUint32(9,!1),chainCode:n.slice(13,45)},a=n.slice(45),c=0===a[0];if(i!==t[c?"private":"public"])throw new Error("Version mismatch");return new Ct(c?{...s,privateKey:a.slice(1)}:{...s,publicKey:a})}static fromJSON(e){return Ct.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||"object"!=typeof e)throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||At,this.depth=e.depth||0,this.chainCode=e.chainCode,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!re.utils.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey="bigint"==typeof e.privateKey?e.privateKey:_t(e.privateKey),this.privKeyBytes=(t=this.privKey,(0,o.nr)(t.toString(16).padStart(64,"0"))),this.pubKey=re.getPublicKey(e.privateKey,!0)}else{if(!e.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=Et.fromHex(e.publicKey).toRawBytes(!0)}var t,n;this.pubHash=(n=this.pubKey,vt((0,i.J)(n)))}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const t=e.replace(/^[mM]'?\//,"").split("/");let n=this;for(const e of t){const t=/^(\d+)('?)$/.exec(e);if(!t||3!==t.length)throw new Error(`Invalid child index: ${e}`);let r=+t[1];if(!Number.isSafeInteger(r)||r>=St)throw new Error("Invalid index");"'"===t[2]&&(r+=St),n=n.deriveChild(r)}return n}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=Bt(e);if(e>=St){const e=this.privateKey;if(!e)throw new Error("Could not derive hardened child key");t=(0,o.eV)(new Uint8Array([0]),e,t)}else t=(0,o.eV)(this.pubKey,t);const n=(0,Z.b)(Ye,this.chainCode,t),r=_t(n.slice(0,32)),i=n.slice(32);if(!re.utils.isValidPrivateKey(r))throw new Error("Tweak bigger than curve order");const s={versions:this.versions,chainCode:i,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){const e=I(this.privKey+r,re.CURVE.n);if(!re.utils.isValidPrivateKey(e))throw new Error("The tweak was out of range or the resulted private key is invalid");s.privateKey=e}else{const e=Et.fromHex(this.pubKey).add(Et.fromPrivateKey(r));if(e.equals(Et.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");s.publicKey=e.toRawBytes(!0)}return new Ct(s)}catch(t){return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return(0,xe.aI)(e,32),re.sign(e,this.privKey).toCompactRawBytes()}verify(e,t){if((0,xe.aI)(e,32),(0,xe.aI)(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=re.Signature.fromCompact(t)}catch(e){return!1}return re.verify(n,e,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,t){if(!this.chainCode)throw new Error("No chainCode set");return(0,xe.aI)(t,33),(0,o.eV)(Bt(e),new Uint8Array([this.depth]),Bt(this.parentFingerprint),Bt(this.index),this.chainCode,t)}}var Rt=n(282),Nt=n(4207),Ut=n(7518),It=Object.defineProperty,Tt=(e,t)=>{for(var n in t)It(e,n,{get:t[n],enumerable:!0})};function Pt(e){return(0,o.ci)(Ee.getPublicKey(e))}Tt({},{MessageNode:()=>Mt,MessageQueue:()=>zt,insertEventIntoAscendingList:()=>$t,insertEventIntoDescendingList:()=>Dt,normalizeURL:()=>Ft,utf8Decoder:()=>Ot,utf8Encoder:()=>Lt});var Ot=new TextDecoder("utf-8"),Lt=new TextEncoder;function Ft(e){let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),("80"===t.port&&"ws:"===t.protocol||"443"===t.port&&"wss:"===t.protocol)&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function Dt(e,t){let n,r=0,i=e.length-1,o=r;if(i<0)o=0;else if(t.created_at<e[i].created_at)o=i+1;else if(t.created_at>=e[r].created_at)o=r;else for(;;){if(i<=r+1){o=i;break}if(n=Math.floor(r+(i-r)/2),e[n].created_at>t.created_at)r=n;else{if(!(e[n].created_at<t.created_at)){o=n;break}i=n}}return e[o]?.id!==t.id?[...e.slice(0,o),t,...e.slice(o)]:e}function $t(e,t){let n,r=0,i=e.length-1,o=r;if(i<0)o=0;else if(t.created_at>e[i].created_at)o=i+1;else if(t.created_at<=e[r].created_at)o=r;else for(;;){if(i<=r+1){o=i;break}if(n=Math.floor(r+(i-r)/2),e[n].created_at<t.created_at)r=n;else{if(!(e[n].created_at>t.created_at)){o=n;break}i=n}}return e[o]?.id!==t.id?[...e.slice(0,o),t,...e.slice(o)]:e}var Mt=class{_value;_next;get value(){return this._value}set value(e){this._value=e}get next(){return this._next}set next(e){this._next=e}constructor(e){this._value=e,this._next=null}},zt=class{_first;_last;get first(){return this._first}set first(e){this._first=e}get last(){return this._last}set last(e){this._last=e}_size;get size(){return this._size}set size(e){this._size=e}constructor(){this._first=null,this._last=null,this._size=0}enqueue(e){const t=new Mt(e);return 0!==this._size&&this._last?(this._last.next=t,this._last=t):(this._first=t,this._last=t),this._size++,!0}dequeue(){if(0===this._size||!this._first)return null;let e=this._first;return this._first=e.next,e.next=null,this._size--,e.value}},Ht=Symbol("verified");function Kt(e,t){const n=e;return n.pubkey=Pt(t),n.id=jt(n),n.sig=Zt(n,t),n[Ht]=!0,n}function jt(e){let t=(0,i.J)(Lt.encode(function(e){if(!Wt(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}(e)));return(0,o.ci)(t)}var qt=e=>e instanceof Object;function Wt(e){if(!qt(e))return!1;if("number"!=typeof e.kind)return!1;if("string"!=typeof e.content)return!1;if("number"!=typeof e.created_at)return!1;if("string"!=typeof e.pubkey)return!1;if(!e.pubkey.match(/^[a-f0-9]{64}$/))return!1;if(!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let e=0;e<n.length;e++)if("object"==typeof n[e])return!1}return!0}function Vt(e){if("boolean"==typeof e[Ht])return e[Ht];const t=jt(e);if(t!==e.id)return e[Ht]=!1;try{return e[Ht]=Ee.verify(e.sig,t,e.pubkey)}catch(t){return e[Ht]=!1}}function Zt(e,t){return(0,o.ci)(Ee.sign(jt(e),t))}function Gt(e,t){if(e.ids&&-1===e.ids.indexOf(t.id)&&!e.ids.some((e=>t.id.startsWith(e))))return!1;if(e.kinds&&-1===e.kinds.indexOf(t.kind))return!1;if(e.authors&&-1===e.authors.indexOf(t.pubkey)&&!e.authors.some((e=>t.pubkey.startsWith(e))))return!1;for(let n in e)if("#"===n[0]){let r=e[`#${n.slice(1)}`];if(r&&!t.tags.find((([e,t])=>e===n.slice(1)&&-1!==r.indexOf(t))))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function Jt(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,i=e.slice(r).indexOf('"')+r+1;return e.slice(i,i+64)}function Yt(e,t){let n=t.length,r=e.indexOf(`"${t}":`)+n+3,i=e.slice(r),o=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,o),10)}function Xt(e){let t=e.slice(0,22).indexOf('"EVENT"');if(-1===t)return null;let n=e.slice(t+7+1).indexOf('"');if(-1===n)return null;let r=t+7+1+n,i=e.slice(r+1,80).indexOf('"');if(-1===i)return null;let o=r+1+i;return e.slice(r+1,o)}function Qt(e,t){return t===Jt(e,"id")}function en(e,t){return t===Jt(e,"pubkey")}function tn(e,t){return t===Yt(e,"kind")}function nn(e,t={}){let{listTimeout:n=3e3,getTimeout:r=3e3,countTimeout:i=3e3}=t;var o,s,a={},c={connect:[],disconnect:[],error:[],notice:[],auth:[]},l={},u={};function h(){return 1===o?.readyState}async function d(e){let t=JSON.stringify(e);if(h()||(await new Promise((e=>setTimeout(e,1e3))),h()))try{o.send(t)}catch(e){console.log(e)}}const f=(e,{verb:t="REQ",skipVerification:n=!1,alreadyHaveEvent:r=null,id:i=Math.random().toString().slice(2)}={})=>{let o=i;a[o]={id:o,filters:e,skipVerification:n,alreadyHaveEvent:r},d([t,o,...e]);let s={sub:(t,i={})=>f(t||e,{skipVerification:i.skipVerification||n,alreadyHaveEvent:i.alreadyHaveEvent||r,id:o}),unsub:()=>{delete a[o],delete l[o],d(["CLOSE",o])},on:(e,t)=>{l[o]=l[o]||{event:[],count:[],eose:[]},l[o][e].push(t)},off:(e,t)=>{let n=l[o],r=n[e].indexOf(t);r>=0&&n[e].splice(r,1)},get events(){return async function*(e){let t;const n=[],r=e=>{t?(t(e),t=void 0):n.push(e)};e.on("event",r);try{for(;;)if(n.length>0)yield n.shift();else{const e=await new Promise((e=>{t=e}));yield e}}finally{e.off("event",r)}}(s)}};return s};function p(e,t){return new Promise(((n,r)=>{if(!e.id)return void r(new Error(`event ${e} has no id`));let i=e.id;d([t,e]),u[i]={resolve:n,reject:r}}))}return{url:e,sub:f,on:(e,t)=>{c[e].push(t),"connect"===e&&1===o?.readyState&&t()},off:(e,t)=>{let n=c[e].indexOf(t);-1!==n&&c[e].splice(n,1)},list:(e,t)=>new Promise((r=>{let i=f(e,t),o=[],s=setTimeout((()=>{i.unsub(),r(o)}),n);i.on("eose",(()=>{i.unsub(),clearTimeout(s),r(o)})),i.on("event",(e=>{o.push(e)}))})),get:(e,t)=>new Promise((n=>{let i=f([e],t),o=setTimeout((()=>{i.unsub(),n(null)}),r);i.on("event",(e=>{i.unsub(),clearTimeout(o),n(e)}))})),count:e=>new Promise((t=>{let n=f(e,{...f,verb:"COUNT"}),r=setTimeout((()=>{n.unsub(),t(null)}),i);n.on("count",(e=>{n.unsub(),clearTimeout(r),t(e)}))})),async publish(e){await p(e,"EVENT")},async auth(e){await p(e,"AUTH")},connect:async function(){h()||await async function(){return s||(s=new Promise(((t,n)=>{try{o=new WebSocket(e)}catch(e){n(e)}o.onopen=()=>{c.connect.forEach((e=>e())),t()},o.onerror=()=>{s=void 0,c.error.forEach((e=>e())),n()},o.onclose=async()=>{s=void 0,c.disconnect.forEach((e=>e()))};let r,i=new zt;function h(){if(0===i.size)return clearInterval(r),void(r=null);var t=i.dequeue();if(!t)return;let n=Xt(t);if(n){let r=a[n];if(r&&r.alreadyHaveEvent&&r.alreadyHaveEvent(Jt(t,"id"),e))return}try{let e=JSON.parse(t);switch(e[0]){case"EVENT":{let t=e[1],n=e[2];return void(Wt(n)&&a[t]&&(a[t].skipVerification||Vt(n))&&function(e,t){for(let n=0;n<e.length;n++)if(Gt(e[n],t))return!0;return!1}(a[t].filters,n)&&(a[t],(l[t]?.event||[]).forEach((e=>e(n)))))}case"COUNT":let t=e[1],n=e[2];return void(a[t]&&(l[t]?.count||[]).forEach((e=>e(n))));case"EOSE":{let t=e[1];return void(t in l&&(l[t].eose.forEach((e=>e())),l[t].eose=[]))}case"OK":{let t=e[1],n=e[2],r=e[3]||"";if(t in u){let{resolve:e,reject:i}=u[t];n?e(null):i(new Error(r))}return}case"NOTICE":let r=e[1];return void c.notice.forEach((e=>e(r)));case"AUTH":{let t=e[1];return void c.auth?.forEach((e=>e(t)))}}}catch(e){return}}o.onmessage=e=>{i.enqueue(e.data),r||(r=setInterval(h,0))}})),s)}()},close(){c={connect:[],disconnect:[],error:[],notice:[],auth:[]},l={},u={},o?.readyState===WebSocket.OPEN&&o.close()},get status(){return o?.readyState??3}}}Tt({},{getHex64:()=>Jt,getInt:()=>Yt,getSubscriptionId:()=>Xt,matchEventId:()=>Qt,matchEventKind:()=>tn,matchEventPubkey:()=>en});var rn={};Tt(rn,{BECH32_REGEX:()=>sn,decode:()=>an,naddrEncode:()=>gn,neventEncode:()=>yn,noteEncode:()=>hn,nprofileEncode:()=>pn,npubEncode:()=>un,nrelayEncode:()=>wn,nsecEncode:()=>ln});var on=5e3,sn=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function an(e){let{prefix:t,words:n}=ke.gW.decode(e,on),r=new Uint8Array(ke.gW.fromWords(n));switch(t){case"nprofile":{let e=cn(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:(0,o.ci)(e[0][0]),relays:e[1]?e[1].map((e=>Ot.decode(e))):[]}}}case"nevent":{let e=cn(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nevent");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");if(e[2]&&32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(e[3]&&4!==e[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:(0,o.ci)(e[0][0]),relays:e[1]?e[1].map((e=>Ot.decode(e))):[],author:e[2]?.[0]?(0,o.ci)(e[2][0]):void 0,kind:e[3]?.[0]?parseInt((0,o.ci)(e[3][0]),16):void 0}}}case"naddr":{let e=cn(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!e[2]?.[0])throw new Error("missing TLV 2 for naddr");if(32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(!e[3]?.[0])throw new Error("missing TLV 3 for naddr");if(4!==e[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Ot.decode(e[0][0]),pubkey:(0,o.ci)(e[2][0]),kind:parseInt((0,o.ci)(e[3][0]),16),relays:e[1]?e[1].map((e=>Ot.decode(e))):[]}}}case"nrelay":{let e=cn(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Ot.decode(e[0][0])}}case"nsec":case"npub":case"note":return{type:t,data:(0,o.ci)(r)};default:throw new Error(`unknown prefix ${t}`)}}function cn(e){let t={},n=e;for(;n.length>0;){let e=n[0],r=n[1];if(!r)throw new Error(`malformed TLV ${e}`);let i=n.slice(2,2+r);if(n=n.slice(2+r),i.length<r)throw new Error(`not enough data to read on TLV ${e}`);t[e]=t[e]||[],t[e].push(i)}return t}function ln(e){return fn("nsec",e)}function un(e){return fn("npub",e)}function hn(e){return fn("note",e)}function dn(e,t){let n=ke.gW.toWords(t);return ke.gW.encode(e,n,on)}function fn(e,t){return dn(e,(0,o.nr)(t))}function pn(e){return dn("nprofile",bn({0:[(0,o.nr)(e.pubkey)],1:(e.relays||[]).map((e=>Lt.encode(e)))}))}function yn(e){let t;return null!=e.kind&&(t=function(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=255&e,t}(e.kind)),dn("nevent",bn({0:[(0,o.nr)(e.id)],1:(e.relays||[]).map((e=>Lt.encode(e))),2:e.author?[(0,o.nr)(e.author)]:[],3:t?[new Uint8Array(t)]:[]}))}function gn(e){let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e.kind,!1),dn("naddr",bn({0:[Lt.encode(e.identifier)],1:(e.relays||[]).map((e=>Lt.encode(e))),2:[(0,o.nr)(e.pubkey)],3:[new Uint8Array(t)]}))}function wn(e){return dn("nrelay",bn({0:[Lt.encode(e)]}))}function bn(e){let t=[];return Object.entries(e).forEach((([e,n])=>{n.forEach((n=>{let r=new Uint8Array(n.length+2);r.set([parseInt(e)],0),r.set([n.length],1),r.set(n,2),t.push(r)}))})),(0,o.eV)(...t)}var mn={};async function vn(e,t,n){const r=kn(re.getSharedSecret(e,"02"+t));let i=Uint8Array.from((0,o.O6)(16)),s=Lt.encode(n),a=await crypto.subtle.importKey("raw",r,{name:"AES-CBC"},!1,["encrypt"]),c=await crypto.subtle.encrypt({name:"AES-CBC",iv:i},a,s);return`${ke.US.encode(new Uint8Array(c))}?iv=${ke.US.encode(new Uint8Array(i.buffer))}`}async function En(e,t,n){let[r,i]=n.split("?iv="),o=kn(re.getSharedSecret(e,"02"+t)),s=await crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["decrypt"]),a=ke.US.decode(r),c=ke.US.decode(i),l=await crypto.subtle.decrypt({name:"AES-CBC",iv:c},s,a);return Ot.decode(l)}function kn(e){return e.slice(1,33)}Tt(mn,{decrypt:()=>En,encrypt:()=>vn}),"undefined"!=typeof crypto&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle),Tt({},{NIP05_REGEX:()=>xn,queryProfile:()=>Bn,searchDomain:()=>Sn,useFetchImplementation:()=>An});var _n,xn=/^(?:([\w.+-]+)@)?([\w.-]+)$/;try{_n=fetch}catch{}function An(e){_n=e}async function Sn(e,t=""){try{return(await(await _n(`https://${e}/.well-known/nostr.json?name=${t}`)).json()).names}catch(e){return{}}}async function Bn(e){const t=e.match(xn);if(!t)return null;const[n,r="_",i]=t;try{const e=await _n(`https://${i}/.well-known/nostr.json?name=${r}`),{names:t,relays:n}=function(e){const t={names:{}};for(const[n,r]of Object.entries(e.names))"string"==typeof n&&"string"==typeof r&&(t.names[n]=r);if(e.relays){t.relays={};for(const[n,r]of Object.entries(e.relays))"string"==typeof n&&Array.isArray(r)&&(t.relays[n]=r.filter((e=>"string"==typeof e)))}return t}(await e.json()),o=t[r];return o?{pubkey:o,relays:n?.[o]}:null}catch(e){return null}}function Cn(e,t){let n=Ct.fromMasterSeed(ot(e,t)).derive("m/44'/1237'/0'/0/0").privateKey;if(!n)throw new Error("could not derive private key");return(0,o.ci)(n)}function Rn(){return function(e,t=128){if(xe.ZP.number(t),t%32!=0||t>256)throw new TypeError("Invalid entropy");return function(e,t){return tt(e),rt(t).encode(e).join(Xe(t)?"":" ")}((0,o.O6)(t/8),e)}(_e)}function Nn(e){return function(e,t){try{!function(e,t){const{words:n}=et(e);tt(rt(t).decode(n))}(e,t)}catch(e){return!1}return!0}(e,_e)}function Un(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of e.tags)"e"===r[0]&&r[1]&&n.push(r),"p"===r[0]&&r[1]&&t.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let e=0;e<n.length;e++){const r=n[e],[i,o,s,a]=r,c={id:o,relays:s?[s]:[]},l=0===e,u=e===n.length-1;"root"!==a?"reply"!==a?"mention"!==a?l?t.root=c:u?t.reply=c:t.mentions.push(c):t.mentions.push(c):t.reply=c:t.root=c}return t}function In(e){let t=0;for(let n=0;n<e.length;n++){const r=parseInt(e[n],16);if(0!==r){t+=Math.clz32(r)-28;break}t+=4}return t}function Tn(e,t){let n=0;const r=e,i=["nonce",n.toString(),t.toString()];for(r.tags.push(i);;){const e=Math.floor((new Date).getTime()/1e3);if(e!==r.created_at&&(n=0,r.created_at=e),i[1]=(++n).toString(),r.id=jt(r),In(r.id)>=t)break}return r}function Pn(e,t,n,r){return Kt({kind:6,tags:[...e.tags??[],["e",t.id,n],["p",t.pubkey]],content:""===e.content?"":JSON.stringify(t),created_at:e.created_at},r)}function On(e){if(6!==e.kind)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const i=e.tags[r];i.length>=2&&("e"===i[0]&&void 0===t?t=i:"p"===i[0]&&void 0===n&&(n=i))}return void 0!==t?{id:t[1],relays:[t[2],n?.[2]].filter((e=>"string"==typeof e)),author:n?.[1]}:void 0}function Ln(e,{skipVerification:t}={}){const n=On(e);if(void 0===n||""===e.content)return;let r;try{r=JSON.parse(e.content)}catch(e){return}return r.id===n.id&&(t||Vt(r))?r:void 0}Tt({},{generateSeedWords:()=>Rn,privateKeyFromSeedWords:()=>Cn,validateWords:()=>Nn}),Tt({},{parse:()=>Un}),Tt({},{getPow:()=>In,minePow:()=>Tn}),Tt({},{finishRepostEvent:()=>Pn,getRepostedEvent:()=>Ln,getRepostedEventPointer:()=>On}),Tt({},{NOSTR_URI_REGEX:()=>Fn,parse:()=>$n,test:()=>Dn});var Fn=new RegExp(`nostr:(${sn.source})`);function Dn(e){return"string"==typeof e&&new RegExp(`^${Fn.source}$`).test(e)}function $n(e){const t=e.match(new RegExp(`^${Fn.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:an(t[1])}}function Mn(e,t,n){const r=t.tags.filter((e=>e.length>=2&&("e"===e[0]||"p"===e[0])));return Kt({...e,kind:7,tags:[...e.tags??[],...r,["e",t.id],["p",t.pubkey]],content:e.content??"+"},n)}function zn(e){if(7!==e.kind)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const i=e.tags[r];i.length>=2&&("e"===i[0]&&void 0===t?t=i:"p"===i[0]&&void 0===n&&(n=i))}return void 0!==t&&void 0!==n?{id:t[1],relays:[t[2],n[2]].filter((e=>void 0!==e)),author:n[1]}:void 0}function Hn(e,t){let n=[];(t.kind||-1)>=0&&n.push(`kind=${t.kind}`),t.until&&n.push(`created_at<${t.until}`),t.since&&n.push(`created_at>${t.since}`);let r=n.join("&");if(""===r)throw new Error("refusing to create a delegation without any conditions");let s=(0,i.J)(Lt.encode(`nostr:delegation:${t.pubkey}:${r}`)),a=(0,o.ci)(Ee.sign(s,e));return{from:Pt(e),to:t.pubkey,cond:r,sig:a}}function Kn(e){let t=e.tags.find((e=>"delegation"===e[0]&&e.length>=4));if(!t)return null;let n=t[1],r=t[2],o=t[3],s=r.split("&");for(let t=0;t<s.length;t++){let[n,r,i]=s[t].split(/\b/);if(("kind"!==n||"="!==r||e.kind!==parseInt(i))&&!("created_at"===n&&"<"===r&&e.created_at<parseInt(i)||"created_at"===n&&">"===r&&e.created_at>parseInt(i)))return null}let a=(0,i.J)(Lt.encode(`nostr:delegation:${e.pubkey}:${r}`));return Ee.verify(o,a,n)?n:null}Tt({},{finishReactionEvent:()=>Mn,getReactedEventPointer:()=>zn}),Tt({},{createDelegation:()=>Hn,getDelegator:()=>Kn}),Tt({},{matchAll:()=>qn,regex:()=>jn,replaceAll:()=>Wn});var jn=()=>new RegExp(`\\b${Fn.source}\\b`,"g");function*qn(e){const t=e.matchAll(jn());for(const e of t)try{const[t,n]=e;yield{uri:t,value:n,decoded:an(n),start:e.index,end:e.index+t.length}}catch(e){}}function Wn(e,t){return e.replaceAll(jn(),((e,n)=>t({uri:e,value:n,decoded:an(n)})))}Tt({},{channelCreateEvent:()=>Zn,channelHideMessageEvent:()=>Yn,channelMessageEvent:()=>Jn,channelMetadataEvent:()=>Gn,channelMuteUserEvent:()=>Xn});var Vn,Zn=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return Kt({kind:40,tags:[...e.tags??[]],content:n,created_at:e.created_at},t)},Gn=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return Kt({kind:41,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},Jn=(e,t)=>{const n=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&n.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),Kt({kind:42,tags:[...n,...e.tags??[]],content:e.content,created_at:e.created_at},t)},Yn=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return Kt({kind:43,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},Xn=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return Kt({kind:44,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:n,created_at:e.created_at},t)};Tt({},{useFetchImplementation:()=>Qn,validateGithub:()=>er});try{Vn=fetch}catch{}function Qn(e){Vn=e}async function er(e,t,n){try{return await(await Vn(`https://gist.github.com/${t}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch(e){return!1}}Tt({},{authenticate:()=>tr});var tr=async({challenge:e,relay:t,sign:n})=>{const r={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",t.url],["challenge",e]],content:""};return t.auth(await n(r))};Tt({},{decrypt:()=>ir,encrypt:()=>rr,utils:()=>nr});var nr={v2:{maxPlaintextSize:65408,minCiphertextSize:100,maxCiphertextSize:102400,getConversationKey:(e,t)=>re.getSharedSecret(e,"02"+t).subarray(1,33),getMessageKeys(e,t){const n=(0,Ut.Di)(i.J,e,t,"nip44-v2",76);return{encryption:n.subarray(0,32),nonce:n.subarray(32,44),auth:n.subarray(44,76)}},calcPadding(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("expected positive integer");if(e<=32)return 32;const t=1<<Math.floor(Math.log2(e-1))+1,n=t<=256?32:t/8;return n*(Math.floor((e-1)/n)+1)},pad(e){const t=Lt.encode(e),n=t.length;if(n<1||n>=nr.v2.maxPlaintextSize)throw new Error("invalid plaintext length: must be between 1b and 64KB");const r=nr.v2.calcPadding(n),i=new Uint8Array(r-n),s=new Uint8Array(2);return new DataView(s.buffer).setUint16(0,n),(0,o.eV)(s,t,i)},unpad(e){const t=new DataView(e.buffer).getUint16(0),n=e.subarray(2,2+t);if(0===t||n.length!==t||e.length!==2+nr.v2.calcPadding(t))throw new Error("invalid padding");return Ot.decode(n)}}};function rr(e,t,n={}){const r=n.version??2;if(2!==r)throw new Error("unknown encryption version "+r);const s=n.salt??(0,o.O6)(32);(0,Nt.ql)(s,32);const a=nr.v2.getMessageKeys(e,s),c=nr.v2.pad(t),l=(0,Rt.a0)(a.encryption,a.nonce,c),u=(0,Z.b)(i.J,a.auth,l);return ke.US.encode((0,o.eV)(new Uint8Array([r]),s,l,u))}function ir(e,t){const n=nr.v2;(0,Nt.ql)(e,32);const r=t.length;if(r<n.minCiphertextSize||r>=n.maxCiphertextSize)throw new Error("invalid ciphertext length: "+r);if("#"===t[0])throw new Error("unknown encryption version");let o;try{o=ke.US.decode(t)}catch(e){throw new Error("invalid base64: "+e.message)}const s=o.subarray(0,1)[0];if(2!==s)throw new Error("unknown encryption version "+s);const a=o.subarray(1,33),c=o.subarray(33,-32),l=o.subarray(-32),u=n.getMessageKeys(e,a),h=(0,Z.b)(i.J,u.auth,c);if(!(0,Nt.Wd)(h,l))throw new Error("invalid MAC");const d=(0,Rt.a0)(u.encryption,u.nonce,c);return n.unpad(d)}function or(e){const{pathname:t,searchParams:n}=new URL(e),r=t,i=n.get("relay"),o=n.get("secret");if(!r||!i||!o)throw new Error("invalid connection string");return{pubkey:r,relay:i,secret:o}}async function sr({pubkey:e,secret:t,invoice:n}){const r={method:"pay_invoice",params:{invoice:n}},i=await vn(t,e,JSON.stringify(r));return Kt({kind:23194,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e]]},t)}Tt({},{makeNwcRequestEvent:()=>sr,parseConnectionString:()=>or});var ar,cr={};Tt(cr,{getZapEndpoint:()=>ur,makeZapReceipt:()=>fr,makeZapRequest:()=>hr,useFetchImplementation:()=>lr,validateZapRequest:()=>dr});try{ar=fetch}catch{}function lr(e){ar=e}async function ur(e){try{let t="",{lud06:n,lud16:r}=JSON.parse(e.content);if(n){let{words:e}=ke.gW.decode(n,1e3),r=ke.gW.fromWords(e);t=Ot.decode(r)}else{if(!r)return null;{let[e,n]=r.split("@");t=`https://${n}/.well-known/lnurlp/${e}`}}let i=await ar(t),o=await i.json();if(o.allowsNostr&&o.nostrPubkey)return o.callback}catch(e){}return null}function hr({profile:e,event:t,amount:n,relays:r,comment:i=""}){if(!n)throw new Error("amount not given");if(!e)throw new Error("profile not given");let o={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e],["amount",n.toString()],["relays",...r]]};return t&&o.tags.push(["e",t]),o}function dr(e){let t;try{t=JSON.parse(e)}catch(e){return"Invalid zap request JSON."}if(!Wt(t))return"Zap request is not a valid Nostr event.";if(!Vt(t))return"Invalid signature on zap request.";let n=t.tags.find((([e,t])=>"p"===e&&t));if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=t.tags.find((([e,t])=>"e"===e&&t));return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find((([e,t])=>"relays"===e&&t))?null:"Zap request doesn't have a 'relays' tag."}function fr({zapRequest:e,preimage:t,bolt11:n,paidAt:r}){let i=JSON.parse(e).tags.filter((([e])=>"e"===e||"p"===e||"a"===e)),o={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...i,["bolt11",n],["description",e]]};return t&&o.tags.push(["preimage",t]),o}Tt({},{getToken:()=>yr,unpackEventFromToken:()=>wr,validateEvent:()=>br,validateToken:()=>gr});var pr="Nostr ";async function yr(e,t,n,r=!1){if(!e||!t)throw new Error("Missing loginUrl or httpMethod");const i=function(e=255){return{kind:e,content:"",tags:[],created_at:0}}(27235);i.tags=[["u",e],["method",t]],i.created_at=Math.round((new Date).getTime()/1e3);const o=await n(i);return(r?pr:"")+ke.US.encode(Lt.encode(JSON.stringify(o)))}async function gr(e,t,n){const r=await wr(e).catch((e=>{throw e}));return await br(r,t,n).catch((e=>{throw e}))}async function wr(e){if(!e)throw new Error("Missing token");e=e.replace(pr,"");const t=Ot.decode(ke.US.decode(e));if(!t||0===t.length||!t.startsWith("{"))throw new Error("Invalid token");return JSON.parse(t)}async function br(e,t,n){if(!e)throw new Error("Invalid nostr event");if(!Vt(e))throw new Error("Invalid nostr event, signature invalid");if(27235!==e.kind)throw new Error("Invalid nostr event, kind invalid");if(!e.created_at)throw new Error("Invalid nostr event, created_at invalid");if(Math.round((new Date).getTime()/1e3)-e.created_at>60)throw new Error("Invalid nostr event, expired");const r=e.tags.find((e=>"u"===e[0]));if(1!==r?.length&&r?.[1]!==t)throw new Error("Invalid nostr event, url tag invalid");const i=e.tags.find((e=>"method"===e[0]));if(1!==i?.length&&i?.[1].toLowerCase()!==n.toLowerCase())throw new Error("Invalid nostr event, method tag invalid");return!0}var mr=n(8669),vr=n(1227),Er=n(2653);function kr(e){const t={};return e.forEach((e=>{Object.entries(e).forEach((([e,n])=>{Array.isArray(n)?void 0===t[e]?t[e]=[...n]:t[e]=Array.from(new Set([...t[e],...n])):t[e]=n}))})),t}function _r(e){return!(!e.filter.ids||!function(e){const t=e.filter.ids;return!!t&&t.length===e.eventFirstSeen.size}(e))}function xr(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const[n,r]of Object.entries(e)){const e=t[n];if(!e)return!1;if(Array.isArray(r)&&Array.isArray(e)){const t=r;for(const n of e){const e=n;if(!t.includes(e))return!1}}else if(e!==r)return!1}return!0}n(2632);var Ar=/^(\d+):([0-9A-Fa-f]+)(?::(.*))?$/,Sr=class extends mr.EventEmitter{subscriptions;req;debug;constructor(e,t){super(),this.subscriptions=e,this.debug=t||this.subscriptions[0].subscription.debug.extend("grouped");for(const t of e)this.handleSubscriptionClosure(t)}addSubscription(e){this.subscriptions.push(e),this.handleSubscriptionClosure(e)}eventReceived(e){for(const t of this.subscriptions)t.eventReceived(e)}eoseReceived(e){Array.from(this.subscriptions).forEach((async t=>{t.subscription.eoseReceived(e)}))}handleSubscriptionClosure(e){e.subscription.on("close",(()=>{const t=this.subscriptions.findIndex((t=>t.subscription===e.subscription));this.subscriptions.splice(t,1),this.subscriptions.length<=0&&this.emit("close")}))}map(e){return this.subscriptions.map(e)}[Symbol.iterator](){let e=0;const t=this.subscriptions;return{next:()=>e<t.length?{value:t[e++],done:!1}:{value:null,done:!0}}}},Br=class{subscription;filters=[];ndkRelay;constructor(e,t,n){this.subscription=e,this.filters=t,this.ndkRelay=n}eventReceived(e){this.eventMatchesLocalFilter(e)&&this.subscription.eventReceived(e,this.ndkRelay,!1)}eventMatchesLocalFilter(e){const t=e.rawEvent();return this.filters.some((e=>Gt(e,t)))}},Cr=class extends mr.EventEmitter{url;scores;connectivity;subs;publisher;authPolicy;authRequired=!1;trusted=!1;complaining=!1;debug;constructor(e,t){super(),this.url=e,this.scores=new Map,this.debug=vr(`ndk:relay:${e}`),this.connectivity=new class{ndkRelay;_status;relay;connectedAt;_connectionStats={attempts:0,success:0,durations:[]};debug;constructor(e){this.ndkRelay=e,this._status=3,this.relay=nn(this.ndkRelay.url),this.debug=this.ndkRelay.debug.extend("connectivity"),this.relay.on("notice",(e=>this.handleNotice(e)))}async initiateAuth(e={limit:1}){this.debug("Initiating authentication");const t=this.relay.sub([e],{id:"auth-test"});t.on("eose",(()=>{t.unsub(),this._status=1,this.ndkRelay.emit("ready"),this.debug("Authentication not required"),t.unsub()})),this.debug("Authentication request started")}async connect(){const e=()=>{this.updateConnectionStats.connected(),this.ndkRelay.authRequired?(this._status=6,this.ndkRelay.emit("connect"),this.initiateAuth()):(this._status=1,this.ndkRelay.emit("connect"),this.ndkRelay.emit("ready"))},t=()=>{this.updateConnectionStats.disconnected(),1===this._status&&(this._status=3,this.handleReconnection()),this.ndkRelay.emit("disconnect")},n=async e=>{this.debug("Relay requested authentication",{havePolicy:!!this.ndkRelay.authPolicy}),this.ndkRelay.authPolicy?7!==this._status&&(this._status=7,await this.ndkRelay.authPolicy(this.ndkRelay,e),7===this._status&&(this.debug("Authentication policy finished"),this._status=1,this.ndkRelay.emit("ready"))):await this.ndkRelay.emit("auth",e)};try{this.updateConnectionStats.attempt(),this._status=0,this.relay.off("connect",e),this.relay.off("disconnect",t),this.relay.on("connect",e),this.relay.on("disconnect",t),this.relay.on("auth",n),await this.relay.connect()}catch(e){throw this.debug("Failed to connect",e),this._status=3,e}}disconnect(){this._status=2,this.relay.close()}get status(){return this._status}isAvailable(){return 1===this._status}isFlapping(){const e=this._connectionStats.durations;if(e.length%3!=0)return!1;const t=e.reduce(((e,t)=>e+t),0)/e.length,n=e.map((e=>Math.pow(e-t,2))).reduce(((e,t)=>e+t),0)/e.length;return Math.sqrt(n)<1e3}async handleNotice(e){(e.includes("oo many")||e.includes("aximum"))&&(this.disconnect(),setTimeout((()=>this.connect()),2e3),this.debug(this.relay.url,"Relay complaining?",e)),this.ndkRelay.emit("notice",this,e)}handleReconnection(e=0){if(this.isFlapping())return this.ndkRelay.emit("flapping",this,this._connectionStats),void(this._status=5);const t=this.connectedAt?Math.max(0,6e4-(Date.now()-this.connectedAt)):0;setTimeout((()=>{this._status=4,this.connect().then((()=>{this.debug("Reconnected")})).catch((t=>{this.debug("Reconnect failed",t),e<5?setTimeout((()=>{this.handleReconnection(e+1)}),6e4):this.debug("Reconnect failed after 5 attempts")}))}),t)}updateConnectionStats={connected:()=>{this._connectionStats.success++,this._connectionStats.connectedAt=Date.now()},disconnected:()=>{this._connectionStats.connectedAt&&(this._connectionStats.durations.push(Date.now()-this._connectionStats.connectedAt),this._connectionStats.durations.length>100&&this._connectionStats.durations.shift()),this._connectionStats.connectedAt=void 0},attempt:()=>{this._connectionStats.attempts++}};get connectionStats(){return this._connectionStats}}(this),this.subs=new class{ndkRelay;delayedItems=new Map;delayedTimers=new Map;activeSubscriptions=new Map;activeSubscriptionsByGroupId=new Map;executionTimeoutsByGroupId=new Map;debug;groupingDebug;conn;constructor(e){this.ndkRelay=e,this.conn=e.connectivity,this.debug=e.debug.extend("subscriptions"),this.groupingDebug=e.debug.extend("grouping")}subscribe(e,t){const n=function(e){const t=[];for(const n of e){if(n.since||n.until)return null;const e=Object.keys(n||{}).sort().join("-");t.push(e)}return t.join("|")}(t),r=new Br(e,t,this.ndkRelay);if(!n||!e.isGroupable())return void this.executeSubscriptions(n,new Sr([r]),t);const i=this.activeSubscriptionsByGroupId.get(n);if(i){const n=function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length&&xr(e[n],t[n]);n++)return e[n]}(i.filters,t);if(n){const n=this.activeSubscriptions.get(i.sub);return void n?.addSubscription(new Br(e,t,this.ndkRelay))}}let o=this.delayedItems.get(n);o?o.addSubscription(r):(o=new Sr([r]),this.delayedItems.set(n,o),o.once("close",(()=>{this.delayedItems.get(n)&&this.delayedItems.delete(n)})));let s=this.executionTimeoutsByGroupId.get(n);s&&"at-most"!==e.opts.groupableDelayType||(s=setTimeout((()=>{this.executeGroup(n,e)}),e.opts.groupableDelay),this.executionTimeoutsByGroupId.set(n,s)),this.delayedTimers.has(n)?this.delayedTimers.get(n).push(s):this.delayedTimers.set(n,[s])}executeGroup(e,t){const n=this.delayedItems.get(e);this.delayedItems.delete(e);const r=this.delayedTimers.get(e);if(this.delayedTimers.delete(e),r)for(const e of r)clearTimeout(e);if(n){const t=n.subscriptions[0].filters.length,r=[];for(let e=0;e<t;e++){const t=n.map((t=>t.filters[e]));r.push(kr(t))}this.executeSubscriptions(e,n,r)}}executeSubscriptionsWhenConnected(e,t,n){const r=()=>{this.debug("new relay coming online for active subscription",{relay:this.ndkRelay.url,mergeFilters:kr}),this.executeSubscriptionsConnected(e,t,n)};this.ndkRelay.once("ready",r),t.once("close",(()=>{this.ndkRelay.removeListener("ready",r)}))}executeSubscriptions(e,t,n){this.conn.isAvailable()?this.executeSubscriptionsConnected(e,t,n):this.executeSubscriptionsWhenConnected(e,t,n)}executeSubscriptionsConnected(e,t,n){const r=[];for(const{subscription:e}of t)r.push(e);const i=function(e,t){const n=e.map((e=>e.subId)).filter(Boolean),r=[],i=new Set,o=new Set;if(n.length>0)r.push(Array.from(new Set(n)).join(","));else{for(const e of t)for(const t of Object.keys(e))"kinds"===t?e.kinds?.forEach((e=>o.add(e))):i.add(t);o.size>0&&r.push("kinds:"+Array.from(o).join(",")),i.size>0&&r.push(Array.from(i).join(","))}let s=r.join("-");return s.length>20&&(s=s.substring(0,20)),1!==n.length&&(s+="-"+Math.floor(999*Math.random()).toString()),s}(r,n);t.req=n;const o={id:i};(this.ndkRelay.trusted||r.every((e=>e.opts.skipVerification)))&&(o.skipVerification=!0);const s=this.conn.relay.sub(n,o);return this.activeSubscriptions.set(s,t),e&&this.activeSubscriptionsByGroupId.set(e,{filters:n,sub:s}),s.on("event",(e=>{const t=new Hr(void 0,e);t.relay=this.ndkRelay;const n=this.activeSubscriptions.get(s);n?.eventReceived(t)})),s.on("eose",(()=>{const e=this.activeSubscriptions.get(s);e?.eoseReceived(this.ndkRelay)})),t.once("close",(()=>{s.unsub(),this.activeSubscriptions.delete(s),e&&this.activeSubscriptionsByGroupId.delete(e)})),this.executeSubscriptionsWhenConnected(e,t,n),s}executedFilters(){const e=new Map;for(const[,t]of this.activeSubscriptions)e.set(t.req,t.map((e=>e.subscription)));return e}}(this),this.publisher=new class{ndkRelay;constructor(e){this.ndkRelay=e}async publish(e,t=2500){const n=()=>new Promise(((n,r)=>{try{this.publishEvent(e,t).then((e=>n(e))).catch((e=>r(e)))}catch(e){r(e)}})),r=new Promise(((e,n)=>{setTimeout((()=>n(new Error("Timeout"))),t)})),i=()=>{n().then((e=>o(e))).catch((e=>s(e)))};let o,s;return 1===this.ndkRelay.status?Promise.race([n(),r]):Promise.race([new Promise(((e,t)=>{o=e,s=t,this.ndkRelay.once("connect",i)})),r]).finally((()=>{this.ndkRelay.removeListener("connect",i)}))}async publishEvent(e,t){const n=await e.toNostrEvent(),r=this.ndkRelay.connectivity.relay.publish(n);let i;const o=new Promise(((t,n)=>{r.then((()=>{clearTimeout(i),this.ndkRelay.emit("published",e),t(!0)})).catch((t=>{clearTimeout(i),this.ndkRelay.debug("Publish failed",t,e.id),this.ndkRelay.emit("publish:failed",e,t),n(t)}))}));if(!t||e.isEphemeral())return o;const s=new Promise(((n,r)=>{i=setTimeout((()=>{this.ndkRelay.debug("Publish timed out",e.rawEvent()),this.ndkRelay.emit("publish:failed",e,"Timeout"),r(new Error("Publish operation timed out"))}),t)}));return Promise.race([o,s])}async auth(e){return this.ndkRelay.connectivity.relay.auth(e.rawEvent())}}(this),this.authPolicy=t}get status(){return this.connectivity.status}get connectionStats(){return this.connectivity.connectionStats}async connect(){return this.connectivity.connect()}disconnect(){3!==this.status&&this.connectivity.disconnect()}subscribe(e,t){this.subs.subscribe(e,t)}async publish(e,t=2500){return this.publisher.publish(e,t)}async auth(e){return this.publisher.auth(e)}scoreSlowerEvent(e){}tagReference(e){const t=["r",this.url];return e&&t.push(e),t}referenceTags(){return[["r",this.url]]}activeSubscriptions(){return this.subs.executedFilters()}},Rr=class extends Error{errors;constructor(e,t){super(e),this.errors=t}},Nr=class e{relays;debug;ndk;constructor(e,t){this.relays=e,this.ndk=t,this.debug=t.debug.extend("relayset")}addRelay(e){this.relays.add(e)}static fromRelayUrls(t,n){const r=new Set;for(const e of t){const t=n.pool.relays.get(e);if(t)r.add(t);else{const t=new Cr(e);n.pool.useTemporaryRelay(t),r.add(t)}}return new e(new Set(r),n)}async publish(e,t){const n=new Set,r=new Map,i=e.isEphemeral(),o=Array.from(this.relays).map((o=>new Promise((s=>{o.publish(e,t).then((()=>{n.add(o),s()})).catch((e=>{i||(r.set(o,e),this.debug("error publishing to relay",{relay:o.url,err:e})),s()}))}))));if(await Promise.all(o),0===n.size&&!i)throw new Rr("No relay was able to receive the event",r);return n}size(){return this.relays.size}};function Ur(e,t){if(e.outboxTracker)return e.outboxTracker.data.get(t)?.writeRelays}var Ir=["wss://nos.lol","wss://relay.nostr.band","wss://relay.f7z.io","wss://relay.damus.io","wss://nostr.mom","wss://no.str.cr"],Tr=class extends mr.EventEmitter{ndk;zappedEvent;zappedUser;constructor(e){super(),this.ndk=e.ndk,this.zappedEvent=e.zappedEvent,this.zappedUser=e.zappedUser||this.ndk.getUser({hexpubkey:this.zappedEvent?.pubkey})}async getZapEndpoint(){let e,t,n,r;if(this.zappedUser&&(this.zappedUser.profile||await this.zappedUser.fetchProfile({groupable:!1}),e=(this.zappedUser.profile||{}).lud06,t=(this.zappedUser.profile||{}).lud16),t&&!t.startsWith("LNURL")){const[e,r]=t.split("@");n=`https://${r}/.well-known/lnurlp/${e}`}else if(e){const{words:t}=ke.gW.decode(e,1e3),r=ke.gW.fromWords(t);n=new TextDecoder("utf-8").decode(r)}if(!n)throw new Error("No zap endpoint found");try{const e=this.ndk.httpFetch||fetch,t=await e(n);if(200!==t.status){const e=await t.text();throw new Error(`Unable to fetch zap endpoint ${n}: ${e}`)}const i=await t.json();return i?.allowsNostr&&(i?.nostrPubkey||i?.nostrPubKey)&&(r=i.callback),r}catch(e){throw new Error(`Unable to fetch zap endpoint ${n}: ${e}`)}}async createZapRequest(e,t,n,r,i){const o=await this.generateZapRequest(e,t,n,r);if(!o)return null;const{event:s,zapEndpoint:a}=o;if(!s)throw new Error("No zap request event found");let c;await s.sign(i);try{c=await this.getInvoice(s,e,a)}catch(e){throw new Error("Failed to get invoice: "+e)}return c}async getInvoice(e,t,n){const r=await fetch(`${n}?`+new URLSearchParams({amount:t.toString(),nostr:JSON.stringify(e.rawEvent())}));return(await r.json()).pr}async generateZapRequest(e,t,n,r,i){const o=await this.getZapEndpoint();if(!o)throw new Error("No zap endpoint found");if(!this.zappedEvent&&!this.zappedUser)throw new Error("No zapped event or user found");const s=cr.makeZapRequest({profile:this.zappedUser.pubkey,event:null,amount:e,comment:t||"",relays:r??this.relays()});if(this.zappedEvent){const e=this.zappedEvent.referenceTags();s.tags.push(...e)}s.tags.push(["lnurl",o]);const a=new Hr(this.ndk,s);return n&&(a.tags=a.tags.concat(n)),{event:a,zapEndpoint:o}}relays(){let e=[];return this.ndk?.pool?.relays&&(e=this.ndk.pool.urls()),e.length||(e=Ir),e}};async function Pr(e){return""}function Or(){if(void 0===this.kind)throw new Error("Kind not set");return this.kind>=1e4&&this.kind<2e4}function Lr(){if(void 0===this.kind)throw new Error("Kind not set");return this.kind>=2e4&&this.kind<3e4}function Fr(){if(void 0===this.kind)throw new Error("Kind not set");return this.kind>=3e4&&this.kind<4e4}async function Dr(e,t){if(!this.ndk)throw new Error("No NDK instance found!");if(t||(await this.ndk.assertSigner(),t=this.ndk.signer),!e){const t=this.getMatchingTags("p");if(1!==t.length)throw new Error("No recipient could be determined and no explicit recipient was provided");e=this.ndk.getUser({hexpubkey:t[0][1]})}this.content=await(t?.encrypt(e,this.content))}async function $r(e,t){if(!this.ndk)throw new Error("No NDK instance found!");t||(await this.ndk.assertSigner(),t=this.ndk.signer),e||(e=this.author),this.content=await(t?.decrypt(e,this.content))}function Mr(){return this.isParamReplaceable()?rn.naddrEncode({kind:this.kind,pubkey:this.pubkey,identifier:this.replaceableDTag(),relays:this.relay?[this.relay.url]:[]}):this.relay?rn.neventEncode({id:this.tagId(),relays:[this.relay.url],author:this.pubkey}):rn.noteEncode(this.tagId())}async function zr(e=!0,t){if(!t&&e){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner(),t=this.ndk.signer}const n=new Hr(this.ndk,{kind:(r=this,1===r.kind?6:16),content:""});var r;return n.tag(this),16===n.kind&&n.tags.push(["k",`${this.kind}`]),t&&await n.sign(t),e&&await n.publish(),n}var Hr=class e extends mr.EventEmitter{ndk;created_at;content="";tags=[];kind;id="";sig;pubkey="";_author=void 0;relay;constructor(e,t){super(),this.ndk=e,this.created_at=t?.created_at,this.content=t?.content||"",this.tags=t?.tags||[],this.id=t?.id||"",this.sig=t?.sig,this.pubkey=t?.pubkey||"",this.kind=t?.kind}rawEvent(){return{created_at:this.created_at,content:this.content,tags:this.tags,kind:this.kind,pubkey:this.pubkey,id:this.id,sig:this.sig}}set author(e){this.pubkey=e.hexpubkey,this._author=void 0}get author(){if(this._author)return this._author;if(!this.ndk)throw new Error("No NDK instance found");const e=this.ndk.getUser({hexpubkey:this.pubkey});return this._author=e,e}tag(t,n){let r=[];if(t instanceof ei){const e=["p",t.pubkey];n&&e.push(n),r.push(e)}else if(t instanceof e){const e=t,i=e?.pubkey===this.pubkey;r=e.referenceTags(n,i);for(const t of e.getMatchingTags("p"))t[1]!==this.pubkey&&(this.tags.find((e=>"p"===e[0]&&e[1]===t[1]))||this.tags.push(["p",t[1]]))}else r=[t];this.tags=function(e,t){const n=new Map,r=(e,t)=>e.every(((e,n)=>e===t[n]));return e.concat(t).forEach((e=>{for(let[t,i]of n)if(r(i,e)||r(e,i))return void(e.length>=i.length&&n.set(t,e));n.set((e=>e.join(","))(e),e)})),Array.from(n.values())}(this.tags,r)}async toNostrEvent(e){if(!e&&""===this.pubkey){const e=await(this.ndk?.signer?.user());this.pubkey=e?.hexpubkey||""}this.created_at||(this.created_at=Math.floor(Date.now()/1e3));const t=this.rawEvent(),{content:n,tags:r}=await this.generateTags();t.content=n||"",t.tags=r;try{this.id=jt(t)}catch(e){}return this.id&&(t.id=this.id),this.sig&&(t.sig=this.sig),t}isReplaceable=Or.bind(this);isEphemeral=Lr.bind(this);isParamReplaceable=Fr.bind(this);encode=Mr.bind(this);encrypt=Dr.bind(this);decrypt=$r.bind(this);getMatchingTags(e){return this.tags.filter((t=>t[0]===e))}tagValue(e){const t=this.getMatchingTags(e);if(0!==t.length)return t[0][1]}get alt(){return this.tagValue("alt")}set alt(e){this.removeTag("alt"),e&&this.tags.push(["alt",e])}removeTag(e){this.tags=this.tags.filter((t=>t[0]!==e))}async sign(e){e?this.author=await e.user():(this.ndk?.assertSigner(),e=this.ndk.signer),await this.generateTags(),this.isReplaceable()&&(this.created_at=Math.floor(Date.now()/1e3));const t=await this.toNostrEvent();return this.sig=await e.sign(t),this.sig}async publish(e,t){if(this.sig||await this.sign(),!this.ndk)throw new Error("NDKEvent must be associated with an NDK instance to publish");return e||(e=this.ndk.devWriteRelaySet||function(e,t){const n=new Set;return e.pool?.relays.forEach((e=>n.add(e))),new Nr(n,e)}(this.ndk)),e.publish(this,t)}async generateTags(){let e=[];const t=await async function(e,t=[]){let n=[];const r=e=>{t.find((t=>t[0]===e[0]&&t[1]===e[1]))||t.push(e)};return e=e.replace(/(@|nostr:)(npub|nprofile|note|nevent|naddr)[a-zA-Z0-9]+/g,(e=>{try{const t=e.split(/(@|nostr:)/)[2],{type:i,data:o}=rn.decode(t);let s;switch(i){case"npub":s=["p",o];break;case"nprofile":s=["p",o.pubkey];break;case"note":n.push(new Promise((async e=>{r(["e",o,await Pr(),"mention"]),e()})));break;case"nevent":n.push(new Promise((async e=>{let{id:t,relays:n,author:i}=o;n&&0!==n.length||(n=[await Pr()]),r(["e",t,n[0],"mention"]),i&&r(["p",i]),e()})));break;case"naddr":n.push(new Promise((async e=>{const t=[o.kind,o.pubkey,o.identifier].join(":");let n=o.relays??[];0===n.length&&(n=[await Pr()]),r(["a",t,n[0],"mention"]),r(["p",o.pubkey]),e()})));break;default:return e}return s&&r(s),`nostr:${t}`}catch(t){return e}})),await Promise.all(n),{content:e=e.replace(/#(\w+)/g,((e,n)=>{const r=["t",n];return t.find((e=>e[0]===r[0]&&e[1]===r[1]))||t.push(r),e})),tags:t}}(this.content,this.tags),n=t.content;if(e=t.tags,this.kind&&this.isParamReplaceable()&&!this.getMatchingTags("d")[0]){const t=this.tagValue("title");let n=[...Array(t?6:16)].map((()=>Math.random().toString(36)[2])).join("");t&&t.length>0&&(n=t.replace(/[^a-z0-9]+/gi,"-").replace(/^-|-$/g,"")+"-"+n),e.push(["d",n])}if((this.ndk?.clientName||this.ndk?.clientNip89)&&!this.tagValue("client")){const t=["client",this.ndk.clientName??""];this.ndk.clientNip89&&t.push(this.ndk.clientNip89),e.push(t)}return{content:n||"",tags:e}}muted(){const e=this.ndk?.mutedIds.get(this.pubkey);if(e&&"p"===e)return"author";const t=this.tagReference(),n=this.ndk?.mutedIds.get(t[1]);return n&&n===t[0]?"event":null}replaceableDTag(){if(this.kind&&this.kind>=3e4&&this.kind<=4e4){const e=this.getMatchingTags("d")[0];return e?e[1]:""}throw new Error("Event is not a parameterized replaceable event")}deduplicationKey(){return 0===this.kind||3===this.kind||this.kind&&this.kind>=1e4&&this.kind<2e4?`${this.kind}:${this.pubkey}`:this.tagId()}tagId(){return this.isParamReplaceable()?this.tagAddress():this.id}tagAddress(){if(!this.isParamReplaceable())throw new Error("This must only be called on replaceable events");const e=this.replaceableDTag();return`${this.kind}:${this.pubkey}:${e}`}tagReference(e){let t;return t=this.isParamReplaceable()?["a",this.tagAddress()]:["e",this.tagId()],this.relay?t.push(this.relay.url):t.push(""),e&&t.push(e),t}referenceTags(e,t){let n=[];return n=this.isParamReplaceable()?[["a",this.tagAddress()],["e",this.id]]:[["e",this.id]],this.relay?.url?n=n.map((e=>(e.push(this.relay?.url),e))):e&&(n=n.map((e=>(e.push(""),e)))),e&&n.forEach((t=>t.push(e))),t||n.push(...this.author.referenceTags()),n}filter(){return this.isParamReplaceable()?{"#a":[this.tagId()]}:{"#e":[this.tagId()]}}async zap(e,t,n,r,i){if(!this.ndk)throw new Error("No NDK instance found");i||this.ndk.assertSigner();const o=new Tr({ndk:this.ndk,zappedEvent:this,zappedUser:r}),s=Array.from(this.ndk.pool.relays.keys());return await o.createZapRequest(e,t,n,s,i)}async delete(t){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner();const n=new e(this.ndk,{kind:5,content:t||""});return n.tag(this),await n.publish(),n}repost=zr.bind(this);async react(t,n=!0){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner();const r=new e(this.ndk,{kind:7,content:t});return r.tag(this),n?await r.publish():await r.sign(),r}},Kr="read",jr="write",qr=class e extends Hr{constructor(e,t){super(e,t),this.kind??=10002}static from(t){return new e(t.ndk,t.rawEvent())}get readRelayUrls(){return this.getMatchingTags("r").filter((e=>!e[2]||e[2]&&e[2]===Kr)).map((e=>e[1]))}set readRelayUrls(e){for(const t of e)this.tags.push(["r",t,Kr])}get writeRelayUrls(){return this.getMatchingTags("r").filter((e=>!e[2]||e[2]&&e[2]===jr)).map((e=>e[1]))}set writeRelayUrls(e){for(const t of e)this.tags.push(["r",t,jr])}get bothRelayUrls(){return this.getMatchingTags("r").filter((e=>!e[2])).map((e=>e[1]))}set bothRelayUrls(e){for(const t of e)this.tags.push(["r",t])}get relays(){return this.getMatchingTags("r").map((e=>e[1]))}},Wr={closeOnEose:!1,cacheUsage:"CACHE_FIRST",groupable:!0,groupableDelay:100,groupableDelayType:"at-most"},Vr=class extends mr.EventEmitter{subId;filters;opts;pool;skipVerification=!1;relayFilters;relaySet;ndk;debug;eoseDebug;eventFirstSeen=new Map;eosesSeen=new Set;eventsPerRelay=new Map;lastEventReceivedAt;internalId;constructor(e,t,n,r,i){if(super(),this.ndk=e,this.pool=n?.pool||e.pool,this.opts={...Wr,...n||{}},this.filters=t instanceof Array?t:[t],this.subId=i||n?.subId,this.internalId=Math.random().toString(36).substring(7),this.relaySet=r,this.debug=e.debug.extend(`subscription[${n?.subId??this.internalId}]`),this.eoseDebug=this.debug.extend("eose"),this.skipVerification=n?.skipVerification||!1,this.opts.closeOnEose||this.debug("Creating a permanent subscription",this.opts,JSON.stringify(this.filters)),"ONLY_CACHE"===this.opts.cacheUsage&&!this.opts.closeOnEose)throw new Error("Cannot use cache-only options with a persistent subscription")}get filter(){return this.filters[0]}isGroupable(){return this.opts?.groupable||!1}shouldQueryCache(){return"ONLY_RELAY"!==this.opts?.cacheUsage}shouldQueryRelays(){return"ONLY_CACHE"!==this.opts?.cacheUsage}shouldWaitForCache(){return this.opts.closeOnEose&&!!this.ndk.cacheAdapter?.locking&&"PARALLEL"!==this.opts.cacheUsage}async start(){let e;this.shouldQueryCache()&&(e=this.startWithCache(),this.shouldWaitForCache()&&(await e,_r(this)))?this.emit("eose",this):this.shouldQueryRelays()?this.startWithRelays():this.emit("eose",this)}stop(){this.emit("close",this),this.removeAllListeners()}hasAuthorsFilter(){return this.filters.some((e=>e.authors?.length))}async startWithCache(){if(this.ndk.cacheAdapter?.query){const e=this.ndk.cacheAdapter.query(this);this.ndk.cacheAdapter.locking&&await e}}startWithRelays(){if(this.relaySet){this.relayFilters=new Map;for(const e of this.relaySet.relays)this.relayFilters.set(e.url,this.filters)}else this.relayFilters=(e=this.ndk,t=this.filters,function(e,t){const n=new Map,r=new Set;if(t.forEach((e=>{e.authors&&e.authors.forEach((e=>r.add(e)))})),r.size>0){const i=new Map;for(const t of r){const n=Ur(e,t);n&&n.size>0?(e.debug(`Adding ${n.size} relays for ${t}`),n.forEach((e=>{const n=i.get(e)||[];n.push(t),i.set(e,n)}))):e.explicitRelayUrls?.forEach((e=>{const n=i.get(e)||[];n.push(t),i.set(e,n)}))}for(const e of i.keys())n.set(e,[]);for(const e of t)if(e.authors)for(const[t,r]of i.entries()){const i=e.authors.filter((e=>r.includes(e)));n.set(t,[...n.get(t),{...e,authors:i}])}else for(const t of i.keys())n.set(t,[...n.get(t),e])}else e.explicitRelayUrls?.forEach((e=>{n.set(e,t)}));return n}(e,t));var e,t;if(this.relayFilters&&0!==this.relayFilters.size)for(const[e,t]of this.relayFilters)this.pool.getRelay(e).subscribe(this,t);else this.debug("No relays to subscribe to",this.ndk.explicitRelayUrls)}eventReceived(e,t,n=!1){if(t&&(e.relay=t),t||(t=e.relay),!n&&t){let n=this.eventsPerRelay.get(t);if(n||(n=new Set,this.eventsPerRelay.set(t,n)),n.add(e.id),this.eventFirstSeen.has(e.id)){const n=Date.now()-(this.eventFirstSeen.get(e.id)||0);return t.scoreSlowerEvent(n),void this.emit("event:dup",e,t,n,this)}this.ndk.cacheAdapter&&this.ndk.cacheAdapter.setEvent(e,this.filters,t),this.eventFirstSeen.set(e.id,Date.now())}else this.eventFirstSeen.set(e.id,0);e.ndk||(e.ndk=this.ndk),this.emit("event",e,t,this),this.lastEventReceivedAt=Date.now()}eoseTimeout;eoseReceived(e){this.eosesSeen.add(e),this.eoseDebug(`received from ${e.url}`);let t=this.lastEventReceivedAt?Date.now()-this.lastEventReceivedAt:void 0;const n=this.eosesSeen.size===this.relayFilters?.size;if(_r(this))this.emit("eose"),this.eoseDebug("Query fully filled"),this.opts?.closeOnEose&&this.stop();else if(n)this.emit("eose"),this.eoseDebug("All EOSEs seen"),this.opts?.closeOnEose&&this.stop();else{let e=1e3;const n=this.eosesSeen.size/this.relayFilters.size;if(this.eosesSeen.size>=2&&n>=.5){e*=1-n,this.eoseTimeout&&clearTimeout(this.eoseTimeout);const r=()=>{t=this.lastEventReceivedAt?Date.now()-this.lastEventReceivedAt:void 0,void 0!==t&&t<20?this.eoseTimeout=setTimeout(r,e):(this.emit("eose"),this.opts?.closeOnEose&&this.stop())};this.eoseTimeout=setTimeout(r,e)}}}};async function Zr(e,t,n=3){if(!this.ndk)throw new Error("NDK not set");const r=Array.from(await this.ndk.fetchEvents({kinds:[n],authors:[this.pubkey]},e||{groupable:!1}))[0];if(r){const e=new Set;return r.tags.forEach((n=>{if("p"===n[0])try{e.add(n[1]),t&&this.ndk?.outboxTracker?.trackUsers([n[1]])}catch(e){}})),[...e].reduce(((e,t)=>{const n=new ei({pubkey:t});return n.ndk=this.ndk,e.add(n),e}),new Set)}return new Set}function Gr(e){const t={};for(const[n,r]of Object.entries(e))switch(n){case"username":case"name":t.name=r;break;case"displayName":t.display_name=r;break;case"image":case"picture":t.picture=r;break;case"bio":case"about":t.about=r;break;default:t[n]=r}return JSON.stringify(t)}var Jr=class e extends Hr{_encryptedTags;encryptedTagsLength;constructor(e,t){super(e,t),this.kind??=30001}static from(t){return new e(t.ndk,t.rawEvent())}get title(){const e=this.tagValue("title")||this.tagValue("name");return 3!==this.kind||e?1e4!==this.kind||e?10001!==this.kind||e?10002!==this.kind||e?10003!==this.kind||e?10004!==this.kind||e?10005!==this.kind||e?10006!==this.kind||e?10007!==this.kind||e?10015!==this.kind||e?10030!==this.kind||e?e??this.tagValue("d"):"Emojis":"Interests":"Search Relays":"Blocked Relays":"Public Chats":"Communities":"Bookmarks":"Relay Metadata":"Pinned Notes":"Mute":"Contacts"}set title(e){if(this.removeTag("title"),this.removeTag("name"),!e)throw new Error("Title cannot be empty");this.tags.push(["title",e])}get name(){const e=this.tagValue("name");return 3!==this.kind||e?1e4!==this.kind||e?10001!==this.kind||e?10002!==this.kind||e?10003!==this.kind||e?10004!==this.kind||e?10005!==this.kind||e?10006!==this.kind||e?10007!==this.kind||e?10015!==this.kind||e?10030!==this.kind||e?e??this.tagValue("d"):"Emojis":"Interests":"Search Relays":"Blocked Relays":"Public Chats":"Communities":"Bookmarks":"Relay Metadata":"Pinned Notes":"Mute":"Contacts"}set name(e){if(this.removeTag("name"),!e)throw new Error("Name cannot be empty");this.tags.push(["title",e])}get description(){return this.tagValue("description")}set description(e){e?this.tags.push(["description",e]):this.removeTag("description")}isEncryptedTagsCacheValid(){return!(!this._encryptedTags||this.encryptedTagsLength!==this.content.length)}async encryptedTags(e=!0){if(e&&this.isEncryptedTagsCacheValid())return this._encryptedTags;if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");const t=await this.ndk.signer.user();try{if(this.content.length>0)try{const e=await this.ndk.signer.decrypt(t,this.content),n=JSON.parse(e);return n&&n[0]?(this.encryptedTagsLength=this.content.length,this._encryptedTags=n):(this.encryptedTagsLength=this.content.length,this._encryptedTags=[])}catch(e){console.log(`error decrypting ${this.content}`)}}catch(e){}return[]}validateTag(e){return!0}get items(){return this.tags.filter((e=>!["d","L","l","title","name","description","summary","image","thumb","alt","expiration","subject"].includes(e[0])))}async addItem(e,t=void 0,n=!1){if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");let r;if(e instanceof Hr)r=e.referenceTags();else if(e instanceof ei)r=e.referenceTags();else if(e instanceof Cr)r=e.referenceTags();else{if(!Array.isArray(e))throw new Error("Invalid object type");r=[e]}if(t&&r[0].push(t),n){const e=await this.ndk.signer.user(),t=await this.encryptedTags();t.push(...r),this._encryptedTags=t,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(t),await this.encrypt(e)}else this.tags.push(...r);this.created_at=Math.floor(Date.now()/1e3),this.emit("change")}async removeItem(e,t){if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");if(t){const t=await this.ndk.signer.user(),n=await this.encryptedTags();n.splice(e,1),this._encryptedTags=n,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(n),await this.encrypt(t)}else this.tags.splice(e,1);return this.created_at=Math.floor(Date.now()/1e3),this.emit("change"),this}};async function Yr(e,t,n){if(!this.ndk)throw new Error("No NDK instance found");if(this.ndk.assertSigner(),!t){const e=await this.ndk.fetchEvents({kinds:[10001],authors:[this.pubkey]},{cacheUsage:"ONLY_RELAY"});t=e.size>0?Jr.from(Array.from(e)[0]):new Hr(this.ndk,{kind:10001})}return t.tag(e),n&&await t.publish(),t}var Xr=/^(?:([\w.+-]+)@)?([\w.-]+)$/;async function Qr(e,t=fetch,n={}){const r=e.match(Xr);if(!r)return null;const[i,o="_",s]=r;try{const e=await t(`https://${s}/.well-known/nostr.json?name=${o}`,n),{names:r,relays:i,nip46:a}=function(e){const t={names:{}};for(const[n,r]of Object.entries(e.names))"string"==typeof n&&"string"==typeof r&&(t.names[n]=r);if(e.relays){t.relays={};for(const[n,r]of Object.entries(e.relays))"string"==typeof n&&Array.isArray(r)&&(t.relays[n]=r.filter((e=>"string"==typeof e)))}if(e.nip46){t.nip46={};for(const[n,r]of Object.entries(e.relays))"string"==typeof n&&Array.isArray(r)&&(t.nip46[n]=r.filter((e=>"string"==typeof e)))}return t}(await e.json()),c=r[o];return c?{pubkey:c,relays:i?.[c],nip46:a?.[c]}:null}catch(e){return null}}var ei=class e{ndk;profile;_npub;_pubkey;relayUrls=[];nip46Urls=[];constructor(e){e.npub&&(this._npub=e.npub),e.hexpubkey&&(this._pubkey=e.hexpubkey),e.pubkey&&(this._pubkey=e.pubkey),e.relayUrls&&(this.relayUrls=e.relayUrls),e.nip46Urls&&(this.nip46Urls=e.nip46Urls)}get npub(){if(!this._npub){if(!this._pubkey)throw new Error("hexpubkey not set");this._npub=rn.npubEncode(this.pubkey)}return this._npub}set npub(e){this._npub=e}get hexpubkey(){return this.pubkey}set hexpubkey(e){this._pubkey=e}get pubkey(){if(!this._pubkey){if(!this._npub)throw new Error("npub not set");this._pubkey=rn.decode(this.npub).data}return this._pubkey}set pubkey(e){this._pubkey=e}static async fromNip05(t,n,r=!1){if(n?.cacheAdapter&&n.cacheAdapter.loadNip05){const r=await n.cacheAdapter.loadNip05(t);if(r){const t=new e({pubkey:r.pubkey,relayUrls:r.relays,nip46Urls:r.nip46});return t.ndk=n,t}}let i={};r&&(i.cache="no-cache");const o=await Qr(t,n?.httpFetch,i);if(o&&n?.cacheAdapter&&n.cacheAdapter.saveNip05&&n?.cacheAdapter.saveNip05(t,o),o){const t=new e({pubkey:o.pubkey,relayUrls:o.relays,nip46Urls:o.nip46});return t.ndk=n,t}}async fetchProfile(e){if(!this.ndk)throw new Error("NDK not set");this.profile||(this.profile={});let t=null;if(this.ndk.cacheAdapter&&this.ndk.cacheAdapter.fetchProfile&&"ONLY_RELAY"!==e?.cacheUsage){const e=await this.ndk.cacheAdapter.fetchProfile(this.pubkey);if(e)return this.profile=e,e}!e&&this.ndk.cacheAdapter&&this.ndk.cacheAdapter.locking&&(t=await this.ndk.fetchEvents({kinds:[0],authors:[this.pubkey]},{cacheUsage:"ONLY_CACHE",closeOnEose:!0,groupable:!1}),e={cacheUsage:"ONLY_RELAY",closeOnEose:!0,groupable:!0,groupableDelay:250}),t&&0!==t.size||(t=await this.ndk.fetchEvents({kinds:[0],authors:[this.pubkey]},e));const n=Array.from(t).sort(((e,t)=>e.created_at-t.created_at));return 0===n.length?null:(this.profile=function(e){const t={};let n;try{n=JSON.parse(e.content)}catch(e){throw new Error(`Failed to parse profile event: ${e}`)}return Object.keys(n).forEach((e=>{switch(e){case"name":t.name=n.name;break;case"display_name":t.displayName=n.display_name;break;case"image":case"picture":t.image=n.image||n.picture;break;case"banner":t.banner=n.banner;break;case"bio":t.bio=n.bio;break;case"nip05":t.nip05=n.nip05;break;case"lud06":t.lud06=n.lud06;break;case"lud16":t.lud16=n.lud16;break;case"about":t.about=n.about;break;case"zapService":t.zapService=n.zapService;break;case"website":t.website=n.website;break;default:t[e]=n[e]}})),t}(n[0]),this.profile&&this.ndk.cacheAdapter&&this.ndk.cacheAdapter.saveProfile&&this.ndk.cacheAdapter.saveProfile(this.pubkey,this.profile),this.profile)}follows=Zr.bind(this);pin=Yr.bind(this);async relayList(){if(!this.ndk)throw new Error("NDK not set");const e=this.ndk.outboxPool||this.ndk.pool,t=new Set;for(const n of e.relays.values())t.add(n);const n=new Nr(t,this.ndk),r=await this.ndk.fetchEvent({kinds:[10002],authors:[this.pubkey]},{closeOnEose:!0,pool:e,groupable:!0,subId:`relay-list-${this.pubkey.slice(0,6)}`},n);return r?qr.from(r):await this.relayListFromKind3()}async relayListFromKind3(){if(!this.ndk)throw new Error("NDK not set");const e=await this.ndk.fetchEvent({kinds:[3],authors:[this.pubkey]});if(e)try{const t=JSON.parse(e.content),n=new qr(this.ndk),r=new Set,i=new Set;for(const[e,n]of Object.entries(t))if(n){const t=n;t.write&&i.add(e),t.read&&r.add(e)}else r.add(e),i.add(e);return n.readRelayUrls=Array.from(r),n.writeRelayUrls=Array.from(i),n}catch(e){}}tagReference(){return["p",this.pubkey]}referenceTags(e){const t=[["p",this.pubkey]];return e?(t[0].push("",e),t):t}async publish(){if(!this.ndk)throw new Error("No NDK instance found");if(!this.profile)throw new Error("No profile available");this.ndk.assertSigner();const e=new Hr(this.ndk,{kind:0,content:Gr(this.profile)});await e.publish()}async follow(e,t,n=3){if(!this.ndk)throw new Error("No NDK instance found");if(this.ndk.assertSigner(),t||(t=await this.follows(void 0,void 0,n)),t.has(e))return!1;t.add(e);const r=new Hr(this.ndk,{kind:n});for(const e of t)r.tag(e);return await r.publish(),!0}async validateNip05(e){if(!this.ndk)throw new Error("No NDK instance found");const t=await Qr(e);return null===t?null:t.pubkey===this.pubkey}async zap(e,t,n,r){if(!this.ndk)throw new Error("No NDK instance found");r||this.ndk.assertSigner();const i=new Tr({ndk:this.ndk,zappedUser:this}),o=Array.from(this.ndk.pool.relays.keys());return await i.createZapRequest(e,t,n,o,r)}},ti=class{_userPromise;nip04Queue=[];nip04Processing=!1;debug;waitTimeout;constructor(e=1e3){this.debug=vr("ndk:nip07"),this.waitTimeout=e}async blockUntilReady(){await this.waitForExtension();const e=await window.nostr.getPublicKey();if(!e)throw new Error("User rejected access");return new ei({hexpubkey:e})}async user(){return this._userPromise||(this._userPromise=this.blockUntilReady()),this._userPromise}async sign(e){return await this.waitForExtension(),(await window.nostr.signEvent(e)).sig}async relays(){await this.waitForExtension();const e=await(window.nostr.getRelays?.())||{},t=[];for(const n of Object.keys(e))e[n].read&&e[n].write&&t.push(n);return t.map((e=>new Cr(e)))}async encrypt(e,t){await this.waitForExtension();const n=e.hexpubkey;return this.queueNip04("encrypt",n,t)}async decrypt(e,t){await this.waitForExtension();const n=e.hexpubkey;return this.queueNip04("decrypt",n,t)}async queueNip04(e,t,n){return new Promise(((r,i)=>{this.nip04Queue.push({type:e,counterpartyHexpubkey:t,value:n,resolve:r,reject:i}),this.nip04Processing||this.processNip04Queue()}))}async processNip04Queue(e,t=0){if(!e&&0===this.nip04Queue.length)return void(this.nip04Processing=!1);this.nip04Processing=!0;const{type:n,counterpartyHexpubkey:r,value:i,resolve:o,reject:s}=e||this.nip04Queue.shift();this.debug("Processing encryption queue item",{type:n,counterpartyHexpubkey:r,value:i});try{let e;e="encrypt"===n?await window.nostr.nip04.encrypt(r,i):await window.nostr.nip04.decrypt(r,i),o(e)}catch(o){if(o.message&&o.message.includes("call already executing")&&t<5)return this.debug("Retrying encryption queue item",{type:n,counterpartyHexpubkey:r,value:i,retries:t}),void setTimeout((()=>{this.processNip04Queue(e,t+1)}),50*t);s(o)}this.processNip04Queue()}waitForExtension(){return new Promise(((e,t)=>{if(window.nostr)return void e();let n;const r=setInterval((()=>{window.nostr&&(clearTimeout(n),clearInterval(r),e())}),100);n=setTimeout((()=>{clearInterval(r),t(new Error("NIP-07 extension not available"))}),this.waitTimeout)}))}},ni=class e{_user;privateKey;constructor(e){e&&(this.privateKey=e,this._user=new ei({hexpubkey:Pt(this.privateKey)}))}static generate(){const t=(0,o.ci)(Ee.utils.randomPrivateKey());return new e(t)}async blockUntilReady(){if(!this._user)throw new Error("NDKUser not initialized");return this._user}async user(){return await this.blockUntilReady(),this._user}async sign(e){if(!this.privateKey)throw Error("Attempted to sign without a private key");return Zt(e,this.privateKey)}async encrypt(e,t){if(!this.privateKey)throw Error("Attempted to encrypt without a private key");const n=e.hexpubkey;return await mn.encrypt(this.privateKey,n,t)}async decrypt(e,t){if(!this.privateKey)throw Error("Attempted to decrypt without a private key");const n=e.hexpubkey;return await mn.decrypt(this.privateKey,n,t)}},ri=class extends mr.EventEmitter{data;ndk;debug;constructor(e){super(),this.ndk=e,this.debug=e.debug.extend("outbox-tracker"),this.data=new Er.LRUCache({maxSize:1e5,entryExpirationTimeInMS:5e3})}trackUsers(e){for(const t of e){const e=ii(t);if(this.data.has(e))continue;const n=this.track(t,"user"),r=t instanceof ei?t:new ei({hexpubkey:t});r.ndk=this.ndk,r.relayList().then((t=>{if(t){n.readRelays=new Set(t.readRelayUrls),n.writeRelays=new Set(t.writeRelayUrls);for(const e of n.readRelays)this.ndk.pool.blacklistRelayUrls.has(e)&&(this.debug(`removing blacklisted relay ${e} from read relays`),n.readRelays.delete(e));for(const e of n.writeRelays)this.ndk.pool.blacklistRelayUrls.has(e)&&(this.debug(`removing blacklisted relay ${e} from write relays`),n.writeRelays.delete(e));this.data.set(e,n),this.debug(`Adding ${n.readRelays.size} read relays and ${n.writeRelays.size} write relays for ${r.hexpubkey}`)}}))}}track(e,t){const n=ii(e);t??=function(e){return e instanceof ei?"user":"kind"}(e);let r=this.data.get(n);return r||(r=new class{type;relayUrlScores;readRelays;writeRelays;constructor(e){this.type=e,this.relayUrlScores=new Map,this.readRelays=new Set,this.writeRelays=new Set}}(t)),this.data.set(n,r),r}};function ii(e){return e instanceof ei?e.hexpubkey:e}var oi=class extends mr.EventEmitter{relays=new Map;blacklistRelayUrls;debug;temporaryRelayTimers=new Map;flappingRelays=new Set;backoffTimes=new Map;constructor(e=[],t=[],n,r){super(),this.debug=r??n.debug.extend("pool");for(const t of e){const e=new Cr(t);this.addRelay(e,!1)}this.blacklistRelayUrls=new Set(t)}useTemporaryRelay(e,t=6e5){const n=this.relays.has(e.url);n||this.addRelay(e);const r=this.temporaryRelayTimers.get(e.url);if(r&&clearTimeout(r),!n||r){const n=setTimeout((()=>{this.removeRelay(e.url)}),t);this.temporaryRelayTimers.set(e.url,n)}}addRelay(e,t=!0){const n=e.url;this.blacklistRelayUrls?.has(n)?this.debug(`Relay ${n} is blacklisted`):(e.on("notice",(async(e,t)=>this.emit("notice",e,t))),e.on("connect",(()=>this.handleRelayConnect(n))),e.on("ready",(()=>this.handleRelayReady(e))),e.on("disconnect",(async()=>this.emit("relay:disconnect",e))),e.on("flapping",(()=>this.handleFlapping(e))),e.on("auth",(async t=>this.emit("relay:auth",e,t))),this.relays.set(n,e),t&&e.connect().catch((e=>{this.debug(`Failed to connect to relay ${n}`,e)})))}removeRelay(e){const t=this.relays.get(e);if(t)return t.disconnect(),this.relays.delete(e),this.emit("relay:disconnect",t),!0;const n=this.temporaryRelayTimers.get(e);return n&&(clearTimeout(n),this.temporaryRelayTimers.delete(e)),!1}getRelay(e,t=!0){let n=this.relays.get(e);return n||(n=new Cr(e),this.addRelay(n,t)),n}handleRelayConnect(e){this.debug(`Relay ${e} connected`),this.emit("relay:connect",this.relays.get(e)),this.stats().connected===this.relays.size&&this.emit("connect")}handleRelayReady(e){this.debug(`Relay ${e.url} ready`),this.emit("relay:ready",e)}async connect(e){const t=[];this.debug(`Connecting to ${this.relays.size} relays${e?`, timeout ${e}...`:""}`);for(const n of this.relays.values())if(e){const r=new Promise(((t,n)=>{setTimeout((()=>n(`Timed out after ${e}ms`)),e)}));t.push(Promise.race([n.connect(),r]).catch((e=>{this.debug(`Failed to connect to relay ${n.url}: ${e??"No reason specified"}`)})))}else t.push(n.connect());e&&setTimeout((()=>{const e=this.stats().connected===this.relays.size,t=this.stats().connected>0;!e&&t&&this.emit("connect")}),e),await Promise.all(t)}checkOnFlappingRelays(){if(this.flappingRelays.size/this.relays.size>=.8)for(const e of this.flappingRelays)this.backoffTimes.set(e,0)}handleFlapping(e){this.debug(`Relay ${e.url} is flapping`);let t=this.backoffTimes.get(e.url)||5e3;t*=2,this.backoffTimes.set(e.url,t),this.debug(`Backoff time for ${e.url} is ${t}ms`),setTimeout((()=>{this.debug(`Attempting to reconnect to ${e.url}`),e.connect(),this.checkOnFlappingRelays()}),t),e.disconnect(),this.emit("flapping",e)}size(){return this.relays.size}stats(){const e={total:0,connected:0,disconnected:0,connecting:0};for(const t of this.relays.values())e.total++,1===t.status?e.connected++:3===t.status?e.disconnected++:0===t.status&&e.connecting++;return e}connectedRelays(){return Array.from(this.relays.values()).filter((e=>1===e.status))}urls(){return Array.from(this.relays.keys())}},si=["wss://purplepag.es","wss://relay.snort.social"],ai=["wss://brb.io"],ci=class extends mr.EventEmitter{explicitRelayUrls;pool;outboxPool;_signer;_activeUser;cacheAdapter;debug;devWriteRelaySet;outboxTracker;mutedIds;clientName;clientNip89;relayAuthDefaultPolicy;httpFetch;autoConnectUserRelays=!0;autoFetchUserMutelist=!0;constructor(e={}){super(),this.debug=e.debug||vr("ndk"),this.explicitRelayUrls=e.explicitRelayUrls||[],this.pool=new oi(e.explicitRelayUrls||[],e.blacklistRelayUrls,this),this.debug(`Starting with explicit relays: ${JSON.stringify(this.explicitRelayUrls)}`),this.pool.on("relay:auth",(async(e,t)=>{this.relayAuthDefaultPolicy&&await this.relayAuthDefaultPolicy(e,t)})),this.autoConnectUserRelays=e.autoConnectUserRelays??!0,this.autoFetchUserMutelist=e.autoFetchUserMutelist??!0,this.clientName=e.clientName,this.clientNip89=e.clientNip89,this.relayAuthDefaultPolicy=e.relayAuthDefaultPolicy,e.enableOutboxModel&&(this.outboxPool=new oi(e.outboxRelayUrls||si,e.blacklistRelayUrls||ai,this,this.debug.extend("outbox-pool")),this.outboxTracker=new ri(this)),this.signer=e.signer,this.cacheAdapter=e.cacheAdapter,this.mutedIds=e.mutedIds||new Map,e.devWriteRelayUrls&&(this.devWriteRelaySet=Nr.fromRelayUrls(e.devWriteRelayUrls,this));try{this.httpFetch=fetch}catch{}}addExplicitRelay(e,t,n=!0){let r;return r="string"==typeof e?new Cr(e,t):e,this.pool.addRelay(r,n),this.explicitRelayUrls.push(r.url),r}toJSON(){return{relayCount:this.pool.relays.size}.toString()}get activeUser(){return this._activeUser}set activeUser(e){const t=this._activeUser?.pubkey!==e?.pubkey;if(this._activeUser=e,e&&t){const t=async e=>{const t=await e.relayList();if(t){this.debug("Connecting to user relays",{npub:e.npub,relays:t.relays});for(const e of t.relays){let t=this.pool.relays.get(e);t||(t=new Cr(e),this.pool.addRelay(t))}}else this.debug("No relay list found for user",{npub:e.npub})},n=async e=>{const t=await this.fetchEvents([{kinds:[1e4],authors:[e.pubkey]},{kinds:[3e4],authors:[e.pubkey],"#d":["mute"],limit:1}]);if(t)for(const e of t){const t=Jr.from(e);for(const e of t.items)this.mutedIds.set(e[1],e[0])}else this.debug("No mute list found for user",{npub:e.npub})},r=[];this.autoConnectUserRelays&&r.push(t),this.autoFetchUserMutelist&&r.push(n);const i=async e=>{for(const t of r)await t(e)},o=this.outboxPool||this.pool;o.connectedRelays.length>0?i(e):(this.debug("Waiting for connection to main relays"),o.once("relay:ready",(t=>{this.debug("New relay ready",t?.url),i(e)})))}else e||(this.mutedIds=new Map)}get signer(){return this._signer}set signer(e){this._signer=e,this.emit("signer:ready",e),e?.user().then((e=>{e.ndk=this,this.activeUser=e}))}async connect(e){this._signer&&this.autoConnectUserRelays&&(this.debug("Attempting to connect to user relays specified by signer"),this._signer.relays)&&(await this._signer.relays()).forEach((e=>this.pool.addRelay(e)));const t=[this.pool.connect(e)];return this.outboxPool&&t.push(this.outboxPool.connect(e)),this.debug("Connecting to relays",{timeoutMs:e}),Promise.allSettled(t).then((()=>{}))}getUser(e){const t=new ei(e);return t.ndk=this,t}async getUserFromNip05(e,t=!1){return ei.fromNip05(e,this,t)}subscribe(e,t,n,r=!0){const i=new Vr(this,e,t,n);if(n)for(const e of n.relays)this.pool.useTemporaryRelay(e);if(this.outboxPool&&i.hasAuthorsFilter()){const e=i.filters.filter((e=>e.authors&&e.authors?.length>0)).map((e=>e.authors)).flat();this.outboxTracker?.trackUsers(e)}return r&&i.start(),i}async publish(e,t,n){return this.debug("Deprecated: Use `event.publish()` instead"),e.publish(t,n)}async fetchEvent(e,t,n){let r,i;if(n instanceof Cr?i=new Nr(new Set([n]),this):n instanceof Nr&&(i=n),!n&&"string"==typeof e&&null===e.match(Ar)){const t=function(e){try{const t=rn.decode(e);if(["naddr","nevent"].includes(t?.type)){const e=t.data;if(e?.relays)return e.relays.map((e=>new Cr(e)))}}catch(e){}return[]}(e);t.length>0&&(i=new Nr(new Set(t),this),i=function(e,t){const n=t.connectedRelays();if(!Array.from(e.relays).some((e=>n.map((e=>e.url)).includes(e.url))))for(const t of n)e.addRelay(t);if(0===n.length)for(const n of t.relays.values())e.addRelay(n);return e}(i,this.pool))}if(r="string"==typeof e?function(e){let t;if(e.match(Ar)){const[t,n,r]=e.split(":"),i={authors:[n],kinds:[parseInt(t)]};return r&&(i["#d"]=[r]),i}try{switch(t=rn.decode(e),t.type){case"nevent":return{ids:[t.data.id]};case"note":return{ids:[t.data]};case"naddr":return{authors:[t.data.pubkey],"#d":[t.data.identifier],kinds:[t.data.kind]}}}catch(e){}return{ids:[e]}}(e):e,!r)throw new Error(`Invalid filter: ${JSON.stringify(e)}`);return new Promise((e=>{const n=this.subscribe(r,{...t||{},closeOnEose:!0},i,!1);n.on("event",(t=>{t.ndk=this,e(t)})),n.on("eose",(()=>{e(null)})),n.start()}))}async fetchEvents(e,t,n){return new Promise((r=>{const i=new Map,o=this.subscribe(e,{...t||{},closeOnEose:!0},n,!1),s=e=>{const t=e.deduplicationKey(),n=i.get(t);var r,o;n&&(o=e,e=(r=n).created_at>o.created_at?r:o),e.ndk=this,i.set(t,e)};o.on("event",s),o.on("event:dup",s),o.on("eose",(()=>{r(new Set(i.values()))})),o.start()}))}assertSigner(){if(!this.signer)throw this.emit("signerRequired"),new Error("Signer required")}getNip96(e){return new class{ndk;spec;url;nip98Required=!1;constructor(e,t){this.url=`https://${e}/.well-known/nostr/nip96.json`,this.ndk=t}async prepareUpload(e,t="POST"){if(this.validateHttpFetch(),this.spec||await this.fetchSpec(),!this.spec)throw new Error("Failed to fetch NIP96 spec");let n={};return this.nip98Required&&(n={Authorization:await this.generateNip98Header(this.spec.api_url,t,e)}),{url:this.spec.api_url,headers:n}}async xhrUpload(e,t){const n="POST",{url:r,headers:i}=await this.prepareUpload(t,n);e.open(n,r,!0),i.Authorization&&e.setRequestHeader("Authorization",i.Authorization);const o=new FormData;return o.append("file",t),new Promise(((t,n)=>{e.onload=function(){e.status>=200&&e.status<300?t(JSON.parse(e.responseText)):n(new Error(e.statusText))},e.onerror=function(){n(new Error("Network Error"))},e.send(o)}))}async upload(e){const t="POST",{url:n,headers:r}=await this.prepareUpload(e,t),i=new FormData;i.append("file",e);const o=await this.ndk.httpFetch(this.spec.api_url,{method:t,headers:r,body:i});if(200!==o.status)throw new Error(`Failed to upload file to ${n}`);const s=await o.json();if("success"!==s.status)throw new Error(s.message);return s}validateHttpFetch(){if(!this.ndk)throw new Error("NDK is required to fetch NIP96 spec");if(!this.ndk.httpFetch)throw new Error("NDK must have an httpFetch method to fetch NIP96 spec")}async fetchSpec(){this.validateHttpFetch();const e=await this.ndk.httpFetch(this.url);if(200!==e.status)throw new Error(`Failed to fetch NIP96 spec from ${this.url}`);const t=await e.json();if(!t)throw new Error(`Failed to parse NIP96 spec from ${this.url}`);this.spec=t,this.nip98Required=this.spec.plans.free.is_nip98_required}async generateNip98Header(e,t,n){const r=new Hr(this.ndk,{kind:27235,tags:[["u",e],["method",t]]});if(["POST","PUT","PATCH"].includes(t)){const e=await this.calculateSha256(n);r.tags.push(["payload",e])}return await r.sign(),`Nostr ${btoa(JSON.stringify(r.rawEvent()))}`}async calculateSha256(e){const t=await e.arrayBuffer(),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}}(e,this)}}},7410:(e,t,n)=>{"use strict";function r(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function i(...e){const t=(e,t)=>n=>e(t(n));return{encode:Array.from(e).reverse().reduce(((e,n)=>e?t(e,n.encode):n.encode),void 0),decode:e.reduce(((e,n)=>e?t(e,n.decode):n.decode),void 0)}}function o(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(r(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function s(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function a(e,t="="){if(r(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function c(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function l(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let i=0;const o=[],s=Array.from(e);for(s.forEach((e=>{if(r(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,r=!0;for(let o=i;o<s.length;o++){const a=s[o],c=t*e+a;if(!Number.isSafeInteger(c)||t*e/t!==e||c-a!=t*e)throw new Error("convertRadix: carry overflow");if(e=c%n,s[o]=Math.floor(c/n),!Number.isSafeInteger(s[o])||s[o]*n+e!==c)throw new Error("convertRadix: carry overflow");r&&(s[o]?r=!1:i=o)}if(o.push(e),r)break}for(let t=0;t<e.length-1&&0===e[t];t++)o.push(0);return o.reverse()}n.d(t,{Av:()=>E,P6:()=>w,US:()=>b,gW:()=>B});const u=(e,t)=>t?u(t,e%t):e,h=(e,t)=>e+(t-u(e,t));function d(e,t,n,i){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(h(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${h(t,n)}`);let o=0,s=0;const a=2**n-1,c=[];for(const i of e){if(r(i),i>=2**t)throw new Error(`convertRadix2: invalid data word=${i} from=${t}`);if(o=o<<t|i,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)c.push((o>>s-n&a)>>>0);o&=2**s-1}if(o=o<<n-s&a,!i&&s>=t)throw new Error("Excess padding");if(!i&&o)throw new Error(`Non-zero padding: ${o}`);return i&&s>0&&c.push(o>>>0),c}function f(e){return r(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return l(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(l(t,e,256))}}}function p(e,t=!1){if(r(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(h(8,e)>32||h(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return d(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(d(n,e,8,t))}}}function y(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}function g(e,t){if(r(e),"function"!=typeof t)throw new Error("checksum fn should be function");return{encode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),i=new Uint8Array(n.length+e);return i.set(n),i.set(r,n.length),i},decode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),i=t(r).slice(0,e),o=n.slice(-e);for(let t=0;t<e;t++)if(i[t]!==o[t])throw new Error("Invalid checksum");return r}}}const w={alphabet:o,chain:i,checksum:g,radix:f,radix2:p,join:s,padding:a},b=(i(p(4),o("0123456789ABCDEF"),s("")),i(p(5),o("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),a(5),s("")),i(p(5),o("0123456789ABCDEFGHIJKLMNOPQRSTUV"),a(5),s("")),i(p(5),o("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),s(""),c((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),i(p(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),a(6),s(""))),m=(i(p(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),a(6),s("")),e=>i(f(58),o(e),s(""))),v=m("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),E=(m("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),m("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),e=>i(g(4,(t=>e(e(t)))),v)),k=i(o("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),s("")),_=[996825010,642813549,513874426,1027748829,705979059];function x(e){const t=e>>25;let n=(33554431&e)<<5;for(let e=0;e<_.length;e++)1==(t>>e&1)&&(n^=_[e]);return n}function A(e,t,n=1){const r=e.length;let i=1;for(let t=0;t<r;t++){const n=e.charCodeAt(t);if(n<33||n>126)throw new Error(`Invalid prefix (${e})`);i=x(i)^n>>5}i=x(i);for(let t=0;t<r;t++)i=x(i)^31&e.charCodeAt(t);for(let e of t)i=x(i)^e;for(let e=0;e<6;e++)i=x(i);return i^=n,k.encode(d([i%2**30],30,5,!1))}function S(e){const t="bech32"===e?1:734539939,n=p(5),r=n.decode,i=n.encode,o=y(r);function s(e,n=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==n&&e.length>n)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${n})`);const r=e.toLowerCase();if(e!==r&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=(e=r).lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const o=e.slice(0,i),s=e.slice(i+1);if(s.length<6)throw new Error("Data must be at least 6 characters long");const a=k.decode(s).slice(0,-6),c=A(o,a,t);if(!s.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:o,words:a}}return{encode:function(e,n,r=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof n);const i=e.length+7+n.length;if(!1!==r&&i>r)throw new TypeError(`Length ${i} exceeds limit ${r}`);return`${e=e.toLowerCase()}1${k.encode(n)}${A(e,n,t)}`},decode:s,decodeToBytes:function(e){const{prefix:t,words:n}=s(e,!1);return{prefix:t,words:n,bytes:r(n)}},decodeUnsafe:y(s),fromWords:r,fromWordsUnsafe:o,toWords:i}}const B=S("bech32");S("bech32m");i(p(4),o("0123456789abcdef"),s(""),c((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})))}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};__webpack_require__(6672),__webpack_require__(2451),__webpack_require__(3797),__webpack_require__(5284),__webpack_require__(5857),__webpack_require__(8751),__webpack_require__(5123),__webpack_require__(7909),__webpack_require__(6044),__webpack_require__(8281)})();
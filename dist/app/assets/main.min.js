/*! For license information please see main.min.js.LICENSE.txt */
(()=>{var __webpack_modules__={9187:(t,e)=>{"use strict";function n(t){if(!Number.isSafeInteger(t))throw new Error(`Wrong integer: ${t}`)}function r(...t){const e=(t,e)=>n=>t(e(n));return{encode:Array.from(t).reverse().reduce(((t,n)=>t?e(t,n.encode):n.encode),void 0),decode:t.reduce(((t,n)=>t?e(t,n.decode):n.decode),void 0)}}function i(t){return{encode:e=>{if(!Array.isArray(e)||e.length&&"number"!=typeof e[0])throw new Error("alphabet.encode input should be an array of numbers");return e.map((e=>{if(n(e),e<0||e>=t.length)throw new Error(`Digit index outside alphabet: ${e} (alphabet: ${t.length})`);return t[e]}))},decode:e=>{if(!Array.isArray(e)||e.length&&"string"!=typeof e[0])throw new Error("alphabet.decode input should be array of strings");return e.map((e=>{if("string"!=typeof e)throw new Error(`alphabet.decode: not string element=${e}`);const n=t.indexOf(e);if(-1===n)throw new Error(`Unknown letter: "${e}". Allowed: ${t}`);return n}))}}}function o(t=""){if("string"!=typeof t)throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&"string"!=typeof e[0])throw new Error("join.encode input should be array of strings");for(let t of e)if("string"!=typeof t)throw new Error(`join.encode: non-string input=${t}`);return e.join(t)},decode:e=>{if("string"!=typeof e)throw new Error("join.decode input should be string");return e.split(t)}}}function s(t,e="="){if(n(t),"string"!=typeof e)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let t of n)if("string"!=typeof t)throw new Error(`padding.encode: non-string input=${t}`);for(;n.length*t%8;)n.push(e);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let t of n)if("string"!=typeof t)throw new Error(`padding.decode: non-string input=${t}`);let r=n.length;if(r*t%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if(!((r-1)*t%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function a(t){if("function"!=typeof t)throw new Error("normalize fn should be function");return{encode:t=>t,decode:e=>t(e)}}function c(t,e,r){if(e<2)throw new Error(`convertRadix: wrong from=${e}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(t))throw new Error("convertRadix: data should be array");if(!t.length)return[];let i=0;const o=[],s=Array.from(t);for(s.forEach((t=>{if(n(t),t<0||t>=e)throw new Error(`Wrong integer: ${t}`)}));;){let t=0,n=!0;for(let o=i;o<s.length;o++){const a=s[o],c=e*t+a;if(!Number.isSafeInteger(c)||e*t/e!==t||c-a!=e*t)throw new Error("convertRadix: carry overflow");if(t=c%r,s[o]=Math.floor(c/r),!Number.isSafeInteger(s[o])||s[o]*r+t!==c)throw new Error("convertRadix: carry overflow");n&&(s[o]?n=!1:i=o)}if(o.push(t),n)break}for(let e=0;e<t.length-1&&0===t[e];e++)o.push(0);return o.reverse()}Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64url=e.base64=e.base32crockford=e.base32hex=e.base32=e.base16=e.utils=e.assertNumber=void 0,e.assertNumber=n;const l=(t,e)=>e?l(e,t%e):t,u=(t,e)=>t+(e-l(t,e));function h(t,e,r,i){if(!Array.isArray(t))throw new Error("convertRadix2: data should be array");if(e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(u(e,r)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${r} carryBits=${u(e,r)}`);let o=0,s=0;const a=2**r-1,c=[];for(const i of t){if(n(i),i>=2**e)throw new Error(`convertRadix2: invalid data word=${i} from=${e}`);if(o=o<<e|i,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=r;s-=r)c.push((o>>s-r&a)>>>0);o&=2**s-1}if(o=o<<r-s&a,!i&&s>=e)throw new Error("Excess padding");if(!i&&o)throw new Error(`Non-zero padding: ${o}`);return i&&s>0&&c.push(o>>>0),c}function f(t){return n(t),{encode:e=>{if(!(e instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return c(Array.from(e),256,t)},decode:e=>{if(!Array.isArray(e)||e.length&&"number"!=typeof e[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(c(e,t,256))}}}function d(t,e=!1){if(n(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(u(8,t)>32||u(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return h(Array.from(n),8,t,!e)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(h(n,t,8,e))}}}function p(t){if("function"!=typeof t)throw new Error("unsafeWrapper fn should be function");return function(...e){try{return t.apply(null,e)}catch(t){}}}function y(t,e){if(n(t),"function"!=typeof e)throw new Error("checksum fn should be function");return{encode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const r=e(n).slice(0,t),i=new Uint8Array(n.length+t);return i.set(n),i.set(r,n.length),i},decode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-t),i=e(r).slice(0,t),o=n.slice(-t);for(let e=0;e<t;e++)if(i[e]!==o[e])throw new Error("Invalid checksum");return r}}}e.utils={alphabet:i,chain:r,checksum:y,radix:f,radix2:d,join:o,padding:s},e.base16=r(d(4),i("0123456789ABCDEF"),o("")),e.base32=r(d(5),i("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),s(5),o("")),e.base32hex=r(d(5),i("0123456789ABCDEFGHIJKLMNOPQRSTUV"),s(5),o("")),e.base32crockford=r(d(5),i("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),o(""),a((t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),e.base64=r(d(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),s(6),o("")),e.base64url=r(d(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),s(6),o(""));const g=t=>r(f(58),i(t),o(""));e.base58=g("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=g("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=g("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const w=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(t){let n="";for(let r=0;r<t.length;r+=8){const i=t.subarray(r,r+8);n+=e.base58.encode(i).padStart(w[i.length],"1")}return n},decode(t){let n=[];for(let r=0;r<t.length;r+=11){const i=t.slice(r,r+11),o=w.indexOf(i.length),s=e.base58.decode(i);for(let t=0;t<s.length-o;t++)if(0!==s[t])throw new Error("base58xmr: wrong padding");n=n.concat(Array.from(s.slice(s.length-o)))}return Uint8Array.from(n)}},e.base58check=t=>r(y(4,(e=>t(t(e)))),e.base58);const b=r(i("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),o("")),m=[996825010,642813549,513874426,1027748829,705979059];function v(t){const e=t>>25;let n=(33554431&t)<<5;for(let t=0;t<m.length;t++)1==(e>>t&1)&&(n^=m[t]);return n}function E(t,e,n=1){const r=t.length;let i=1;for(let e=0;e<r;e++){const n=t.charCodeAt(e);if(n<33||n>126)throw new Error(`Invalid prefix (${t})`);i=v(i)^n>>5}i=v(i);for(let e=0;e<r;e++)i=v(i)^31&t.charCodeAt(e);for(let t of e)i=v(i)^t;for(let t=0;t<6;t++)i=v(i);return i^=n,b.encode(h([i%2**30],30,5,!1))}function k(t){const e="bech32"===t?1:734539939,n=d(5),r=n.decode,i=n.encode,o=p(r);function s(t,n=90){if("string"!=typeof t)throw new Error("bech32.decode input should be string, not "+typeof t);if(t.length<8||!1!==n&&t.length>n)throw new TypeError(`Wrong string length: ${t.length} (${t}). Expected (8..${n})`);const r=t.toLowerCase();if(t!==r&&t!==t.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=(t=r).lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const o=t.slice(0,i),s=t.slice(i+1);if(s.length<6)throw new Error("Data must be at least 6 characters long");const a=b.decode(s).slice(0,-6),c=E(o,a,e);if(!s.endsWith(c))throw new Error(`Invalid checksum in ${t}: expected "${c}"`);return{prefix:o,words:a}}return{encode:function(t,n,r=90){if("string"!=typeof t)throw new Error("bech32.encode prefix should be string, not "+typeof t);if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof n);const i=t.length+7+n.length;if(!1!==r&&i>r)throw new TypeError(`Length ${i} exceeds limit ${r}`);return`${t=t.toLowerCase()}1${b.encode(n)}${E(t,n,e)}`},decode:s,decodeToBytes:function(t){const{prefix:e,words:n}=s(t,!1);return{prefix:e,words:n,bytes:r(n)}},decodeUnsafe:p(s),fromWords:r,fromWordsUnsafe:o,toWords:i}}e.bech32=k("bech32"),e.bech32m=k("bech32m"),e.utf8={encode:t=>(new TextDecoder).decode(t),decode:t=>(new TextEncoder).encode(t)},e.hex=r(d(4),i("0123456789abcdef"),o(""),a((t=>{if("string"!=typeof t||t.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof t} with length ${t.length}`);return t.toLowerCase()})));const x={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},_=`Invalid encoding type. Available types: ${Object.keys(x).join(", ")}`;e.bytesToString=(t,e)=>{if("string"!=typeof t||!x.hasOwnProperty(t))throw new TypeError(_);if(!(e instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return x[t].encode(e)},e.str=e.bytesToString,e.stringToBytes=(t,e)=>{if(!x.hasOwnProperty(t))throw new TypeError(_);if("string"!=typeof e)throw new TypeError("stringToBytes() expects string");return x[t].decode(e)},e.bytes=e.stringToBytes},9742:(t,e)=>{"use strict";e.byteLength=function(t){var e=a(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,o=a(t),s=o[0],c=o[1],l=new i(function(t,e,n){return 3*(e+n)/4-n}(0,s,c)),u=0,h=c>0?s-4:s;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;return 2===c&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,l[u++]=255&e),1===c&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e),l},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],s=16383,a=0,l=r-i;a<l;a+=s)o.push(c(t,a,a+s>l?l:a+s));return 1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=o[s],r[o.charCodeAt(s)]=s;function a(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,r){for(var i,o,s=[],a=e;a<r;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},8764:(t,e,n)=>{"use strict";const r=n(9742),i=n(645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.lW=c,e.h2=50;const s=2147483647;function a(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e}function c(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return l(t,e,n)}function l(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|y(t,e);let r=a(n);const i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(G(t,Uint8Array)){const e=new Uint8Array(t);return d(e.buffer,e.byteOffset,e.byteLength)}return f(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(G(t,ArrayBuffer)||t&&G(t.buffer,ArrayBuffer))return d(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(G(t,SharedArrayBuffer)||t&&G(t.buffer,SharedArrayBuffer)))return d(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return c.from(r,e,n);const i=function(t){if(c.isBuffer(t)){const e=0|p(t.length),n=a(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||Y(t.length)?a(0):f(t):"Buffer"===t.type&&Array.isArray(t.data)?f(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return u(t),a(t<0?0:0|p(t))}function f(t){const e=t.length<0?0:0|p(t.length),n=a(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function d(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,c.prototype),r}function p(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function y(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||G(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(i)return r?-1:V(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return S(this,e,n);case"ascii":return C(this,e,n);case"latin1":case"binary":return I(this,e,n);case"base64":return A(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function w(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function b(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Y(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,i){let o,s=1,a=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,n/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let r=-1;for(o=n;o<a;o++)if(l(t,o)===l(e,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===c)return r*s}else-1!==r&&(o-=o-r),r=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){let n=!0;for(let r=0;r<c;r++)if(l(t,o+r)!==l(e,r)){n=!1;break}if(n)return o}return-1}function v(t,e,n,r){n=Number(n)||0;const i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=e.length;let s;for(r>o/2&&(r=o/2),s=0;s<r;++s){const r=parseInt(e.substr(2*s,2),16);if(Y(r))return s;t[n+s]=r}return s}function E(t,e,n,r){return Z(V(e,t.length-n),t,n,r)}function k(t,e,n,r){return Z(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return Z(W(e),t,n,r)}function _(t,e,n,r){return Z(function(t,e){let n,r,i;const o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function A(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function S(t,e,n){n=Math.min(t.length,n);const r=[];let i=e;for(;i<n;){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=n){let n,r,a,c;switch(s){case 1:e<128&&(o=e);break;case 2:n=t[i+1],128==(192&n)&&(c=(31&e)<<6|63&n,c>127&&(o=c));break;case 3:n=t[i+1],r=t[i+2],128==(192&n)&&128==(192&r)&&(c=(15&e)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:n=t[i+1],r=t[i+2],a=t[i+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(c=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return function(t){const e=t.length;if(e<=B)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=B));return n}(r)}c.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(t,e,n){return l(t,e,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,n){return function(t,e,n){return u(t),t<=0?a(t):void 0!==e?"string"==typeof n?a(t).fill(e,n):a(t).fill(e):a(t)}(t,e,n)},c.allocUnsafe=function(t){return h(t)},c.allocUnsafeSlow=function(t){return h(t)},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(G(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),G(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=c.allocUnsafe(e);let i=0;for(n=0;n<t.length;++n){let e=t[n];if(G(e,Uint8Array))i+e.length>r.length?(c.isBuffer(e)||(e=c.from(e)),e.copy(r,i)):Uint8Array.prototype.set.call(r,e,i);else{if(!c.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,i)}i+=e.length}return r},c.byteLength=y,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)w(this,e,e+1);return this},c.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)w(this,e,e+3),w(this,e+1,e+2);return this},c.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)w(this,e,e+7),w(this,e+1,e+6),w(this,e+2,e+5),w(this,e+3,e+4);return this},c.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?S(this,0,t):g.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){let t="";const n=e.h2;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(t,e,n,r,i){if(G(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;let o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0);const a=Math.min(o,s),l=this.slice(r,i),u=t.slice(e,n);for(let t=0;t<a;++t)if(l[t]!==u[t]){o=l[t],s=u[t];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return E(this,t,e,n);case"ascii":case"latin1":case"binary":return k(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const B=4096;function C(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function I(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function R(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=e;r<n;++r)i+=J[t[r]];return i}function N(t,e,n){const r=t.slice(e,n);let i="";for(let t=0;t<r.length-1;t+=2)i+=String.fromCharCode(r[t]+256*r[t+1]);return i}function U(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function T(t,e,n,r,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function P(t,e,n,r,i){q(e,r,i,t,n,7);let o=Number(e&BigInt(4294967295));t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,n}function O(t,e,n,r,i){q(e,r,i,t,n,7);let o=Number(e&BigInt(4294967295));t[n+7]=o,o>>=8,t[n+6]=o,o>>=8,t[n+5]=o,o>>=8,t[n+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=s,s>>=8,t[n+2]=s,s>>=8,t[n+1]=s,s>>=8,t[n]=s,n+8}function L(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,n,r,o){return e=+e,n>>>=0,o||L(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function $(t,e,n,r,o){return e=+e,n>>>=0,o||L(t,0,n,8),i.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||U(t,e,this.length);let r=this[t],i=1,o=0;for(;++o<e&&(i*=256);)r+=this[t+o]*i;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||U(t,e,this.length);let r=this[t+--e],i=1;for(;e>0&&(i*=256);)r+=this[t+--e]*i;return r},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t>>>=0,e||U(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||U(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||U(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||U(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||U(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readBigUInt64LE=Q((function(t){H(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||K(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),c.prototype.readBigUInt64BE=Q((function(t){H(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||K(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),c.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||U(t,e,this.length);let r=this[t],i=1,o=0;for(;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||U(t,e,this.length);let r=e,i=1,o=this[t+--r];for(;r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return t>>>=0,e||U(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||U(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){t>>>=0,e||U(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||U(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||U(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readBigInt64LE=Q((function(t){H(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||K(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),c.prototype.readBigInt64BE=Q((function(t){H(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||K(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),c.prototype.readFloatLE=function(t,e){return t>>>=0,e||U(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||U(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||U(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||U(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||T(this,t,e,n,Math.pow(2,8*n)-1,0);let i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||T(this,t,e,n,Math.pow(2,8*n)-1,0);let i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigUInt64LE=Q((function(t,e=0){return P(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=Q((function(t,e=0){return O(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);T(this,t,e,n,r-1,-r)}let i=0,o=1,s=0;for(this[e]=255&t;++i<n&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);T(this,t,e,n,r-1,-r)}let i=n-1,o=1,s=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigInt64LE=Q((function(t,e=0){return P(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=Q((function(t,e=0){return O(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return $(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return $(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{const o=c.isBuffer(t)?t:c.from(t,r),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=o[i%s]}return this};const D={};function z(t,e,n){D[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function M(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function q(t,e,n,r,i,o){if(t>n||t<e){const r="bigint"==typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new D.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,n){H(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||K(e,t.length-(n+1))}(r,i,o)}function H(t,e){if("number"!=typeof t)throw new D.ERR_INVALID_ARG_TYPE(e,"number",t)}function K(t,e,n){if(Math.floor(t)!==t)throw H(t,n),new D.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new D.ERR_BUFFER_OUT_OF_BOUNDS;throw new D.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}z("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),z("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),z("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=M(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=M(i)),i+="n"),r+=` It must be ${e}. Received ${i}`,r}),RangeError);const j=/[^+/0-9A-Za-z-_]/g;function V(t,e){let n;e=e||1/0;const r=t.length;let i=null;const o=[];for(let s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function W(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Z(t,e,n,r){let i;for(i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function G(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Y(t){return t!=t}const J=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)e[r+i]=t[n]+t[i]}return e}();function Q(t){return"undefined"==typeof BigInt?X:t}function X(){throw new Error("BigInt not supported")}},452:function(t,e,n){var r;t.exports=(r=n(8249),n(8269),n(8214),n(888),n(5109),function(){var t=r,e=t.lib.BlockCipher,n=t.algo,i=[],o=[],s=[],a=[],c=[],l=[],u=[],h=[],f=[],d=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var n=0,r=0;for(e=0;e<256;e++){var p=r^r<<1^r<<2^r<<3^r<<4;p=p>>>8^255&p^99,i[n]=p,o[p]=n;var y=t[n],g=t[y],w=t[g],b=257*t[p]^16843008*p;s[n]=b<<24|b>>>8,a[n]=b<<16|b>>>16,c[n]=b<<8|b>>>24,l[n]=b,b=16843009*w^65537*g^257*y^16843008*n,u[p]=b<<24|b>>>8,h[p]=b<<16|b>>>16,f[p]=b<<8|b>>>24,d[p]=b,n?(n=y^t[t[t[w^y]]],r^=t[t[r]]):n=r=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],y=n.AES=e.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,n=t.sigBytes/4,r=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],s=0;s<r;s++)s<n?o[s]=e[s]:(l=o[s-1],s%n?n>6&&s%n==4&&(l=i[l>>>24]<<24|i[l>>>16&255]<<16|i[l>>>8&255]<<8|i[255&l]):(l=i[(l=l<<8|l>>>24)>>>24]<<24|i[l>>>16&255]<<16|i[l>>>8&255]<<8|i[255&l],l^=p[s/n|0]<<24),o[s]=o[s-n]^l);for(var a=this._invKeySchedule=[],c=0;c<r;c++){if(s=r-c,c%4)var l=o[s];else l=o[s-4];a[c]=c<4||s<=4?l:u[i[l>>>24]]^h[i[l>>>16&255]]^f[i[l>>>8&255]]^d[i[255&l]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,a,c,l,i)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,u,h,f,d,o),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,i,o,s,a){for(var c=this._nRounds,l=t[e]^n[0],u=t[e+1]^n[1],h=t[e+2]^n[2],f=t[e+3]^n[3],d=4,p=1;p<c;p++){var y=r[l>>>24]^i[u>>>16&255]^o[h>>>8&255]^s[255&f]^n[d++],g=r[u>>>24]^i[h>>>16&255]^o[f>>>8&255]^s[255&l]^n[d++],w=r[h>>>24]^i[f>>>16&255]^o[l>>>8&255]^s[255&u]^n[d++],b=r[f>>>24]^i[l>>>16&255]^o[u>>>8&255]^s[255&h]^n[d++];l=y,u=g,h=w,f=b}y=(a[l>>>24]<<24|a[u>>>16&255]<<16|a[h>>>8&255]<<8|a[255&f])^n[d++],g=(a[u>>>24]<<24|a[h>>>16&255]<<16|a[f>>>8&255]<<8|a[255&l])^n[d++],w=(a[h>>>24]<<24|a[f>>>16&255]<<16|a[l>>>8&255]<<8|a[255&u])^n[d++],b=(a[f>>>24]<<24|a[l>>>16&255]<<16|a[u>>>8&255]<<8|a[255&h])^n[d++],t[e]=y,t[e+1]=g,t[e+2]=w,t[e+3]=b},keySize:8});t.AES=e._createHelper(y)}(),r.AES)},7407:function(t,e,n){var r;t.exports=(r=n(8249),n(8269),n(8214),n(888),n(5109),function(){var t=r,e=t.lib.BlockCipher,n=t.algo;const i=16,o=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var a={pbox:[],sbox:[]};function c(t,e){let n=e>>24&255,r=e>>16&255,i=e>>8&255,o=255&e,s=t.sbox[0][n]+t.sbox[1][r];return s^=t.sbox[2][i],s+=t.sbox[3][o],s}function l(t,e,n){let r,o=e,s=n;for(let e=0;e<i;++e)o^=t.pbox[e],s=c(t,o)^s,r=o,o=s,s=r;return r=o,o=s,s=r,s^=t.pbox[i],o^=t.pbox[i+1],{left:o,right:s}}var u=n.Blowfish=e.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var t=this._keyPriorReset=this._key,e=t.words,n=t.sigBytes/4;!function(t,e,n){for(let e=0;e<4;e++){t.sbox[e]=[];for(let n=0;n<256;n++)t.sbox[e][n]=s[e][n]}let r=0;for(let s=0;s<i+2;s++)t.pbox[s]=o[s]^e[r],r++,r>=n&&(r=0);let a=0,c=0,u=0;for(let e=0;e<i+2;e+=2)u=l(t,a,c),a=u.left,c=u.right,t.pbox[e]=a,t.pbox[e+1]=c;for(let e=0;e<4;e++)for(let n=0;n<256;n+=2)u=l(t,a,c),a=u.left,c=u.right,t.sbox[e][n]=a,t.sbox[e][n+1]=c}(a,e,n)}},encryptBlock:function(t,e){var n=l(a,t[e],t[e+1]);t[e]=n.left,t[e+1]=n.right},decryptBlock:function(t,e){var n=function(t,e,n){let r,o=e,s=n;for(let e=i+1;e>1;--e)o^=t.pbox[e],s=c(t,o)^s,r=o,o=s,s=r;return r=o,o=s,s=r,s^=t.pbox[1],o^=t.pbox[0],{left:o,right:s}}(a,t[e],t[e+1]);t[e]=n.left,t[e+1]=n.right},blockSize:2,keySize:4,ivSize:2});t.Blowfish=e._createHelper(u)}(),r.Blowfish)},5109:function(t,e,n){var r,i,o,s,a,c,l,u,h,f,d,p,y,g,w,b,m,v,E;t.exports=(r=n(8249),n(888),void(r.lib.Cipher||(i=r,o=i.lib,s=o.Base,a=o.WordArray,c=o.BufferedBlockAlgorithm,l=i.enc,l.Utf8,u=l.Base64,h=i.algo.EvpKDF,f=o.Cipher=c.extend({cfg:s.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?E:m}return function(e){return{encrypt:function(n,r,i){return t(r).encrypt(e,n,r,i)},decrypt:function(n,r,i){return t(r).decrypt(e,n,r,i)}}}}()}),o.StreamCipher=f.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),d=i.mode={},p=o.BlockCipherMode=s.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),y=d.CBC=function(){var t=p.extend();function e(t,e,n){var r,i=this._iv;i?(r=i,this._iv=void 0):r=this._prevBlock;for(var o=0;o<n;o++)t[e+o]^=r[o]}return t.Encryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize;e.call(this,t,n,i),r.encryptBlock(t,n),this._prevBlock=t.slice(n,n+i)}}),t.Decryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize,o=t.slice(n,n+i);r.decryptBlock(t,n),e.call(this,t,n,i),this._prevBlock=o}}),t}(),g=(i.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,r=n-t.sigBytes%n,i=r<<24|r<<16|r<<8|r,o=[],s=0;s<r;s+=4)o.push(i);var c=a.create(o,r);t.concat(c)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},o.BlockCipher=f.extend({cfg:f.cfg.extend({mode:y,padding:g}),reset:function(){var t;f.reset.call(this);var e=this.cfg,n=e.iv,r=e.mode;this._xformMode==this._ENC_XFORM_MODE?t=r.createEncryptor:(t=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==t?this._mode.init(this,n&&n.words):(this._mode=t.call(r,this,n&&n.words),this._mode.__creator=t)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t,e=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t},blockSize:4}),w=o.CipherParams=s.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),b=(i.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;return(n?a.create([1398893684,1701076831]).concat(n).concat(e):e).toString(u)},parse:function(t){var e,n=u.parse(t),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(e=a.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),w.create({ciphertext:n,salt:e})}},m=o.SerializableCipher=s.extend({cfg:s.extend({format:b}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var i=t.createEncryptor(n,r),o=i.finalize(e),s=i.cfg;return w.create({ciphertext:o,key:n,iv:s.iv,algorithm:t,mode:s.mode,padding:s.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),v=(i.kdf={}).OpenSSL={execute:function(t,e,n,r,i){if(r||(r=a.random(8)),i)o=h.create({keySize:e+n,hasher:i}).compute(t,r);else var o=h.create({keySize:e+n}).compute(t,r);var s=a.create(o.words.slice(e),4*n);return o.sigBytes=4*e,w.create({key:o,iv:s,salt:r})}},E=o.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:v}),encrypt:function(t,e,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,t.keySize,t.ivSize,r.salt,r.hasher);r.iv=i.iv;var o=m.encrypt.call(this,t,e,i.key,r);return o.mixIn(i),o},decrypt:function(t,e,n,r){r=this.cfg.extend(r),e=this._parse(e,r.format);var i=r.kdf.execute(n,t.keySize,t.ivSize,e.salt,r.hasher);return r.iv=i.iv,m.decrypt.call(this,t,e,i.key,r)}}))))},8249:function(t,e,n){var r;t.exports=(r=r||function(t,e){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(2480)}catch(t){}var i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),s={},a=s.lib={},c=a.Base={extend:function(t){var e=o(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},l=a.WordArray=c.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||h).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=s<<24-(r+o)%4*8}else for(var a=0;a<i;a+=4)e[r+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=c.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(i());return new l.init(e,t)}}),u=s.enc={},h=u.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new l.init(n,e/2)}},f=u.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new l.init(n,e)}},d=u.Utf8={stringify:function(t){try{return decodeURIComponent(escape(f.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return f.parse(unescape(encodeURIComponent(t)))}},p=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n,r=this._data,i=r.words,o=r.sigBytes,s=this.blockSize,a=o/(4*s),c=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*s,u=t.min(4*c,o);if(c){for(var h=0;h<c;h+=s)this._doProcessBlock(i,h);n=i.splice(0,c),r.sigBytes-=u}return new l.init(n,u)},clone:function(){var t=c.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),y=(a.Hasher=p.extend({cfg:c.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new y.HMAC.init(t,n).finalize(e)}}}),s.algo={});return s}(Math),r)},8269:function(t,e,n){var r,i,o;t.exports=(r=n(8249),o=(i=r).lib.WordArray,i.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var i=[],o=0;o<n;o+=3)for(var s=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)i.push(r.charAt(s>>>6*(3-a)&63));var c=r.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(t){var e=t.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var i=0;i<n.length;i++)r[n.charCodeAt(i)]=i}var s=n.charAt(64);if(s){var a=t.indexOf(s);-1!==a&&(e=a)}return function(t,e,n){for(var r=[],i=0,s=0;s<e;s++)if(s%4){var a=n[t.charCodeAt(s-1)]<<s%4*2|n[t.charCodeAt(s)]>>>6-s%4*2;r[i>>>2]|=a<<24-i%4*8,i++}return o.create(r,i)}(t,e,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64)},3786:function(t,e,n){var r,i,o;t.exports=(r=n(8249),o=(i=r).lib.WordArray,i.enc.Base64url={stringify:function(t,e){void 0===e&&(e=!0);var n=t.words,r=t.sigBytes,i=e?this._safe_map:this._map;t.clamp();for(var o=[],s=0;s<r;s+=3)for(var a=(n[s>>>2]>>>24-s%4*8&255)<<16|(n[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|n[s+2>>>2]>>>24-(s+2)%4*8&255,c=0;c<4&&s+.75*c<r;c++)o.push(i.charAt(a>>>6*(3-c)&63));var l=i.charAt(64);if(l)for(;o.length%4;)o.push(l);return o.join("")},parse:function(t,e){void 0===e&&(e=!0);var n=t.length,r=e?this._safe_map:this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var s=0;s<r.length;s++)i[r.charCodeAt(s)]=s}var a=r.charAt(64);if(a){var c=t.indexOf(a);-1!==c&&(n=c)}return function(t,e,n){for(var r=[],i=0,s=0;s<e;s++)if(s%4){var a=n[t.charCodeAt(s-1)]<<s%4*2|n[t.charCodeAt(s)]>>>6-s%4*2;r[i>>>2]|=a<<24-i%4*8,i++}return o.create(r,i)}(t,n,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},r.enc.Base64url)},298:function(t,e,n){var r;t.exports=(r=n(8249),function(){var t=r,e=t.lib.WordArray,n=t.enc;function i(t){return t<<8&4278255360|t>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i+=2){var o=e[i>>>2]>>>16-i%4*8&65535;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var n=t.length,r=[],i=0;i<n;i++)r[i>>>1]|=t.charCodeAt(i)<<16-i%2*16;return e.create(r,2*n)}},n.Utf16LE={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o+=2){var s=i(e[o>>>2]>>>16-o%4*8&65535);r.push(String.fromCharCode(s))}return r.join("")},parse:function(t){for(var n=t.length,r=[],o=0;o<n;o++)r[o>>>1]|=i(t.charCodeAt(o)<<16-o%2*16);return e.create(r,2*n)}}}(),r.enc.Utf16)},888:function(t,e,n){var r,i,o,s,a,c,l,u;t.exports=(u=n(8249),n(2783),n(9824),o=(i=(r=u).lib).Base,s=i.WordArray,c=(a=r.algo).MD5,l=a.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:c,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n,r=this.cfg,i=r.hasher.create(),o=s.create(),a=o.words,c=r.keySize,l=r.iterations;a.length<c;){n&&i.update(n),n=i.update(t).finalize(e),i.reset();for(var u=1;u<l;u++)n=i.finalize(n),i.reset();o.concat(n)}return o.sigBytes=4*c,o}}),r.EvpKDF=function(t,e,n){return l.create(n).compute(t,e)},u.EvpKDF)},2209:function(t,e,n){var r,i,o,s;t.exports=(s=n(8249),n(5109),i=(r=s).lib.CipherParams,o=r.enc.Hex,r.format.Hex={stringify:function(t){return t.ciphertext.toString(o)},parse:function(t){var e=o.parse(t);return i.create({ciphertext:e})}},s.format.Hex)},9824:function(t,e,n){var r,i,o;t.exports=(i=(r=n(8249)).lib.Base,o=r.enc.Utf8,void(r.algo.HMAC=i.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=o.parse(e));var n=t.blockSize,r=4*n;e.sigBytes>r&&(e=t.finalize(e)),e.clamp();for(var i=this._oKey=e.clone(),s=this._iKey=e.clone(),a=i.words,c=s.words,l=0;l<n;l++)a[l]^=1549556828,c[l]^=909522486;i.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})))},1354:function(t,e,n){var r;t.exports=(r=n(8249),n(4938),n(4433),n(298),n(8269),n(3786),n(8214),n(2783),n(2153),n(7792),n(34),n(7460),n(3327),n(706),n(9824),n(2112),n(888),n(5109),n(8568),n(4242),n(9968),n(7660),n(1148),n(3615),n(2807),n(1077),n(6475),n(6991),n(2209),n(452),n(4253),n(1857),n(4454),n(3974),n(7407),r)},4433:function(t,e,n){var r;t.exports=(r=n(8249),function(){if("function"==typeof ArrayBuffer){var t=r.lib.WordArray,e=t.init,n=t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var n=t.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=t[i]<<24-i%4*8;e.call(this,r,n)}else e.apply(this,arguments)};n.prototype=t}}(),r.lib.WordArray)},8214:function(t,e,n){var r;t.exports=(r=n(8249),function(t){var e=r,n=e.lib,i=n.WordArray,o=n.Hasher,s=e.algo,a=[];!function(){for(var e=0;e<64;e++)a[e]=4294967296*t.abs(t.sin(e+1))|0}();var c=s.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,i=t[r];t[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,s=t[e+0],c=t[e+1],d=t[e+2],p=t[e+3],y=t[e+4],g=t[e+5],w=t[e+6],b=t[e+7],m=t[e+8],v=t[e+9],E=t[e+10],k=t[e+11],x=t[e+12],_=t[e+13],A=t[e+14],S=t[e+15],B=o[0],C=o[1],I=o[2],R=o[3];B=l(B,C,I,R,s,7,a[0]),R=l(R,B,C,I,c,12,a[1]),I=l(I,R,B,C,d,17,a[2]),C=l(C,I,R,B,p,22,a[3]),B=l(B,C,I,R,y,7,a[4]),R=l(R,B,C,I,g,12,a[5]),I=l(I,R,B,C,w,17,a[6]),C=l(C,I,R,B,b,22,a[7]),B=l(B,C,I,R,m,7,a[8]),R=l(R,B,C,I,v,12,a[9]),I=l(I,R,B,C,E,17,a[10]),C=l(C,I,R,B,k,22,a[11]),B=l(B,C,I,R,x,7,a[12]),R=l(R,B,C,I,_,12,a[13]),I=l(I,R,B,C,A,17,a[14]),B=u(B,C=l(C,I,R,B,S,22,a[15]),I,R,c,5,a[16]),R=u(R,B,C,I,w,9,a[17]),I=u(I,R,B,C,k,14,a[18]),C=u(C,I,R,B,s,20,a[19]),B=u(B,C,I,R,g,5,a[20]),R=u(R,B,C,I,E,9,a[21]),I=u(I,R,B,C,S,14,a[22]),C=u(C,I,R,B,y,20,a[23]),B=u(B,C,I,R,v,5,a[24]),R=u(R,B,C,I,A,9,a[25]),I=u(I,R,B,C,p,14,a[26]),C=u(C,I,R,B,m,20,a[27]),B=u(B,C,I,R,_,5,a[28]),R=u(R,B,C,I,d,9,a[29]),I=u(I,R,B,C,b,14,a[30]),B=h(B,C=u(C,I,R,B,x,20,a[31]),I,R,g,4,a[32]),R=h(R,B,C,I,m,11,a[33]),I=h(I,R,B,C,k,16,a[34]),C=h(C,I,R,B,A,23,a[35]),B=h(B,C,I,R,c,4,a[36]),R=h(R,B,C,I,y,11,a[37]),I=h(I,R,B,C,b,16,a[38]),C=h(C,I,R,B,E,23,a[39]),B=h(B,C,I,R,_,4,a[40]),R=h(R,B,C,I,s,11,a[41]),I=h(I,R,B,C,p,16,a[42]),C=h(C,I,R,B,w,23,a[43]),B=h(B,C,I,R,v,4,a[44]),R=h(R,B,C,I,x,11,a[45]),I=h(I,R,B,C,S,16,a[46]),B=f(B,C=h(C,I,R,B,d,23,a[47]),I,R,s,6,a[48]),R=f(R,B,C,I,b,10,a[49]),I=f(I,R,B,C,A,15,a[50]),C=f(C,I,R,B,g,21,a[51]),B=f(B,C,I,R,x,6,a[52]),R=f(R,B,C,I,p,10,a[53]),I=f(I,R,B,C,E,15,a[54]),C=f(C,I,R,B,c,21,a[55]),B=f(B,C,I,R,m,6,a[56]),R=f(R,B,C,I,S,10,a[57]),I=f(I,R,B,C,w,15,a[58]),C=f(C,I,R,B,_,21,a[59]),B=f(B,C,I,R,y,6,a[60]),R=f(R,B,C,I,k,10,a[61]),I=f(I,R,B,C,d,15,a[62]),C=f(C,I,R,B,v,21,a[63]),o[0]=o[0]+B|0,o[1]=o[1]+C|0,o[2]=o[2]+I|0,o[3]=o[3]+R|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var o=t.floor(r/4294967296),s=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,c=a.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function l(t,e,n,r,i,o,s){var a=t+(e&n|~e&r)+i+s;return(a<<o|a>>>32-o)+e}function u(t,e,n,r,i,o,s){var a=t+(e&r|n&~r)+i+s;return(a<<o|a>>>32-o)+e}function h(t,e,n,r,i,o,s){var a=t+(e^n^r)+i+s;return(a<<o|a>>>32-o)+e}function f(t,e,n,r,i,o,s){var a=t+(n^(e|~r))+i+s;return(a<<o|a>>>32-o)+e}e.MD5=o._createHelper(c),e.HmacMD5=o._createHmacHelper(c)}(Math),r.MD5)},8568:function(t,e,n){var r;t.exports=(r=n(8249),n(5109),r.mode.CFB=function(){var t=r.lib.BlockCipherMode.extend();function e(t,e,n,r){var i,o=this._iv;o?(i=o.slice(0),this._iv=void 0):i=this._prevBlock,r.encryptBlock(i,0);for(var s=0;s<n;s++)t[e+s]^=i[s]}return t.Encryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize;e.call(this,t,n,i,r),this._prevBlock=t.slice(n,n+i)}}),t.Decryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize,o=t.slice(n,n+i);e.call(this,t,n,i,r),this._prevBlock=o}}),t}(),r.mode.CFB)},9968:function(t,e,n){var r;t.exports=(r=n(8249),n(5109),r.mode.CTRGladman=function(){var t=r.lib.BlockCipherMode.extend();function e(t){if(255==(t>>24&255)){var e=t>>16&255,n=t>>8&255,r=255&t;255===e?(e=0,255===n?(n=0,255===r?r=0:++r):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=r}else t+=1<<24;return t}var n=t.Encryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize,o=this._iv,s=this._counter;o&&(s=this._counter=o.slice(0),this._iv=void 0),function(t){0===(t[0]=e(t[0]))&&(t[1]=e(t[1]))}(s);var a=s.slice(0);r.encryptBlock(a,0);for(var c=0;c<i;c++)t[n+c]^=a[c]}});return t.Decryptor=n,t}(),r.mode.CTRGladman)},4242:function(t,e,n){var r,i,o;t.exports=(o=n(8249),n(5109),o.mode.CTR=(i=(r=o.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var s=o.slice(0);n.encryptBlock(s,0),o[r-1]=o[r-1]+1|0;for(var a=0;a<r;a++)t[e+a]^=s[a]}}),r.Decryptor=i,r),o.mode.CTR)},1148:function(t,e,n){var r,i;t.exports=(i=n(8249),n(5109),i.mode.ECB=((r=i.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),r.Decryptor=r.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),r),i.mode.ECB)},7660:function(t,e,n){var r,i,o;t.exports=(o=n(8249),n(5109),o.mode.OFB=(i=(r=o.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var s=0;s<r;s++)t[e+s]^=o[s]}}),r.Decryptor=i,r),o.mode.OFB)},3615:function(t,e,n){var r;t.exports=(r=n(8249),n(5109),r.pad.AnsiX923={pad:function(t,e){var n=t.sigBytes,r=4*e,i=r-n%r,o=n+i-1;t.clamp(),t.words[o>>>2]|=i<<24-o%4*8,t.sigBytes+=i},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},r.pad.Ansix923)},2807:function(t,e,n){var r;t.exports=(r=n(8249),n(5109),r.pad.Iso10126={pad:function(t,e){var n=4*e,i=n-t.sigBytes%n;t.concat(r.lib.WordArray.random(i-1)).concat(r.lib.WordArray.create([i<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},r.pad.Iso10126)},1077:function(t,e,n){var r;t.exports=(r=n(8249),n(5109),r.pad.Iso97971={pad:function(t,e){t.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(t,e)},unpad:function(t){r.pad.ZeroPadding.unpad(t),t.sigBytes--}},r.pad.Iso97971)},6991:function(t,e,n){var r;t.exports=(r=n(8249),n(5109),r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding)},6475:function(t,e,n){var r;t.exports=(r=n(8249),n(5109),r.pad.ZeroPadding={pad:function(t,e){var n=4*e;t.clamp(),t.sigBytes+=n-(t.sigBytes%n||n)},unpad:function(t){var e=t.words,n=t.sigBytes-1;for(n=t.sigBytes-1;n>=0;n--)if(e[n>>>2]>>>24-n%4*8&255){t.sigBytes=n+1;break}}},r.pad.ZeroPadding)},2112:function(t,e,n){var r,i,o,s,a,c,l,u,h;t.exports=(h=n(8249),n(2153),n(9824),o=(i=(r=h).lib).Base,s=i.WordArray,c=(a=r.algo).SHA256,l=a.HMAC,u=a.PBKDF2=o.extend({cfg:o.extend({keySize:4,hasher:c,iterations:25e4}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,r=l.create(n.hasher,t),i=s.create(),o=s.create([1]),a=i.words,c=o.words,u=n.keySize,h=n.iterations;a.length<u;){var f=r.update(e).finalize(o);r.reset();for(var d=f.words,p=d.length,y=f,g=1;g<h;g++){y=r.finalize(y),r.reset();for(var w=y.words,b=0;b<p;b++)d[b]^=w[b]}i.concat(f),c[0]++}return i.sigBytes=4*u,i}}),r.PBKDF2=function(t,e,n){return u.create(n).compute(t,e)},h.PBKDF2)},3974:function(t,e,n){var r;t.exports=(r=n(8249),n(8269),n(8214),n(888),n(5109),function(){var t=r,e=t.lib.StreamCipher,n=t.algo,i=[],o=[],s=[],a=n.RabbitLegacy=e.extend({_doReset:function(){var t=this._key.words,e=this.cfg.iv,n=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],r=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var i=0;i<4;i++)c.call(this);for(i=0;i<8;i++)r[i]^=n[i+4&7];if(e){var o=e.words,s=o[0],a=o[1],l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),h=l>>>16|4294901760&u,f=u<<16|65535&l;for(r[0]^=l,r[1]^=h,r[2]^=u,r[3]^=f,r[4]^=l,r[5]^=h,r[6]^=u,r[7]^=f,i=0;i<4;i++)c.call(this)}},_doProcessBlock:function(t,e){var n=this._X;c.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),t[e+r]^=i[r]},blockSize:4,ivSize:2});function c(){for(var t=this._X,e=this._C,n=0;n<8;n++)o[n]=e[n];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<o[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<o[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<o[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<o[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<o[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<o[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<o[6]>>>0?1:0)|0,this._b=e[7]>>>0<o[7]>>>0?1:0,n=0;n<8;n++){var r=t[n]+e[n],i=65535&r,a=r>>>16,c=((i*i>>>17)+i*a>>>15)+a*a,l=((4294901760&r)*r|0)+((65535&r)*r|0);s[n]=c^l}t[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,t[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,t[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,t[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,t[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,t[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,t[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,t[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.RabbitLegacy=e._createHelper(a)}(),r.RabbitLegacy)},4454:function(t,e,n){var r;t.exports=(r=n(8249),n(8269),n(8214),n(888),n(5109),function(){var t=r,e=t.lib.StreamCipher,n=t.algo,i=[],o=[],s=[],a=n.Rabbit=e.extend({_doReset:function(){for(var t=this._key.words,e=this.cfg.iv,n=0;n<4;n++)t[n]=16711935&(t[n]<<8|t[n]>>>24)|4278255360&(t[n]<<24|t[n]>>>8);var r=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],i=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];for(this._b=0,n=0;n<4;n++)c.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(e){var o=e.words,s=o[0],a=o[1],l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),h=l>>>16|4294901760&u,f=u<<16|65535&l;for(i[0]^=l,i[1]^=h,i[2]^=u,i[3]^=f,i[4]^=l,i[5]^=h,i[6]^=u,i[7]^=f,n=0;n<4;n++)c.call(this)}},_doProcessBlock:function(t,e){var n=this._X;c.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),t[e+r]^=i[r]},blockSize:4,ivSize:2});function c(){for(var t=this._X,e=this._C,n=0;n<8;n++)o[n]=e[n];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<o[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<o[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<o[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<o[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<o[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<o[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<o[6]>>>0?1:0)|0,this._b=e[7]>>>0<o[7]>>>0?1:0,n=0;n<8;n++){var r=t[n]+e[n],i=65535&r,a=r>>>16,c=((i*i>>>17)+i*a>>>15)+a*a,l=((4294901760&r)*r|0)+((65535&r)*r|0);s[n]=c^l}t[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,t[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,t[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,t[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,t[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,t[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,t[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,t[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.Rabbit=e._createHelper(a)}(),r.Rabbit)},1857:function(t,e,n){var r;t.exports=(r=n(8249),n(8269),n(8214),n(888),n(5109),function(){var t=r,e=t.lib.StreamCipher,n=t.algo,i=n.RC4=e.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes,r=this._S=[],i=0;i<256;i++)r[i]=i;i=0;for(var o=0;i<256;i++){var s=i%n,a=e[s>>>2]>>>24-s%4*8&255;o=(o+r[i]+a)%256;var c=r[i];r[i]=r[o],r[o]=c}this._i=this._j=0},_doProcessBlock:function(t,e){t[e]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var t=this._S,e=this._i,n=this._j,r=0,i=0;i<4;i++){n=(n+t[e=(e+1)%256])%256;var o=t[e];t[e]=t[n],t[n]=o,r|=t[(t[e]+t[n])%256]<<24-8*i}return this._i=e,this._j=n,r}t.RC4=e._createHelper(i);var s=n.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)o.call(this)}});t.RC4Drop=e._createHelper(s)}(),r.RC4)},706:function(t,e,n){var r;t.exports=(r=n(8249),function(t){var e=r,n=e.lib,i=n.WordArray,o=n.Hasher,s=e.algo,a=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),l=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=i.create([0,1518500249,1859775393,2400959708,2840853838]),f=i.create([1352829926,1548603684,1836072691,2053994217,0]),d=s.RIPEMD160=o.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,i=t[r];t[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o,s,d,v,E,k,x,_,A,S,B,C=this._hash.words,I=h.words,R=f.words,N=a.words,U=c.words,T=l.words,P=u.words;for(k=o=C[0],x=s=C[1],_=d=C[2],A=v=C[3],S=E=C[4],n=0;n<80;n+=1)B=o+t[e+N[n]]|0,B+=n<16?p(s,d,v)+I[0]:n<32?y(s,d,v)+I[1]:n<48?g(s,d,v)+I[2]:n<64?w(s,d,v)+I[3]:b(s,d,v)+I[4],B=(B=m(B|=0,T[n]))+E|0,o=E,E=v,v=m(d,10),d=s,s=B,B=k+t[e+U[n]]|0,B+=n<16?b(x,_,A)+R[0]:n<32?w(x,_,A)+R[1]:n<48?g(x,_,A)+R[2]:n<64?y(x,_,A)+R[3]:p(x,_,A)+R[4],B=(B=m(B|=0,P[n]))+S|0,k=S,S=A,A=m(_,10),_=x,x=B;B=C[1]+d+A|0,C[1]=C[2]+v+S|0,C[2]=C[3]+E+k|0,C[3]=C[4]+o+x|0,C[4]=C[0]+s+_|0,C[0]=B},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process();for(var i=this._hash,o=i.words,s=0;s<5;s++){var a=o[s];o[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return i},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function p(t,e,n){return t^e^n}function y(t,e,n){return t&e|~t&n}function g(t,e,n){return(t|~e)^n}function w(t,e,n){return t&n|e&~n}function b(t,e,n){return t^(e|~n)}function m(t,e){return t<<e|t>>>32-e}e.RIPEMD160=o._createHelper(d),e.HmacRIPEMD160=o._createHmacHelper(d)}(Math),r.RIPEMD160)},2783:function(t,e,n){var r,i,o,s,a,c,l,u;t.exports=(i=(r=u=n(8249)).lib,o=i.WordArray,s=i.Hasher,a=r.algo,c=[],l=a.SHA1=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=0;l<80;l++){if(l<16)c[l]=0|t[e+l];else{var u=c[l-3]^c[l-8]^c[l-14]^c[l-16];c[l]=u<<1|u>>>31}var h=(r<<5|r>>>27)+a+c[l];h+=l<20?1518500249+(i&o|~i&s):l<40?1859775393+(i^o^s):l<60?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,a=s,s=o,o=i<<30|i>>>2,i=r,r=h}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=s.clone.call(this);return t._hash=this._hash.clone(),t}}),r.SHA1=s._createHelper(l),r.HmacSHA1=s._createHmacHelper(l),u.SHA1)},7792:function(t,e,n){var r,i,o,s,a,c;t.exports=(c=n(8249),n(2153),i=(r=c).lib.WordArray,o=r.algo,s=o.SHA256,a=o.SHA224=s.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=s._doFinalize.call(this);return t.sigBytes-=4,t}}),r.SHA224=s._createHelper(a),r.HmacSHA224=s._createHmacHelper(a),c.SHA224)},2153:function(t,e,n){var r;t.exports=(r=n(8249),function(t){var e=r,n=e.lib,i=n.WordArray,o=n.Hasher,s=e.algo,a=[],c=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,i=0;i<64;)e(r)&&(i<8&&(a[i]=n(t.pow(r,.5))),c[i]=n(t.pow(r,1/3)),i++),r++}();var l=[],u=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],u=n[5],h=n[6],f=n[7],d=0;d<64;d++){if(d<16)l[d]=0|t[e+d];else{var p=l[d-15],y=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,g=l[d-2],w=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;l[d]=y+l[d-7]+w+l[d-16]}var b=r&i^r&o^i&o,m=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),v=f+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&h)+c[d]+l[d];f=h,h=u,u=a,a=s+v|0,s=o,o=i,i=r,r=v+(m+b)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+u|0,n[6]=n[6]+h|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=o._createHelper(u),e.HmacSHA256=o._createHmacHelper(u)}(Math),r.SHA256)},3327:function(t,e,n){var r;t.exports=(r=n(8249),n(4938),function(t){var e=r,n=e.lib,i=n.WordArray,o=n.Hasher,s=e.x64.Word,a=e.algo,c=[],l=[],u=[];!function(){for(var t=1,e=0,n=0;n<24;n++){c[t+5*e]=(n+1)*(n+2)/2%64;var r=(2*t+3*e)%5;t=e%5,e=r}for(t=0;t<5;t++)for(e=0;e<5;e++)l[t+5*e]=e+(2*t+3*e)%5*5;for(var i=1,o=0;o<24;o++){for(var a=0,h=0,f=0;f<7;f++){if(1&i){var d=(1<<f)-1;d<32?h^=1<<d:a^=1<<d-32}128&i?i=i<<1^113:i<<=1}u[o]=s.create(a,h)}}();var h=[];!function(){for(var t=0;t<25;t++)h[t]=s.create()}();var f=a.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;e<25;e++)t[e]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var n=this._state,r=this.blockSize/2,i=0;i<r;i++){var o=t[e+2*i],s=t[e+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),(C=n[i]).high^=s,C.low^=o}for(var a=0;a<24;a++){for(var f=0;f<5;f++){for(var d=0,p=0,y=0;y<5;y++)d^=(C=n[f+5*y]).high,p^=C.low;var g=h[f];g.high=d,g.low=p}for(f=0;f<5;f++){var w=h[(f+4)%5],b=h[(f+1)%5],m=b.high,v=b.low;for(d=w.high^(m<<1|v>>>31),p=w.low^(v<<1|m>>>31),y=0;y<5;y++)(C=n[f+5*y]).high^=d,C.low^=p}for(var E=1;E<25;E++){var k=(C=n[E]).high,x=C.low,_=c[E];_<32?(d=k<<_|x>>>32-_,p=x<<_|k>>>32-_):(d=x<<_-32|k>>>64-_,p=k<<_-32|x>>>64-_);var A=h[l[E]];A.high=d,A.low=p}var S=h[0],B=n[0];for(S.high=B.high,S.low=B.low,f=0;f<5;f++)for(y=0;y<5;y++){var C=n[E=f+5*y],I=h[E],R=h[(f+1)%5+5*y],N=h[(f+2)%5+5*y];C.high=I.high^~R.high&N.high,C.low=I.low^~R.low&N.low}C=n[0];var U=u[a];C.high^=U.high,C.low^=U.low}},_doFinalize:function(){var e=this._data,n=e.words,r=(this._nDataBytes,8*e.sigBytes),o=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(t.ceil((r+1)/o)*o>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var s=this._state,a=this.cfg.outputLength/8,c=a/8,l=[],u=0;u<c;u++){var h=s[u],f=h.high,d=h.low;f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),l.push(d),l.push(f)}return new i.init(l,a)},clone:function(){for(var t=o.clone.call(this),e=t._state=this._state.slice(0),n=0;n<25;n++)e[n]=e[n].clone();return t}});e.SHA3=o._createHelper(f),e.HmacSHA3=o._createHmacHelper(f)}(Math),r.SHA3)},7460:function(t,e,n){var r,i,o,s,a,c,l,u;t.exports=(u=n(8249),n(4938),n(34),i=(r=u).x64,o=i.Word,s=i.WordArray,a=r.algo,c=a.SHA512,l=a.SHA384=c.extend({_doReset:function(){this._hash=new s.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var t=c._doFinalize.call(this);return t.sigBytes-=16,t}}),r.SHA384=c._createHelper(l),r.HmacSHA384=c._createHmacHelper(l),u.SHA384)},34:function(t,e,n){var r;t.exports=(r=n(8249),n(4938),function(){var t=r,e=t.lib.Hasher,n=t.x64,i=n.Word,o=n.WordArray,s=t.algo;function a(){return i.create.apply(i,arguments)}var c=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],l=[];!function(){for(var t=0;t<80;t++)l[t]=a()}();var u=s.SHA512=e.extend({_doReset:function(){this._hash=new o.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],u=n[5],h=n[6],f=n[7],d=r.high,p=r.low,y=i.high,g=i.low,w=o.high,b=o.low,m=s.high,v=s.low,E=a.high,k=a.low,x=u.high,_=u.low,A=h.high,S=h.low,B=f.high,C=f.low,I=d,R=p,N=y,U=g,T=w,P=b,O=m,L=v,F=E,$=k,D=x,z=_,M=A,q=S,H=B,K=C,j=0;j<80;j++){var V,W,Z=l[j];if(j<16)W=Z.high=0|t[e+2*j],V=Z.low=0|t[e+2*j+1];else{var G=l[j-15],Y=G.high,J=G.low,Q=(Y>>>1|J<<31)^(Y>>>8|J<<24)^Y>>>7,X=(J>>>1|Y<<31)^(J>>>8|Y<<24)^(J>>>7|Y<<25),tt=l[j-2],et=tt.high,nt=tt.low,rt=(et>>>19|nt<<13)^(et<<3|nt>>>29)^et>>>6,it=(nt>>>19|et<<13)^(nt<<3|et>>>29)^(nt>>>6|et<<26),ot=l[j-7],st=ot.high,at=ot.low,ct=l[j-16],lt=ct.high,ut=ct.low;W=(W=(W=Q+st+((V=X+at)>>>0<X>>>0?1:0))+rt+((V+=it)>>>0<it>>>0?1:0))+lt+((V+=ut)>>>0<ut>>>0?1:0),Z.high=W,Z.low=V}var ht,ft=F&D^~F&M,dt=$&z^~$&q,pt=I&N^I&T^N&T,yt=R&U^R&P^U&P,gt=(I>>>28|R<<4)^(I<<30|R>>>2)^(I<<25|R>>>7),wt=(R>>>28|I<<4)^(R<<30|I>>>2)^(R<<25|I>>>7),bt=(F>>>14|$<<18)^(F>>>18|$<<14)^(F<<23|$>>>9),mt=($>>>14|F<<18)^($>>>18|F<<14)^($<<23|F>>>9),vt=c[j],Et=vt.high,kt=vt.low,xt=H+bt+((ht=K+mt)>>>0<K>>>0?1:0),_t=wt+yt;H=M,K=q,M=D,q=z,D=F,z=$,F=O+(xt=(xt=(xt=xt+ft+((ht+=dt)>>>0<dt>>>0?1:0))+Et+((ht+=kt)>>>0<kt>>>0?1:0))+W+((ht+=V)>>>0<V>>>0?1:0))+(($=L+ht|0)>>>0<L>>>0?1:0)|0,O=T,L=P,T=N,P=U,N=I,U=R,I=xt+(gt+pt+(_t>>>0<wt>>>0?1:0))+((R=ht+_t|0)>>>0<ht>>>0?1:0)|0}p=r.low=p+R,r.high=d+I+(p>>>0<R>>>0?1:0),g=i.low=g+U,i.high=y+N+(g>>>0<U>>>0?1:0),b=o.low=b+P,o.high=w+T+(b>>>0<P>>>0?1:0),v=s.low=v+L,s.high=m+O+(v>>>0<L>>>0?1:0),k=a.low=k+$,a.high=E+F+(k>>>0<$>>>0?1:0),_=u.low=_+z,u.high=x+D+(_>>>0<z>>>0?1:0),S=h.low=S+q,h.high=A+M+(S>>>0<q>>>0?1:0),C=f.low=C+K,f.high=B+H+(C>>>0<K>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),e[31+(r+128>>>10<<5)]=n,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=e.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});t.SHA512=e._createHelper(u),t.HmacSHA512=e._createHmacHelper(u)}(),r.SHA512)},4253:function(t,e,n){var r;t.exports=(r=n(8249),n(8269),n(8214),n(888),n(5109),function(){var t=r,e=t.lib,n=e.WordArray,i=e.BlockCipher,o=t.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=o.DES=i.extend({_doReset:function(){for(var t=this._key.words,e=[],n=0;n<56;n++){var r=s[n]-1;e[n]=t[r>>>5]>>>31-r%32&1}for(var i=this._subKeys=[],o=0;o<16;o++){var l=i[o]=[],u=c[o];for(n=0;n<24;n++)l[n/6|0]|=e[(a[n]-1+u)%28]<<31-n%6,l[4+(n/6|0)]|=e[28+(a[n+24]-1+u)%28]<<31-n%6;for(l[0]=l[0]<<1|l[0]>>>31,n=1;n<7;n++)l[n]=l[n]>>>4*(n-1)+3;l[7]=l[7]<<5|l[7]>>>27}var h=this._invSubKeys=[];for(n=0;n<16;n++)h[n]=i[15-n]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,e,n){this._lBlock=t[e],this._rBlock=t[e+1],f.call(this,4,252645135),f.call(this,16,65535),d.call(this,2,858993459),d.call(this,8,16711935),f.call(this,1,1431655765);for(var r=0;r<16;r++){for(var i=n[r],o=this._lBlock,s=this._rBlock,a=0,c=0;c<8;c++)a|=l[c][((s^i[c])&u[c])>>>0];this._lBlock=s,this._rBlock=o^a}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,f.call(this,1,1431655765),d.call(this,8,16711935),d.call(this,2,858993459),f.call(this,16,65535),f.call(this,4,252645135),t[e]=this._lBlock,t[e+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function f(t,e){var n=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=n,this._lBlock^=n<<t}function d(t,e){var n=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=n,this._rBlock^=n<<t}t.DES=i._createHelper(h);var p=o.TripleDES=i.extend({_doReset:function(){var t=this._key.words;if(2!==t.length&&4!==t.length&&t.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var e=t.slice(0,2),r=t.length<4?t.slice(0,2):t.slice(2,4),i=t.length<6?t.slice(0,2):t.slice(4,6);this._des1=h.createEncryptor(n.create(e)),this._des2=h.createEncryptor(n.create(r)),this._des3=h.createEncryptor(n.create(i))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=i._createHelper(p)}(),r.TripleDES)},4938:function(t,e,n){var r,i,o,s,a,c;t.exports=(r=n(8249),o=(i=r).lib,s=o.Base,a=o.WordArray,(c=i.x64={}).Word=s.extend({init:function(t,e){this.high=t,this.low=e}}),c.WordArray=s.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,n=[],r=0;r<e;r++){var i=t[r];n.push(i.high),n.push(i.low)}return a.create(n,this.sigBytes)},clone:function(){for(var t=s.clone.call(this),e=t.words=this.words.slice(0),n=e.length,r=0;r<n;r++)e[r]=e[r].clone();return t}}),r)},1227:(t,e,n)=>{e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(r++,"%c"===t&&(i=r))})),e.splice(i,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=n(2447)(e);const{formatters:r}=t.exports;r.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},2447:(t,e,n)=>{t.exports=function(t){function e(t){let n,i,o,s=null;function a(...t){if(!a.enabled)return;const r=a,i=Number(new Date),o=i-(n||i);r.diff=o,r.prev=n,r.curr=i,n=i,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let s=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";s++;const o=e.formatters[i];if("function"==typeof o){const e=t[s];n=o.call(r,e),t.splice(s,1),s--}return n})),e.formatArgs.call(r,t),(r.log||e.log).apply(r,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=r,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==e.namespaces&&(i=e.namespaces,o=e.enabled(t)),o),set:t=>{s=t}}),"function"==typeof e.init&&e.init(a),a}function r(t,n){const r=e(this.namespace+(void 0===n?":":n)+t);return r.log=this.log,r}function i(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){const t=[...e.names.map(i),...e.skips.map(i).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(7824),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((n=>{e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},645:(t,e)=>{e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,l=c>>1,u=-7,h=n?i-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-u)-1,d>>=-u,u+=a;u>0;o=256*o+t[e+h],h+=f,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+t[e+h],h+=f,u-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=l}return(d?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,c,l=8*o-i-1,u=(1<<l)-1,h=u>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+h>=1?f/c:f*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(e*c-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[n+d]=255&s,d+=p,s/=256,l-=8);t[n+d-p]|=128*y}},2632:(t,e,n)=>{const{bech32:r,hex:i,utf8:o}=n(9187),s={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},a={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},c={bech32:"tbs",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},l={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},u={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},h=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],f={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},d=BigInt("2100000000000000000"),p=BigInt(1e11),y={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},g={};for(let t=0,e=Object.keys(y);t<e.length;t++){const n=e[t],r=y[e[t]].toString();g[r]=n}const w={1:t=>i.encode(r.fromWordsUnsafe(t)),16:t=>i.encode(r.fromWordsUnsafe(t)),13:t=>o.encode(r.fromWordsUnsafe(t)),19:t=>i.encode(r.fromWordsUnsafe(t)),23:t=>i.encode(r.fromWordsUnsafe(t)),27:t=>i.encode(r.fromWordsUnsafe(t)),6:m,24:m,3:function(t){const e=[];let n,o,s,a,c,l=r.fromWordsUnsafe(t);for(;l.length>0;)n=i.encode(l.slice(0,33)),o=i.encode(l.slice(33,41)),s=parseInt(i.encode(l.slice(41,45)),16),a=parseInt(i.encode(l.slice(45,49)),16),c=parseInt(i.encode(l.slice(49,51)),16),l=l.slice(51),e.push({pubkey:n,short_channel_id:o,fee_base_msat:s,fee_proportional_millionths:a,cltv_expiry_delta:c});return e},5:function(t){const e=t.slice().reverse().map((t=>[!!(1&t),!!(2&t),!!(4&t),!!(8&t),!!(16&t)])).reduce(((t,e)=>t.concat(e)),[]);for(;e.length<2*h.length;)e.push(!1);const n={};h.forEach(((t,r)=>{let i;i=e[2*r]?"required":e[2*r+1]?"supported":"unsupported",n[t]=i}));const r=e.slice(2*h.length);return n.extra_bits={start_bit:2*h.length,bits:r,has_required:r.reduce(((t,e,n)=>n%2!=0?t||!1:t||e),!1)},n}};function b(t){return e=>({tagCode:parseInt(t),words:r.encode("unknown",e,Number.MAX_SAFE_INTEGER)})}function m(t){return t.reverse().reduce(((t,e,n)=>t+e*Math.pow(32,n)),0)}function v(t,e){let n,r;if(t.slice(-1).match(/^[munp]$/))n=t.slice(-1),r=t.slice(0,-1);else{if(t.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");r=t}if(!r.match(/^\d+$/))throw new Error("Not a valid human readable amount");const i=BigInt(r),o=n?i*p/f[n]:i*p;if("p"===n&&i%BigInt(10)!==BigInt(0)||o>d)throw new Error("Amount is outside of valid range");return e?o.toString():o}t.exports={decode:function(t,e){if("string"!=typeof t)throw new Error("Lightning Payment Request must be string");if("ln"!==t.slice(0,2).toLowerCase())throw new Error("Not a proper lightning payment request");const n=[],o=r.decode(t,Number.MAX_SAFE_INTEGER);t=t.toLowerCase();const h=o.prefix;let f=o.words,d=t.slice(h.length+1),p=f.slice(-104);f=f.slice(0,-104);let E=h.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(E&&!E[2]&&(E=h.match(/^ln(\S+)$/)),!E)throw new Error("Not a proper lightning payment request");n.push({name:"lightning_network",letters:"ln"});const k=E[1];let x;if(e){if(void 0===e.bech32||void 0===e.pubKeyHash||void 0===e.scriptHash||!Array.isArray(e.validWitnessVersions))throw new Error("Invalid network");x=e}else switch(k){case s.bech32:x=s;break;case a.bech32:x=a;break;case c.bech32:x=c;break;case l.bech32:x=l;break;case u.bech32:x=u}if(!x||x.bech32!==k)throw new Error("Unknown coin bech32 prefix");n.push({name:"coin_network",letters:k,value:x});const _=E[2];let A;_?(A=v(_+E[3],!0),n.push({name:"amount",letters:E[2]+E[3],value:A})):A=null,n.push({name:"separator",letters:"1"});const S=m(f.slice(0,7));let B,C,I,R;for(f=f.slice(7),n.push({name:"timestamp",letters:d.slice(0,7),value:S}),d=d.slice(7);f.length>0;){const t=f[0].toString();B=g[t]||"unknown_tag",C=w[t]||b(t),f=f.slice(1),I=m(f.slice(0,2)),f=f.slice(2),R=f.slice(0,I),f=f.slice(I),n.push({name:B,tag:d[0],letters:d.slice(0,3+I),value:C(R)}),d=d.slice(3+I)}n.push({name:"signature",letters:d.slice(0,104),value:i.encode(r.fromWordsUnsafe(p))}),d=d.slice(104),n.push({name:"checksum",letters:d});let N={paymentRequest:t,sections:n,get expiry(){let t=n.find((t=>"expiry"===t.name));if(t)return U("timestamp")+t.value},get route_hints(){return n.filter((t=>"route_hint"===t.name)).map((t=>t.value))}};for(let t in y)"route_hint"!==t&&Object.defineProperty(N,t,{get:()=>U(t)});return N;function U(t){let e=n.find((e=>e.name===t));return e?e.value:void 0}},hrpToMillisat:v}},7824:t=>{var e=1e3,n=60*e,r=60*n,i=24*r;function o(t,e,n,r){var i=e>=1.5*n;return Math.round(t/n)+" "+r+(i?"s":"")}t.exports=function(t,s){s=s||{};var a,c,l=typeof t;if("string"===l&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(t);if("number"===l&&isFinite(t))return s.long?(a=t,(c=Math.abs(a))>=i?o(a,c,i,"day"):c>=r?o(a,c,r,"hour"):c>=n?o(a,c,n,"minute"):c>=e?o(a,c,e,"second"):a+" ms"):function(t){var o=Math.abs(t);return o>=i?Math.round(t/i)+"d":o>=r?Math.round(t/r)+"h":o>=n?Math.round(t/n)+"m":o>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},9372:t=>{class e{constructor(){return this._childPaths={},this._data=[],this}add(t,n){const r=(t||"").split(""),i=r.length-1;let o=this;for(let t=i;t>=0;t--){const n=r[i-t];o=o._childPaths[n]?o._childPaths[n]:o._childPaths[n]=new e}return o._data.push(n),o}getNode(t){const e=(t||"").split(""),n=e.length-1;let r=this;for(let t=n;t>=0;t--)if(r=r._childPaths[e[n-t]]||null,null===r)return null;return r}getData(t){const e=this.getNode(t);if(!e)return null;const n=[e],r=[];for(let t=0;t<n.length;t++){const e=n[t];e._data.length&&r.push.apply(r,e._data);const i=Object.values(e._childPaths);i.length&&n.push.apply(n,i)}return r}}t.exports=e},2787:function(t,e,n){"use strict";var r=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.EventEmitter=void 0;var i=n(5674),o=n(4942);function s(t,e,n,r,i,o){var s=this.events[t];return!!s&&0!==s.length&&(s.argsNum<6?s.call(e,n,r,i,o):s.call.apply(void 0,arguments),!0)}function a(t,e,n,r,i,o){var s=this.events[t];if(s){if(0===s.length)return!1;s.argsNum<6?s.call(e,n,r,i,o):s.call.apply(void 0,arguments)}var a=this.onceEvents[t];if(a){if("function"==typeof a)this.onceEvents[t]=void 0,arguments.length<6?a(e,n,r,i,o):a.apply(void 0,arguments);else{var c=a;if(this.onceEvents[t]=void 0,arguments.length<6)for(var l=0;l<c.length;++l)c[l](e,n,r,i,o);else for(l=0;l<c.length;++l)c[l].apply(void 0,arguments)}return!0}return!!s}var c=function(){function t(){this.events=(0,o.nullObj)(),this.onceEvents=(0,o.nullObj)(),this._symbolKeys=new Set,this.maxListeners=1/0}return Object.defineProperty(t.prototype,"_eventsCount",{get:function(){return this.eventNames().length},enumerable:!1,configurable:!0}),t}();function l(t,e,n){if(void 0===n&&(n=e.length),"function"!=typeof e)throw new TypeError("The listener must be a function");var r=this.events[t];return r?(r.push(e),r.growArgsNum(n),this.maxListeners!==1/0&&this.maxListeners<=r.length&&console.warn('Maximum event listeners for "'.concat(String(t),'" event!'))):(this.events[t]=new i.TaskCollection(n,!0,e,!1),"symbol"==typeof t&&this._symbolKeys.add(t)),this}function u(t,e){var n=this.events[t];n&&n.removeLast(e);var r=this.onceEvents[t];return r&&("function"==typeof r?this.onceEvents[t]=void 0:"object"==typeof r&&(1===r.length&&r[0]===e?this.onceEvents[t]=void 0:(0,i._fast_remove_single)(r,r.lastIndexOf(e)))),this}e.EventEmitter=c,c.prototype.emit=s,c.prototype.on=l,c.prototype.once=function(t,e){switch(this.emit===s&&(this.emit=a),typeof this.onceEvents[t]){case"undefined":this.onceEvents[t]=e,"symbol"==typeof t&&this._symbolKeys.add(t);break;case"function":this.onceEvents[t]=[this.onceEvents[t],e];break;case"object":this.onceEvents[t].push(e)}return this},c.prototype.addListener=l,c.prototype.removeListener=u,c.prototype.addListenerBound=function(t,e,n,r){void 0===n&&(n=this),void 0===r&&(r=e.length),this.boundFuncs||(this.boundFuncs=new Map);var i=e.bind(n);return this.boundFuncs.set(e,i),this.addListener(t,i,r)},c.prototype.removeListenerBound=function(t,e){var n,r,i=null===(n=this.boundFuncs)||void 0===n?void 0:n.get(e);return null===(r=this.boundFuncs)||void 0===r||r.delete(e),this.removeListener(t,i)},c.prototype.hasListeners=function(t){return this.events[t]&&!!this.events[t].length},c.prototype.prependListener=function(t,e,n){if(void 0===n&&(n=e.length),"function"!=typeof e)throw new TypeError("The listener must be a function");var r=this.events[t];return r&&r instanceof i.TaskCollection?(r.insert(0,e),r.growArgsNum(n),this.maxListeners!==1/0&&this.maxListeners<=r.length&&console.warn('Maximum event listeners for "'.concat(String(t),'" event!'))):(r=this.events[t]=new i.TaskCollection(n,!0,e,!1),"symbol"==typeof t&&this._symbolKeys.add(t)),this},c.prototype.prependOnceListener=function(t,e){this.emit===s&&(this.emit=a);var n=this.onceEvents[t];return n?"object"!=typeof n?(this.onceEvents[t]=[e,n],"symbol"==typeof t&&this._symbolKeys.add(t)):(n.unshift(e),this.maxListeners!==1/0&&this.maxListeners<=n.length&&console.warn('Maximum event listeners for "'.concat(String(t),'" once event!'))):(this.onceEvents[t]=[e],"symbol"==typeof t&&this._symbolKeys.add(t)),this},c.prototype.off=u,c.prototype.removeAllListeners=function(t){return void 0===t?(this.events=(0,o.nullObj)(),this.onceEvents=(0,o.nullObj)(),this._symbolKeys=new Set):(this.events[t]=void 0,this.onceEvents[t]=void 0,"symbol"==typeof t&&this._symbolKeys.delete(t)),this},c.prototype.setMaxListeners=function(t){return this.maxListeners=t,this},c.prototype.getMaxListeners=function(){return this.maxListeners},c.prototype.listeners=function(t){return this.emit===s?this.events[t]?this.events[t].tasksAsArray().slice():[]:this.events[t]&&this.onceEvents[t]?r(r([],this.events[t].tasksAsArray(),!0),"function"==typeof this.onceEvents[t]?[this.onceEvents[t]]:this.onceEvents[t],!0):this.events[t]?this.events[t].tasksAsArray():this.onceEvents[t]?"function"==typeof this.onceEvents[t]?[this.onceEvents[t]]:this.onceEvents[t]:[]},c.prototype.eventNames=function(){var t=this;if(this.emit===s){var e=Object.keys(this.events);return r(r([],e,!0),Array.from(this._symbolKeys),!0).filter((function(e){return e in t.events&&t.events[e]&&t.events[e].length}))}e=Object.keys(this.events).filter((function(e){return t.events[e]&&t.events[e].length}));var n=Object.keys(this.onceEvents).filter((function(e){return t.onceEvents[e]&&t.onceEvents[e].length}));return r(r(r([],e,!0),n,!0),Array.from(this._symbolKeys).filter((function(e){return e in t.events&&t.events[e]&&t.events[e].length||e in t.onceEvents&&t.onceEvents[e]&&t.onceEvents[e].length})),!0)},c.prototype.listenerCount=function(t){return this.emit===s?this.events[t]&&this.events[t].length||0:(this.events[t]&&this.events[t].length||0)+(this.onceEvents[t]&&this.onceEvents[t].length||0)}},8669:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(7050),e),i(n(2787),e)},404:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bakeCollectionVariadic=exports.bakeCollectionAwait=exports.bakeCollection=exports.BAKED_EMPTY_FUNC=void 0,exports.BAKED_EMPTY_FUNC=function(){};var FORLOOP_FALLBACK=1500;function generateArgsDefCode(t){var e="";if(0===t)return e;for(var n=0;n<t-1;++n)e+="arg"+String(n)+", ";return e+"arg"+String(t-1)}function generateBodyPartsCode(t,e){for(var n="",r="",i=0;i<e;++i)n+="var f".concat(i," = collection[").concat(i,"];\n"),r+="f".concat(i,"(").concat(t,")\n");return{funcDefCode:n,funcCallCode:r}}function generateBodyPartsVariadicCode(t){for(var e="",n="",r=0;r<t;++r)e+="var f".concat(r," = collection[").concat(r,"];\n"),n+="f".concat(r,".apply(undefined, arguments)\n");return{funcDefCode:e,funcCallCode:n}}function bakeCollection(collection,fixedArgsNum){if(0===collection.length)return exports.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function(").concat(argsDefCode,") {\n                ").concat(funcCallCode,"\n            });\n        })")}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);funcFactoryCode=collection.length%10==0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 10) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                        collection[i+3](").concat(argsDefCode,");\n                        collection[i+4](").concat(argsDefCode,");\n                        collection[i+5](").concat(argsDefCode,");\n                        collection[i+6](").concat(argsDefCode,");\n                        collection[i+7](").concat(argsDefCode,");\n                        collection[i+8](").concat(argsDefCode,");\n                        collection[i+9](").concat(argsDefCode,");\n                    }\n                });\n            })"):collection.length%4==0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 4) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                        collection[i+3](").concat(argsDefCode,");\n                    }\n                });\n            })"):collection.length%3==0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 3) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                    }\n                });\n            })"):"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; ++i) {\n                        collection[i](").concat(argsDefCode,");\n                    }\n                });\n            })")}var bakeCollection_1=void 0,fixedArgsNum_1=void 0,bakeCollectionVariadic_1=void 0,bakeCollectionAwait_1=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}function bakeCollectionAwait(collection,fixedArgsNum){if(0===collection.length)return exports.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function(").concat(argsDefCode,") {\n                return Promise.all([ ").concat(funcCallCode," ]);\n            });\n        })")}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);funcFactoryCode="(function(collection) {\n            return (function(".concat(argsDefCode,") {\n                var promises = Array(collection.length);\n                for (var i = 0; i < collection.length; ++i) {\n                    promises[i] = collection[i](").concat(argsDefCode,");\n                }\n                return Promise.all(promises);\n            });\n        })")}var bakeCollection_2=void 0,fixedArgsNum_2=void 0,bakeCollectionVariadic_2=void 0,bakeCollectionAwait_2=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}function bakeCollectionVariadic(collection){if(0===collection.length)return exports.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var _a=generateBodyPartsVariadicCode(collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function() {\n                ").concat(funcCallCode,"\n            });\n        })")}else funcFactoryCode="(function(collection) {\n            return (function() {\n                for (var i = 0; i < collection.length; ++i) {\n                    collection[i].apply(undefined, arguments);\n                }\n            });\n        })";var bakeCollection_3=void 0,fixedArgsNum=void 0,bakeCollectionVariadic_3=void 0,bakeCollectionAwait_3=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}exports.bakeCollection=bakeCollection,exports.bakeCollectionAwait=bakeCollectionAwait,exports.bakeCollectionVariadic=bakeCollectionVariadic},5674:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(2023),e)},2023:function(t,e,n){"use strict";var r=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.TaskCollection=e._fast_remove_single=void 0;var i=n(404);function o(t,e){var n,r=this.length;if(r>1)e?((n=this._tasks).push.apply(n,arguments),this.length+=arguments.length):(this._tasks.push(t),this.length++);else if(e){var i;1===r?((i=Array(1+arguments.length)).push(i),i.push.apply(i,arguments),this._tasks=i):((i=Array(arguments.length)).push.apply(i,arguments),this._tasks=i),this.length+=arguments.length}else this._tasks=1===r?[this._tasks,t]:t,this.length++}function s(t,e){var n,r=this.length;if(r>1)e?((n=this._tasks).push.apply(n,arguments),this.length+=arguments.length):(this._tasks.push(t),this.length++);else if(e){var i;1===r?((i=Array(1+arguments.length)).push(i),i.push.apply(i,arguments),this._tasks=i):((i=Array(arguments.length)).push.apply(i,arguments),this._tasks=i),this.length+=arguments.length}else this._tasks=1===r?[this._tasks,t]:t,this.length++;this.firstEmitBuildStrategy?this.call=p:this.rebuild()}function a(t,e){-1!==e&&(0===e?t.shift():e===t.length-1?t.length=t.length-1:t.splice(e,1))}function c(t){0!==this.length&&(1===this.length?this._tasks===t&&(this.length=0):(a(this._tasks,this._tasks.lastIndexOf(t)),1===this._tasks.length?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length))}function l(t){if(0!==this.length){if(1===this.length)return this._tasks===t&&(this.length=0),this.firstEmitBuildStrategy?void(this.call=i.BAKED_EMPTY_FUNC):void this.rebuild();a(this._tasks,this._tasks.lastIndexOf(t)),1===this._tasks.length?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length,this.firstEmitBuildStrategy?this.call=p:this.rebuild()}}function u(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];0===this.length?(this._tasks=n,this.length=1):1===this.length?(n.unshift(this._tasks),this._tasks=n,this.length=this._tasks.length):((e=this._tasks).splice.apply(e,r([t,0],n,!1)),this.length=this._tasks.length)}function h(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];0===this.length?(this._tasks=n,this.length=1):1===this.length?(n.unshift(this._tasks),this._tasks=n,this.length=this._tasks.length):((e=this._tasks).splice.apply(e,r([t,0],n,!1)),this.length=this._tasks.length),this.firstEmitBuildStrategy?this.call=p:this.rebuild()}function f(){0===this.length?this.call=i.BAKED_EMPTY_FUNC:1===this.length?this.call=this._tasks:this.call=(0,i.bakeCollection)(this._tasks,this.argsNum)}function d(){0===this.length?this.call=i.BAKED_EMPTY_FUNC:1===this.length?this.call=this._tasks:this.call=(0,i.bakeCollectionAwait)(this._tasks,this.argsNum)}function p(){this.rebuild(),this.call.apply(void 0,arguments)}e._fast_remove_single=a;var y=function(t,e,n,r){void 0===e&&(e=!0),void 0===n&&(n=null),void 0===r&&(r=!1),this.awaitTasks=r,this.call=i.BAKED_EMPTY_FUNC,this.argsNum=t,this.firstEmitBuildStrategy=!0,this.rebuild=r?d.bind(this):f.bind(this),this.setAutoRebuild(e),n?"function"==typeof n?(this._tasks=n,this.length=1):(this._tasks=n,this.length=n.length):(this._tasks=null,this.length=0),e&&this.rebuild()};e.TaskCollection=y,y.prototype.fastClear=function(){this._tasks=null,this.length=0,this.call=i.BAKED_EMPTY_FUNC},y.prototype.clear=function(){this._tasks=null,this.length=0,this.call=i.BAKED_EMPTY_FUNC},y.prototype.growArgsNum=function(t){this.argsNum<t&&(this.argsNum=t,this.firstEmitBuildStrategy?this.call=p:this.rebuild())},y.prototype.setAutoRebuild=function(t){t?(this.push=s.bind(this),this.insert=h.bind(this),this.removeLast=l.bind(this)):(this.push=o.bind(this),this.insert=u.bind(this),this.removeLast=c.bind(this))},y.prototype.tasksAsArray=function(){return 0===this.length?[]:1===this.length?[this._tasks]:this._tasks},y.prototype.setTasks=function(t){0===t.length?(this.length=0,this.call=i.BAKED_EMPTY_FUNC):1===t.length?(this.length=1,this.call=t[0],this._tasks=t[0]):(this.length=t.length,this._tasks=t,this.firstEmitBuildStrategy?this.call=p:this.rebuild())}},7050:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},4942:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.nullObj=void 0,e.nullObj=function(){return{__proto__:null,prototype:null}}},3088:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=void 0;const r=n(4556);class i{constructor(t){this.lookupTable=new Map,this.head=null,this.tail=null;const{maxSize:e=25,entryExpirationTimeInMS:n=null,onEntryEvicted:r,onEntryMarkedAsMostRecentlyUsed:i,cloneFn:o,clone:s}=null!=t?t:{};if(Number.isNaN(e)||e<=0)throw new Error("maxSize must be greater than 0.");if("number"==typeof n&&(n<=0||Number.isNaN(n)))throw new Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.maxSizeInternal=e,this.entryExpirationTimeInMS=n,this.onEntryEvicted=r,this.onEntryMarkedAsMostRecentlyUsed=i,this.clone=s,this.cloneFn=o}get size(){return this.cleanCache(),this.lookupTable.size}get remainingSize(){return this.maxSizeInternal-this.size}get newest(){return this.head?this.head.isExpired?(this.removeNodeFromListAndLookupTable(this.head),this.newest):this.mapNodeToEntry(this.head):null}get oldest(){return this.tail?this.tail.isExpired?(this.removeNodeFromListAndLookupTable(this.tail),this.oldest):this.mapNodeToEntry(this.tail):null}get maxSize(){return this.maxSizeInternal}set maxSize(t){if(Number.isNaN(t)||t<=0)throw new Error("maxSize must be greater than 0.");this.maxSizeInternal=t,this.enforceSizeLimit()}set(t,e,n){const i=this.lookupTable.get(t);i&&this.removeNodeFromListAndLookupTable(i);const o=new r.LRUCacheNode(t,e,{entryExpirationTimeInMS:this.entryExpirationTimeInMS,onEntryEvicted:this.onEntryEvicted,onEntryMarkedAsMostRecentlyUsed:this.onEntryMarkedAsMostRecentlyUsed,clone:this.clone,cloneFn:this.cloneFn,...n});return this.setNodeAsHead(o),this.lookupTable.set(t,o),this.enforceSizeLimit(),this}get(t){const e=this.lookupTable.get(t);return e?e.isExpired?(this.removeNodeFromListAndLookupTable(e),null):(this.setNodeAsHead(e),e.value):null}peek(t){const e=this.lookupTable.get(t);return e?e.isExpired?(this.removeNodeFromListAndLookupTable(e),null):e.value:null}delete(t){const e=this.lookupTable.get(t);return!!e&&this.removeNodeFromListAndLookupTable(e)}has(t){const e=this.lookupTable.get(t);return!(!e||e.isExpired&&(this.removeNodeFromListAndLookupTable(e),1))}clear(){this.head=null,this.tail=null,this.lookupTable.clear()}find(t){let e=this.head;for(;e;){if(e.isExpired){const t=e.next;this.removeNodeFromListAndLookupTable(e),e=t;continue}const n=this.mapNodeToEntry(e);if(t(n))return this.setNodeAsHead(e),n;e=e.next}return null}forEach(t){let e=this.head,n=0;for(;e;)if(e.isExpired){const t=e.next;this.removeNodeFromListAndLookupTable(e),e=t}else t(e.value,e.key,n),e=e.next,n++}*values(){let t=this.head;for(;t;)if(t.isExpired){const e=t.next;this.removeNodeFromListAndLookupTable(t),t=e}else yield t.value,t=t.next}*keys(){let t=this.head;for(;t;)if(t.isExpired){const e=t.next;this.removeNodeFromListAndLookupTable(t),t=e}else yield t.key,t=t.next}*entries(){let t=this.head;for(;t;)if(t.isExpired){const e=t.next;this.removeNodeFromListAndLookupTable(t),t=e}else yield this.mapNodeToEntry(t),t=t.next}*[Symbol.iterator](){let t=this.head;for(;t;)if(t.isExpired){const e=t.next;this.removeNodeFromListAndLookupTable(t),t=e}else yield this.mapNodeToEntry(t),t=t.next}enforceSizeLimit(){let t=this.tail;for(;null!==t&&this.size>this.maxSizeInternal;){const e=t.prev;this.removeNodeFromListAndLookupTable(t),t=e}}mapNodeToEntry({key:t,value:e}){return{key:t,value:e}}setNodeAsHead(t){this.removeNodeFromList(t),this.head?(t.next=this.head,this.head.prev=t,this.head=t):(this.head=t,this.tail=t),t.invokeOnEntryMarkedAsMostRecentlyUsed()}removeNodeFromList(t){null!==t.prev&&(t.prev.next=t.next),null!==t.next&&(t.next.prev=t.prev),this.head===t&&(this.head=t.next),this.tail===t&&(this.tail=t.prev),t.next=null,t.prev=null}removeNodeFromListAndLookupTable(t){return t.invokeOnEvicted(),this.removeNodeFromList(t),this.lookupTable.delete(t.key)}cleanCache(){if(!this.entryExpirationTimeInMS)return;const t=[];for(const e of this.lookupTable.values())e.isExpired&&t.push(e);t.forEach((t=>this.removeNodeFromListAndLookupTable(t)))}}e.LRUCache=i},4556:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCacheNode=void 0,e.LRUCacheNode=class{constructor(t,e,n){const{entryExpirationTimeInMS:r=null,next:i=null,prev:o=null,onEntryEvicted:s,onEntryMarkedAsMostRecentlyUsed:a,clone:c,cloneFn:l}=null!=n?n:{};if("number"==typeof r&&(r<=0||Number.isNaN(r)))throw new Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.clone=null!=c&&c,this.cloneFn=null!=l?l:this.defaultClone,this.key=t,this.internalValue=this.clone?this.cloneFn(e):e,this.created=Date.now(),this.entryExpirationTimeInMS=r,this.next=i,this.prev=o,this.onEntryEvicted=s,this.onEntryMarkedAsMostRecentlyUsed=a}get value(){return this.clone?this.cloneFn(this.internalValue):this.internalValue}get isExpired(){return"number"==typeof this.entryExpirationTimeInMS&&Date.now()-this.created>this.entryExpirationTimeInMS}invokeOnEvicted(){if(this.onEntryEvicted){const{key:t,value:e,isExpired:n}=this;this.onEntryEvicted({key:t,value:e,isExpired:n})}}invokeOnEntryMarkedAsMostRecentlyUsed(){if(this.onEntryMarkedAsMostRecentlyUsed){const{key:t,value:e}=this;this.onEntryMarkedAsMostRecentlyUsed({key:t,value:e})}}defaultClone(t){return"boolean"==typeof t||"string"==typeof t||"number"==typeof t?t:JSON.parse(JSON.stringify(t))}}},2653:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(3088),e)},2451:(t,e,n)=>{"use strict";n.r(e);var r=n(6213),i=n(3797),o=n(3894);async function s(t){await(0,r.lD)();const e=(0,r.YX)(t);console.log(e),o.Z.instance.fetchEvent(e,(async t=>{t&&await PageContext.instance.setNoteByNostrEvent(t)})),setTimeout((()=>{if(PageContext.instance.note.nostrEvent)return;const t=PageContext.instance.noteTitleFromUrl();PageContext.instance.noteIdentifierFromUrl()?t?PageContext.instance.setNote(i.Note.fromContent(e.authors[0],t,`# ${t}\n\n This note is a stub and does not exist yet. Click \`open in editor\` to start writing!`)):PageContext.instance.setNote(i.Note.fromContent(e.authors[0],"","# Note Not Found!\n\nEither this version of the note no longer exists or it's on a different nostr relay.")):PageContext.instance.setNote(i.Note.fromContent(e.authors[0],"homepage",`# ${window.location.hostname}\n\nTo create a homepage for your digital garden, create a note with the title \`homepage\`.`))}),5e3)}window.connectWalletBrowse=function(){(0,r.Ti)()},window.browseNoteFromUrl=async function(){s(PageContext.instance.noteIdentifierFromUrl())},window.browseNote=s,window.openNoteInEditor=function(){const t=PageContext.instance.note.title;PageContext.instance.noteIdentifierFromUrl()?window.location.href=window.router.urlFor(Router.EDITOR,`${PageContext.instance.noteIdentifierFromUrl()}?title=${t}`):window.location.href=window.router.urlFor(Router.EDITOR,`?title=${t}`)},window.bindPrefetchLinks=function(){$("a[href='#tagayasu-prefetch']").off("click.navigate"),$("a[href='#tagayasu-prefetch']").on("click.navigate",(t=>s(t.target.title)))}},6213:(t,e,n)=>{"use strict";n.d(e,{Mf:()=>Si,fD:()=>Ri,Gk:()=>Ci,gw:()=>pi,oF:()=>_i,r0:()=>Ii,DE:()=>Bi,zs:()=>bi,lD:()=>mi,t4:()=>Ai,YX:()=>Ui,e0:()=>Ni,Ti:()=>gi});var r={};n.r(r),n.d(r,{dQ:()=>L,ci:()=>B,bytesToNumberBE:()=>R,ty:()=>N,eV:()=>O,n$:()=>z,ql:()=>P,hexToBytes:()=>I,tL:()=>U,S5:()=>T,FF:()=>q});var i=n(2483);function o(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function s(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function a(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}const c="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,l=t=>t instanceof Uint8Array,u=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),h=(t,e)=>t<<32-e|t>>>e;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function f(t){if("string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),!l(t))throw new Error("expected Uint8Array, got "+typeof t);return t}class d{clone(){return this._cloneInto()}}function p(t){const e=e=>t().update(f(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function y(t=32){if(c&&"function"==typeof c.getRandomValues)return c.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class g extends d{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=u(this.buffer)}update(t){a(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=f(t)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)n.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=u(t);for(;r<=i-o;o+=r)this.process(e,o)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){a(this),function(t,e){s(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let t=o;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),c=r?4:0,l=r?0:4;t.setUint32(e+c,s,r),t.setUint32(e+l,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const c=u(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=l/4,f=this.get();if(h>f.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<h;t++)c.setUint32(4*t,f[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return t.length=r,t.pos=s,t.finished=i,t.destroyed=o,r%e&&t.buffer.set(n),t}}const w=(t,e,n)=>t&e^t&n^e&n,b=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),m=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),v=new Uint32Array(64);class E extends g{constructor(){super(64,32,8,!1),this.A=0|m[0],this.B=0|m[1],this.C=0|m[2],this.D=0|m[3],this.E=0|m[4],this.F=0|m[5],this.G=0|m[6],this.H=0|m[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:o,G:s,H:a}=this;return[t,e,n,r,i,o,s,a]}set(t,e,n,r,i,o,s,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)v[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=v[t-15],n=v[t-2],r=h(e,7)^h(e,18)^e>>>3,i=h(n,17)^h(n,19)^n>>>10;v[t]=i+v[t-7]+r+v[t-16]|0}let{A:n,B:r,C:i,D:o,E:s,F:a,G:c,H:l}=this;for(let t=0;t<64;t++){const e=l+(h(s,6)^h(s,11)^h(s,25))+((u=s)&a^~u&c)+b[t]+v[t]|0,f=(h(n,2)^h(n,13)^h(n,22))+w(n,r,i)|0;l=c,c=a,a=s,s=o+e|0,o=i,i=r,r=n,n=e+f|0}var u;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,r,i,o,s,a,c,l)}roundClean(){v.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const k=p((()=>new E)),x=(BigInt(0),BigInt(1)),_=BigInt(2),A=t=>t instanceof Uint8Array,S=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function B(t){if(!A(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=S[t[n]];return e}function C(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}function I(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let e=0;e<n.length;e++){const r=2*e,i=t.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[e]=o}return n}function R(t){return C(B(t))}function N(t){if(!A(t))throw new Error("Uint8Array expected");return C(B(Uint8Array.from(t).reverse()))}function U(t,e){return I(t.toString(16).padStart(2*e,"0"))}function T(t,e){return U(t,e).reverse()}function P(t,e,n){let r;if("string"==typeof e)try{r=I(e)}catch(n){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${n}`)}else{if(!A(e))throw new Error(`${t} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function O(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let n=0;return t.forEach((t=>{if(!A(t))throw new Error("Uint8Array expected");e.set(t,n),n+=t.length})),e}const L=t=>(_<<BigInt(t-1))-x,F=t=>new Uint8Array(t),D=t=>Uint8Array.from(t);function z(t,e,n){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=F(t),i=F(t),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},a=(...t)=>n(i,r,...t),c=(t=F())=>{i=a(D([0]),t),r=a(),0!==t.length&&(i=a(D([1]),t),r=a())},l=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const n=[];for(;t<e;){r=a();const e=r.slice();n.push(e),t+=r.length}return O(...n)};return(t,e)=>{let n;for(s(),c(t);!(n=e(l()));)c();return s(),n}}const M={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function q(t,e,n={}){const r=(e,n,r)=>{const i=M[n];if("function"!=typeof i)throw new Error(`Invalid validator "${n}", expected function`);const o=t[e];if(!(r&&void 0===o||i(o,t)))throw new Error(`Invalid param ${String(e)}=${o} (${typeof o}), expected ${n}`)};for(const[t,n]of Object.entries(e))r(t,n,!1);for(const[t,e]of Object.entries(n))r(t,e,!0);return t}const H=BigInt(0),K=BigInt(1),j=BigInt(2),V=BigInt(3),W=BigInt(4),Z=BigInt(5),G=BigInt(8);function Y(t,e){const n=t%e;return n>=H?n:e+n}function J(t,e,n){if(n<=H||e<H)throw new Error("Expected power/modulo > 0");if(n===K)return H;let r=K;for(;e>H;)e&K&&(r=r*t%n),t=t*t%n,e>>=K;return r}function Q(t,e,n){let r=t;for(;e-- >H;)r*=r,r%=n;return r}function X(t,e){if(t===H||e<=H)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Y(t,e),r=e,i=H,o=K,s=K,a=H;for(;n!==H;){const t=r/n,e=r%n,c=i-s*t,l=o-a*t;r=n,n=e,i=s,o=a,s=c,a=l}if(r!==K)throw new Error("invert: does not exist");return Y(i,e)}BigInt(9),BigInt(16);const tt=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function et(t,e){const n=void 0!==e?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function nt(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function rt(t){const e=nt(t);return e+Math.ceil(e/2)}class it extends d{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");o(t.outputLen),o(t.blockLen)}(t);const n=f(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?t.create().update(n).digest():n);for(let t=0;t<i.length;t++)i[t]^=54;this.iHash.update(i),this.oHash=t.create();for(let t=0;t<i.length;t++)i[t]^=106;this.oHash.update(i),i.fill(0)}update(t){return a(this),this.iHash.update(t),this}digestInto(t){a(this),s(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return t.finished=r,t.destroyed=i,t.blockLen=o,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ot=(t,e,n)=>new it(t,e).update(n).digest();ot.create=(t,e)=>new it(t,e);const st=BigInt(0),at=BigInt(1);function ct(t){return q(t.Fp,tt.reduce(((t,e)=>(t[e]="function",t)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),q(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...et(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const{bytesToNumberBE:lt,hexToBytes:ut}=r,ht={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(t){const{Err:e}=ht;if(t.length<2||2!==t[0])throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(128&r[0])throw new e("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:lt(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=ht,n="string"==typeof t?ut(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:o}=ht._parseInt(n.subarray(2)),{d:s,l:a}=ht._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(t){const e=t=>8&Number.parseInt(t[0],16)?"00"+t:t,n=t=>{const e=t.toString(16);return 1&e.length?`0${e}`:e},r=e(n(t.s)),i=e(n(t.r)),o=r.length/2,s=i.length/2,a=n(o),c=n(s);return`30${n(s+o+4)}02${c}${i}02${a}${r}`}},ft=BigInt(0),dt=BigInt(1),pt=(BigInt(2),BigInt(3));function yt(t){const e=function(t){const e=ct(t);return q(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:n,n:r}=e,i=n.BYTES+1,o=2*n.BYTES+1;function s(t){return Y(t,r)}function a(t){return X(t,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:h}=function(t){const e=function(t){const e=ct(t);q(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:n}=e,r=e.toBytes||((t,e,r)=>{const i=e.toAffine();return O(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),i=e.fromBytes||(t=>{const e=t.subarray(1);return{x:n.fromBytes(e.subarray(0,n.BYTES)),y:n.fromBytes(e.subarray(n.BYTES,2*n.BYTES))}});function o(t){const{a:r,b:i}=e,o=n.sqr(t),s=n.mul(o,t);return n.add(n.add(s,n.mul(t,r)),i)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(t){return"bigint"==typeof t&&ft<t&&t<e.n}function a(t){if(!s(t))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(t){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:o}=e;if(n&&"bigint"!=typeof t){if(t instanceof Uint8Array&&(t=B(t)),"string"!=typeof t||!n.includes(t.length))throw new Error("Invalid key");t=t.padStart(2*r,"0")}let s;try{s="bigint"==typeof t?t:R(P("private key",t,r))}catch(e){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof t}`)}return i&&(s=Y(s,o)),a(s),s}const l=new Map;function u(t){if(!(t instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(t,e,r){if(this.px=t,this.py=e,this.pz=r,null==t||!n.isValid(t))throw new Error("x required");if(null==e||!n.isValid(e))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(t){const{x:e,y:r}=t||{};if(!t||!n.isValid(e)||!n.isValid(r))throw new Error("invalid affine point");if(t instanceof h)throw new Error("projective point not allowed");const i=t=>n.eql(t,n.ZERO);return i(e)&&i(r)?h.ZERO:new h(e,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=n.invertBatch(t.map((t=>t.pz)));return t.map(((t,n)=>t.toAffine(e[n]))).map(h.fromAffine)}static fromHex(t){const e=h.fromAffine(i(P("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return h.BASE.multiply(c(t))}_setWindowSize(t){this._WINDOW_SIZE=t,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:t,y:r}=this.toAffine();if(!n.isValid(t)||!n.isValid(r))throw new Error("bad point: x or y not FE");const i=n.sqr(r),s=o(t);if(!n.eql(i,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:t}=this.toAffine();if(n.isOdd)return!n.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){u(t);const{px:e,py:r,pz:i}=this,{px:o,py:s,pz:a}=t,c=n.eql(n.mul(e,a),n.mul(o,i)),l=n.eql(n.mul(r,a),n.mul(s,i));return c&&l}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:t,b:r}=e,i=n.mul(r,pt),{px:o,py:s,pz:a}=this;let c=n.ZERO,l=n.ZERO,u=n.ZERO,f=n.mul(o,o),d=n.mul(s,s),p=n.mul(a,a),y=n.mul(o,s);return y=n.add(y,y),u=n.mul(o,a),u=n.add(u,u),c=n.mul(t,u),l=n.mul(i,p),l=n.add(c,l),c=n.sub(d,l),l=n.add(d,l),l=n.mul(c,l),c=n.mul(y,c),u=n.mul(i,u),p=n.mul(t,p),y=n.sub(f,p),y=n.mul(t,y),y=n.add(y,u),u=n.add(f,f),f=n.add(u,f),f=n.add(f,p),f=n.mul(f,y),l=n.add(l,f),p=n.mul(s,a),p=n.add(p,p),f=n.mul(p,y),c=n.sub(c,f),u=n.mul(p,d),u=n.add(u,u),u=n.add(u,u),new h(c,l,u)}add(t){u(t);const{px:r,py:i,pz:o}=this,{px:s,py:a,pz:c}=t;let l=n.ZERO,f=n.ZERO,d=n.ZERO;const p=e.a,y=n.mul(e.b,pt);let g=n.mul(r,s),w=n.mul(i,a),b=n.mul(o,c),m=n.add(r,i),v=n.add(s,a);m=n.mul(m,v),v=n.add(g,w),m=n.sub(m,v),v=n.add(r,o);let E=n.add(s,c);return v=n.mul(v,E),E=n.add(g,b),v=n.sub(v,E),E=n.add(i,o),l=n.add(a,c),E=n.mul(E,l),l=n.add(w,b),E=n.sub(E,l),d=n.mul(p,v),l=n.mul(y,b),d=n.add(l,d),l=n.sub(w,d),d=n.add(w,d),f=n.mul(l,d),w=n.add(g,g),w=n.add(w,g),b=n.mul(p,b),v=n.mul(y,v),w=n.add(w,b),b=n.sub(g,b),b=n.mul(p,b),v=n.add(v,b),g=n.mul(w,v),f=n.add(f,g),g=n.mul(E,v),l=n.mul(m,l),l=n.sub(l,g),g=n.mul(m,w),d=n.mul(E,d),d=n.add(d,g),new h(l,f,d)}subtract(t){return this.add(t.negate())}is0(){return this.equals(h.ZERO)}wNAF(t){return d.wNAFCached(this,l,t,(t=>{const e=n.invertBatch(t.map((t=>t.pz)));return t.map(((t,n)=>t.toAffine(e[n]))).map(h.fromAffine)}))}multiplyUnsafe(t){const r=h.ZERO;if(t===ft)return r;if(a(t),t===dt)return this;const{endo:i}=e;if(!i)return d.unsafeLadder(this,t);let{k1neg:o,k1:s,k2neg:c,k2:l}=i.splitScalar(t),u=r,f=r,p=this;for(;s>ft||l>ft;)s&dt&&(u=u.add(p)),l&dt&&(f=f.add(p)),p=p.double(),s>>=dt,l>>=dt;return o&&(u=u.negate()),c&&(f=f.negate()),f=new h(n.mul(f.px,i.beta),f.py,f.pz),u.add(f)}multiply(t){a(t);let r,i,o=t;const{endo:s}=e;if(s){const{k1neg:t,k1:e,k2neg:a,k2:c}=s.splitScalar(o);let{p:l,f:u}=this.wNAF(e),{p:f,f:p}=this.wNAF(c);l=d.constTimeNegate(t,l),f=d.constTimeNegate(a,f),f=new h(n.mul(f.px,s.beta),f.py,f.pz),r=l.add(f),i=u.add(p)}else{const{p:t,f:e}=this.wNAF(o);r=t,i=e}return h.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(t,e,n){const r=h.BASE,i=(t,e)=>e!==ft&&e!==dt&&t.equals(r)?t.multiply(e):t.multiplyUnsafe(e),o=i(this,e).add(i(t,n));return o.is0()?void 0:o}toAffine(t){const{px:e,py:r,pz:i}=this,o=this.is0();null==t&&(t=o?n.ONE:n.inv(i));const s=n.mul(e,t),a=n.mul(r,t),c=n.mul(i,t);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:t,isTorsionFree:n}=e;if(t===dt)return!0;if(n)return n(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:n}=e;return t===dt?this:n?n(h,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return this.assertValidity(),r(h,this,t)}toHex(t=!0){return B(this.toRawBytes(t))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,d=function(t,e){const n=(t,e)=>{const n=e.negate();return t?n:e},r=t=>({windows:Math.ceil(e/t)+1,windowSize:2**(t-1)});return{constTimeNegate:n,unsafeLadder(e,n){let r=t.ZERO,i=e;for(;n>st;)n&at&&(r=r.add(i)),i=i.double(),n>>=at;return r},precomputeWindow(t,e){const{windows:n,windowSize:i}=r(e),o=[];let s=t,a=s;for(let t=0;t<n;t++){a=s,o.push(a);for(let t=1;t<i;t++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(e,i,o){const{windows:s,windowSize:a}=r(e);let c=t.ZERO,l=t.BASE;const u=BigInt(2**e-1),h=2**e,f=BigInt(e);for(let t=0;t<s;t++){const e=t*a;let r=Number(o&u);o>>=f,r>a&&(r-=h,o+=at);const s=e,d=e+Math.abs(r)-1,p=t%2!=0,y=r<0;0===r?l=l.add(n(p,i[s])):c=c.add(n(y,i[d]))}return{p:c,f:l}},wNAFCached(t,e,n,r){const i=t._WINDOW_SIZE||1;let o=e.get(t);return o||(o=this.precomputeWindow(t,i),1!==i&&e.set(t,r(o))),this.wNAF(i,o,n)}}}(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}({...e,toBytes(t,e,r){const i=e.toAffine(),o=n.toBytes(i.x),s=O;return r?s(Uint8Array.from([e.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,n.toBytes(i.y))},fromBytes(t){const e=t.length,r=t[0],s=t.subarray(1);if(e!==i||2!==r&&3!==r){if(e===o&&4===r)return{x:n.fromBytes(s.subarray(0,n.BYTES)),y:n.fromBytes(s.subarray(n.BYTES,2*n.BYTES))};throw new Error(`Point of length ${e} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const t=R(s);if(!(ft<(a=t)&&a<n.ORDER))throw new Error("Point is not on curve");const e=u(t);let i=n.sqrt(e);return 1==(1&r)!=((i&dt)===dt)&&(i=n.neg(i)),{x:t,y:i}}var a}}),f=t=>B(U(t,e.nByteLength));function d(t){return t>r>>dt}const p=(t,e,n)=>R(t.slice(e,n));class y{constructor(t,e,n){this.r=t,this.s=e,this.recovery=n,this.assertValidity()}static fromCompact(t){const n=e.nByteLength;return t=P("compactSignature",t,2*n),new y(p(t,0,n),p(t,n,2*n))}static fromDER(t){const{r:e,s:n}=ht.toSig(P("DER",t));return new y(e,n)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(t){return new y(this.r,this.s,t)}recoverPublicKey(t){const{r,s:i,recovery:o}=this,l=m(P("msgHash",t));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const u=2===o||3===o?r+e.n:r;if(u>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=0==(1&o)?"02":"03",d=c.fromHex(h+f(u)),p=a(u),y=s(-l*p),g=s(i*p),w=c.BASE.multiplyAndAddUnsafe(d,y,g);if(!w)throw new Error("point at infinify");return w.assertValidity(),w}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return I(this.toDERHex())}toDERHex(){return ht.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return I(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const g={isValidPrivateKey(t){try{return l(t),!0}catch(t){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const t=rt(e.n);return function(t,e,n=!1){const r=t.length,i=nt(e),o=rt(e);if(r<16||r<o||r>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${r}`);const s=Y(n?R(t):N(t),e-K)+K;return n?T(s,i):U(s,i)}(e.randomBytes(t),e.n)},precompute:(t=8,e=c.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function w(t){const e=t instanceof Uint8Array,n="string"==typeof t,r=(e||n)&&t.length;return e?r===i||r===o:n?r===2*i||r===2*o:t instanceof c}const b=e.bits2int||function(t){const n=R(t),r=8*t.length-e.nBitLength;return r>0?n>>BigInt(r):n},m=e.bits2int_modN||function(t){return s(b(t))},v=L(e.nBitLength);function E(t){if("bigint"!=typeof t)throw new Error("bigint expected");if(!(ft<=t&&t<v))throw new Error(`bigint expected < 2^${e.nBitLength}`);return U(t,e.nByteLength)}const k={lowS:e.lowS,prehash:!1},x={lowS:e.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return c.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,n=!0){if(w(t))throw new Error("first arg must be private key");if(!w(e))throw new Error("second arg must be public key");return c.fromHex(e).multiply(l(t)).toRawBytes(n)},sign:function(t,r,i=k){const{seed:o,k2sig:u}=function(t,r,i=k){if(["recovered","canonical"].some((t=>t in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:u}=e;let{lowS:f,prehash:p,extraEntropy:g}=i;null==f&&(f=!0),t=P("msgHash",t),p&&(t=P("prehashed msgHash",o(t)));const w=m(t),v=l(r),x=[E(v),E(w)];if(null!=g){const t=!0===g?u(n.BYTES):g;x.push(P("extraEntropy",t))}const _=O(...x),A=w;return{seed:_,k2sig:function(t){const e=b(t);if(!h(e))return;const n=a(e),r=c.BASE.multiply(e).toAffine(),i=s(r.x);if(i===ft)return;const o=s(n*s(A+i*v));if(o===ft)return;let l=(r.x===i?0:2)|Number(r.y&dt),u=o;return f&&d(o)&&(u=function(t){return d(t)?s(-t):t}(o),l^=1),new y(i,u,l)}}}(t,r,i),f=e;return z(f.hash.outputLen,f.nByteLength,f.hmac)(o,u)},verify:function(t,n,r,i=x){const o=t;if(n=P("msgHash",n),r=P("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:l,prehash:u}=i;let h,f;try{if("string"==typeof o||o instanceof Uint8Array)try{h=y.fromDER(o)}catch(t){if(!(t instanceof ht.Err))throw t;h=y.fromCompact(o)}else{if("object"!=typeof o||"bigint"!=typeof o.r||"bigint"!=typeof o.s)throw new Error("PARSE");{const{r:t,s:e}=o;h=new y(t,e)}}f=c.fromHex(r)}catch(t){if("PARSE"===t.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(l&&h.hasHighS())return!1;u&&(n=e.hash(n));const{r:d,s:p}=h,g=m(n),w=a(p),b=s(g*w),v=s(d*w),E=c.BASE.multiplyAndAddUnsafe(f,b,v)?.toAffine();return!!E&&s(E.x)===d},ProjectivePoint:c,Signature:y,utils:g}}function gt(t){return{hash:t,hmac:(e,...n)=>ot(t,e,function(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let n=0;return t.forEach((t=>{if(!l(t))throw new Error("Uint8Array expected");e.set(t,n),n+=t.length})),e}(...n)),randomBytes:y}}BigInt(4);const wt=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),bt=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),mt=BigInt(1),vt=BigInt(2),Et=(t,e)=>(t+e/vt)/e;function kt(t){const e=wt,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,h=Q(u,n,e)*u%e,f=Q(h,n,e)*u%e,d=Q(f,vt,e)*l%e,p=Q(d,i,e)*d%e,y=Q(p,o,e)*p%e,g=Q(y,a,e)*y%e,w=Q(g,c,e)*g%e,b=Q(w,a,e)*y%e,m=Q(b,n,e)*u%e,v=Q(m,s,e)*p%e,E=Q(v,r,e)*l%e,k=Q(E,vt,e);if(!xt.eql(xt.sqr(k),t))throw new Error("Cannot find square root");return k}const xt=function(t,e,n=!1,r={}){if(t<=H)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:o}=et(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=function(t){if(t%W===V){const e=(t+K)/W;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}if(t%G===Z){const e=(t-Z)/G;return function(t,n){const r=t.mul(n,j),i=t.pow(r,e),o=t.mul(n,i),s=t.mul(t.mul(o,j),i),a=t.mul(o,t.sub(s,t.ONE));if(!t.eql(t.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(t){const e=(t-K)/j;let n,r,i;for(n=t-K,r=0;n%j===H;n/=j,r++);for(i=j;i<t&&J(i,e,t)!==t-K;i++);if(1===r){const e=(t+K)/W;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}const o=(n+K)/j;return function(t,s){if(t.pow(s,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let a=r,c=t.pow(t.mul(t.ONE,i),n),l=t.pow(s,o),u=t.pow(s,n);for(;!t.eql(u,t.ONE);){if(t.eql(u,t.ZERO))return t.ZERO;let e=1;for(let n=t.sqr(u);e<a&&!t.eql(n,t.ONE);e++)n=t.sqr(n);const n=t.pow(c,K<<BigInt(a-e-1));c=t.sqr(n),l=t.mul(l,n),u=t.mul(u,c),a=e}return l}}(t)}(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:L(i),ZERO:H,ONE:K,create:e=>Y(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return H<=e&&e<t},is0:t=>t===H,isOdd:t=>(t&K)===K,neg:e=>Y(-e,t),eql:(t,e)=>t===e,sqr:e=>Y(e*e,t),add:(e,n)=>Y(e+n,t),sub:(e,n)=>Y(e-n,t),mul:(e,n)=>Y(e*n,t),pow:(t,e)=>function(t,e,n){if(n<H)throw new Error("Expected power > 0");if(n===H)return t.ONE;if(n===K)return e;let r=t.ONE,i=e;for(;n>H;)n&K&&(r=t.mul(r,i)),i=t.sqr(i),n>>=K;return r}(a,t,e),div:(e,n)=>Y(e*X(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>X(e,t),sqrt:r.sqrt||(t=>s(a,t)),invertBatch:t=>function(t,e){const n=new Array(e.length),r=e.reduce(((e,r,i)=>t.is0(r)?e:(n[i]=e,t.mul(e,r))),t.ONE),i=t.inv(r);return e.reduceRight(((e,r,i)=>t.is0(r)?e:(n[i]=t.mul(e,n[i]),t.mul(e,r))),i),n}(a,t),cmov:(t,e,n)=>n?e:t,toBytes:t=>n?T(t,o):U(t,o),fromBytes:t=>{if(t.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${t.length}`);return n?N(t):R(t)}});return Object.freeze(a)}(wt,void 0,void 0,{sqrt:kt}),_t=function(t,e){const n=e=>yt({...t,...gt(e)});return Object.freeze({...n(e),create:n})}({a:BigInt(0),b:BigInt(7),Fp:xt,n:bt,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=bt,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-mt*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),a=Et(o*t,e),c=Et(-r*t,e);let l=Y(t-a*n-c*i,e),u=Y(-a*r-c*o,e);const h=l>s,f=u>s;if(h&&(l=e-l),f&&(u=e-u),l>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:l,k2neg:f,k2:u}}}},k),At=BigInt(0),St=t=>"bigint"==typeof t&&At<t&&t<wt,Bt=t=>"bigint"==typeof t&&At<t&&t<bt,Ct={};function It(t,...e){let n=Ct[t];if(void 0===n){const e=k(Uint8Array.from(t,(t=>t.charCodeAt(0))));n=O(e,e),Ct[t]=n}return k(O(n,...e))}const Rt=t=>t.toRawBytes(!0).slice(1),Nt=t=>U(t,32),Ut=t=>Y(t,wt),Tt=t=>Y(t,bt),Pt=_t.ProjectivePoint,Ot=(t,e,n)=>Pt.BASE.multiplyAndAddUnsafe(t,e,n);function Lt(t){let e=_t.utils.normPrivateKeyToScalar(t),n=Pt.fromPrivateKey(e);return{scalar:n.hasEvenY()?e:Tt(-e),bytes:Rt(n)}}function Ft(t){if(!St(t))throw new Error("bad x: need 0 < x < p");const e=Ut(t*t);let n=kt(Ut(e*t+BigInt(7)));n%vt!==At&&(n=Ut(-n));const r=new Pt(t,n,mt);return r.assertValidity(),r}function $t(...t){return Tt(R(It("BIP0340/challenge",...t)))}function Dt(t){return Lt(t).bytes}function zt(t,e,n=y(32)){const r=P("message",t),{bytes:i,scalar:o}=Lt(e),s=P("auxRand",n,32),a=Nt(o^R(It("BIP0340/aux",s))),c=It("BIP0340/nonce",a,i,r),l=Tt(R(c));if(l===At)throw new Error("sign failed: k is zero");const{bytes:u,scalar:h}=Lt(l),f=$t(u,i,r),d=new Uint8Array(64);if(d.set(u,0),d.set(Nt(Tt(h+f*o)),32),!Mt(d,r,i))throw new Error("sign: Invalid signature produced");return d}function Mt(t,e,n){const r=P("signature",t,64),i=P("message",e),o=P("publicKey",n,32);try{const t=Ft(R(o)),e=R(r.subarray(0,32));if(!St(e))return!1;const n=R(r.subarray(32,64));if(!Bt(n))return!1;const s=$t(Nt(e),Rt(t),i),a=Ot(t,n,Tt(-s));return!(!a||!a.hasEvenY()||a.toAffine().x!==e)}catch(t){return!1}}const qt=(()=>({getPublicKey:Dt,sign:zt,verify:Mt,utils:{randomPrivateKey:_t.utils.randomPrivateKey,lift_x:Ft,pointToBytes:Rt,numberToBytesBE:U,bytesToNumberBE:R,taggedHash:It,mod:Y}}))();var Ht=n(3486),Kt=n(7748),jt=n(7410),Vt=n(282),Wt=n(4207),Zt=n(7518),Gt=n(9905),Yt=Object.defineProperty,Jt=(t,e)=>{for(var n in e)Yt(t,n,{get:e[n],enumerable:!0})},Qt=Symbol("verified"),Xt=t=>t instanceof Object;function te(t){if(!Xt(t))return!1;if("number"!=typeof t.kind)return!1;if("string"!=typeof t.content)return!1;if("number"!=typeof t.created_at)return!1;if("string"!=typeof t.pubkey)return!1;if(!t.pubkey.match(/^[a-f0-9]{64}$/))return!1;if(!Array.isArray(t.tags))return!1;for(let e=0;e<t.tags.length;e++){let n=t.tags[e];if(!Array.isArray(n))return!1;for(let t=0;t<n.length;t++)if("object"==typeof n[t])return!1}return!0}Jt({},{Queue:()=>ce,QueueNode:()=>ae,binarySearch:()=>se,insertEventIntoAscendingList:()=>oe,insertEventIntoDescendingList:()=>ie,normalizeURL:()=>re,utf8Decoder:()=>ee,utf8Encoder:()=>ne});var ee=new TextDecoder("utf-8"),ne=new TextEncoder;function re(t){-1===t.indexOf("://")&&(t="wss://"+t);let e=new URL(t);return e.pathname=e.pathname.replace(/\/+/g,"/"),e.pathname.endsWith("/")&&(e.pathname=e.pathname.slice(0,-1)),("80"===e.port&&"ws:"===e.protocol||"443"===e.port&&"wss:"===e.protocol)&&(e.port=""),e.searchParams.sort(),e.hash="",e.toString()}function ie(t,e){const[n,r]=se(t,(t=>e.id===t.id?0:e.created_at===t.created_at?-1:t.created_at-e.created_at));return r||t.splice(n,0,e),t}function oe(t,e){const[n,r]=se(t,(t=>e.id===t.id?0:e.created_at===t.created_at?-1:e.created_at-t.created_at));return r||t.splice(n,0,e),t}function se(t,e){let n=0,r=t.length-1;for(;n<=r;){const i=Math.floor((n+r)/2),o=e(t[i]);if(0===o)return[i,!0];o<0?r=i-1:n=i+1}return[n,!1]}var ae=class{value;next=null;prev=null;constructor(t){this.value=t}},ce=class{first;last;constructor(){this.first=null,this.last=null}enqueue(t){const e=new ae(t);return this.last?this.last===this.first?(this.last=e,this.last.prev=this.first,this.first.next=e):(e.prev=this.last,this.last.next=e,this.last=e):(this.first=e,this.last=e),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const t=this.first;return this.first=null,this.last=null,t.value}const t=this.first;return this.first=t.next,t.value}};function le(t){let e=(0,Kt.J)(ne.encode(function(t){if(!te(t))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,t.pubkey,t.created_at,t.kind,t.tags,t.content])}(t)));return(0,Ht.ci)(e)}var ue=new class{generateSecretKey(){return qt.utils.randomPrivateKey()}getPublicKey(t){return(0,Ht.ci)(qt.getPublicKey(t))}finalizeEvent(t,e){const n=t;return n.pubkey=(0,Ht.ci)(qt.getPublicKey(e)),n.id=le(n),n.sig=(0,Ht.ci)(qt.sign(le(n),e)),n[Qt]=!0,n}verifyEvent(t){if("boolean"==typeof t[Qt])return t[Qt];const e=le(t);if(e!==t.id)return t[Qt]=!1,!1;try{const n=qt.verify(t.sig,e,t.pubkey);return t[Qt]=n,n}catch(e){return t[Qt]=!1,!1}}},he=(ue.generateSecretKey,ue.getPublicKey,ue.finalizeEvent),fe=ue.verifyEvent;function de(t){return 1e3<=t&&t<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(t)}function pe(t){return[0,3].includes(t)||1e4<=t&&t<2e4}function ye(t){return 2e4<=t&&t<3e4}function ge(t){return 3e4<=t&&t<4e4}function we(t){return de(t)?"regular":pe(t)?"replaceable":ye(t)?"ephemeral":ge(t)?"parameterized":"unknown"}Jt({},{Application:()=>Bn,BadgeAward:()=>Be,BadgeDefinition:()=>vn,BlockedRelaysList:()=>en,BookmarkList:()=>Qe,Bookmarksets:()=>wn,Calendar:()=>Pn,CalendarEventRSVP:()=>On,ChannelCreation:()=>Ie,ChannelHideMessage:()=>Ue,ChannelMessage:()=>Ne,ChannelMetadata:()=>Re,ChannelMuteUser:()=>Te,ClassifiedListing:()=>Rn,ClientAuth:()=>ln,CommunitiesList:()=>Xe,CommunityDefinition:()=>$n,CommunityPostApproval:()=>Me,Contacts:()=>Ee,CreateOrUpdateProduct:()=>xn,CreateOrUpdateStall:()=>kn,Curationsets:()=>bn,Date:()=>Un,DraftClassifiedListing:()=>Nn,DraftLong:()=>An,Emojisets:()=>Sn,EncryptedDirectMessage:()=>ke,EncryptedDirectMessages:()=>xe,EventDeletion:()=>_e,FileMetadata:()=>Oe,FileServerPreference:()=>sn,Followsets:()=>pn,GenericRepost:()=>Ce,Genericlists:()=>yn,HTTPAuth:()=>dn,Handlerinformation:()=>Fn,Handlerrecommendation:()=>Ln,Highlights:()=>Ze,InterestsList:()=>rn,Interestsets:()=>En,JobFeedback:()=>Ke,JobRequest:()=>qe,JobResult:()=>He,Label:()=>ze,LightningPubRPC:()=>cn,LiveChatMessage:()=>Le,LiveEvent:()=>Cn,LongFormArticle:()=>_n,Metadata:()=>be,Mutelist:()=>Ge,NWCWalletInfo:()=>an,NWCWalletRequest:()=>un,NWCWalletResponse:()=>hn,NostrConnect:()=>fn,OpenTimestamps:()=>Pe,Pinlist:()=>Ye,ProblemTracker:()=>Fe,ProfileBadges:()=>mn,PublicChatsList:()=>tn,Reaction:()=>Se,RecommendRelay:()=>ve,RelayList:()=>Je,Relaysets:()=>gn,Report:()=>$e,Reporting:()=>De,Repost:()=>Ae,SearchRelaysList:()=>nn,ShortTextNote:()=>me,Time:()=>Tn,UserEmojiList:()=>on,UserStatuses:()=>In,Zap:()=>We,ZapGoal:()=>je,ZapRequest:()=>Ve,classifyKind:()=>we,isEphemeralKind:()=>ye,isParameterizedReplaceableKind:()=>ge,isRegularKind:()=>de,isReplaceableKind:()=>pe});var be=0,me=1,ve=2,Ee=3,ke=4,xe=4,_e=5,Ae=6,Se=7,Be=8,Ce=16,Ie=40,Re=41,Ne=42,Ue=43,Te=44,Pe=1040,Oe=1063,Le=1311,Fe=1971,$e=1984,De=1984,ze=1985,Me=4550,qe=5999,He=6999,Ke=7e3,je=9041,Ve=9734,We=9735,Ze=9802,Ge=1e4,Ye=10001,Je=10002,Qe=10003,Xe=10004,tn=10005,en=10006,nn=10007,rn=10015,on=10030,sn=10096,an=13194,cn=21e3,ln=22242,un=23194,hn=23195,fn=24133,dn=27235,pn=3e4,yn=30001,gn=30002,wn=30003,bn=30004,mn=30008,vn=30009,En=30015,kn=30017,xn=30018,_n=30023,An=30024,Sn=30030,Bn=30078,Cn=30311,In=30315,Rn=30402,Nn=30403,Un=31922,Tn=31923,Pn=31924,On=31925,Ln=31989,Fn=31990,$n=34550;function Dn(t,e){let n=e.length+3,r=t.indexOf(`"${e}":`)+n,i=t.slice(r).indexOf('"')+r+1;return t.slice(i,i+64)}function zn(t,e){let n=e.length,r=t.indexOf(`"${e}":`)+n+3,i=t.slice(r),o=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,o),10)}function Mn(t){let e=t.slice(0,22).indexOf('"EVENT"');if(-1===e)return null;let n=t.slice(e+7+1).indexOf('"');if(-1===n)return null;let r=e+7+1+n,i=t.slice(r+1,80).indexOf('"');if(-1===i)return null;let o=r+1+i;return t.slice(r+1,o)}function qn(t,e){return e===Dn(t,"id")}function Hn(t,e){return e===Dn(t,"pubkey")}function Kn(t,e){return e===zn(t,"kind")}function jn(t,e){return{kind:ln,created_at:Math.floor(Date.now()/1e3),tags:[["relay",t],["challenge",e]],content:""}}Jt({},{getHex64:()=>Dn,getInt:()=>zn,getSubscriptionId:()=>Mn,matchEventId:()=>qn,matchEventKind:()=>Kn,matchEventPubkey:()=>Hn}),Jt({},{makeAuthEvent:()=>jn});var Vn={};Jt(Vn,{BECH32_REGEX:()=>Zn,decode:()=>Gn,naddrEncode:()=>ir,neventEncode:()=>rr,noteEncode:()=>Xn,nprofileEncode:()=>nr,npubEncode:()=>Qn,nrelayEncode:()=>or,nsecEncode:()=>Jn});var Wn=5e3,Zn=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function Gn(t){let{prefix:e,words:n}=jt.gW.decode(t,Wn),r=new Uint8Array(jt.gW.fromWords(n));switch(e){case"nprofile":{let t=Yn(r);if(!t[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(32!==t[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:(0,Ht.ci)(t[0][0]),relays:t[1]?t[1].map((t=>ee.decode(t))):[]}}}case"nevent":{let t=Yn(r);if(!t[0]?.[0])throw new Error("missing TLV 0 for nevent");if(32!==t[0][0].length)throw new Error("TLV 0 should be 32 bytes");if(t[2]&&32!==t[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(t[3]&&4!==t[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:(0,Ht.ci)(t[0][0]),relays:t[1]?t[1].map((t=>ee.decode(t))):[],author:t[2]?.[0]?(0,Ht.ci)(t[2][0]):void 0,kind:t[3]?.[0]?parseInt((0,Ht.ci)(t[3][0]),16):void 0}}}case"naddr":{let t=Yn(r);if(!t[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!t[2]?.[0])throw new Error("missing TLV 2 for naddr");if(32!==t[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(!t[3]?.[0])throw new Error("missing TLV 3 for naddr");if(4!==t[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:ee.decode(t[0][0]),pubkey:(0,Ht.ci)(t[2][0]),kind:parseInt((0,Ht.ci)(t[3][0]),16),relays:t[1]?t[1].map((t=>ee.decode(t))):[]}}}case"nrelay":{let t=Yn(r);if(!t[0]?.[0])throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:ee.decode(t[0][0])}}case"nsec":return{type:e,data:r};case"npub":case"note":return{type:e,data:(0,Ht.ci)(r)};default:throw new Error(`unknown prefix ${e}`)}}function Yn(t){let e={},n=t;for(;n.length>0;){let t=n[0],r=n[1],i=n.slice(2,2+r);if(n=n.slice(2+r),i.length<r)throw new Error(`not enough data to read on TLV ${t}`);e[t]=e[t]||[],e[t].push(i)}return e}function Jn(t){return er("nsec",t)}function Qn(t){return er("npub",(0,Ht.nr)(t))}function Xn(t){return er("note",(0,Ht.nr)(t))}function tr(t,e){let n=jt.gW.toWords(e);return jt.gW.encode(t,n,Wn)}function er(t,e){return tr(t,e)}function nr(t){return tr("nprofile",sr({0:[(0,Ht.nr)(t.pubkey)],1:(t.relays||[]).map((t=>ne.encode(t)))}))}function rr(t){let e;return void 0!==t.kind&&(e=function(t){const e=new Uint8Array(4);return e[0]=t>>24&255,e[1]=t>>16&255,e[2]=t>>8&255,e[3]=255&t,e}(t.kind)),tr("nevent",sr({0:[(0,Ht.nr)(t.id)],1:(t.relays||[]).map((t=>ne.encode(t))),2:t.author?[(0,Ht.nr)(t.author)]:[],3:e?[new Uint8Array(e)]:[]}))}function ir(t){let e=new ArrayBuffer(4);return new DataView(e).setUint32(0,t.kind,!1),tr("naddr",sr({0:[ne.encode(t.identifier)],1:(t.relays||[]).map((t=>ne.encode(t))),2:[(0,Ht.nr)(t.pubkey)],3:[new Uint8Array(e)]}))}function or(t){return tr("nrelay",sr({0:[ne.encode(t)]}))}function sr(t){let e=[];return Object.entries(t).reverse().forEach((([t,n])=>{n.forEach((n=>{let r=new Uint8Array(n.length+2);r.set([parseInt(t)],0),r.set([n.length],1),r.set(n,2),e.push(r)}))})),(0,Ht.eV)(...e)}async function ar(t,e,n){const r=t instanceof Uint8Array?(0,Ht.ci)(t):t,i=lr(_t.getSharedSecret(r,"02"+e));let o=Uint8Array.from((0,Ht.O6)(16)),s=ne.encode(n),a=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["encrypt"]),c=await crypto.subtle.encrypt({name:"AES-CBC",iv:o},a,s);return`${jt.US.encode(new Uint8Array(c))}?iv=${jt.US.encode(new Uint8Array(o.buffer))}`}async function cr(t,e,n){const r=t instanceof Uint8Array?(0,Ht.ci)(t):t;let[i,o]=n.split("?iv="),s=lr(_t.getSharedSecret(r,"02"+e)),a=await crypto.subtle.importKey("raw",s,{name:"AES-CBC"},!1,["decrypt"]),c=jt.US.decode(i),l=jt.US.decode(o),u=await crypto.subtle.decrypt({name:"AES-CBC",iv:l},a,c);return ee.decode(u)}function lr(t){return t.slice(1,33)}Jt({},{decrypt:()=>cr,encrypt:()=>ar}),"undefined"!=typeof crypto&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle),Jt({},{NIP05_REGEX:()=>hr,queryProfile:()=>pr,searchDomain:()=>dr,useFetchImplementation:()=>fr});var ur,hr=/^(?:([\w.+-]+)@)?([\w.-]+)$/;try{ur=fetch}catch{}function fr(t){ur=t}async function dr(t,e=""){try{return(await(await ur(`https://${t}/.well-known/nostr.json?name=${e}`)).json()).names}catch(t){return{}}}async function pr(t){const e=t.match(hr);if(!e)return null;const[n,r="_",i]=e;try{const t=await ur(`https://${i}/.well-known/nostr.json?name=${r}`),{names:e,relays:n}=function(t){const e={names:{}};for(const[n,r]of Object.entries(t.names))"string"==typeof n&&"string"==typeof r&&(e.names[n]=r);if(t.relays){e.relays={};for(const[n,r]of Object.entries(t.relays))"string"==typeof n&&Array.isArray(r)&&(e.relays[n]=r.filter((t=>"string"==typeof t)))}return e}(await t.json()),o=e[r];return o?{pubkey:o,relays:n?.[o]}:null}catch(t){return null}}function yr(t){const e={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of t.tags)"e"===r[0]&&r[1]&&n.push(r),"p"===r[0]&&r[1]&&e.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let t=0;t<n.length;t++){const r=n[t],[i,o,s,a]=r,c={id:o,relays:s?[s]:[]},l=0===t,u=t===n.length-1;"root"!==a?"reply"!==a?"mention"!==a?l?e.root=c:u?e.reply=c:e.mentions.push(c):e.mentions.push(c):e.reply=c:e.root=c}return e}Jt({},{parse:()=>yr}),Jt({},{fetchRelayInformation:()=>wr,useFetchImplementation:()=>gr});try{fetch}catch{}function gr(t){}async function wr(t){return await(await fetch(t.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}function br(t){let e=0;for(let n=0;n<t.length;n++){const r=parseInt(t[n],16);if(0!==r){e+=Math.clz32(r)-28;break}e+=4}return e}function mr(t,e){let n=0;const r=t,i=["nonce",n.toString(),e.toString()];for(r.tags.push(i);;){const t=Math.floor((new Date).getTime()/1e3);if(t!==r.created_at&&(n=0,r.created_at=t),i[1]=(++n).toString(),r.id=le(r),br(r.id)>=e)break}return r}function vr(t,e,n,r){return he({kind:Ae,tags:[...t.tags??[],["e",e.id,n],["p",e.pubkey]],content:""===t.content?"":JSON.stringify(e),created_at:t.created_at},r)}function Er(t){if(t.kind!==Ae)return;let e,n;for(let r=t.tags.length-1;r>=0&&(void 0===e||void 0===n);r--){const i=t.tags[r];i.length>=2&&("e"===i[0]&&void 0===e?e=i:"p"===i[0]&&void 0===n&&(n=i))}return void 0!==e?{id:e[1],relays:[e[2],n?.[2]].filter((t=>"string"==typeof t)),author:n?.[1]}:void 0}function kr(t,{skipVerification:e}={}){const n=Er(t);if(void 0===n||""===t.content)return;let r;try{r=JSON.parse(t.content)}catch(t){return}return r.id===n.id&&(e||fe(r))?r:void 0}Jt({},{getPow:()=>br,minePow:()=>mr}),Jt({},{finishRepostEvent:()=>vr,getRepostedEvent:()=>kr,getRepostedEventPointer:()=>Er}),Jt({},{NOSTR_URI_REGEX:()=>xr,parse:()=>Ar,test:()=>_r});var xr=new RegExp(`nostr:(${Zn.source})`);function _r(t){return"string"==typeof t&&new RegExp(`^${xr.source}$`).test(t)}function Ar(t){const e=t.match(new RegExp(`^${xr.source}$`));if(!e)throw new Error(`Invalid Nostr URI: ${t}`);return{uri:e[0],value:e[1],decoded:Gn(e[1])}}function Sr(t,e,n){const r=e.tags.filter((t=>t.length>=2&&("e"===t[0]||"p"===t[0])));return he({...t,kind:Se,tags:[...t.tags??[],...r,["e",e.id],["p",e.pubkey]],content:t.content??"+"},n)}function Br(t){if(t.kind!==Se)return;let e,n;for(let r=t.tags.length-1;r>=0&&(void 0===e||void 0===n);r--){const i=t.tags[r];i.length>=2&&("e"===i[0]&&void 0===e?e=i:"p"===i[0]&&void 0===n&&(n=i))}return void 0!==e&&void 0!==n?{id:e[1],relays:[e[2],n[2]].filter((t=>void 0!==t)),author:n[1]}:void 0}Jt({},{finishReactionEvent:()=>Sr,getReactedEventPointer:()=>Br}),Jt({},{matchAll:()=>Ir,regex:()=>Cr,replaceAll:()=>Rr});var Cr=()=>new RegExp(`\\b${xr.source}\\b`,"g");function*Ir(t){const e=t.matchAll(Cr());for(const t of e)try{const[e,n]=t;yield{uri:e,value:n,decoded:Gn(n),start:t.index,end:t.index+e.length}}catch(t){}}function Rr(t,e){return t.replaceAll(Cr(),((t,n)=>e({uri:t,value:n,decoded:Gn(n)})))}Jt({},{channelCreateEvent:()=>Nr,channelHideMessageEvent:()=>Pr,channelMessageEvent:()=>Tr,channelMetadataEvent:()=>Ur,channelMuteUserEvent:()=>Or});var Nr=(t,e)=>{let n;if("object"==typeof t.content)n=JSON.stringify(t.content);else{if("string"!=typeof t.content)return;n=t.content}return he({kind:Ie,tags:[...t.tags??[]],content:n,created_at:t.created_at},e)},Ur=(t,e)=>{let n;if("object"==typeof t.content)n=JSON.stringify(t.content);else{if("string"!=typeof t.content)return;n=t.content}return he({kind:Re,tags:[["e",t.channel_create_event_id],...t.tags??[]],content:n,created_at:t.created_at},e)},Tr=(t,e)=>{const n=[["e",t.channel_create_event_id,t.relay_url,"root"]];return t.reply_to_channel_message_event_id&&n.push(["e",t.reply_to_channel_message_event_id,t.relay_url,"reply"]),he({kind:Ne,tags:[...n,...t.tags??[]],content:t.content,created_at:t.created_at},e)},Pr=(t,e)=>{let n;if("object"==typeof t.content)n=JSON.stringify(t.content);else{if("string"!=typeof t.content)return;n=t.content}return he({kind:Ue,tags:[["e",t.channel_message_event_id],...t.tags??[]],content:n,created_at:t.created_at},e)},Or=(t,e)=>{let n;if("object"==typeof t.content)n=JSON.stringify(t.content);else{if("string"!=typeof t.content)return;n=t.content}return he({kind:Te,tags:[["p",t.pubkey_to_mute],...t.tags??[]],content:n,created_at:t.created_at},e)};Jt({},{EMOJI_SHORTCODE_REGEX:()=>Fr,matchAll:()=>Dr,regex:()=>$r,replaceAll:()=>zr});var Lr,Fr=/:(\w+):/,$r=()=>new RegExp(`\\B${Fr.source}\\B`,"g");function*Dr(t){const e=t.matchAll($r());for(const t of e)try{const[e,n]=t;yield{shortcode:e,name:n,start:t.index,end:t.index+e.length}}catch(t){}}function zr(t,e){return t.replaceAll($r(),((t,n)=>e({shortcode:t,name:n})))}Jt({},{useFetchImplementation:()=>Mr,validateGithub:()=>qr});try{Lr=fetch}catch{}function Mr(t){Lr=t}async function qr(t,e,n){try{return await(await Lr(`https://gist.github.com/${e}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${t}`}catch(t){return!1}}Jt({},{default:()=>Wr,v2:()=>Vr});var Hr,Kr=new TextDecoder,jr={minPlaintextSize:1,maxPlaintextSize:65535,utf8Encode:Ht.iY,utf8Decode:t=>Kr.decode(t),getConversationKey(t,e){const n=_t.getSharedSecret(t,"02"+e).subarray(1,33);return(0,Zt.Kl)(Kt.J,n,"nip44-v2")},getMessageKeys(t,e){(0,Wt.ql)(t,32),(0,Wt.ql)(e,32);const n=(0,Zt.jn)(Kt.J,t,e,76);return{chacha_key:n.subarray(0,32),chacha_nonce:n.subarray(32,44),hmac_key:n.subarray(44,76)}},calcPaddedLen(t){if(!Number.isSafeInteger(t)||t<1)throw new Error("expected positive integer");if(t<=32)return 32;const e=1<<Math.floor(Math.log2(t-1))+1,n=e<=256?32:e/8;return n*(Math.floor((t-1)/n)+1)},writeU16BE(t){if(!Number.isSafeInteger(t)||t<jr.minPlaintextSize||t>jr.maxPlaintextSize)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const e=new Uint8Array(2);return new DataView(e.buffer).setUint16(0,t,!1),e},pad(t){const e=jr.utf8Encode(t),n=e.length,r=jr.writeU16BE(n),i=new Uint8Array(jr.calcPaddedLen(n)-n);return(0,Ht.eV)(r,e,i)},unpad(t){const e=new DataView(t.buffer).getUint16(0),n=t.subarray(2,2+e);if(e<jr.minPlaintextSize||e>jr.maxPlaintextSize||n.length!==e||t.length!==2+jr.calcPaddedLen(e))throw new Error("invalid padding");return jr.utf8Decode(n)},hmacAad(t,e,n){if(32!==n.length)throw new Error("AAD associated data must be 32 bytes");const r=(0,Ht.eV)(n,e);return(0,Gt.b)(Kt.J,t,r)},decodePayload(t){if("string"!=typeof t)throw new Error("payload must be a valid string");const e=t.length;if(e<132||e>87472)throw new Error("invalid payload length: "+e);if("#"===t[0])throw new Error("unknown encryption version");let n;try{n=jt.US.decode(t)}catch(t){throw new Error("invalid base64: "+t.message)}const r=n.length;if(r<99||r>65603)throw new Error("invalid data length: "+r);const i=n[0];if(2!==i)throw new Error("unknown encryption version "+i);return{nonce:n.subarray(1,33),ciphertext:n.subarray(33,-32),mac:n.subarray(-32)}}},Vr={utils:jr,encrypt:function(t,e,n=(0,Ht.O6)(32)){const{chacha_key:r,chacha_nonce:i,hmac_key:o}=jr.getMessageKeys(e,n),s=jr.pad(t),a=(0,Vt.a0)(r,i,s),c=jr.hmacAad(o,a,n);return jt.US.encode((0,Ht.eV)(new Uint8Array([2]),n,a,c))},decrypt:function(t,e){const{nonce:n,ciphertext:r,mac:i}=jr.decodePayload(t),{chacha_key:o,chacha_nonce:s,hmac_key:a}=jr.getMessageKeys(e,n),c=jr.hmacAad(a,r,n);if(!(0,Wt.Wd)(c,i))throw new Error("invalid MAC");const l=(0,Vt.a0)(o,s,r);return jr.unpad(l)}},Wr={v2:Vr};function Zr(t){const{pathname:e,searchParams:n}=new URL(t),r=e,i=n.get("relay"),o=n.get("secret");if(!r||!i||!o)throw new Error("invalid connection string");return{pubkey:r,relay:i,secret:o}}async function Gr(t,e,n){const r={method:"pay_invoice",params:{invoice:n}},i=await ar(e,t,JSON.stringify(r)),o={kind:un,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",t]]};return he(o,e)}Jt({},{makeNwcRequestEvent:()=>Gr,parseConnectionString:()=>Zr}),Jt({},{getZapEndpoint:()=>Jr,makeZapReceipt:()=>ti,makeZapRequest:()=>Qr,useFetchImplementation:()=>Yr,validateZapRequest:()=>Xr});try{Hr=fetch}catch{}function Yr(t){Hr=t}async function Jr(t){try{let e="",{lud06:n,lud16:r}=JSON.parse(t.content);if(n){let{words:t}=jt.gW.decode(n,1e3),r=jt.gW.fromWords(t);e=ee.decode(r)}else{if(!r)return null;{let[t,n]=r.split("@");e=new URL(`/.well-known/lnurlp/${t}`,`https://${n}`).toString()}}let i=await Hr(e),o=await i.json();if(o.allowsNostr&&o.nostrPubkey)return o.callback}catch(t){}return null}function Qr({profile:t,event:e,amount:n,relays:r,comment:i=""}){if(!n)throw new Error("amount not given");if(!t)throw new Error("profile not given");let o={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",t],["amount",n.toString()],["relays",...r]]};return e&&o.tags.push(["e",e]),o}function Xr(t){let e;try{e=JSON.parse(t)}catch(t){return"Invalid zap request JSON."}if(!te(e))return"Zap request is not a valid Nostr event.";if(!fe(e))return"Invalid signature on zap request.";let n=e.tags.find((([t,e])=>"p"===t&&e));if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=e.tags.find((([t,e])=>"e"===t&&e));return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":e.tags.find((([t,e])=>"relays"===t&&e))?null:"Zap request doesn't have a 'relays' tag."}function ti({zapRequest:t,preimage:e,bolt11:n,paidAt:r}){let i=JSON.parse(t),o=i.tags.filter((([t])=>"e"===t||"p"===t||"a"===t)),s={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...o,["P",i.pubkey],["bolt11",n],["description",t]]};return e&&s.tags.push(["preimage",e]),s}Jt({},{getToken:()=>ni,hashPayload:()=>li,unpackEventFromToken:()=>ii,validateEvent:()=>hi,validateEventKind:()=>si,validateEventMethodTag:()=>ci,validateEventPayloadTag:()=>ui,validateEventTimestamp:()=>oi,validateEventUrlTag:()=>ai,validateToken:()=>ri});var ei="Nostr ";async function ni(t,e,n,r=!1,i){const o={kind:dn,tags:[["u",t],["method",e]],created_at:Math.round((new Date).getTime()/1e3),content:""};i&&o.tags.push(["payload",li(i)]);const s=await n(o);return(r?ei:"")+jt.US.encode(ne.encode(JSON.stringify(s)))}async function ri(t,e,n){const r=await ii(t).catch((t=>{throw t})),i=await hi(r,e,n).catch((t=>{throw t}));return i}async function ii(t){if(!t)throw new Error("Missing token");t=t.replace(ei,"");const e=ee.decode(jt.US.decode(t));if(!e||0===e.length||!e.startsWith("{"))throw new Error("Invalid token");return JSON.parse(e)}function oi(t){return!!t.created_at&&Math.round((new Date).getTime()/1e3)-t.created_at<60}function si(t){return t.kind===dn}function ai(t,e){const n=t.tags.find((t=>"u"===t[0]));return!!n&&n.length>0&&n[1]===e}function ci(t,e){const n=t.tags.find((t=>"method"===t[0]));return!!n&&n.length>0&&n[1].toLowerCase()===e.toLowerCase()}function li(t){const e=(0,Kt.J)(ne.encode(JSON.stringify(t)));return(0,Ht.ci)(e)}function ui(t,e){const n=t.tags.find((t=>"payload"===t[0]));if(!n)return!1;const r=li(e);return n.length>0&&n[1]===r}async function hi(t,e,n,r){if(!fe(t))throw new Error("Invalid nostr event, signature invalid");if(!si(t))throw new Error("Invalid nostr event, kind invalid");if(!oi(t))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!ai(t,e))throw new Error("Invalid nostr event, url tag invalid");if(!ci(t,n))throw new Error("Invalid nostr event, method tag invalid");if(Boolean(r)&&"object"==typeof r&&Object.keys(r).length>0&&!ui(t,r))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}var fi=n(2171);window.buffer=n(8764).lW;const di=n(1354);async function pi(t){return new Promise((e=>{setTimeout(e,t)}))}function yi(t,e=64){return di.SHA256(t).toString(di.enc.Hex).slice(0,e)}async function gi(){return window.nip07signer?($(".connect-wallet").text("Connect"),await async function(){for(const t of window.ndk.pool.relays.values())t.disconnect();await pi(100),window.ndk=null,window.nip07signer=null,window.nostrUser=null,delete window.sessionStorage.privateKey,delete window.sessionStorage.lastKeyProvider,window.MDEditor.value(""),localStorage.removeItem("autosave"),location.reload()}(),mi().then((()=>{window.dispatchEvent(new Event(Wallet.WALLET_DISCONNECTED_EVENT))}))):bi()}async function wi(){return window.nip07signer&&vi()?Promise.resolve("already connected"):"nip07"==window.sessionStorage.lastKeyProvider&&window.nostr?ki():"private-key"==window.sessionStorage.lastKeyProvider&&window.sessionStorage.privateKey?xi(window.sessionStorage.privateKey):Promise.reject("no seamless connection possible")}async function bi(){return wi().catch((()=>window.nostr?ki():window.ethereum?async function(){const t=(await window.ethereum.request({method:"eth_requestAccounts"}).catch((t=>{4001===t.code?(0,fi.x2)("User rejected the connection request"):(0,fi.x2)(t.message)})))[0],e=`0x${window.buffer.from("Sign this message to approve the current website *unlimited* access to your Tagayasu account.\n\nPlease be very careful to make sure you are on the correct website (tagayasu.xyz) to prevent phising attacks!","utf8").toString("hex")}`;return await ethereum.request({method:"personal_sign",params:[e,t]}).then((t=>xi(yi(t)))).catch((t=>{4001===t.code?(0,fi.x2)("User rejected the signature request"):(0,fi.x2)(t.message)}))}():new Promise(((t,e)=>{const n=new bootstrap.Modal("#keyEntryModal",{});n.show(),n._element.addEventListener("hidden.bs.modal",(function t(){n._element.removeEventListener("hidden.bs.modal",t),e("no suitable key store found")}));const r=document.getElementById("connectWithPassPhraseButton");r.addEventListener("click",(function e(){r.removeEventListener("click",e),n.hide(),xi(yi($("#pass-phrase").val())).then(t("user logged in with passphrase"))}))}))))}async function mi(){return vi()||(window.ndk=new i.ZP({explicitRelayUrls:window.relays.active}),window.ndk.connect()),Promise.resolve("connected")}function vi(){if(!window.ndk)return!1;const t=window.ndk.pool.stats();return t.connected/t.total>=.5}async function Ei(t){return window.nip07signer=t,window.ndk=new i.ZP({signer:window.nip07signer,explicitRelayUrls:window.relays.active}),await t.user().then((async t=>{t.npub&&(window.nostrUser=t,console.log("Permission granted to read their public key:",t.npub),window.ndk.connect(),window.dispatchEvent(new Event(Wallet.WALLET_CONNECTED_EVENT)))}))}async function ki(){return window.sessionStorage.lastKeyProvider="nip07",Ei(new i.fJ)}async function xi(t){return window.sessionStorage.privateKey=t,window.sessionStorage.lastKeyProvider="private-key",Ei(new i.Gg(window.sessionStorage.privateKey))}function _i(t){return`tagayasu-${di.SHA256(t.toLowerCase())}`}function Ai(t,e){return PageContext.instance.dnslinkHexpubkey()===e?t.replace(/ /g,"-"):function(t,e){const n=new i._C(window.ndk);return n.kind=30023,n.pubkey=e,n.tags=[["d",_i(t)]],n.encode()}(t,e)}function Si(t,e){return`30023:${e}:${_i(t)}`}async function Bi(t){return window.nostr&&window.nostr.nip04?window.nostr.nip04.encrypt(window.nostrUser.hexpubkey,t):window.sessionStorage.privateKey?Promise.resolve(di.AES.encrypt(t,window.sessionStorage.privateKey).toString()):Promise.reject("Did not find any encryption compatible wallet")}async function Ci(t){return window.nostr&&window.nostr.nip04?window.nostr.nip04.decrypt(window.nostrUser.hexpubkey,t):window.sessionStorage.privateKey?Promise.resolve(di.AES.decrypt(t,window.sessionStorage.privateKey).toString(di.enc.Utf8)):Promise.reject("Did not find any encryption compatible wallet")}async function Ii(t,e){const n=`${t.length}:${t}${e}`;return await Bi(n)}async function Ri(t){const e=await Ci(t),n=parseInt(e.slice(0,e.indexOf(":"))),r=e.indexOf(":")+1,i=r+n;return{title:e.slice(r,i),content:e.slice(i)}}function Ni(t){const e=Vn.decode(t);if("npub"!==e.type)throw new Error("Invalid npub");return e.data}function Ui(t){const e=PageContext.instance.dnslinkHexpubkey();if(!t&&!e)return null;if(!t)return{authors:[e],kinds:[30023],"#d":[_i("homepage")]};const n=function(t){let e;if(t.match(Ti)){const[e,n,r]=t.split(":"),i={authors:[n],kinds:[parseInt(e)]};return r&&(i["#d"]=[r]),i}try{switch(e=Vn.decode(t),e.type){case"nevent":return{ids:[e.data.id]};case"note":return{ids:[e.data]};case"naddr":return{authors:[e.data.pubkey],"#d":[e.data.identifier],kinds:[e.data.kind]}}}catch(t){}return{ids:[t]}}(t);return n.kinds||(n.kinds=[30023]),n["#d"]?n:e?{authors:[e],kinds:[30023],"#d":[_i(n.ids[0].replace(/-/g," "))]}:null}window.relays={default:["wss://relay.tagayasu.xyz","wss://relay.damus.io","wss://nos.lol","wss://nostr.mom","wss://nostr.oxtr.dev","wss://relay.nostr.band","wss://offchain.pub","wss://purplerelay.com","wss://nostr.bitcoiner.social"],active:[]},window.relays.active=window.relays.default,window.trySeamlessConnection=wi;const Ti=/^(\d+):([0-9A-Fa-f]+)(?::(.*))?$/},5857:()=>{class t{_baseUrl="https://1.1.1.1/dns-query?type=TXT&name=";_headers={accept:"application/dns-json"};static instance=new t;constructor(){if(t.instance)throw new Error("Use singleton instance")}async txt(t){return fetch(this._baseUrl+t,{headers:this._headers}).then((t=>t.json())).then((t=>t.Answer?t.Answer[0].data.replace(/[^a-zA-Z0-9]/g,""):"")).catch((t=>(console.error("Error:",t),null)))}_npubs={};async npub(t){if(this._npubs[t])return this._npubs[t];const e=await this.txt(`npub.${t}`);return this._npubs[t]=e,this._npubs[t]}}window.DnsClient=t},2171:(t,e,n)=>{"use strict";n.d(e,{FZ:()=>i,Si:()=>c,k7:()=>o,qi:()=>r,s6:()=>a,x2:()=>s});const r="error-event",i="notice-event",o="pending-event";function s(t){console.error(t),window.dispatchEvent(new CustomEvent(r,{detail:{message:t}}))}function a(t){console.log(t),window.dispatchEvent(new CustomEvent(i,{detail:{message:t}}))}function c(t){console.log(t),window.dispatchEvent(new CustomEvent(o,{detail:{message:t}}))}},6044:(t,e,n)=>{"use strict";n.r(e);var r=n(6213);class i{static instance=new i;constructor(){if(i.instance)throw new Error("Use singleton instance")}renderHtml(t){return self.MarkdownRenderer.instance.parse(t).html}parse(t){const e={link(t){const e=t.match(/^\[\[([^\]\n]+)\]\]/);if(e){this.lexer.state.inLink=!0,(0,r.t4)(e[1],PageContext.instance.note.authorPubkey);const t={type:"link",raw:e[0],href:"#tagayasu-prefetch",title:e[1],text:e[1],tokens:this.lexer.inlineTokens(e[1])};return this.lexer.state.inLink=!1,window._backrefs.push((0,r.Mf)(e[1],PageContext.instance.note.authorPubkey)),t}return!1}};return window._backrefs=[],marked.use({tokenizer:e}),marked.use(markedKatex({throwOnError:!0})),{html:DOMPurify.sanitize(marked.parse(t)),backrefs:window._backrefs}}}window.MarkdownRenderer=i},7295:(t,e,n)=>{"use strict";function r(){setInterval(i,100),i()}function i(){!function(){let t=`relays connected: ${window.ndk?.pool?.stats()?.connected??0}/${window.ndk?.pool?.stats()?.total??window.relays.default.length}`;$(".autosave").css("float","left"),$(".autosave").html(t)}()}n.r(e),n.d(e,{startNostrMonitoring:()=>r})},3797:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Note:()=>i});var r=n(6213);class i{static async fromNostrEvent(t){const e=new i;if(e.id=t.id,e.nostrEvent=t,e.title=t.tags.find((t=>"title"==t[0]))[1],e.private=!!t.tags.find((t=>"private"==t[0])),e.content=t.content,e.originalContent=t.content,e.authorPubkey=t.pubkey,e.createdAt=t.created_at,e.onRelays=[],e.isStub=!1,e.private){const{title:t,content:n}=await(0,r.fD)(e.content);e.title=t,e.content=n}return e}static fromContent(t,e,n){const r=new i;return r.authorPubkey=t,r.title=e,r.content=n,r.originalContent=n,r.private=!1,r.onRelays=[],r.isStub=!1,r}get handle(){return(0,r.t4)(this.title,this.authorPubkey)}get dtag(){return(0,r.oF)(this.title)}toPlain(){return{id:this.id,private:this.private,title:this.private?"private":this.title,content:this.originalContent,pubkey:this.authorPubkey,createdAt:this.createdAt}}static async fromPlain(t){const e=new i;if(e.id=t.id,e.private=t.private,e.authorPubkey=t.pubkey,e.originalContent=t.content,e.content=t.content,e.title=t.title,e.createdAt=t.createdAt,e.onRelays=[],e.isStub=!1,e.private){const{title:t,content:n}=await(0,r.fD)(e.content);e.title=t,e.content=n}return e}}},5284:(t,e,n)=>{"use strict";n.r(e);var r=n(6213),i=n(3797);class o{static NOTE_IN_FOCUS_CHANGED="note-in-focus-changed";static NADDR_PARAM_NAME="n";static instance=new o;constructor(){if(o.instance)throw new Error("Use singleton instance")}_note=new i.Note;get note(){return this._note}setNote(t){this._note=t,window.dispatchEvent(new Event(o.NOTE_IN_FOCUS_CHANGED))}async setNoteByNostrEvent(t){this._note=await i.Note.fromNostrEvent(t),window.dispatchEvent(new Event(o.NOTE_IN_FOCUS_CHANGED))}_dnslinkNpub=null;dnslinkNpub(){if(null!==this._dnslinkNpub)return this._dnslinkNpub;const t=window.router.dnslinkNpub;return null!==t&&t.startsWith("npub")?this._dnslinkNpub=t:this._dnslinkNpub="",this._dnslinkNpub}dnslinkHexpubkey(){const t=this.dnslinkNpub();return t&&(0,r.e0)(t)}noteFilterFromUrl(){return(0,r.YX)(this.noteIdentifierFromUrl())}noteIdentifierFromUrl(){return this._urlParam(o.NADDR_PARAM_NAME)}noteTitleFromUrl(){return this._urlParam("title")}_urlParam(t){if(window.router.inlineParams[t])return window.router.inlineParams[t];var e=new RegExp("[?&]"+t+"=([^&#]*)").exec(window.location.href);return null==e?null:decodeURI(e[1])||0}}window.PageContext=o},7909:(t,e,n)=>{"use strict";n.r(e);var r=n(6213),i=(n(2483),n(2171)),o=n(3894);class s{static PREFERENCES_CHANGED_EVENT="preferences-changed";static D_TAG="tagayasu/preferences";static KIND=30078;static DEFAULTS={spellCheckEnabled:!1};current=s.DEFAULTS;static instance=new s;constructor(){if(s.instance)throw new Error("Use singleton instance")}async set(t){this.current=Object.assign(this.current,t),window.dispatchEvent(new Event(s.PREFERENCES_CHANGED_EVENT)),await this.saveToNostr()}async setFromNostr(){const t={authors:[window.nostrUser.hexpubkey],kinds:[s.KIND],"#d":[s.D_TAG]};o.Z.instance.fetchEvent(t,(async t=>{if(t){const e=JSON.parse(await(0,r.Gk)(t.content));this.current=Object.assign({...s.DEFAULTS},e),window.dispatchEvent(new Event(s.PREFERENCES_CHANGED_EVENT))}}))}async saveToNostr(){await(0,r.zs)().then((async()=>{const t=[["d",s.D_TAG],["published_at",Math.floor(Date.now()/1e3).toString()]],e=await(0,r.DE)(JSON.stringify(this.current));o.Z.instance.publish(s.KIND,e,t,(t=>{(0,i.s6)("Your preferences have been saved.")}))}))}}window.Preferences=s,window.addEventListener(Wallet.WALLET_CONNECTED_EVENT,(async function(t){s.instance.setFromNostr()}))},3894:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var r=n(2483);class i{static INDEXED_TAGS=["a"];static DELETE_EVENT_KIND=5;primaryIndex={};tagIndex={};static instance=new i;constructor(){if(i.instance)throw new Error("Use singletone instance")}async fetchEvent(t,e){const n=this.readByFilter(t);n.size>0?e([...n][0]):window.ndk.fetchEvent(t).then((t=>{this.write(t),e(t)}))}async fetchEvents(t,e){const n=this.readByFilter(t);n.size>0?e(n):window.ndk.fetchEvents(t).then((t=>{t.forEach((t=>this.write(t))),e(t)}))}async subscribe(t,e){const n=await window.ndk.subscribe(t,{closeOnEose:!0});return n.on("event",(async t=>{this.write(t),e(t)})),[...this.readByFilter(t)].forEach((t=>e(t))),n}async publish(t,e,n,o){const s=new r._C(window.ndk);s.kind=t,s.content=e,s.tags=n,t!==i.DELETE_EVENT_KIND&&this.write(s),await s.publish().then((t=>{o(s)}))}async del(t){return Object.keys(this.primaryIndex).forEach((e=>{this.primaryIndex[e].id===t&&(delete this.primaryIndex[e],Object.keys(this.tagIndex).forEach((t=>{this.tagIndex[t].delete(e)})))})),this.publish(i.DELETE_EVENT_KIND,"This note has been deleted",[["e",t]])}write(t){const e=this.primaryIndexKey(t.kind,t.pubkey,t.dTag);if(t.dTag){const n=this.primaryIndex[e];(!n||n.created_at<t.created_at)&&(this.primaryIndex[e]=t)}t.tags.filter((t=>i.INDEXED_TAGS.includes(t[0]))).forEach((([n,r])=>{const i=this.tagIndexKey(t.kind,t.pubkey,n,r);this.tagIndex[i]||(this.tagIndex[i]=new Set),this.tagIndex[i].has(e)||this.tagIndex[i].add(e)}))}readByFilter(t){const e=["#d",...i.INDEXED_TAGS.map((t=>`#${t}`))].filter((e=>!!t[e]));if(!t.authors||!t.kinds||1!==e.length)return new Set;const n=e[0];if(t.authors.length>1||t.kinds.length>1||t[n].length>1)return new Set;const r=t.kinds[0],o=t.authors[0],s=n.slice(1),a=t[n][0];return"#d"===n?this.readPrimaryIndex(r,o,a):this.readTagIndex(r,o,s,a)}readPrimaryIndex(t,e,n){const r=this.primaryIndex[this.primaryIndexKey(t,e,n)];return r?new Set([r]):new Set}readTagIndex(t,e,n,r){const i=this.tagIndex[this.tagIndexKey(t,e,n,r)];return i?new Set([...i].map((t=>this.primaryIndex[t]))):new Set}primaryIndexKey(t,e,n){return`${t}:${e}:${n}`}tagIndexKey(t,e,n,r){return`${t}:${e}:${n}/${r}`}}window.Relay=i},8751:()=>{class t{editorDomains=["app.tagayasu.xyz"];static EDITOR="editor";static BROWSER="browser";static DNSLINK_HELP="dnslinkHelp";static ALL_PAGES=[t.EDITOR,t.BROWSER,t.DNSLINK_HELP];_pageName=null;get pageName(){if(null!==this._pageName)return this._pageName;throw new Error("Call route() first")}_defaultPageName=null;get defaultPageName(){if(null!==this._defaultPageName)return this._defaultPageName;throw new Error("call route() first")}_inlineParams=null;get inlineParams(){if(null!==this._inlineParams)return this._inlineParams;throw new Error("call route() first")}_dnslinkNpub=null;get dnslinkNpub(){if(null!==this._dnslinkNpub)return this._dnslinkNpub;throw new Error("call route() first")}async route(){this._dnslinkNpub=await DnsClient.instance.npub(window.location.hostname),this.editorDomains.includes(window.location.hostname)?this._defaultPageName=t.EDITOR:this._dnslinkNpub?this._defaultPageName=t.BROWSER:this._defaultPageName=t.DNSLINK_HELP;const e=window.location.pathname.split("/").filter((t=>t));return t.ALL_PAGES.includes(e[0])?(this._pageName=e[0],this._parseInlineParams(this._pageName,e.slice(1)),this):(this._pageName=this._defaultPageName,this._parseInlineParams(this._pageName,e),this)}urlFor(e,n){if(!t.ALL_PAGES.includes(e))throw new Error(e+" is not a valid page");const r=n.startsWith("/")?n:"/"+n;return e==this.defaultPageName?window.location.origin+r:window.location.origin+"/"+e+r}_parseInlineParams(t,e){this._inlineParams={},this._inlineParams[PageContext.NADDR_PARAM_NAME]=e[0]}}window.Router=t},8423:(t,e,n)=>{"use strict";n.r(e);var r=n(6213),i=n(2171),o=n(7295),s=n(3797),a=n(5123);const c=n(9372);class l{notes={};noteTitleTrie=new c;static instance=new l;constructor(){if(l.instance)throw new Error("Use singleton instance")}clear(){this.notes={},this.noteTitleTrie=new c}hasSearchableEntries(){return 0!==Object.keys(this.noteTitleTrie._childPaths).length}search(t){const e=new Set;return t.forEach((t=>{const n=this.noteTitleTrie.getData(t);n&&n.forEach((t=>e.add(t)))})),Array.from(e).filter((t=>""!=this.notes[t]?.content)).sort(((t,e)=>(this.notes[e]?.createdAt??0)-(this.notes[t]?.createdAt??0)))}async addFromNostrEvent(t){this.addNote(await s.Note.fromNostrEvent(t)),this.pushStateToLocalStorage(window.nostrUser.npub)}addNote(t){this.notes[t.id]||(this.notes[t.id]=t,t.title.split(" ").forEach((e=>this.noteTitleTrie.add(e.toLowerCase(),t.id))),Object.values(this.notes).filter((e=>e.dtag===t.dtag)).sort(((t,e)=>t.createdAt-e.createdAt)).slice(0,-1).forEach((t=>delete this.notes[t.id])))}pushStateToLocalStorage(t){const e={notes:Object.values(this.notes).map((t=>t.toPlain()))};localStorage.setItem(`database-${t}`,JSON.stringify(e))}async pullStateFromLocalStorage(t){const e=JSON.parse(localStorage.getItem(`database-${t}`));if(e)return Promise.all(e.notes.map((async t=>this.addNote(await s.Note.fromPlain(t)))))}}window.Database=l,window.addEventListener(a.Wallet.WALLET_DISCONNECTED_EVENT,(function(t){l.instance.clear()})),window.addEventListener(a.Wallet.WALLET_CONNECTED_EVENT,(function(t){l.instance.pullStateFromLocalStorage(window.nostrUser.npub)}));var u=n(3894);function h(){$("#notes-list").empty(),(0,r.zs)().then((()=>{window.notesModal=new bootstrap.Modal("#myNotesModal",{}),window.notesModal.show(),$("#note-search-box").focus(),async function(){d();const t={authors:[window.nostrUser.hexpubkey],kinds:[30023]},e=await u.Z.instance.subscribe(t,(async t=>{await l.instance.addFromNostrEvent(t)})),n=Date.now();for(;Date.now()-n<5e3||e.lastEventReceivedAt&&Date.now()-e.lastEventReceivedAt<5e3;){let t=!1;e.eventsPerRelay.forEach(((e,n)=>{for(const r of e){const e=l.instance.notes[r];e&&!e.onRelays.includes(n)&&(e.onRelays.push(n),t=!0)}})),t&&d(),await(0,r.gw)(100)}}()}))}function f(t){let e=0;for(let n=0;n<t.length;n++)e=t.charCodeAt(n)+((e<<5)-e);const n=(16777215&e).toString(16).toUpperCase();return"00000".substring(0,6-n.length)+n}function d(){if(!l.instance.hasSearchableEntries())return void $("#notes-list").html("<div class='col-lg-12'>Looks like you don't have any notes yet.<br />Click \"new note\" to start your digital garden! </div>");let t="";window.tooltipList.forEach((t=>t.dispose()));const e=l.instance.search($("#note-search-box").val().toLowerCase().split(" "));let n=0;e.forEach((function(e){const r=l.instance.notes[e];if(!r)return;if(n>20)return;let i="";for(const t of r.onRelays)i+=`<div class="relay-indicator" style="background-color:#${f(t.url)}" data-bs-toggle="tooltip" data-bs-title="${t.url}">&nbsp;</div>`;const o=r.private?"<i class='fa fa-solid fa-eye-slash'></i>":"<i class='fa fa-cookie' style='width:16px'></i>";t+="<button class='list-group-item list-group-item-action note-list-button' onclick=\"editNote('"+r.id+"')\"><div>"+o+"&nbsp;"+r.title+"</div><div>"+i+"</div></button>",n++})),$("#notes-list").html(t);const r=document.querySelectorAll('[data-bs-toggle="tooltip"]');window.tooltipList=[...r].map((t=>new bootstrap.Tooltip(t)))}async function p(t){PageContext.instance.setNote(l.instance.notes[t])}function y(t="",e=""){window.notesModal&&window.notesModal.hide(),window.MDEditor.value(e),$("#note-title").val(t)}async function g(t){return(0,r.zs)().then((()=>{const e=$("#note-title").val();if("tagayasu-"==(0,r.oF)(e))return void(0,i.x2)("Title cannot be empty");const n=[["d",(0,r.oF)(e)],["title",e],["published_at",Math.floor(Date.now()/1e3).toString()]];return MarkdownRenderer.instance.parse(window.MDEditor.value()).backrefs.forEach((function(t){n.push(["a",t])})),u.Z.instance.publish(30023,window.MDEditor.value(),n,(async e=>{(0,i.s6)(t),await PageContext.instance.setNoteByNostrEvent(e)}))}))}function w(){window.MDEditor&&window.MDEditor.toTextArea(),window.MDEditor=new SimpleMDE({toolbar:$(window).width()>=750?["bold","italic","strikethrough","heading","|","code","quote","unordered-list","ordered-list","|","link","image","table","horizontal-rule","|","preview","side-by-side","fullscreen","|","guide"]:["bold","italic","heading","|","link","image","|","preview","guide"],spellChecker:Preferences.instance.current.spellCheckEnabled,renderingConfig:{codeSyntaxHighlighting:!0},tabSize:2,previewRender:MarkdownRenderer.instance.renderHtml,styleSelectedText:!1})}function b({hover:t}){$(".connect-wallet").each((function(e,n){if($(this).width("auto"),!window.nip07signer)return;const r=$(this).width();$(this).text(t?" Disconnect":window.nostrUser?window.nostrUser.npub.slice(0,8)+""+window.nostrUser.npub.slice(59,63):"Connect"),$(this).width(t?`${r}px`:"auto")}))}function m(){PageContext.instance.note.authorPubkey&&window.nostrUser&&PageContext.instance.note.authorPubkey==window.nostrUser.hexpubkey?$(".owner-only").show():$(".owner-only").hide()}function v(t){$("#toast-content").html(t),window.toast=bootstrap.Toast.getOrCreateInstance(document.getElementById("toast")),toast.show()}function E(t){return new Promise(((e,n)=>{const r=new bootstrap.Modal("#confirmActionModal",{});$("#confirmActionTitle").text(t),r.show();const i=document.getElementById("confirmActionYes");i.addEventListener("click",(function t(){i.removeEventListener("click",t),r.hide(),e("user confirmed the action")})),r._element.addEventListener("hidden.bs.modal",(function t(){r._element.removeEventListener("hidden.bs.modal",t),n("user cancelled the action")}))}))}$(window).on("DOMContentLoaded",(async function(){w(),(0,o.startNostrMonitoring)(),window.router=await(new Router).route(),$("#page-"+window.router.pageName).show(),await window.trySeamlessConnection().catch((()=>{})),"editor"==window.router.pageName?window.loadNote():"browser"==window.router.pageName&&window.browseNoteFromUrl(),setInterval((()=>{localStorage.setItem("autosave",JSON.stringify({title:$("#note-title").val(),content:window.MDEditor.value()}))}),1e3)})),window.connectWalletApp=function(){(0,r.Ti)().then((()=>{window.nip07signer&&window.router.pageName===Router.EDITOR&&h()}))},window.showMyNotes=h,window.showPublishModal=function(){window.publishModal=new bootstrap.Modal("#publish-modal",{}),window.publishModal.show()},window.loadNote=function(){if(!PageContext.instance.noteIdentifierFromUrl())return localStorage.getItem("autosave")?function(){const t=localStorage.getItem("autosave");if(!t)return;const e=JSON.parse(t);y(e.title,e.content)}():window.nip07signer?h():y("","# Welcome to Tagayasu\n\nThis is the note editor, where you can create and edit your content.\n\nTo publish a note, make sure to enter a title below, then click `Publish`!");(0,r.zs)().then((async()=>{const t=PageContext.instance.noteFilterFromUrl();u.Z.instance.fetchEvent(t,(async e=>{if(e)e.pubkey==window.nostrUser.hexpubkey&&(await l.instance.addFromNostrEvent(e),p(e.id));else if(t["#d"]&&t["#d"][0].startsWith("tagayasu-")){const t=PageContext.instance.noteTitleFromUrl();window.MDEditor.value(`# ${t}`),$("#note-title").val(t)}}))}))},window.searchNotes=d,window.tooltipList=[],window.editNote=p,window.newNote=y,window.deleteNote=function(){PageContext.instance.note.id?(window.publishModal&&window.publishModal.hide(),E("Are you sure you want to delete this note?").then((()=>{(0,i.Si)("Deleting...");const t=PageContext.instance.note.id;window.MDEditor.value(""),g("Your note has been deleted").then((()=>{$("#note-title").val(""),u.Z.instance.del(t)}))}))):(0,i.s6)("Nothing to do! Note was never published.")},window.saveNote=function(){window.publishModal&&window.publishModal.hide(),PageContext.instance.note.private?E("This note is private. Are you sure you want to publish it?").then((()=>{(0,i.Si)("Publishing..."),g("Your draft has been converted to a public note!")})):((0,i.Si)("Publishing..."),g("Your note has been published!"))},window.savePrivateNote=function(){(0,i.Si)("Encrypting and saving..."),window.publishModal&&window.publishModal.hide(),(0,r.zs)().then((async()=>{const t=$("#note-title").val();if("tagayasu-"==(0,r.oF)(t))return void(0,i.x2)("Title cannot be empty");const e=await(0,r.r0)(t,window.MDEditor.value()),n=[["d",(0,r.oF)(t)],["title","DRAFT"],["private","true"],["published_at",Math.floor(Date.now()/1e3).toString()]];u.Z.instance.publish(30023,e,n,(async t=>{(0,i.s6)("Your note has been saved privately."),await PageContext.instance.setNoteByNostrEvent(t)}))}))},window.viewPublishedNote=async function(){window.location.href=window.router.urlFor(Router.BROWSER,PageContext.instance.note.handle)},window.addEventListener(Wallet.WALLET_CONNECTED_EVENT,(function(t){$("#help-npub").html(window.nostrUser.npub)})),window.addEventListener(Wallet.WALLET_CONNECTION_CHANGED,(function(t){b({hover:!1}),m()})),window.addEventListener(PageContext.NOTE_IN_FOCUS_CHANGED,(async function(t){m();const e=PageContext.instance.note,n=MarkdownRenderer.instance.renderHtml(e.content),i=e.private?`<div style="font-weight:bold; text-align: center; color: #aa0000"> This note is private and cannot be viewed by others.</div>${n}`:n;$("#note-content").html(i),bindPrefetchLinks(),async function(){if(window.router.pageName!==Router.BROWSER)return;await(0,r.lD)(),$("#backref-content").empty();const t={authors:[PageContext.instance.note.nostrEvent.pubkey],kinds:[30023],"#a":[(0,r.Mf)(PageContext.instance.note.nostrEvent.tags.find((t=>"title"==t[0]))[1],PageContext.instance.note.nostrEvent.pubkey)]};u.Z.instance.fetchEvents(t,(t=>{t.forEach((function(t){window.router.urlFor(Router.BROWSER,t.encode());const e=t.tags.find((t=>"title"==t[0]))[1];$("#backref-content").append(`<li><a title='${e}' href='#tagayasu-prefetch'>${e}</a></li>`)})),bindPrefetchLinks()}))}(),window.MDEditor.value(e.content),window.notesModal&&window.notesModal.hide(),$("#note-title").val(e.title)})),$("#myNotesModal").on("shown.bs.modal",(function(){$("#note-search-box").focus()})),$(".connect-wallet").mouseenter((function(){b({hover:!0})})),$(".connect-wallet").mouseleave((function(){b({hover:!1})})),window.addEventListener(i.qi,(function(t){$("#toast").removeClass("text-bg-success"),$("#toast").removeClass("text-bg-secondary"),$("#toast").addClass("text-bg-danger"),v(t.detail.message)})),window.addEventListener(i.FZ,(function(t){$("#toast").removeClass("text-bg-danger"),$("#toast").removeClass("text-bg-secondary"),$("#toast").addClass("text-bg-success"),v(t.detail.message)})),window.addEventListener(i.k7,(function(t){$("#toast").removeClass("text-bg-danger"),$("#toast").removeClass("text-bg-success"),$("#toast").addClass("text-bg-secondary"),v(t.detail.message)})),$("#toast").on("click",(function(){window.toast&&window.toast.hide()})),window.addEventListener(Preferences.PREFERENCES_CHANGED_EVENT,(function(t){w()})),window.confirmAction=E},5123:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Wallet:()=>r});class r{static WALLET_CONNECTED_EVENT="wallet-connected-event";static WALLET_DISCONNECTED_EVENT="wallet-disconnected-event";static WALLET_CONNECTION_CHANGED="wallet-connection-changed";static instance=new r;constructor(){if(r.instance)throw new Error("Use singleton instance")}}window.Wallet=r,window.addEventListener(r.WALLET_CONNECTED_EVENT,(function(t){window.dispatchEvent(new Event(r.WALLET_CONNECTION_CHANGED))})),window.addEventListener(r.WALLET_DISCONNECTED_EVENT,(function(t){window.dispatchEvent(new Event(r.WALLET_CONNECTION_CHANGED))}))},2480:()=>{},282:(t,e,n)=>{"use strict";n.d(e,{a0:()=>y});var r=n(4207);function i(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function o(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}const s={number:i,bool:function(t){if("boolean"!=typeof t)throw new Error(`Expected boolean, not ${t}`)},bytes:o,hash:function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("hash must be wrapped by utils.wrapConstructor");i(t.outputLen),i(t.blockLen)},exists:function(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")},output:function(t,e){o(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},a=(t,e)=>255&t[e++]|(255&t[e++])<<8;class c{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=(0,r.O0)(t),(0,r.ql)(t,32);const e=a(t,0),n=a(t,2),i=a(t,4),o=a(t,6),s=a(t,8),c=a(t,10),l=a(t,12),u=a(t,14);this.r[0]=8191&e,this.r[1]=8191&(e>>>13|n<<3),this.r[2]=7939&(n>>>10|i<<6),this.r[3]=8191&(i>>>7|o<<9),this.r[4]=255&(o>>>4|s<<12),this.r[5]=s>>>1&8190,this.r[6]=8191&(s>>>14|c<<2),this.r[7]=8065&(c>>>11|l<<5),this.r[8]=8191&(l>>>8|u<<8),this.r[9]=u>>>5&127;for(let e=0;e<8;e++)this.pad[e]=a(t,16+2*e)}process(t,e,n=!1){const r=n?0:2048,{h:i,r:o}=this,s=o[0],c=o[1],l=o[2],u=o[3],h=o[4],f=o[5],d=o[6],p=o[7],y=o[8],g=o[9],w=a(t,e+0),b=a(t,e+2),m=a(t,e+4),v=a(t,e+6),E=a(t,e+8),k=a(t,e+10),x=a(t,e+12),_=a(t,e+14);let A=i[0]+(8191&w),S=i[1]+(8191&(w>>>13|b<<3)),B=i[2]+(8191&(b>>>10|m<<6)),C=i[3]+(8191&(m>>>7|v<<9)),I=i[4]+(8191&(v>>>4|E<<12)),R=i[5]+(E>>>1&8191),N=i[6]+(8191&(E>>>14|k<<2)),U=i[7]+(8191&(k>>>11|x<<5)),T=i[8]+(8191&(x>>>8|_<<8)),P=i[9]+(_>>>5|r),O=0,L=O+A*s+S*(5*g)+B*(5*y)+C*(5*p)+I*(5*d);O=L>>>13,L&=8191,L+=R*(5*f)+N*(5*h)+U*(5*u)+T*(5*l)+P*(5*c),O+=L>>>13,L&=8191;let F=O+A*c+S*s+B*(5*g)+C*(5*y)+I*(5*p);O=F>>>13,F&=8191,F+=R*(5*d)+N*(5*f)+U*(5*h)+T*(5*u)+P*(5*l),O+=F>>>13,F&=8191;let $=O+A*l+S*c+B*s+C*(5*g)+I*(5*y);O=$>>>13,$&=8191,$+=R*(5*p)+N*(5*d)+U*(5*f)+T*(5*h)+P*(5*u),O+=$>>>13,$&=8191;let D=O+A*u+S*l+B*c+C*s+I*(5*g);O=D>>>13,D&=8191,D+=R*(5*y)+N*(5*p)+U*(5*d)+T*(5*f)+P*(5*h),O+=D>>>13,D&=8191;let z=O+A*h+S*u+B*l+C*c+I*s;O=z>>>13,z&=8191,z+=R*(5*g)+N*(5*y)+U*(5*p)+T*(5*d)+P*(5*f),O+=z>>>13,z&=8191;let M=O+A*f+S*h+B*u+C*l+I*c;O=M>>>13,M&=8191,M+=R*s+N*(5*g)+U*(5*y)+T*(5*p)+P*(5*d),O+=M>>>13,M&=8191;let q=O+A*d+S*f+B*h+C*u+I*l;O=q>>>13,q&=8191,q+=R*c+N*s+U*(5*g)+T*(5*y)+P*(5*p),O+=q>>>13,q&=8191;let H=O+A*p+S*d+B*f+C*h+I*u;O=H>>>13,H&=8191,H+=R*l+N*c+U*s+T*(5*g)+P*(5*y),O+=H>>>13,H&=8191;let K=O+A*y+S*p+B*d+C*f+I*h;O=K>>>13,K&=8191,K+=R*u+N*l+U*c+T*s+P*(5*g),O+=K>>>13,K&=8191;let j=O+A*g+S*y+B*p+C*d+I*f;O=j>>>13,j&=8191,j+=R*h+N*u+U*l+T*c+P*s,O+=j>>>13,j&=8191,O=(O<<2)+O|0,O=O+L|0,L=8191&O,O>>>=13,F+=O,i[0]=L,i[1]=F,i[2]=$,i[3]=D,i[4]=z,i[5]=M,i[6]=q,i[7]=H,i[8]=K,i[9]=j}finalize(){const{h:t,pad:e}=this,n=new Uint16Array(10);let r=t[1]>>>13;t[1]&=8191;for(let e=2;e<10;e++)t[e]+=r,r=t[e]>>>13,t[e]&=8191;t[0]+=5*r,r=t[0]>>>13,t[0]&=8191,t[1]+=r,r=t[1]>>>13,t[1]&=8191,t[2]+=r,n[0]=t[0]+5,r=n[0]>>>13,n[0]&=8191;for(let e=1;e<10;e++)n[e]=t[e]+r,r=n[e]>>>13,n[e]&=8191;n[9]-=8192;let i=(1^r)-1;for(let t=0;t<10;t++)n[t]&=i;i=~i;for(let e=0;e<10;e++)t[e]=t[e]&i|n[e];t[0]=65535&(t[0]|t[1]<<13),t[1]=65535&(t[1]>>>3|t[2]<<10),t[2]=65535&(t[2]>>>6|t[3]<<7),t[3]=65535&(t[3]>>>9|t[4]<<4),t[4]=65535&(t[4]>>>12|t[5]<<1|t[6]<<14),t[5]=65535&(t[6]>>>2|t[7]<<11),t[6]=65535&(t[7]>>>5|t[8]<<8),t[7]=65535&(t[8]>>>8|t[9]<<5);let o=t[0]+e[0];t[0]=65535&o;for(let n=1;n<8;n++)o=(t[n]+e[n]|0)+(o>>>16)|0,t[n]=65535&o}update(t){s.exists(this);const{buffer:e,blockLen:n}=this,i=(t=(0,r.O0)(t)).length;for(let r=0;r<i;){const o=Math.min(n-this.pos,i-r);if(o!==n)e.set(t.subarray(r,r+o),this.pos),this.pos+=o,r+=o,this.pos===n&&(this.process(e,0,!1),this.pos=0);else for(;n<=i-r;r+=n)this.process(t,r)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(t){s.exists(this),s.output(t,this),this.finished=!0;const{buffer:e,h:n}=this;let{pos:r}=this;if(r){for(e[r++]=1;r<16;r++)e[r]=0;this.process(e,0,!0)}this.finalize();let i=0;for(let e=0;e<8;e++)t[i++]=n[e]>>>0,t[i++]=n[e]>>>8;return t}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}}!function(t){const e=(e,n)=>t(n).update((0,r.O0)(e)).digest(),n=t(new Uint8Array(32));e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e)}((t=>new c(t)));const l=(0,r.iY)("expand 16-byte k"),u=(0,r.iY)("expand 32-byte k"),h=(0,r.Jq)(l),f=(0,r.Jq)(u),d=t=>!(t.byteOffset%4),p=(t,e)=>t<<e|t>>>32-e;const y=(t=>{const{core:e,rounds:n,counterRight:i,counterLen:o,allow128bitKeys:a,extendNonceFn:c,blockLen:l}=(0,r.U5)({rounds:20,counterRight:!1,counterLen:8,allow128bitKeys:!0,blockLen:64},t);s.number(o),s.number(n),s.number(l),s.bool(i),s.bool(a);const u=l/4;if(l%4!=0)throw new Error("Salsa/ChaCha: blockLen must be aligned to 4 bytes");return(t,p,y,g,w=0)=>{if(s.bytes(t),s.bytes(p),s.bytes(y),g||(g=new Uint8Array(y.length)),s.bytes(g),s.number(w),w<0||w>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");if(g.length<y.length)throw new Error(`Salsa/ChaCha: output (${g.length}) is shorter than data (${y.length})`);const b=[];let m,v;if(32===t.length)m=t,v=f;else{if(16!==t.length||!a)throw new Error(`Salsa/ChaCha: invalid 32-byte key, got length=${t.length}`);m=new Uint8Array(32),m.set(t),m.set(t,16),v=h,b.push(m)}if(c){if(p.length<=16)throw new Error("Salsa/ChaCha: extended nonce must be bigger than 16 bytes");m=c(v,m,p.subarray(0,16),new Uint8Array(32)),b.push(m),p=p.subarray(16)}const E=16-o;if(p.length!==E)throw new Error(`Salsa/ChaCha: nonce must be ${E} or 16 bytes`);if(12!==E){const t=new Uint8Array(12);t.set(p,i?0:12-p.length),b.push(p=t)}const k=new Uint8Array(l),x=(0,r.Jq)(k),_=(0,r.Jq)(m),A=(0,r.Jq)(p),S=d(y)&&(0,r.Jq)(y),B=d(g)&&(0,r.Jq)(g);b.push(x);const C=y.length;for(let t=0,r=w;t<C;r++){if(e(v,_,A,x,r,n),r>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");const i=Math.min(l,C-t);if(i===l&&B&&S){const e=t/4;if(t%4!=0)throw new Error("Salsa/ChaCha: invalid block position");for(let t=0;t<u;t++)B[e+t]=S[e+t]^x[t];t+=l}else{for(let e=0;e<i;e++)g[t+e]=y[t+e]^k[e];t+=i}}for(let t=0;t<b.length;t++)b[t].fill(0);return g}})({core:function(t,e,n,r,i,o=20){let s=t[0],a=t[1],c=t[2],l=t[3],u=e[0],h=e[1],f=e[2],d=e[3],y=e[4],g=e[5],w=e[6],b=e[7],m=i,v=n[0],E=n[1],k=n[2],x=s,_=a,A=c,S=l,B=u,C=h,I=f,R=d,N=y,U=g,T=w,P=b,O=m,L=v,F=E,$=k;for(let t=0;t<o;t+=2)x=x+B|0,O=p(O^x,16),N=N+O|0,B=p(B^N,12),x=x+B|0,O=p(O^x,8),N=N+O|0,B=p(B^N,7),_=_+C|0,L=p(L^_,16),U=U+L|0,C=p(C^U,12),_=_+C|0,L=p(L^_,8),U=U+L|0,C=p(C^U,7),A=A+I|0,F=p(F^A,16),T=T+F|0,I=p(I^T,12),A=A+I|0,F=p(F^A,8),T=T+F|0,I=p(I^T,7),S=S+R|0,$=p($^S,16),P=P+$|0,R=p(R^P,12),S=S+R|0,$=p($^S,8),P=P+$|0,R=p(R^P,7),x=x+C|0,$=p($^x,16),T=T+$|0,C=p(C^T,12),x=x+C|0,$=p($^x,8),T=T+$|0,C=p(C^T,7),_=_+I|0,O=p(O^_,16),P=P+O|0,I=p(I^P,12),_=_+I|0,O=p(O^_,8),P=P+O|0,I=p(I^P,7),A=A+R|0,L=p(L^A,16),N=N+L|0,R=p(R^N,12),A=A+R|0,L=p(L^A,8),N=N+L|0,R=p(R^N,7),S=S+B|0,F=p(F^S,16),U=U+F|0,B=p(B^U,12),S=S+B|0,F=p(F^S,8),U=U+F|0,B=p(B^U,7);let D=0;r[D++]=s+x|0,r[D++]=a+_|0,r[D++]=c+A|0,r[D++]=l+S|0,r[D++]=u+B|0,r[D++]=h+C|0,r[D++]=f+I|0,r[D++]=d+R|0,r[D++]=y+N|0,r[D++]=g+U|0,r[D++]=w+T|0,r[D++]=b+P|0,r[D++]=m+O|0,r[D++]=v+L|0,r[D++]=E+F|0,r[D++]=k+$|0},counterRight:!1,counterLen:4,allow128bitKeys:!1})},4207:(t,e,n)=>{"use strict";n.d(e,{Jq:()=>i,O0:()=>s,U5:()=>c,Wd:()=>u,iY:()=>o,ql:()=>l});const r=t=>t instanceof Uint8Array,i=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function o(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function s(t){if("string"==typeof t&&(t=o(t)),!r(t))throw new Error("expected Uint8Array, got "+typeof t);return t}const a=t=>"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object;function c(t,e){if(void 0!==e&&("object"!=typeof e||!a(e)))throw new Error("options must be object or undefined");return Object.assign(t,e)}function l(t,e){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");if("number"==typeof e&&t.length!==e)throw new Error(`Uint8Array length ${e} expected`)}function u(t,e){if(t.length!==e.length)throw new Error("equalBytes: Different size of Uint8Arrays");let n=!0;for(let r=0;r<t.length;r++)n&&(n=t[r]===e[r]);return n}},3527:(t,e,n)=>{"use strict";function r(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function i(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}n.d(e,{ZP:()=>o,aI:()=>i});const o={number:r,bool:function(t){if("boolean"!=typeof t)throw new Error(`Expected boolean, not ${t}`)},bytes:i,hash:function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");r(t.outputLen),r(t.blockLen)},exists:function(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")},output:function(t,e){i(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}}},3313:(t,e,n)=>{"use strict";n.d(e,{N:()=>o});var r=n(3527),i=n(3486);class o extends i.kb{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,i.GL)(this.buffer)}update(t){r.ZP.exists(this);const{view:e,buffer:n,blockLen:o}=this,s=(t=(0,i.O0)(t)).length;for(let r=0;r<s;){const a=Math.min(o-this.pos,s-r);if(a!==o)n.set(t.subarray(r,r+a),this.pos),this.pos+=a,r+=a,this.pos===o&&(this.process(e,0),this.pos=0);else{const e=(0,i.GL)(t);for(;o<=s-r;r+=o)this.process(e,r)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){r.ZP.exists(this),r.ZP.output(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:o,isLE:s}=this;let{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(n,0),a=0);for(let t=a;t<o;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),c=r?4:0,l=r?0:4;t.setUint32(e+c,s,r),t.setUint32(e+l,a,r)}(n,o-8,BigInt(8*this.length),s),this.process(n,0);const c=(0,i.GL)(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<u;t++)c.setUint32(4*t,h[t],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return t.length=r,t.pos=s,t.finished=i,t.destroyed=o,r%e&&t.buffer.set(n),t}}},7518:(t,e,n)=>{"use strict";n.d(e,{Di:()=>u,Kl:()=>s,jn:()=>l});var r=n(3527),i=n(3486),o=n(9905);function s(t,e,n){return r.ZP.hash(t),void 0===n&&(n=new Uint8Array(t.outputLen)),(0,o.b)(t,(0,i.O0)(n),(0,i.O0)(e))}const a=new Uint8Array([0]),c=new Uint8Array;function l(t,e,n,i=32){if(r.ZP.hash(t),r.ZP.number(i),i>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(i/t.outputLen);void 0===n&&(n=c);const l=new Uint8Array(s*t.outputLen),u=o.b.create(t,e),h=u._cloneInto(),f=new Uint8Array(u.outputLen);for(let e=0;e<s;e++)a[0]=e+1,h.update(0===e?c:f).update(n).update(a).digestInto(f),l.set(f,t.outputLen*e),u._cloneInto(h);return u.destroy(),h.destroy(),f.fill(0),a.fill(0),l.slice(0,i)}const u=(t,e,n,r,i)=>l(t,s(t,e,n),r,i)},9905:(t,e,n)=>{"use strict";n.d(e,{b:()=>s});var r=n(3527),i=n(3486);class o extends i.kb{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,r.ZP.hash(t);const n=(0,i.O0)(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(n.length>o?t.create().update(n).digest():n);for(let t=0;t<s.length;t++)s[t]^=54;this.iHash.update(s),this.oHash=t.create();for(let t=0;t<s.length;t++)s[t]^=106;this.oHash.update(s),s.fill(0)}update(t){return r.ZP.exists(this),this.iHash.update(t),this}digestInto(t){r.ZP.exists(this),r.ZP.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return t.finished=r,t.destroyed=i,t.blockLen=o,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const s=(t,e,n)=>new o(t,e).update(n).digest();s.create=(t,e)=>new o(t,e)},7748:(t,e,n)=>{"use strict";n.d(e,{J:()=>h});var r=n(3313),i=n(3486);const o=(t,e,n)=>t&e^t&n^e&n,s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint32Array(64);class l extends r.N{constructor(){super(64,32,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4],this.F=0|a[5],this.G=0|a[6],this.H=0|a[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:o,G:s,H:a}=this;return[t,e,n,r,i,o,s,a]}set(t,e,n,r,i,o,s,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)c[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=c[t-15],n=c[t-2],r=(0,i.np)(e,7)^(0,i.np)(e,18)^e>>>3,o=(0,i.np)(n,17)^(0,i.np)(n,19)^n>>>10;c[t]=o+c[t-7]+r+c[t-16]|0}let{A:n,B:r,C:a,D:l,E:u,F:h,G:f,H:d}=this;for(let t=0;t<64;t++){const e=d+((0,i.np)(u,6)^(0,i.np)(u,11)^(0,i.np)(u,25))+((p=u)&h^~p&f)+s[t]+c[t]|0,y=((0,i.np)(n,2)^(0,i.np)(n,13)^(0,i.np)(n,22))+o(n,r,a)|0;d=f,f=h,h=u,u=l+e|0,l=a,a=r,r=n,n=e+y|0}var p;n=n+this.A|0,r=r+this.B|0,a=a+this.C|0,l=l+this.D|0,u=u+this.E|0,h=h+this.F|0,f=f+this.G|0,d=d+this.H|0,this.set(n,r,a,l,u,h,f,d)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class u extends l{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const h=(0,i.hE)((()=>new l));(0,i.hE)((()=>new u))},3486:(t,e,n)=>{"use strict";n.d(e,{kb:()=>d,ci:()=>c,U5:()=>y,eV:()=>f,GL:()=>o,nr:()=>l,O6:()=>w,np:()=>s,O0:()=>h,iY:()=>u,hE:()=>g});const r="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,i=t=>t instanceof Uint8Array,o=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),s=(t,e)=>t<<32-e|t>>>e;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");const a=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function c(t){if(!i(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=a[t[n]];return e}function l(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let e=0;e<n.length;e++){const r=2*e,i=t.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[e]=o}return n}function u(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function h(t){if("string"==typeof t&&(t=u(t)),!i(t))throw new Error("expected Uint8Array, got "+typeof t);return t}function f(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let n=0;return t.forEach((t=>{if(!i(t))throw new Error("Uint8Array expected");e.set(t,n),n+=t.length})),e}class d{clone(){return this._cloneInto()}}const p=t=>"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object;function y(t,e){if(void 0!==e&&("object"!=typeof e||!p(e)))throw new Error("Options should be object or undefined");return Object.assign(t,e)}function g(t){const e=e=>t().update(h(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function w(t=32){if(r&&"function"==typeof r.getRandomValues)return r.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}},2483:(t,e,n)=>{"use strict";n.d(e,{_C:()=>Ms,fJ:()=>fa,Gg:()=>aa,ZP:()=>Ea});var r={};n.r(r),n.d(r,{dQ:()=>E,ci:()=>f,bytesToNumberBE:()=>y,ty:()=>g,eV:()=>v,n$:()=>_,ql:()=>m,hexToBytes:()=>p,tL:()=>w,S5:()=>b,FF:()=>S});var i={};n.r(i),n.d(i,{dQ:()=>Le,ci:()=>Be,bytesToNumberBE:()=>Re,ty:()=>Ne,eV:()=>Oe,n$:()=>De,ql:()=>Pe,hexToBytes:()=>Ie,tL:()=>Ue,S5:()=>Te,FF:()=>Me});var o={};n.r(o),n.d(o,{gk:()=>Di,dQ:()=>Qi,ci:()=>Mi,bytesToNumberBE:()=>Vi,ty:()=>Wi,eV:()=>Ji,n$:()=>eo,ql:()=>Yi,hexToBytes:()=>ji,_t:()=>$i,tL:()=>Zi,S5:()=>Gi,FF:()=>ro});var s=n(7748),a=n(3486);BigInt(0);const c=BigInt(1),l=BigInt(2),u=t=>t instanceof Uint8Array,h=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function f(t){if(!u(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=h[t[n]];return e}function d(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}function p(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let e=0;e<n.length;e++){const r=2*e,i=t.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[e]=o}return n}function y(t){return d(f(t))}function g(t){if(!u(t))throw new Error("Uint8Array expected");return d(f(Uint8Array.from(t).reverse()))}function w(t,e){return p(t.toString(16).padStart(2*e,"0"))}function b(t,e){return w(t,e).reverse()}function m(t,e,n){let r;if("string"==typeof e)try{r=p(e)}catch(n){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${n}`)}else{if(!u(e))throw new Error(`${t} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function v(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let n=0;return t.forEach((t=>{if(!u(t))throw new Error("Uint8Array expected");e.set(t,n),n+=t.length})),e}const E=t=>(l<<BigInt(t-1))-c,k=t=>new Uint8Array(t),x=t=>Uint8Array.from(t);function _(t,e,n){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=k(t),i=k(t),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},a=(...t)=>n(i,r,...t),c=(t=k())=>{i=a(x([0]),t),r=a(),0!==t.length&&(i=a(x([1]),t),r=a())},l=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const n=[];for(;t<e;){r=a();const e=r.slice();n.push(e),t+=r.length}return v(...n)};return(t,e)=>{let n;for(s(),c(t);!(n=e(l()));)c();return s(),n}}const A={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function S(t,e,n={}){const r=(e,n,r)=>{const i=A[n];if("function"!=typeof i)throw new Error(`Invalid validator "${n}", expected function`);const o=t[e];if(!(r&&void 0===o||i(o,t)))throw new Error(`Invalid param ${String(e)}=${o} (${typeof o}), expected ${n}`)};for(const[t,n]of Object.entries(e))r(t,n,!1);for(const[t,e]of Object.entries(n))r(t,e,!0);return t}const B=BigInt(0),C=BigInt(1),I=BigInt(2),R=BigInt(3),N=BigInt(4),U=BigInt(5),T=BigInt(8);function P(t,e){const n=t%e;return n>=B?n:e+n}function O(t,e,n){if(n<=B||e<B)throw new Error("Expected power/modulo > 0");if(n===C)return B;let r=C;for(;e>B;)e&C&&(r=r*t%n),t=t*t%n,e>>=C;return r}function L(t,e,n){let r=t;for(;e-- >B;)r*=r,r%=n;return r}function F(t,e){if(t===B||e<=B)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=P(t,e),r=e,i=B,o=C,s=C,a=B;for(;n!==B;){const t=r/n,e=r%n,c=i-s*t,l=o-a*t;r=n,n=e,i=s,o=a,s=c,a=l}if(r!==C)throw new Error("invert: does not exist");return P(i,e)}BigInt(9),BigInt(16);const $=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function D(t,e){const n=void 0!==e?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}const z=BigInt(0),M=BigInt(1);function q(t){return S(t.Fp,$.reduce(((t,e)=>(t[e]="function",t)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),S(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...D(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const{bytesToNumberBE:H,hexToBytes:K}=r,j={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(t){const{Err:e}=j;if(t.length<2||2!==t[0])throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(128&r[0])throw new e("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:H(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=j,n="string"==typeof t?K(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:o}=j._parseInt(n.subarray(2)),{d:s,l:a}=j._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(t){const e=t=>8&Number.parseInt(t[0],16)?"00"+t:t,n=t=>{const e=t.toString(16);return 1&e.length?`0${e}`:e},r=e(n(t.s)),i=e(n(t.r)),o=r.length/2,s=i.length/2,a=n(o),c=n(s);return`30${n(s+o+4)}02${c}${i}02${a}${r}`}},V=BigInt(0),W=BigInt(1),Z=(BigInt(2),BigInt(3));function G(t){const e=function(t){const e=q(t);return S(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:n,n:r}=e,i=n.BYTES+1,o=2*n.BYTES+1;function s(t){return P(t,r)}function a(t){return F(t,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:h}=function(t){const e=function(t){const e=q(t);S(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:n}=e,r=e.toBytes||((t,e,r)=>{const i=e.toAffine();return v(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),i=e.fromBytes||(t=>{const e=t.subarray(1);return{x:n.fromBytes(e.subarray(0,n.BYTES)),y:n.fromBytes(e.subarray(n.BYTES,2*n.BYTES))}});function o(t){const{a:r,b:i}=e,o=n.sqr(t),s=n.mul(o,t);return n.add(n.add(s,n.mul(t,r)),i)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(t){return"bigint"==typeof t&&V<t&&t<e.n}function a(t){if(!s(t))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(t){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:o}=e;if(n&&"bigint"!=typeof t){if(t instanceof Uint8Array&&(t=f(t)),"string"!=typeof t||!n.includes(t.length))throw new Error("Invalid key");t=t.padStart(2*r,"0")}let s;try{s="bigint"==typeof t?t:y(m("private key",t,r))}catch(e){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof t}`)}return i&&(s=P(s,o)),a(s),s}const l=new Map;function u(t){if(!(t instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(t,e,r){if(this.px=t,this.py=e,this.pz=r,null==t||!n.isValid(t))throw new Error("x required");if(null==e||!n.isValid(e))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(t){const{x:e,y:r}=t||{};if(!t||!n.isValid(e)||!n.isValid(r))throw new Error("invalid affine point");if(t instanceof h)throw new Error("projective point not allowed");const i=t=>n.eql(t,n.ZERO);return i(e)&&i(r)?h.ZERO:new h(e,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=n.invertBatch(t.map((t=>t.pz)));return t.map(((t,n)=>t.toAffine(e[n]))).map(h.fromAffine)}static fromHex(t){const e=h.fromAffine(i(m("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return h.BASE.multiply(c(t))}_setWindowSize(t){this._WINDOW_SIZE=t,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:t,y:r}=this.toAffine();if(!n.isValid(t)||!n.isValid(r))throw new Error("bad point: x or y not FE");const i=n.sqr(r),s=o(t);if(!n.eql(i,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:t}=this.toAffine();if(n.isOdd)return!n.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){u(t);const{px:e,py:r,pz:i}=this,{px:o,py:s,pz:a}=t,c=n.eql(n.mul(e,a),n.mul(o,i)),l=n.eql(n.mul(r,a),n.mul(s,i));return c&&l}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:t,b:r}=e,i=n.mul(r,Z),{px:o,py:s,pz:a}=this;let c=n.ZERO,l=n.ZERO,u=n.ZERO,f=n.mul(o,o),d=n.mul(s,s),p=n.mul(a,a),y=n.mul(o,s);return y=n.add(y,y),u=n.mul(o,a),u=n.add(u,u),c=n.mul(t,u),l=n.mul(i,p),l=n.add(c,l),c=n.sub(d,l),l=n.add(d,l),l=n.mul(c,l),c=n.mul(y,c),u=n.mul(i,u),p=n.mul(t,p),y=n.sub(f,p),y=n.mul(t,y),y=n.add(y,u),u=n.add(f,f),f=n.add(u,f),f=n.add(f,p),f=n.mul(f,y),l=n.add(l,f),p=n.mul(s,a),p=n.add(p,p),f=n.mul(p,y),c=n.sub(c,f),u=n.mul(p,d),u=n.add(u,u),u=n.add(u,u),new h(c,l,u)}add(t){u(t);const{px:r,py:i,pz:o}=this,{px:s,py:a,pz:c}=t;let l=n.ZERO,f=n.ZERO,d=n.ZERO;const p=e.a,y=n.mul(e.b,Z);let g=n.mul(r,s),w=n.mul(i,a),b=n.mul(o,c),m=n.add(r,i),v=n.add(s,a);m=n.mul(m,v),v=n.add(g,w),m=n.sub(m,v),v=n.add(r,o);let E=n.add(s,c);return v=n.mul(v,E),E=n.add(g,b),v=n.sub(v,E),E=n.add(i,o),l=n.add(a,c),E=n.mul(E,l),l=n.add(w,b),E=n.sub(E,l),d=n.mul(p,v),l=n.mul(y,b),d=n.add(l,d),l=n.sub(w,d),d=n.add(w,d),f=n.mul(l,d),w=n.add(g,g),w=n.add(w,g),b=n.mul(p,b),v=n.mul(y,v),w=n.add(w,b),b=n.sub(g,b),b=n.mul(p,b),v=n.add(v,b),g=n.mul(w,v),f=n.add(f,g),g=n.mul(E,v),l=n.mul(m,l),l=n.sub(l,g),g=n.mul(m,w),d=n.mul(E,d),d=n.add(d,g),new h(l,f,d)}subtract(t){return this.add(t.negate())}is0(){return this.equals(h.ZERO)}wNAF(t){return p.wNAFCached(this,l,t,(t=>{const e=n.invertBatch(t.map((t=>t.pz)));return t.map(((t,n)=>t.toAffine(e[n]))).map(h.fromAffine)}))}multiplyUnsafe(t){const r=h.ZERO;if(t===V)return r;if(a(t),t===W)return this;const{endo:i}=e;if(!i)return p.unsafeLadder(this,t);let{k1neg:o,k1:s,k2neg:c,k2:l}=i.splitScalar(t),u=r,f=r,d=this;for(;s>V||l>V;)s&W&&(u=u.add(d)),l&W&&(f=f.add(d)),d=d.double(),s>>=W,l>>=W;return o&&(u=u.negate()),c&&(f=f.negate()),f=new h(n.mul(f.px,i.beta),f.py,f.pz),u.add(f)}multiply(t){a(t);let r,i,o=t;const{endo:s}=e;if(s){const{k1neg:t,k1:e,k2neg:a,k2:c}=s.splitScalar(o);let{p:l,f:u}=this.wNAF(e),{p:f,f:d}=this.wNAF(c);l=p.constTimeNegate(t,l),f=p.constTimeNegate(a,f),f=new h(n.mul(f.px,s.beta),f.py,f.pz),r=l.add(f),i=u.add(d)}else{const{p:t,f:e}=this.wNAF(o);r=t,i=e}return h.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(t,e,n){const r=h.BASE,i=(t,e)=>e!==V&&e!==W&&t.equals(r)?t.multiply(e):t.multiplyUnsafe(e),o=i(this,e).add(i(t,n));return o.is0()?void 0:o}toAffine(t){const{px:e,py:r,pz:i}=this,o=this.is0();null==t&&(t=o?n.ONE:n.inv(i));const s=n.mul(e,t),a=n.mul(r,t),c=n.mul(i,t);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:t,isTorsionFree:n}=e;if(t===W)return!0;if(n)return n(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:n}=e;return t===W?this:n?n(h,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return this.assertValidity(),r(h,this,t)}toHex(t=!0){return f(this.toRawBytes(t))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const d=e.nBitLength,p=function(t,e){const n=(t,e)=>{const n=e.negate();return t?n:e},r=t=>({windows:Math.ceil(e/t)+1,windowSize:2**(t-1)});return{constTimeNegate:n,unsafeLadder(e,n){let r=t.ZERO,i=e;for(;n>z;)n&M&&(r=r.add(i)),i=i.double(),n>>=M;return r},precomputeWindow(t,e){const{windows:n,windowSize:i}=r(e),o=[];let s=t,a=s;for(let t=0;t<n;t++){a=s,o.push(a);for(let t=1;t<i;t++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(e,i,o){const{windows:s,windowSize:a}=r(e);let c=t.ZERO,l=t.BASE;const u=BigInt(2**e-1),h=2**e,f=BigInt(e);for(let t=0;t<s;t++){const e=t*a;let r=Number(o&u);o>>=f,r>a&&(r-=h,o+=M);const s=e,d=e+Math.abs(r)-1,p=t%2!=0,y=r<0;0===r?l=l.add(n(p,i[s])):c=c.add(n(y,i[d]))}return{p:c,f:l}},wNAFCached(t,e,n,r){const i=t._WINDOW_SIZE||1;let o=e.get(t);return o||(o=this.precomputeWindow(t,i),1!==i&&e.set(t,r(o))),this.wNAF(i,o,n)}}}(h,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}({...e,toBytes(t,e,r){const i=e.toAffine(),o=n.toBytes(i.x),s=v;return r?s(Uint8Array.from([e.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,n.toBytes(i.y))},fromBytes(t){const e=t.length,r=t[0],s=t.subarray(1);if(e!==i||2!==r&&3!==r){if(e===o&&4===r)return{x:n.fromBytes(s.subarray(0,n.BYTES)),y:n.fromBytes(s.subarray(n.BYTES,2*n.BYTES))};throw new Error(`Point of length ${e} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const t=y(s);if(!(V<(a=t)&&a<n.ORDER))throw new Error("Point is not on curve");const e=u(t);let i=n.sqrt(e);return 1==(1&r)!=((i&W)===W)&&(i=n.neg(i)),{x:t,y:i}}var a}}),d=t=>f(w(t,e.nByteLength));function b(t){return t>r>>W}const k=(t,e,n)=>y(t.slice(e,n));class x{constructor(t,e,n){this.r=t,this.s=e,this.recovery=n,this.assertValidity()}static fromCompact(t){const n=e.nByteLength;return t=m("compactSignature",t,2*n),new x(k(t,0,n),k(t,n,2*n))}static fromDER(t){const{r:e,s:n}=j.toSig(m("DER",t));return new x(e,n)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(t){return new x(this.r,this.s,t)}recoverPublicKey(t){const{r,s:i,recovery:o}=this,l=R(m("msgHash",t));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const u=2===o||3===o?r+e.n:r;if(u>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=0==(1&o)?"02":"03",f=c.fromHex(h+d(u)),p=a(u),y=s(-l*p),g=s(i*p),w=c.BASE.multiplyAndAddUnsafe(f,y,g);if(!w)throw new Error("point at infinify");return w.assertValidity(),w}hasHighS(){return b(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return p(this.toDERHex())}toDERHex(){return j.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return p(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const A={isValidPrivateKey(t){try{return l(t),!0}catch(t){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>w(function(t,e,n=!1){const r=(t=m("privateHash",t)).length,i=D(e).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);return P(n?g(t):y(t),e-C)+C}(e.randomBytes(n.BYTES+8),r),e.nByteLength),precompute:(t=8,e=c.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function B(t){const e=t instanceof Uint8Array,n="string"==typeof t,r=(e||n)&&t.length;return e?r===i||r===o:n?r===2*i||r===2*o:t instanceof c}const I=e.bits2int||function(t){const n=y(t),r=8*t.length-e.nBitLength;return r>0?n>>BigInt(r):n},R=e.bits2int_modN||function(t){return s(I(t))},N=E(e.nBitLength);function U(t){if("bigint"!=typeof t)throw new Error("bigint expected");if(!(V<=t&&t<N))throw new Error(`bigint expected < 2^${e.nBitLength}`);return w(t,e.nByteLength)}const T={lowS:e.lowS,prehash:!1},O={lowS:e.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return c.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,n=!0){if(B(t))throw new Error("first arg must be private key");if(!B(e))throw new Error("second arg must be public key");return c.fromHex(e).multiply(l(t)).toRawBytes(n)},sign:function(t,r,i=T){const{seed:o,k2sig:u}=function(t,r,i=T){if(["recovered","canonical"].some((t=>t in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:u}=e;let{lowS:f,prehash:d,extraEntropy:p}=i;null==f&&(f=!0),t=m("msgHash",t),d&&(t=m("prehashed msgHash",o(t)));const y=R(t),g=l(r),w=[U(g),U(y)];if(null!=p){const t=!0===p?u(n.BYTES):p;w.push(m("extraEntropy",t,n.BYTES))}const E=v(...w),k=y;return{seed:E,k2sig:function(t){const e=I(t);if(!h(e))return;const n=a(e),r=c.BASE.multiply(e).toAffine(),i=s(r.x);if(i===V)return;const o=s(n*s(k+i*g));if(o===V)return;let l=(r.x===i?0:2)|Number(r.y&W),u=o;return f&&b(o)&&(u=function(t){return b(t)?s(-t):t}(o),l^=1),new x(i,u,l)}}}(t,r,i),f=e;return _(f.hash.outputLen,f.nByteLength,f.hmac)(o,u)},verify:function(t,n,r,i=O){const o=t;if(n=m("msgHash",n),r=m("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:l,prehash:u}=i;let h,f;try{if("string"==typeof o||o instanceof Uint8Array)try{h=x.fromDER(o)}catch(t){if(!(t instanceof j.Err))throw t;h=x.fromCompact(o)}else{if("object"!=typeof o||"bigint"!=typeof o.r||"bigint"!=typeof o.s)throw new Error("PARSE");{const{r:t,s:e}=o;h=new x(t,e)}}f=c.fromHex(r)}catch(t){if("PARSE"===t.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(l&&h.hasHighS())return!1;u&&(n=e.hash(n));const{r:d,s:p}=h,y=R(n),g=a(p),w=s(y*g),b=s(d*g),v=c.BASE.multiplyAndAddUnsafe(f,w,b)?.toAffine();return!!v&&s(v.x)===d},ProjectivePoint:c,Signature:x,utils:A}}BigInt(4);var Y=n(9905);function J(t){return{hash:t,hmac:(e,...n)=>(0,Y.b)(t,e,(0,a.eV)(...n)),randomBytes:a.O6}}const Q=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),X=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),tt=BigInt(1),et=BigInt(2),nt=(t,e)=>(t+e/et)/e;function rt(t){const e=Q,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,h=L(u,n,e)*u%e,f=L(h,n,e)*u%e,d=L(f,et,e)*l%e,p=L(d,i,e)*d%e,y=L(p,o,e)*p%e,g=L(y,a,e)*y%e,w=L(g,c,e)*g%e,b=L(w,a,e)*y%e,m=L(b,n,e)*u%e,v=L(m,s,e)*p%e,E=L(v,r,e)*l%e,k=L(E,et,e);if(!it.eql(it.sqr(k),t))throw new Error("Cannot find square root");return k}const it=function(t,e,n=!1,r={}){if(t<=B)throw new Error(`Expected Fp ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:o}=D(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=function(t){if(t%N===R){const e=(t+C)/N;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}if(t%T===U){const e=(t-U)/T;return function(t,n){const r=t.mul(n,I),i=t.pow(r,e),o=t.mul(n,i),s=t.mul(t.mul(o,I),i),a=t.mul(o,t.sub(s,t.ONE));if(!t.eql(t.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(t){const e=(t-C)/I;let n,r,i;for(n=t-C,r=0;n%I===B;n/=I,r++);for(i=I;i<t&&O(i,e,t)!==t-C;i++);if(1===r){const e=(t+C)/N;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}const o=(n+C)/I;return function(t,s){if(t.pow(s,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let a=r,c=t.pow(t.mul(t.ONE,i),n),l=t.pow(s,o),u=t.pow(s,n);for(;!t.eql(u,t.ONE);){if(t.eql(u,t.ZERO))return t.ZERO;let e=1;for(let n=t.sqr(u);e<a&&!t.eql(n,t.ONE);e++)n=t.sqr(n);const n=t.pow(c,C<<BigInt(a-e-1));c=t.sqr(n),l=t.mul(l,n),u=t.mul(u,c),a=e}return l}}(t)}(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:E(i),ZERO:B,ONE:C,create:e=>P(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return B<=e&&e<t},is0:t=>t===B,isOdd:t=>(t&C)===C,neg:e=>P(-e,t),eql:(t,e)=>t===e,sqr:e=>P(e*e,t),add:(e,n)=>P(e+n,t),sub:(e,n)=>P(e-n,t),mul:(e,n)=>P(e*n,t),pow:(t,e)=>function(t,e,n){if(n<B)throw new Error("Expected power > 0");if(n===B)return t.ONE;if(n===C)return e;let r=t.ONE,i=e;for(;n>B;)n&C&&(r=t.mul(r,i)),i=t.sqr(i),n>>=C;return r}(a,t,e),div:(e,n)=>P(e*F(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>F(e,t),sqrt:r.sqrt||(t=>s(a,t)),invertBatch:t=>function(t,e){const n=new Array(e.length),r=e.reduce(((e,r,i)=>t.is0(r)?e:(n[i]=e,t.mul(e,r))),t.ONE),i=t.inv(r);return e.reduceRight(((e,r,i)=>t.is0(r)?e:(n[i]=t.mul(e,n[i]),t.mul(e,r))),i),n}(a,t),cmov:(t,e,n)=>n?e:t,toBytes:t=>n?b(t,o):w(t,o),fromBytes:t=>{if(t.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${t.length}`);return n?g(t):y(t)}});return Object.freeze(a)}(Q,void 0,void 0,{sqrt:rt}),ot=function(t,e){const n=e=>G({...t,...J(e)});return Object.freeze({...n(e),create:n})}({a:BigInt(0),b:BigInt(7),Fp:it,n:X,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=X,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-tt*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),a=nt(o*t,e),c=nt(-r*t,e);let l=P(t-a*n-c*i,e),u=P(-a*r-c*o,e);const h=l>s,f=u>s;if(h&&(l=e-l),f&&(u=e-u),l>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:l,k2neg:f,k2:u}}}},s.J),st=BigInt(0),at=t=>"bigint"==typeof t&&st<t&&t<Q,ct=t=>"bigint"==typeof t&&st<t&&t<X,lt={};function ut(t,...e){let n=lt[t];if(void 0===n){const e=(0,s.J)(Uint8Array.from(t,(t=>t.charCodeAt(0))));n=v(e,e),lt[t]=n}return(0,s.J)(v(n,...e))}const ht=t=>t.toRawBytes(!0).slice(1),ft=t=>w(t,32),dt=t=>P(t,Q),pt=t=>P(t,X),yt=ot.ProjectivePoint,gt=(t,e,n)=>yt.BASE.multiplyAndAddUnsafe(t,e,n);function wt(t){let e=ot.utils.normPrivateKeyToScalar(t),n=yt.fromPrivateKey(e);return{scalar:n.hasEvenY()?e:pt(-e),bytes:ht(n)}}function bt(t){if(!at(t))throw new Error("bad x: need 0 < x < p");const e=dt(t*t);let n=rt(dt(e*t+BigInt(7)));n%et!==st&&(n=dt(-n));const r=new yt(t,n,tt);return r.assertValidity(),r}function mt(...t){return pt(y(ut("BIP0340/challenge",...t)))}function vt(t){return wt(t).bytes}function Et(t,e,n=(0,a.O6)(32)){const r=m("message",t),{bytes:i,scalar:o}=wt(e),s=m("auxRand",n,32),c=ft(o^y(ut("BIP0340/aux",s))),l=ut("BIP0340/nonce",c,i,r),u=pt(y(l));if(u===st)throw new Error("sign failed: k is zero");const{bytes:h,scalar:f}=wt(u),d=mt(h,i,r),p=new Uint8Array(64);if(p.set(h,0),p.set(ft(pt(f+d*o)),32),!kt(p,r,i))throw new Error("sign: Invalid signature produced");return p}function kt(t,e,n){const r=m("signature",t,64),i=m("message",e),o=m("publicKey",n,32);try{const t=bt(y(o)),e=y(r.subarray(0,32));if(!at(e))return!1;const n=y(r.subarray(32,64));if(!ct(n))return!1;const s=mt(ft(e),ht(t),i),a=gt(t,n,pt(-s));return!(!a||!a.hasEvenY()||a.toAffine().x!==e)}catch(t){return!1}}const xt=(()=>({getPublicKey:vt,sign:Et,verify:kt,utils:{randomPrivateKey:ot.utils.randomPrivateKey,lift_x:bt,pointToBytes:ht,numberToBytesBE:w,bytesToNumberBE:y,taggedHash:ut,mod:P}}))();var _t=n(7410);const At="abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n");var St=n(3527);var Bt=n(3313);const Ct=BigInt(2**32-1),It=BigInt(32);function Rt(t,e=!1){return e?{h:Number(t&Ct),l:Number(t>>It&Ct)}:{h:0|Number(t>>It&Ct),l:0|Number(t&Ct)}}const Nt=function(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:o,l:s}=Rt(t[i],e);[n[i],r[i]]=[o,s]}return[n,r]},Ut=(t,e,n)=>t>>>n,Tt=(t,e,n)=>t<<32-n|e>>>n,Pt=(t,e,n)=>t>>>n|e<<32-n,Ot=(t,e,n)=>t<<32-n|e>>>n,Lt=(t,e,n)=>t<<64-n|e>>>n-32,Ft=(t,e,n)=>t>>>n-32|e<<64-n,$t=function(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}},Dt=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),zt=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Mt=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),qt=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,Ht=(t,e,n,r,i,o)=>e+n+r+i+o+(t/2**32|0)|0,Kt=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),[jt,Vt]=Nt(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))),Wt=new Uint32Array(80),Zt=new Uint32Array(80);class Gt extends Bt.N{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:r,Ch:i,Cl:o,Dh:s,Dl:a,Eh:c,El:l,Fh:u,Fl:h,Gh:f,Gl:d,Hh:p,Hl:y}=this;return[t,e,n,r,i,o,s,a,c,l,u,h,f,d,p,y]}set(t,e,n,r,i,o,s,a,c,l,u,h,f,d,p,y){this.Ah=0|t,this.Al=0|e,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|h,this.Gh=0|f,this.Gl=0|d,this.Hh=0|p,this.Hl=0|y}process(t,e){for(let n=0;n<16;n++,e+=4)Wt[n]=t.getUint32(e),Zt[n]=t.getUint32(e+=4);for(let t=16;t<80;t++){const e=0|Wt[t-15],n=0|Zt[t-15],r=Pt(e,n,1)^Pt(e,n,8)^Ut(e,n,7),i=Ot(e,n,1)^Ot(e,n,8)^Tt(e,n,7),o=0|Wt[t-2],s=0|Zt[t-2],a=Pt(o,s,19)^Lt(o,s,61)^Ut(o,s,6),c=Ot(o,s,19)^Ft(o,s,61)^Tt(o,s,6),l=Mt(i,c,Zt[t-7],Zt[t-16]),u=qt(l,r,a,Wt[t-7],Wt[t-16]);Wt[t]=0|u,Zt[t]=0|l}let{Ah:n,Al:r,Bh:i,Bl:o,Ch:s,Cl:a,Dh:c,Dl:l,Eh:u,El:h,Fh:f,Fl:d,Gh:p,Gl:y,Hh:g,Hl:w}=this;for(let t=0;t<80;t++){const e=Pt(u,h,14)^Pt(u,h,18)^Lt(u,h,41),b=Ot(u,h,14)^Ot(u,h,18)^Ft(u,h,41),m=u&f^~u&p,v=Kt(w,b,h&d^~h&y,Vt[t],Zt[t]),E=Ht(v,g,e,m,jt[t],Wt[t]),k=0|v,x=Pt(n,r,28)^Lt(n,r,34)^Lt(n,r,39),_=Ot(n,r,28)^Ft(n,r,34)^Ft(n,r,39),A=n&i^n&s^i&s,S=r&o^r&a^o&a;g=0|p,w=0|y,p=0|f,y=0|d,f=0|u,d=0|h,({h:u,l:h}=$t(0|c,0|l,0|E,0|k)),c=0|s,l=0|a,s=0|i,a=0|o,i=0|n,o=0|r;const B=Dt(k,_,S);n=zt(B,E,x,A),r=0|B}({h:n,l:r}=$t(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:o}=$t(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=$t(0|this.Ch,0|this.Cl,0|s,0|a)),({h:c,l}=$t(0|this.Dh,0|this.Dl,0|c,0|l)),({h:u,l:h}=$t(0|this.Eh,0|this.El,0|u,0|h)),({h:f,l:d}=$t(0|this.Fh,0|this.Fl,0|f,0|d)),({h:p,l:y}=$t(0|this.Gh,0|this.Gl,0|p,0|y)),({h:g,l:w}=$t(0|this.Hh,0|this.Hl,0|g,0|w)),this.set(n,r,i,o,s,a,c,l,u,h,f,d,p,y,g,w)}roundClean(){Wt.fill(0),Zt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Yt extends Gt{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class Jt extends Gt{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Qt extends Gt{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Xt=(0,a.hE)((()=>new Gt)),te=((0,a.hE)((()=>new Yt)),(0,a.hE)((()=>new Jt)),(0,a.hE)((()=>new Qt)),t=>""===t[0]);function ee(t){if("string"!=typeof t)throw new TypeError("Invalid mnemonic type: "+typeof t);return t.normalize("NFKD")}function ne(t){const e=ee(t),n=e.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:n}}function re(t){St.ZP.bytes(t,16,20,24,28,32)}const ie=t=>{const e=8-t.length/4;return new Uint8Array([(0,s.J)(t)[0]>>e<<e])};function oe(t){if(!Array.isArray(t)||2048!==t.length||"string"!=typeof t[0])throw new Error("Worlist: expected array of 2048 strings");return t.forEach((t=>{if("string"!=typeof t)throw new Error(`Wordlist: non-string element: ${t}`)})),_t.P6.chain(_t.P6.checksum(1,ie),_t.P6.radix2(11,!0),_t.P6.alphabet(t))}const se=t=>ee(`mnemonic${t}`);function ae(t,e=""){return function(t,e,n,r){const{c:i,dkLen:o,DK:s,PRF:c,PRFSalt:l}=function(t,e,n,r){St.ZP.hash(t);const i=(0,a.U5)({dkLen:32,asyncTick:10},r),{c:o,dkLen:s,asyncTick:c}=i;if(St.ZP.number(o),St.ZP.number(s),St.ZP.number(c),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=(0,a.O0)(e),u=(0,a.O0)(n),h=new Uint8Array(s),f=Y.b.create(t,l),d=f._cloneInto().update(u);return{c:o,dkLen:s,asyncTick:c,DK:h,PRF:f,PRFSalt:d}}(t,e,n,{c:2048,dkLen:64});let u;const h=new Uint8Array(4),f=(0,a.GL)(h),d=new Uint8Array(c.outputLen);for(let t=1,e=0;e<o;t++,e+=c.outputLen){const n=s.subarray(e,e+c.outputLen);f.setInt32(0,t,!1),(u=l._cloneInto(u)).update(h).digestInto(d),n.set(d.subarray(0,n.length));for(let t=1;t<i;t++){c._cloneInto(u).update(d).digestInto(d);for(let t=0;t<n.length;t++)n[t]^=d[t]}}return function(t,e,n,r,i){return t.destroy(),e.destroy(),r&&r.destroy(),i.fill(0),n}(c,l,s,u,d)}(Xt,ne(t).nfkd,se(e))}const ce=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),le=Uint8Array.from({length:16},((t,e)=>e)),ue=le.map((t=>(9*t+5)%16));let he=[le],fe=[ue];for(let t=0;t<4;t++)for(let e of[he,fe])e.push(e[t].map((t=>ce[t])));const de=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((t=>new Uint8Array(t))),pe=he.map(((t,e)=>t.map((t=>de[e][t])))),ye=fe.map(((t,e)=>t.map((t=>de[e][t])))),ge=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),we=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),be=(t,e)=>t<<e|t>>>32-e;function me(t,e,n,r){return 0===t?e^n^r:1===t?e&n|~e&r:2===t?(e|~n)^r:3===t?e&r|n&~r:e^(n|~r)}const ve=new Uint32Array(16);class Ee extends Bt.N{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:e,h2:n,h3:r,h4:i}=this;return[t,e,n,r,i]}set(t,e,n,r,i){this.h0=0|t,this.h1=0|e,this.h2=0|n,this.h3=0|r,this.h4=0|i}process(t,e){for(let n=0;n<16;n++,e+=4)ve[n]=t.getUint32(e,!0);let n=0|this.h0,r=n,i=0|this.h1,o=i,s=0|this.h2,a=s,c=0|this.h3,l=c,u=0|this.h4,h=u;for(let t=0;t<5;t++){const e=4-t,f=ge[t],d=we[t],p=he[t],y=fe[t],g=pe[t],w=ye[t];for(let e=0;e<16;e++){const r=be(n+me(t,i,s,c)+ve[p[e]]+f,g[e])+u|0;n=u,u=c,c=0|be(s,10),s=i,i=r}for(let t=0;t<16;t++){const n=be(r+me(e,o,a,l)+ve[y[t]]+d,w[t])+h|0;r=h,h=l,l=0|be(a,10),a=o,o=n}}this.set(this.h1+s+l|0,this.h2+c+h|0,this.h3+u+r|0,this.h4+n+o|0,this.h0+i+a|0)}roundClean(){ve.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const ke=(0,a.hE)((()=>new Ee)),xe=(BigInt(0),BigInt(1)),_e=BigInt(2),Ae=t=>t instanceof Uint8Array,Se=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function Be(t){if(!Ae(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=Se[t[n]];return e}function Ce(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}function Ie(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let e=0;e<n.length;e++){const r=2*e,i=t.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[e]=o}return n}function Re(t){return Ce(Be(t))}function Ne(t){if(!Ae(t))throw new Error("Uint8Array expected");return Ce(Be(Uint8Array.from(t).reverse()))}function Ue(t,e){return Ie(t.toString(16).padStart(2*e,"0"))}function Te(t,e){return Ue(t,e).reverse()}function Pe(t,e,n){let r;if("string"==typeof e)try{r=Ie(e)}catch(n){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${n}`)}else{if(!Ae(e))throw new Error(`${t} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function Oe(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let n=0;return t.forEach((t=>{if(!Ae(t))throw new Error("Uint8Array expected");e.set(t,n),n+=t.length})),e}const Le=t=>(_e<<BigInt(t-1))-xe,Fe=t=>new Uint8Array(t),$e=t=>Uint8Array.from(t);function De(t,e,n){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=Fe(t),i=Fe(t),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},a=(...t)=>n(i,r,...t),c=(t=Fe())=>{i=a($e([0]),t),r=a(),0!==t.length&&(i=a($e([1]),t),r=a())},l=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const n=[];for(;t<e;){r=a();const e=r.slice();n.push(e),t+=r.length}return Oe(...n)};return(t,e)=>{let n;for(s(),c(t);!(n=e(l()));)c();return s(),n}}const ze={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function Me(t,e,n={}){const r=(e,n,r)=>{const i=ze[n];if("function"!=typeof i)throw new Error(`Invalid validator "${n}", expected function`);const o=t[e];if(!(r&&void 0===o||i(o,t)))throw new Error(`Invalid param ${String(e)}=${o} (${typeof o}), expected ${n}`)};for(const[t,n]of Object.entries(e))r(t,n,!1);for(const[t,e]of Object.entries(n))r(t,e,!0);return t}const qe=BigInt(0),He=BigInt(1),Ke=BigInt(2),je=BigInt(3),Ve=BigInt(4),We=BigInt(5),Ze=BigInt(8);function Ge(t,e){const n=t%e;return n>=qe?n:e+n}function Ye(t,e,n){if(n<=qe||e<qe)throw new Error("Expected power/modulo > 0");if(n===He)return qe;let r=He;for(;e>qe;)e&He&&(r=r*t%n),t=t*t%n,e>>=He;return r}function Je(t,e,n){let r=t;for(;e-- >qe;)r*=r,r%=n;return r}function Qe(t,e){if(t===qe||e<=qe)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Ge(t,e),r=e,i=qe,o=He,s=He,a=qe;for(;n!==qe;){const t=r/n,e=r%n,c=i-s*t,l=o-a*t;r=n,n=e,i=s,o=a,s=c,a=l}if(r!==He)throw new Error("invert: does not exist");return Ge(i,e)}BigInt(9),BigInt(16);const Xe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function tn(t,e){const n=void 0!==e?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}const en=BigInt(0),nn=BigInt(1);function rn(t){return Me(t.Fp,Xe.reduce(((t,e)=>(t[e]="function",t)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),Me(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...tn(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const{bytesToNumberBE:on,hexToBytes:sn}=i,an={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(t){const{Err:e}=an;if(t.length<2||2!==t[0])throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(128&r[0])throw new e("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:on(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=an,n="string"==typeof t?sn(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:o}=an._parseInt(n.subarray(2)),{d:s,l:a}=an._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(t){const e=t=>8&Number.parseInt(t[0],16)?"00"+t:t,n=t=>{const e=t.toString(16);return 1&e.length?`0${e}`:e},r=e(n(t.s)),i=e(n(t.r)),o=r.length/2,s=i.length/2,a=n(o),c=n(s);return`30${n(s+o+4)}02${c}${i}02${a}${r}`}},cn=BigInt(0),ln=BigInt(1),un=(BigInt(2),BigInt(3));function hn(t){const e=function(t){const e=rn(t);return Me(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:n,n:r}=e,i=n.BYTES+1,o=2*n.BYTES+1;function s(t){return Ge(t,r)}function a(t){return Qe(t,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:h}=function(t){const e=function(t){const e=rn(t);Me(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:n}=e,r=e.toBytes||((t,e,r)=>{const i=e.toAffine();return Oe(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),i=e.fromBytes||(t=>{const e=t.subarray(1);return{x:n.fromBytes(e.subarray(0,n.BYTES)),y:n.fromBytes(e.subarray(n.BYTES,2*n.BYTES))}});function o(t){const{a:r,b:i}=e,o=n.sqr(t),s=n.mul(o,t);return n.add(n.add(s,n.mul(t,r)),i)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(t){return"bigint"==typeof t&&cn<t&&t<e.n}function a(t){if(!s(t))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(t){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:o}=e;if(n&&"bigint"!=typeof t){if(t instanceof Uint8Array&&(t=Be(t)),"string"!=typeof t||!n.includes(t.length))throw new Error("Invalid key");t=t.padStart(2*r,"0")}let s;try{s="bigint"==typeof t?t:Re(Pe("private key",t,r))}catch(e){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof t}`)}return i&&(s=Ge(s,o)),a(s),s}const l=new Map;function u(t){if(!(t instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(t,e,r){if(this.px=t,this.py=e,this.pz=r,null==t||!n.isValid(t))throw new Error("x required");if(null==e||!n.isValid(e))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(t){const{x:e,y:r}=t||{};if(!t||!n.isValid(e)||!n.isValid(r))throw new Error("invalid affine point");if(t instanceof h)throw new Error("projective point not allowed");const i=t=>n.eql(t,n.ZERO);return i(e)&&i(r)?h.ZERO:new h(e,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=n.invertBatch(t.map((t=>t.pz)));return t.map(((t,n)=>t.toAffine(e[n]))).map(h.fromAffine)}static fromHex(t){const e=h.fromAffine(i(Pe("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return h.BASE.multiply(c(t))}_setWindowSize(t){this._WINDOW_SIZE=t,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:t,y:r}=this.toAffine();if(!n.isValid(t)||!n.isValid(r))throw new Error("bad point: x or y not FE");const i=n.sqr(r),s=o(t);if(!n.eql(i,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:t}=this.toAffine();if(n.isOdd)return!n.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){u(t);const{px:e,py:r,pz:i}=this,{px:o,py:s,pz:a}=t,c=n.eql(n.mul(e,a),n.mul(o,i)),l=n.eql(n.mul(r,a),n.mul(s,i));return c&&l}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:t,b:r}=e,i=n.mul(r,un),{px:o,py:s,pz:a}=this;let c=n.ZERO,l=n.ZERO,u=n.ZERO,f=n.mul(o,o),d=n.mul(s,s),p=n.mul(a,a),y=n.mul(o,s);return y=n.add(y,y),u=n.mul(o,a),u=n.add(u,u),c=n.mul(t,u),l=n.mul(i,p),l=n.add(c,l),c=n.sub(d,l),l=n.add(d,l),l=n.mul(c,l),c=n.mul(y,c),u=n.mul(i,u),p=n.mul(t,p),y=n.sub(f,p),y=n.mul(t,y),y=n.add(y,u),u=n.add(f,f),f=n.add(u,f),f=n.add(f,p),f=n.mul(f,y),l=n.add(l,f),p=n.mul(s,a),p=n.add(p,p),f=n.mul(p,y),c=n.sub(c,f),u=n.mul(p,d),u=n.add(u,u),u=n.add(u,u),new h(c,l,u)}add(t){u(t);const{px:r,py:i,pz:o}=this,{px:s,py:a,pz:c}=t;let l=n.ZERO,f=n.ZERO,d=n.ZERO;const p=e.a,y=n.mul(e.b,un);let g=n.mul(r,s),w=n.mul(i,a),b=n.mul(o,c),m=n.add(r,i),v=n.add(s,a);m=n.mul(m,v),v=n.add(g,w),m=n.sub(m,v),v=n.add(r,o);let E=n.add(s,c);return v=n.mul(v,E),E=n.add(g,b),v=n.sub(v,E),E=n.add(i,o),l=n.add(a,c),E=n.mul(E,l),l=n.add(w,b),E=n.sub(E,l),d=n.mul(p,v),l=n.mul(y,b),d=n.add(l,d),l=n.sub(w,d),d=n.add(w,d),f=n.mul(l,d),w=n.add(g,g),w=n.add(w,g),b=n.mul(p,b),v=n.mul(y,v),w=n.add(w,b),b=n.sub(g,b),b=n.mul(p,b),v=n.add(v,b),g=n.mul(w,v),f=n.add(f,g),g=n.mul(E,v),l=n.mul(m,l),l=n.sub(l,g),g=n.mul(m,w),d=n.mul(E,d),d=n.add(d,g),new h(l,f,d)}subtract(t){return this.add(t.negate())}is0(){return this.equals(h.ZERO)}wNAF(t){return d.wNAFCached(this,l,t,(t=>{const e=n.invertBatch(t.map((t=>t.pz)));return t.map(((t,n)=>t.toAffine(e[n]))).map(h.fromAffine)}))}multiplyUnsafe(t){const r=h.ZERO;if(t===cn)return r;if(a(t),t===ln)return this;const{endo:i}=e;if(!i)return d.unsafeLadder(this,t);let{k1neg:o,k1:s,k2neg:c,k2:l}=i.splitScalar(t),u=r,f=r,p=this;for(;s>cn||l>cn;)s&ln&&(u=u.add(p)),l&ln&&(f=f.add(p)),p=p.double(),s>>=ln,l>>=ln;return o&&(u=u.negate()),c&&(f=f.negate()),f=new h(n.mul(f.px,i.beta),f.py,f.pz),u.add(f)}multiply(t){a(t);let r,i,o=t;const{endo:s}=e;if(s){const{k1neg:t,k1:e,k2neg:a,k2:c}=s.splitScalar(o);let{p:l,f:u}=this.wNAF(e),{p:f,f:p}=this.wNAF(c);l=d.constTimeNegate(t,l),f=d.constTimeNegate(a,f),f=new h(n.mul(f.px,s.beta),f.py,f.pz),r=l.add(f),i=u.add(p)}else{const{p:t,f:e}=this.wNAF(o);r=t,i=e}return h.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(t,e,n){const r=h.BASE,i=(t,e)=>e!==cn&&e!==ln&&t.equals(r)?t.multiply(e):t.multiplyUnsafe(e),o=i(this,e).add(i(t,n));return o.is0()?void 0:o}toAffine(t){const{px:e,py:r,pz:i}=this,o=this.is0();null==t&&(t=o?n.ONE:n.inv(i));const s=n.mul(e,t),a=n.mul(r,t),c=n.mul(i,t);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:t,isTorsionFree:n}=e;if(t===ln)return!0;if(n)return n(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:n}=e;return t===ln?this:n?n(h,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return this.assertValidity(),r(h,this,t)}toHex(t=!0){return Be(this.toRawBytes(t))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,d=function(t,e){const n=(t,e)=>{const n=e.negate();return t?n:e},r=t=>({windows:Math.ceil(e/t)+1,windowSize:2**(t-1)});return{constTimeNegate:n,unsafeLadder(e,n){let r=t.ZERO,i=e;for(;n>en;)n&nn&&(r=r.add(i)),i=i.double(),n>>=nn;return r},precomputeWindow(t,e){const{windows:n,windowSize:i}=r(e),o=[];let s=t,a=s;for(let t=0;t<n;t++){a=s,o.push(a);for(let t=1;t<i;t++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(e,i,o){const{windows:s,windowSize:a}=r(e);let c=t.ZERO,l=t.BASE;const u=BigInt(2**e-1),h=2**e,f=BigInt(e);for(let t=0;t<s;t++){const e=t*a;let r=Number(o&u);o>>=f,r>a&&(r-=h,o+=nn);const s=e,d=e+Math.abs(r)-1,p=t%2!=0,y=r<0;0===r?l=l.add(n(p,i[s])):c=c.add(n(y,i[d]))}return{p:c,f:l}},wNAFCached(t,e,n,r){const i=t._WINDOW_SIZE||1;let o=e.get(t);return o||(o=this.precomputeWindow(t,i),1!==i&&e.set(t,r(o))),this.wNAF(i,o,n)}}}(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}({...e,toBytes(t,e,r){const i=e.toAffine(),o=n.toBytes(i.x),s=Oe;return r?s(Uint8Array.from([e.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,n.toBytes(i.y))},fromBytes(t){const e=t.length,r=t[0],s=t.subarray(1);if(e!==i||2!==r&&3!==r){if(e===o&&4===r)return{x:n.fromBytes(s.subarray(0,n.BYTES)),y:n.fromBytes(s.subarray(n.BYTES,2*n.BYTES))};throw new Error(`Point of length ${e} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const t=Re(s);if(!(cn<(a=t)&&a<n.ORDER))throw new Error("Point is not on curve");const e=u(t);let i=n.sqrt(e);return 1==(1&r)!=((i&ln)===ln)&&(i=n.neg(i)),{x:t,y:i}}var a}}),f=t=>Be(Ue(t,e.nByteLength));function d(t){return t>r>>ln}const p=(t,e,n)=>Re(t.slice(e,n));class y{constructor(t,e,n){this.r=t,this.s=e,this.recovery=n,this.assertValidity()}static fromCompact(t){const n=e.nByteLength;return t=Pe("compactSignature",t,2*n),new y(p(t,0,n),p(t,n,2*n))}static fromDER(t){const{r:e,s:n}=an.toSig(Pe("DER",t));return new y(e,n)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(t){return new y(this.r,this.s,t)}recoverPublicKey(t){const{r,s:i,recovery:o}=this,l=m(Pe("msgHash",t));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const u=2===o||3===o?r+e.n:r;if(u>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=0==(1&o)?"02":"03",d=c.fromHex(h+f(u)),p=a(u),y=s(-l*p),g=s(i*p),w=c.BASE.multiplyAndAddUnsafe(d,y,g);if(!w)throw new Error("point at infinify");return w.assertValidity(),w}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return Ie(this.toDERHex())}toDERHex(){return an.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ie(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const g={isValidPrivateKey(t){try{return l(t),!0}catch(t){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>Ue(function(t,e,n=!1){const r=(t=Pe("privateHash",t)).length,i=tn(e).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);return Ge(n?Ne(t):Re(t),e-He)+He}(e.randomBytes(n.BYTES+8),r),e.nByteLength),precompute:(t=8,e=c.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function w(t){const e=t instanceof Uint8Array,n="string"==typeof t,r=(e||n)&&t.length;return e?r===i||r===o:n?r===2*i||r===2*o:t instanceof c}const b=e.bits2int||function(t){const n=Re(t),r=8*t.length-e.nBitLength;return r>0?n>>BigInt(r):n},m=e.bits2int_modN||function(t){return s(b(t))},v=Le(e.nBitLength);function E(t){if("bigint"!=typeof t)throw new Error("bigint expected");if(!(cn<=t&&t<v))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Ue(t,e.nByteLength)}const k={lowS:e.lowS,prehash:!1},x={lowS:e.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return c.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,n=!0){if(w(t))throw new Error("first arg must be private key");if(!w(e))throw new Error("second arg must be public key");return c.fromHex(e).multiply(l(t)).toRawBytes(n)},sign:function(t,r,i=k){const{seed:o,k2sig:u}=function(t,r,i=k){if(["recovered","canonical"].some((t=>t in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:u}=e;let{lowS:f,prehash:p,extraEntropy:g}=i;null==f&&(f=!0),t=Pe("msgHash",t),p&&(t=Pe("prehashed msgHash",o(t)));const w=m(t),v=l(r),x=[E(v),E(w)];if(null!=g){const t=!0===g?u(n.BYTES):g;x.push(Pe("extraEntropy",t,n.BYTES))}const _=Oe(...x),A=w;return{seed:_,k2sig:function(t){const e=b(t);if(!h(e))return;const n=a(e),r=c.BASE.multiply(e).toAffine(),i=s(r.x);if(i===cn)return;const o=s(n*s(A+i*v));if(o===cn)return;let l=(r.x===i?0:2)|Number(r.y&ln),u=o;return f&&d(o)&&(u=function(t){return d(t)?s(-t):t}(o),l^=1),new y(i,u,l)}}}(t,r,i),f=e;return De(f.hash.outputLen,f.nByteLength,f.hmac)(o,u)},verify:function(t,n,r,i=x){const o=t;if(n=Pe("msgHash",n),r=Pe("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:l,prehash:u}=i;let h,f;try{if("string"==typeof o||o instanceof Uint8Array)try{h=y.fromDER(o)}catch(t){if(!(t instanceof an.Err))throw t;h=y.fromCompact(o)}else{if("object"!=typeof o||"bigint"!=typeof o.r||"bigint"!=typeof o.s)throw new Error("PARSE");{const{r:t,s:e}=o;h=new y(t,e)}}f=c.fromHex(r)}catch(t){if("PARSE"===t.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(l&&h.hasHighS())return!1;u&&(n=e.hash(n));const{r:d,s:p}=h,g=m(n),w=a(p),b=s(g*w),v=s(d*w),E=c.BASE.multiplyAndAddUnsafe(f,b,v)?.toAffine();return!!E&&s(E.x)===d},ProjectivePoint:c,Signature:y,utils:g}}function fn(t){return{hash:t,hmac:(e,...n)=>(0,Y.b)(t,e,(0,a.eV)(...n)),randomBytes:a.O6}}BigInt(4);const dn=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),pn=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),yn=BigInt(1),gn=BigInt(2),wn=(t,e)=>(t+e/gn)/e;const bn=function(t,e,n=!1,r={}){if(t<=qe)throw new Error(`Expected Fp ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:o}=tn(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=function(t){if(t%Ve===je){const e=(t+He)/Ve;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}if(t%Ze===We){const e=(t-We)/Ze;return function(t,n){const r=t.mul(n,Ke),i=t.pow(r,e),o=t.mul(n,i),s=t.mul(t.mul(o,Ke),i),a=t.mul(o,t.sub(s,t.ONE));if(!t.eql(t.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(t){const e=(t-He)/Ke;let n,r,i;for(n=t-He,r=0;n%Ke===qe;n/=Ke,r++);for(i=Ke;i<t&&Ye(i,e,t)!==t-He;i++);if(1===r){const e=(t+He)/Ve;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}const o=(n+He)/Ke;return function(t,s){if(t.pow(s,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let a=r,c=t.pow(t.mul(t.ONE,i),n),l=t.pow(s,o),u=t.pow(s,n);for(;!t.eql(u,t.ONE);){if(t.eql(u,t.ZERO))return t.ZERO;let e=1;for(let n=t.sqr(u);e<a&&!t.eql(n,t.ONE);e++)n=t.sqr(n);const n=t.pow(c,He<<BigInt(a-e-1));c=t.sqr(n),l=t.mul(l,n),u=t.mul(u,c),a=e}return l}}(t)}(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:Le(i),ZERO:qe,ONE:He,create:e=>Ge(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return qe<=e&&e<t},is0:t=>t===qe,isOdd:t=>(t&He)===He,neg:e=>Ge(-e,t),eql:(t,e)=>t===e,sqr:e=>Ge(e*e,t),add:(e,n)=>Ge(e+n,t),sub:(e,n)=>Ge(e-n,t),mul:(e,n)=>Ge(e*n,t),pow:(t,e)=>function(t,e,n){if(n<qe)throw new Error("Expected power > 0");if(n===qe)return t.ONE;if(n===He)return e;let r=t.ONE,i=e;for(;n>qe;)n&He&&(r=t.mul(r,i)),i=t.sqr(i),n>>=He;return r}(a,t,e),div:(e,n)=>Ge(e*Qe(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>Qe(e,t),sqrt:r.sqrt||(t=>s(a,t)),invertBatch:t=>function(t,e){const n=new Array(e.length),r=e.reduce(((e,r,i)=>t.is0(r)?e:(n[i]=e,t.mul(e,r))),t.ONE),i=t.inv(r);return e.reduceRight(((e,r,i)=>t.is0(r)?e:(n[i]=t.mul(e,n[i]),t.mul(e,r))),i),n}(a,t),cmov:(t,e,n)=>n?e:t,toBytes:t=>n?Te(t,o):Ue(t,o),fromBytes:t=>{if(t.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${t.length}`);return n?Ne(t):Re(t)}});return Object.freeze(a)}(dn,void 0,void 0,{sqrt:function(t){const e=dn,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,h=Je(u,n,e)*u%e,f=Je(h,n,e)*u%e,d=Je(f,gn,e)*l%e,p=Je(d,i,e)*d%e,y=Je(p,o,e)*p%e,g=Je(y,a,e)*y%e,w=Je(g,c,e)*g%e,b=Je(w,a,e)*y%e,m=Je(b,n,e)*u%e,v=Je(m,s,e)*p%e,E=Je(v,r,e)*l%e,k=Je(E,gn,e);if(!bn.eql(bn.sqr(k),t))throw new Error("Cannot find square root");return k}}),mn=function(t,e){const n=e=>hn({...t,...fn(e)});return Object.freeze({...n(e),create:n})}({a:BigInt(0),b:BigInt(7),Fp:bn,n:pn,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=pn,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-yn*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),a=wn(o*t,e),c=wn(-r*t,e);let l=Ge(t-a*n-c*i,e),u=Ge(-a*r-c*o,e);const h=l>s,f=u>s;if(h&&(l=e-l),f&&(u=e-u),l>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:l,k2neg:f,k2:u}}}},s.J);BigInt(0),mn.ProjectivePoint;const vn=mn.ProjectivePoint,En=(0,_t.Av)(s.J);function kn(t){return BigInt(`0x${(0,a.ci)(t)}`)}const xn=(0,a.iY)("Bitcoin seed"),_n={private:76066276,public:76067358},An=2147483648,Sn=t=>{if(!Number.isSafeInteger(t)||t<0||t>2**32-1)throw new Error(`Invalid number=${t}. Should be from 0 to 2 ** 32 - 1`);const e=new Uint8Array(4);return(0,a.GL)(e).setUint32(0,t,!1),e};class Bn{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return t=this.pubHash,(0,a.GL)(t).getUint32(0,!1);var t}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const t=this.privateKey;if(!t)throw new Error("No private key");return En.encode(this.serialize(this.versions.private,(0,a.eV)(new Uint8Array([0]),t)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return En.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(t,e=_n){if((0,St.aI)(t),8*t.length<128||8*t.length>512)throw new Error(`HDKey: wrong seed length=${t.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=(0,Y.b)(Xt,xn,t);return new Bn({versions:e,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(t,e=_n){const n=En.decode(t),r=(0,a.GL)(n),i=r.getUint32(0,!1),o={versions:e,depth:n[4],parentFingerprint:r.getUint32(5,!1),index:r.getUint32(9,!1),chainCode:n.slice(13,45)},s=n.slice(45),c=0===s[0];if(i!==e[c?"private":"public"])throw new Error("Version mismatch");return new Bn(c?{...o,privateKey:s.slice(1)}:{...o,publicKey:s})}static fromJSON(t){return Bn.fromExtendedKey(t.xpriv)}constructor(t){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!t||"object"!=typeof t)throw new Error("HDKey.constructor must not be called directly");if(this.versions=t.versions||_n,this.depth=t.depth||0,this.chainCode=t.chainCode,this.index=t.index||0,this.parentFingerprint=t.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(t.publicKey&&t.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(t.privateKey){if(!mn.utils.isValidPrivateKey(t.privateKey))throw new Error("Invalid private key");this.privKey="bigint"==typeof t.privateKey?t.privateKey:kn(t.privateKey),this.privKeyBytes=(e=this.privKey,(0,a.nr)(e.toString(16).padStart(64,"0"))),this.pubKey=mn.getPublicKey(t.privateKey,!0)}else{if(!t.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=vn.fromHex(t.publicKey).toRawBytes(!0)}var e,n;this.pubHash=(n=this.pubKey,ke((0,s.J)(n)))}derive(t){if(!/^[mM]'?/.test(t))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(t))return this;const e=t.replace(/^[mM]'?\//,"").split("/");let n=this;for(const t of e){const e=/^(\d+)('?)$/.exec(t);if(!e||3!==e.length)throw new Error(`Invalid child index: ${t}`);let r=+e[1];if(!Number.isSafeInteger(r)||r>=An)throw new Error("Invalid index");"'"===e[2]&&(r+=An),n=n.deriveChild(r)}return n}deriveChild(t){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let e=Sn(t);if(t>=An){const t=this.privateKey;if(!t)throw new Error("Could not derive hardened child key");e=(0,a.eV)(new Uint8Array([0]),t,e)}else e=(0,a.eV)(this.pubKey,e);const n=(0,Y.b)(Xt,this.chainCode,e),r=kn(n.slice(0,32)),i=n.slice(32);if(!mn.utils.isValidPrivateKey(r))throw new Error("Tweak bigger than curve order");const o={versions:this.versions,chainCode:i,depth:this.depth+1,parentFingerprint:this.fingerprint,index:t};try{if(this.privateKey){const t=Ge(this.privKey+r,mn.CURVE.n);if(!mn.utils.isValidPrivateKey(t))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=t}else{const t=vn.fromHex(this.pubKey).add(vn.fromPrivateKey(r));if(t.equals(vn.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=t.toRawBytes(!0)}return new Bn(o)}catch(e){return this.deriveChild(t+1)}}sign(t){if(!this.privateKey)throw new Error("No privateKey set!");return(0,St.aI)(t,32),mn.sign(t,this.privKey).toCompactRawBytes()}verify(t,e){if((0,St.aI)(t,32),(0,St.aI)(e,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=mn.Signature.fromCompact(e)}catch(t){return!1}return mn.verify(n,t,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(t,e){if(!this.chainCode)throw new Error("No chainCode set");return(0,St.aI)(e,33),(0,a.eV)(Sn(t),new Uint8Array([this.depth]),Sn(this.parentFingerprint),Sn(this.index),this.chainCode,e)}}var Cn=n(282),In=n(4207),Rn=n(7518),Nn=Object.defineProperty,Un=(t,e)=>{for(var n in e)Nn(t,n,{get:e[n],enumerable:!0})};function Tn(t){return(0,a.ci)(xt.getPublicKey(t))}Un({},{MessageNode:()=>Dn,MessageQueue:()=>zn,insertEventIntoAscendingList:()=>$n,insertEventIntoDescendingList:()=>Fn,normalizeURL:()=>Ln,utf8Decoder:()=>Pn,utf8Encoder:()=>On});var Pn=new TextDecoder("utf-8"),On=new TextEncoder;function Ln(t){let e=new URL(t);return e.pathname=e.pathname.replace(/\/+/g,"/"),e.pathname.endsWith("/")&&(e.pathname=e.pathname.slice(0,-1)),("80"===e.port&&"ws:"===e.protocol||"443"===e.port&&"wss:"===e.protocol)&&(e.port=""),e.searchParams.sort(),e.hash="",e.toString()}function Fn(t,e){let n,r=0,i=t.length-1,o=r;if(i<0)o=0;else if(e.created_at<t[i].created_at)o=i+1;else if(e.created_at>=t[r].created_at)o=r;else for(;;){if(i<=r+1){o=i;break}if(n=Math.floor(r+(i-r)/2),t[n].created_at>e.created_at)r=n;else{if(!(t[n].created_at<e.created_at)){o=n;break}i=n}}return t[o]?.id!==e.id?[...t.slice(0,o),e,...t.slice(o)]:t}function $n(t,e){let n,r=0,i=t.length-1,o=r;if(i<0)o=0;else if(e.created_at>t[i].created_at)o=i+1;else if(e.created_at<=t[r].created_at)o=r;else for(;;){if(i<=r+1){o=i;break}if(n=Math.floor(r+(i-r)/2),t[n].created_at<e.created_at)r=n;else{if(!(t[n].created_at>e.created_at)){o=n;break}i=n}}return t[o]?.id!==e.id?[...t.slice(0,o),e,...t.slice(o)]:t}var Dn=class{_value;_next;get value(){return this._value}set value(t){this._value=t}get next(){return this._next}set next(t){this._next=t}constructor(t){this._value=t,this._next=null}},zn=class{_first;_last;get first(){return this._first}set first(t){this._first=t}get last(){return this._last}set last(t){this._last=t}_size;get size(){return this._size}set size(t){this._size=t}constructor(){this._first=null,this._last=null,this._size=0}enqueue(t){const e=new Dn(t);return 0!==this._size&&this._last?(this._last.next=e,this._last=e):(this._first=e,this._last=e),this._size++,!0}dequeue(){if(0===this._size||!this._first)return null;let t=this._first;return this._first=t.next,t.next=null,this._size--,t.value}},Mn=Symbol("verified");function qn(t,e){const n=t;return n.pubkey=Tn(e),n.id=Hn(n),n.sig=Wn(n,e),n[Mn]=!0,n}function Hn(t){let e=(0,s.J)(On.encode(function(t){if(!jn(t))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,t.pubkey,t.created_at,t.kind,t.tags,t.content])}(t)));return(0,a.ci)(e)}var Kn=t=>t instanceof Object;function jn(t){if(!Kn(t))return!1;if("number"!=typeof t.kind)return!1;if("string"!=typeof t.content)return!1;if("number"!=typeof t.created_at)return!1;if("string"!=typeof t.pubkey)return!1;if(!t.pubkey.match(/^[a-f0-9]{64}$/))return!1;if(!Array.isArray(t.tags))return!1;for(let e=0;e<t.tags.length;e++){let n=t.tags[e];if(!Array.isArray(n))return!1;for(let t=0;t<n.length;t++)if("object"==typeof n[t])return!1}return!0}function Vn(t){if("boolean"==typeof t[Mn])return t[Mn];const e=Hn(t);if(e!==t.id)return t[Mn]=!1;try{return t[Mn]=xt.verify(t.sig,e,t.pubkey)}catch(e){return t[Mn]=!1}}function Wn(t,e){return(0,a.ci)(xt.sign(Hn(t),e))}function Zn(t,e){if(t.ids&&-1===t.ids.indexOf(e.id)&&!t.ids.some((t=>e.id.startsWith(t))))return!1;if(t.kinds&&-1===t.kinds.indexOf(e.kind))return!1;if(t.authors&&-1===t.authors.indexOf(e.pubkey)&&!t.authors.some((t=>e.pubkey.startsWith(t))))return!1;for(let n in t)if("#"===n[0]){let r=t[`#${n.slice(1)}`];if(r&&!e.tags.find((([t,e])=>t===n.slice(1)&&-1!==r.indexOf(e))))return!1}return!(t.since&&e.created_at<t.since||t.until&&e.created_at>t.until)}function Gn(t,e){let n=e.length+3,r=t.indexOf(`"${e}":`)+n,i=t.slice(r).indexOf('"')+r+1;return t.slice(i,i+64)}function Yn(t,e){let n=e.length,r=t.indexOf(`"${e}":`)+n+3,i=t.slice(r),o=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,o),10)}function Jn(t){let e=t.slice(0,22).indexOf('"EVENT"');if(-1===e)return null;let n=t.slice(e+7+1).indexOf('"');if(-1===n)return null;let r=e+7+1+n,i=t.slice(r+1,80).indexOf('"');if(-1===i)return null;let o=r+1+i;return t.slice(r+1,o)}function Qn(t,e){return e===Gn(t,"id")}function Xn(t,e){return e===Gn(t,"pubkey")}function tr(t,e){return e===Yn(t,"kind")}function er(t,e={}){let{listTimeout:n=3e3,getTimeout:r=3e3,countTimeout:i=3e3}=e;var o,s,a={},c={connect:[],disconnect:[],error:[],notice:[],auth:[]},l={},u={};function h(){return 1===o?.readyState}async function f(t){let e=JSON.stringify(t);if(h()||(await new Promise((t=>setTimeout(t,1e3))),h()))try{o.send(e)}catch(t){console.log(t)}}const d=(t,{verb:e="REQ",skipVerification:n=!1,alreadyHaveEvent:r=null,id:i=Math.random().toString().slice(2)}={})=>{let o=i;a[o]={id:o,filters:t,skipVerification:n,alreadyHaveEvent:r},f([e,o,...t]);let s={sub:(e,i={})=>d(e||t,{skipVerification:i.skipVerification||n,alreadyHaveEvent:i.alreadyHaveEvent||r,id:o}),unsub:()=>{delete a[o],delete l[o],f(["CLOSE",o])},on:(t,e)=>{l[o]=l[o]||{event:[],count:[],eose:[]},l[o][t].push(e)},off:(t,e)=>{let n=l[o],r=n[t].indexOf(e);r>=0&&n[t].splice(r,1)},get events(){return async function*(t){let e;const n=[],r=t=>{e?(e(t),e=void 0):n.push(t)};t.on("event",r);try{for(;;)if(n.length>0)yield n.shift();else{const t=await new Promise((t=>{e=t}));yield t}}finally{t.off("event",r)}}(s)}};return s};function p(t,e){return new Promise(((n,r)=>{if(!t.id)return void r(new Error(`event ${t} has no id`));let i=t.id;f([e,t]),u[i]={resolve:n,reject:r}}))}return{url:t,sub:d,on:(t,e)=>{c[t].push(e),"connect"===t&&1===o?.readyState&&e()},off:(t,e)=>{let n=c[t].indexOf(e);-1!==n&&c[t].splice(n,1)},list:(t,e)=>new Promise((r=>{let i=d(t,e),o=[],s=setTimeout((()=>{i.unsub(),r(o)}),n);i.on("eose",(()=>{i.unsub(),clearTimeout(s),r(o)})),i.on("event",(t=>{o.push(t)}))})),get:(t,e)=>new Promise((n=>{let i=d([t],e),o=setTimeout((()=>{i.unsub(),n(null)}),r);i.on("event",(t=>{i.unsub(),clearTimeout(o),n(t)}))})),count:t=>new Promise((e=>{let n=d(t,{...d,verb:"COUNT"}),r=setTimeout((()=>{n.unsub(),e(null)}),i);n.on("count",(t=>{n.unsub(),clearTimeout(r),e(t)}))})),async publish(t){await p(t,"EVENT")},async auth(t){await p(t,"AUTH")},connect:async function(){h()||await async function(){return s||(s=new Promise(((e,n)=>{try{o=new WebSocket(t)}catch(t){n(t)}o.onopen=()=>{c.connect.forEach((t=>t())),e()},o.onerror=()=>{s=void 0,c.error.forEach((t=>t())),n()},o.onclose=async()=>{s=void 0,c.disconnect.forEach((t=>t()))};let r,i=new zn;function h(){if(0===i.size)return clearInterval(r),void(r=null);var e=i.dequeue();if(!e)return;let n=Jn(e);if(n){let r=a[n];if(r&&r.alreadyHaveEvent&&r.alreadyHaveEvent(Gn(e,"id"),t))return}try{let t=JSON.parse(e);switch(t[0]){case"EVENT":{let e=t[1],n=t[2];return void(jn(n)&&a[e]&&(a[e].skipVerification||Vn(n))&&function(t,e){for(let n=0;n<t.length;n++)if(Zn(t[n],e))return!0;return!1}(a[e].filters,n)&&(a[e],(l[e]?.event||[]).forEach((t=>t(n)))))}case"COUNT":let e=t[1],n=t[2];return void(a[e]&&(l[e]?.count||[]).forEach((t=>t(n))));case"EOSE":{let e=t[1];return void(e in l&&(l[e].eose.forEach((t=>t())),l[e].eose=[]))}case"OK":{let e=t[1],n=t[2],r=t[3]||"";if(e in u){let{resolve:t,reject:i}=u[e];n?t(null):i(new Error(r))}return}case"NOTICE":let r=t[1];return void c.notice.forEach((t=>t(r)));case"AUTH":{let e=t[1];return void c.auth?.forEach((t=>t(e)))}}}catch(t){return}}o.onmessage=t=>{i.enqueue(t.data),r||(r=setInterval(h,0))}})),s)}()},close(){c={connect:[],disconnect:[],error:[],notice:[],auth:[]},l={},u={},o?.readyState===WebSocket.OPEN&&o.close()},get status(){return o?.readyState??3}}}Un({},{getHex64:()=>Gn,getInt:()=>Yn,getSubscriptionId:()=>Jn,matchEventId:()=>Qn,matchEventKind:()=>tr,matchEventPubkey:()=>Xn});var nr={};Un(nr,{BECH32_REGEX:()=>ir,decode:()=>or,naddrEncode:()=>pr,neventEncode:()=>dr,noteEncode:()=>lr,nprofileEncode:()=>fr,npubEncode:()=>cr,nrelayEncode:()=>yr,nsecEncode:()=>ar});var rr=5e3,ir=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function or(t){let{prefix:e,words:n}=_t.gW.decode(t,rr),r=new Uint8Array(_t.gW.fromWords(n));switch(e){case"nprofile":{let t=sr(r);if(!t[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(32!==t[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:(0,a.ci)(t[0][0]),relays:t[1]?t[1].map((t=>Pn.decode(t))):[]}}}case"nevent":{let t=sr(r);if(!t[0]?.[0])throw new Error("missing TLV 0 for nevent");if(32!==t[0][0].length)throw new Error("TLV 0 should be 32 bytes");if(t[2]&&32!==t[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(t[3]&&4!==t[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:(0,a.ci)(t[0][0]),relays:t[1]?t[1].map((t=>Pn.decode(t))):[],author:t[2]?.[0]?(0,a.ci)(t[2][0]):void 0,kind:t[3]?.[0]?parseInt((0,a.ci)(t[3][0]),16):void 0}}}case"naddr":{let t=sr(r);if(!t[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!t[2]?.[0])throw new Error("missing TLV 2 for naddr");if(32!==t[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(!t[3]?.[0])throw new Error("missing TLV 3 for naddr");if(4!==t[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Pn.decode(t[0][0]),pubkey:(0,a.ci)(t[2][0]),kind:parseInt((0,a.ci)(t[3][0]),16),relays:t[1]?t[1].map((t=>Pn.decode(t))):[]}}}case"nrelay":{let t=sr(r);if(!t[0]?.[0])throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Pn.decode(t[0][0])}}case"nsec":case"npub":case"note":return{type:e,data:(0,a.ci)(r)};default:throw new Error(`unknown prefix ${e}`)}}function sr(t){let e={},n=t;for(;n.length>0;){let t=n[0],r=n[1];if(!r)throw new Error(`malformed TLV ${t}`);let i=n.slice(2,2+r);if(n=n.slice(2+r),i.length<r)throw new Error(`not enough data to read on TLV ${t}`);e[t]=e[t]||[],e[t].push(i)}return e}function ar(t){return hr("nsec",t)}function cr(t){return hr("npub",t)}function lr(t){return hr("note",t)}function ur(t,e){let n=_t.gW.toWords(e);return _t.gW.encode(t,n,rr)}function hr(t,e){return ur(t,(0,a.nr)(e))}function fr(t){return ur("nprofile",gr({0:[(0,a.nr)(t.pubkey)],1:(t.relays||[]).map((t=>On.encode(t)))}))}function dr(t){let e;return null!=t.kind&&(e=function(t){const e=new Uint8Array(4);return e[0]=t>>24&255,e[1]=t>>16&255,e[2]=t>>8&255,e[3]=255&t,e}(t.kind)),ur("nevent",gr({0:[(0,a.nr)(t.id)],1:(t.relays||[]).map((t=>On.encode(t))),2:t.author?[(0,a.nr)(t.author)]:[],3:e?[new Uint8Array(e)]:[]}))}function pr(t){let e=new ArrayBuffer(4);return new DataView(e).setUint32(0,t.kind,!1),ur("naddr",gr({0:[On.encode(t.identifier)],1:(t.relays||[]).map((t=>On.encode(t))),2:[(0,a.nr)(t.pubkey)],3:[new Uint8Array(e)]}))}function yr(t){return ur("nrelay",gr({0:[On.encode(t)]}))}function gr(t){let e=[];return Object.entries(t).forEach((([t,n])=>{n.forEach((n=>{let r=new Uint8Array(n.length+2);r.set([parseInt(t)],0),r.set([n.length],1),r.set(n,2),e.push(r)}))})),(0,a.eV)(...e)}var wr={};async function br(t,e,n){const r=vr(ot.getSharedSecret(t,"02"+e));let i=Uint8Array.from((0,a.O6)(16)),o=On.encode(n),s=await crypto.subtle.importKey("raw",r,{name:"AES-CBC"},!1,["encrypt"]),c=await crypto.subtle.encrypt({name:"AES-CBC",iv:i},s,o);return`${_t.US.encode(new Uint8Array(c))}?iv=${_t.US.encode(new Uint8Array(i.buffer))}`}async function mr(t,e,n){let[r,i]=n.split("?iv="),o=vr(ot.getSharedSecret(t,"02"+e)),s=await crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["decrypt"]),a=_t.US.decode(r),c=_t.US.decode(i),l=await crypto.subtle.decrypt({name:"AES-CBC",iv:c},s,a);return Pn.decode(l)}function vr(t){return t.slice(1,33)}Un(wr,{decrypt:()=>mr,encrypt:()=>br}),"undefined"!=typeof crypto&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle),Un({},{NIP05_REGEX:()=>kr,queryProfile:()=>Ar,searchDomain:()=>_r,useFetchImplementation:()=>xr});var Er,kr=/^(?:([\w.+-]+)@)?([\w.-]+)$/;try{Er=fetch}catch{}function xr(t){Er=t}async function _r(t,e=""){try{return(await(await Er(`https://${t}/.well-known/nostr.json?name=${e}`)).json()).names}catch(t){return{}}}async function Ar(t){const e=t.match(kr);if(!e)return null;const[n,r="_",i]=e;try{const t=await Er(`https://${i}/.well-known/nostr.json?name=${r}`),{names:e,relays:n}=function(t){const e={names:{}};for(const[n,r]of Object.entries(t.names))"string"==typeof n&&"string"==typeof r&&(e.names[n]=r);if(t.relays){e.relays={};for(const[n,r]of Object.entries(t.relays))"string"==typeof n&&Array.isArray(r)&&(e.relays[n]=r.filter((t=>"string"==typeof t)))}return e}(await t.json()),o=e[r];return o?{pubkey:o,relays:n?.[o]}:null}catch(t){return null}}function Sr(t,e){let n=Bn.fromMasterSeed(ae(t,e)).derive("m/44'/1237'/0'/0/0").privateKey;if(!n)throw new Error("could not derive private key");return(0,a.ci)(n)}function Br(){return function(t,e=128){if(St.ZP.number(e),e%32!=0||e>256)throw new TypeError("Invalid entropy");return function(t,e){return re(t),oe(e).encode(t).join(te(e)?"":" ")}((0,a.O6)(e/8),t)}(At)}function Cr(t){return function(t,e){try{!function(t,e){const{words:n}=ne(t);re(oe(e).decode(n))}(t,e)}catch(t){return!1}return!0}(t,At)}function Ir(t){const e={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of t.tags)"e"===r[0]&&r[1]&&n.push(r),"p"===r[0]&&r[1]&&e.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let t=0;t<n.length;t++){const r=n[t],[i,o,s,a]=r,c={id:o,relays:s?[s]:[]},l=0===t,u=t===n.length-1;"root"!==a?"reply"!==a?"mention"!==a?l?e.root=c:u?e.reply=c:e.mentions.push(c):e.mentions.push(c):e.reply=c:e.root=c}return e}function Rr(t){let e=0;for(let n=0;n<t.length;n++){const r=parseInt(t[n],16);if(0!==r){e+=Math.clz32(r)-28;break}e+=4}return e}function Nr(t,e){let n=0;const r=t,i=["nonce",n.toString(),e.toString()];for(r.tags.push(i);;){const t=Math.floor((new Date).getTime()/1e3);if(t!==r.created_at&&(n=0,r.created_at=t),i[1]=(++n).toString(),r.id=Hn(r),Rr(r.id)>=e)break}return r}function Ur(t,e,n,r){return qn({kind:6,tags:[...t.tags??[],["e",e.id,n],["p",e.pubkey]],content:""===t.content?"":JSON.stringify(e),created_at:t.created_at},r)}function Tr(t){if(6!==t.kind)return;let e,n;for(let r=t.tags.length-1;r>=0&&(void 0===e||void 0===n);r--){const i=t.tags[r];i.length>=2&&("e"===i[0]&&void 0===e?e=i:"p"===i[0]&&void 0===n&&(n=i))}return void 0!==e?{id:e[1],relays:[e[2],n?.[2]].filter((t=>"string"==typeof t)),author:n?.[1]}:void 0}function Pr(t,{skipVerification:e}={}){const n=Tr(t);if(void 0===n||""===t.content)return;let r;try{r=JSON.parse(t.content)}catch(t){return}return r.id===n.id&&(e||Vn(r))?r:void 0}Un({},{generateSeedWords:()=>Br,privateKeyFromSeedWords:()=>Sr,validateWords:()=>Cr}),Un({},{parse:()=>Ir}),Un({},{getPow:()=>Rr,minePow:()=>Nr}),Un({},{finishRepostEvent:()=>Ur,getRepostedEvent:()=>Pr,getRepostedEventPointer:()=>Tr}),Un({},{NOSTR_URI_REGEX:()=>Or,parse:()=>Fr,test:()=>Lr});var Or=new RegExp(`nostr:(${ir.source})`);function Lr(t){return"string"==typeof t&&new RegExp(`^${Or.source}$`).test(t)}function Fr(t){const e=t.match(new RegExp(`^${Or.source}$`));if(!e)throw new Error(`Invalid Nostr URI: ${t}`);return{uri:e[0],value:e[1],decoded:or(e[1])}}function $r(t,e,n){const r=e.tags.filter((t=>t.length>=2&&("e"===t[0]||"p"===t[0])));return qn({...t,kind:7,tags:[...t.tags??[],...r,["e",e.id],["p",e.pubkey]],content:t.content??"+"},n)}function Dr(t){if(7!==t.kind)return;let e,n;for(let r=t.tags.length-1;r>=0&&(void 0===e||void 0===n);r--){const i=t.tags[r];i.length>=2&&("e"===i[0]&&void 0===e?e=i:"p"===i[0]&&void 0===n&&(n=i))}return void 0!==e&&void 0!==n?{id:e[1],relays:[e[2],n[2]].filter((t=>void 0!==t)),author:n[1]}:void 0}function zr(t,e){let n=[];(e.kind||-1)>=0&&n.push(`kind=${e.kind}`),e.until&&n.push(`created_at<${e.until}`),e.since&&n.push(`created_at>${e.since}`);let r=n.join("&");if(""===r)throw new Error("refusing to create a delegation without any conditions");let i=(0,s.J)(On.encode(`nostr:delegation:${e.pubkey}:${r}`)),o=(0,a.ci)(xt.sign(i,t));return{from:Tn(t),to:e.pubkey,cond:r,sig:o}}function Mr(t){let e=t.tags.find((t=>"delegation"===t[0]&&t.length>=4));if(!e)return null;let n=e[1],r=e[2],i=e[3],o=r.split("&");for(let e=0;e<o.length;e++){let[n,r,i]=o[e].split(/\b/);if(("kind"!==n||"="!==r||t.kind!==parseInt(i))&&!("created_at"===n&&"<"===r&&t.created_at<parseInt(i)||"created_at"===n&&">"===r&&t.created_at>parseInt(i)))return null}let a=(0,s.J)(On.encode(`nostr:delegation:${t.pubkey}:${r}`));return xt.verify(i,a,n)?n:null}Un({},{finishReactionEvent:()=>$r,getReactedEventPointer:()=>Dr}),Un({},{createDelegation:()=>zr,getDelegator:()=>Mr}),Un({},{matchAll:()=>Hr,regex:()=>qr,replaceAll:()=>Kr});var qr=()=>new RegExp(`\\b${Or.source}\\b`,"g");function*Hr(t){const e=t.matchAll(qr());for(const t of e)try{const[e,n]=t;yield{uri:e,value:n,decoded:or(n),start:t.index,end:t.index+e.length}}catch(t){}}function Kr(t,e){return t.replaceAll(qr(),((t,n)=>e({uri:t,value:n,decoded:or(n)})))}Un({},{channelCreateEvent:()=>Vr,channelHideMessageEvent:()=>Gr,channelMessageEvent:()=>Zr,channelMetadataEvent:()=>Wr,channelMuteUserEvent:()=>Yr});var jr,Vr=(t,e)=>{let n;if("object"==typeof t.content)n=JSON.stringify(t.content);else{if("string"!=typeof t.content)return;n=t.content}return qn({kind:40,tags:[...t.tags??[]],content:n,created_at:t.created_at},e)},Wr=(t,e)=>{let n;if("object"==typeof t.content)n=JSON.stringify(t.content);else{if("string"!=typeof t.content)return;n=t.content}return qn({kind:41,tags:[["e",t.channel_create_event_id],...t.tags??[]],content:n,created_at:t.created_at},e)},Zr=(t,e)=>{const n=[["e",t.channel_create_event_id,t.relay_url,"root"]];return t.reply_to_channel_message_event_id&&n.push(["e",t.reply_to_channel_message_event_id,t.relay_url,"reply"]),qn({kind:42,tags:[...n,...t.tags??[]],content:t.content,created_at:t.created_at},e)},Gr=(t,e)=>{let n;if("object"==typeof t.content)n=JSON.stringify(t.content);else{if("string"!=typeof t.content)return;n=t.content}return qn({kind:43,tags:[["e",t.channel_message_event_id],...t.tags??[]],content:n,created_at:t.created_at},e)},Yr=(t,e)=>{let n;if("object"==typeof t.content)n=JSON.stringify(t.content);else{if("string"!=typeof t.content)return;n=t.content}return qn({kind:44,tags:[["p",t.pubkey_to_mute],...t.tags??[]],content:n,created_at:t.created_at},e)};Un({},{useFetchImplementation:()=>Jr,validateGithub:()=>Qr});try{jr=fetch}catch{}function Jr(t){jr=t}async function Qr(t,e,n){try{return await(await jr(`https://gist.github.com/${e}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${t}`}catch(t){return!1}}Un({},{authenticate:()=>Xr});var Xr=async({challenge:t,relay:e,sign:n})=>{const r={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e.url],["challenge",t]],content:""};return e.auth(await n(r))};Un({},{decrypt:()=>ni,encrypt:()=>ei,utils:()=>ti});var ti={v2:{maxPlaintextSize:65408,minCiphertextSize:100,maxCiphertextSize:102400,getConversationKey:(t,e)=>ot.getSharedSecret(t,"02"+e).subarray(1,33),getMessageKeys(t,e){const n=(0,Rn.Di)(s.J,t,e,"nip44-v2",76);return{encryption:n.subarray(0,32),nonce:n.subarray(32,44),auth:n.subarray(44,76)}},calcPadding(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("expected positive integer");if(t<=32)return 32;const e=1<<Math.floor(Math.log2(t-1))+1,n=e<=256?32:e/8;return n*(Math.floor((t-1)/n)+1)},pad(t){const e=On.encode(t),n=e.length;if(n<1||n>=ti.v2.maxPlaintextSize)throw new Error("invalid plaintext length: must be between 1b and 64KB");const r=ti.v2.calcPadding(n),i=new Uint8Array(r-n),o=new Uint8Array(2);return new DataView(o.buffer).setUint16(0,n),(0,a.eV)(o,e,i)},unpad(t){const e=new DataView(t.buffer).getUint16(0),n=t.subarray(2,2+e);if(0===e||n.length!==e||t.length!==2+ti.v2.calcPadding(e))throw new Error("invalid padding");return Pn.decode(n)}}};function ei(t,e,n={}){const r=n.version??2;if(2!==r)throw new Error("unknown encryption version "+r);const i=n.salt??(0,a.O6)(32);(0,In.ql)(i,32);const o=ti.v2.getMessageKeys(t,i),c=ti.v2.pad(e),l=(0,Cn.a0)(o.encryption,o.nonce,c),u=(0,Y.b)(s.J,o.auth,l);return _t.US.encode((0,a.eV)(new Uint8Array([r]),i,l,u))}function ni(t,e){const n=ti.v2;(0,In.ql)(t,32);const r=e.length;if(r<n.minCiphertextSize||r>=n.maxCiphertextSize)throw new Error("invalid ciphertext length: "+r);if("#"===e[0])throw new Error("unknown encryption version");let i;try{i=_t.US.decode(e)}catch(t){throw new Error("invalid base64: "+t.message)}const o=i.subarray(0,1)[0];if(2!==o)throw new Error("unknown encryption version "+o);const a=i.subarray(1,33),c=i.subarray(33,-32),l=i.subarray(-32),u=n.getMessageKeys(t,a),h=(0,Y.b)(s.J,u.auth,c);if(!(0,In.Wd)(h,l))throw new Error("invalid MAC");const f=(0,Cn.a0)(u.encryption,u.nonce,c);return n.unpad(f)}function ri(t){const{pathname:e,searchParams:n}=new URL(t),r=e,i=n.get("relay"),o=n.get("secret");if(!r||!i||!o)throw new Error("invalid connection string");return{pubkey:r,relay:i,secret:o}}async function ii({pubkey:t,secret:e,invoice:n}){const r={method:"pay_invoice",params:{invoice:n}},i=await br(e,t,JSON.stringify(r));return qn({kind:23194,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",t]]},e)}Un({},{makeNwcRequestEvent:()=>ii,parseConnectionString:()=>ri});var oi,si={};Un(si,{getZapEndpoint:()=>ci,makeZapReceipt:()=>hi,makeZapRequest:()=>li,useFetchImplementation:()=>ai,validateZapRequest:()=>ui});try{oi=fetch}catch{}function ai(t){oi=t}async function ci(t){try{let e="",{lud06:n,lud16:r}=JSON.parse(t.content);if(n){let{words:t}=_t.gW.decode(n,1e3),r=_t.gW.fromWords(t);e=Pn.decode(r)}else{if(!r)return null;{let[t,n]=r.split("@");e=`https://${n}/.well-known/lnurlp/${t}`}}let i=await oi(e),o=await i.json();if(o.allowsNostr&&o.nostrPubkey)return o.callback}catch(t){}return null}function li({profile:t,event:e,amount:n,relays:r,comment:i=""}){if(!n)throw new Error("amount not given");if(!t)throw new Error("profile not given");let o={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",t],["amount",n.toString()],["relays",...r]]};return e&&o.tags.push(["e",e]),o}function ui(t){let e;try{e=JSON.parse(t)}catch(t){return"Invalid zap request JSON."}if(!jn(e))return"Zap request is not a valid Nostr event.";if(!Vn(e))return"Invalid signature on zap request.";let n=e.tags.find((([t,e])=>"p"===t&&e));if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=e.tags.find((([t,e])=>"e"===t&&e));return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":e.tags.find((([t,e])=>"relays"===t&&e))?null:"Zap request doesn't have a 'relays' tag."}function hi({zapRequest:t,preimage:e,bolt11:n,paidAt:r}){let i=JSON.parse(t).tags.filter((([t])=>"e"===t||"p"===t||"a"===t)),o={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...i,["bolt11",n],["description",t]]};return e&&o.tags.push(["preimage",e]),o}Un({},{getToken:()=>di,unpackEventFromToken:()=>yi,validateEvent:()=>gi,validateToken:()=>pi});var fi="Nostr ";async function di(t,e,n,r=!1){if(!t||!e)throw new Error("Missing loginUrl or httpMethod");const i=function(t=255){return{kind:t,content:"",tags:[],created_at:0}}(27235);i.tags=[["u",t],["method",e]],i.created_at=Math.round((new Date).getTime()/1e3);const o=await n(i);return(r?fi:"")+_t.US.encode(On.encode(JSON.stringify(o)))}async function pi(t,e,n){const r=await yi(t).catch((t=>{throw t}));return await gi(r,e,n).catch((t=>{throw t}))}async function yi(t){if(!t)throw new Error("Missing token");t=t.replace(fi,"");const e=Pn.decode(_t.US.decode(t));if(!e||0===e.length||!e.startsWith("{"))throw new Error("Invalid token");return JSON.parse(e)}async function gi(t,e,n){if(!t)throw new Error("Invalid nostr event");if(!Vn(t))throw new Error("Invalid nostr event, signature invalid");if(27235!==t.kind)throw new Error("Invalid nostr event, kind invalid");if(!t.created_at)throw new Error("Invalid nostr event, created_at invalid");if(Math.round((new Date).getTime()/1e3)-t.created_at>60)throw new Error("Invalid nostr event, expired");const r=t.tags.find((t=>"u"===t[0]));if(1!==r?.length&&r?.[1]!==e)throw new Error("Invalid nostr event, url tag invalid");const i=t.tags.find((t=>"method"===t[0]));if(1!==i?.length&&i?.[1].toLowerCase()!==n.toLowerCase())throw new Error("Invalid nostr event, method tag invalid");return!0}var wi=n(8669),bi=n(1227);function mi(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function vi(t,...e){if(!((n=t)instanceof Uint8Array||null!=n&&"object"==typeof n&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function Ei(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}const ki="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,xi=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),_i=(t,e)=>t<<32-e|t>>>e;function Ai(t){return"string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),vi(t),t}new Uint8Array(new Uint32Array([287454020]).buffer)[0];class Si{clone(){return this._cloneInto()}}function Bi(t){const e=e=>t().update(Ai(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Ci(t=32){if(ki&&"function"==typeof ki.getRandomValues)return ki.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}const Ii=(t,e,n)=>t&e^t&n^e&n;class Ri extends Si{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=xi(this.buffer)}update(t){Ei(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=Ai(t)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)n.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=xi(t);for(;r<=i-o;o+=r)this.process(e,o)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ei(this),function(t,e){vi(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let t=o;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),c=r?4:0,l=r?0:4;t.setUint32(e+c,s,r),t.setUint32(e+l,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const s=xi(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)s.setUint32(4*t,l[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return t.length=r,t.pos=s,t.finished=i,t.destroyed=o,r%e&&t.buffer.set(n),t}}const Ni=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ui=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ti=new Uint32Array(64);class Pi extends Ri{constructor(){super(64,32,8,!1),this.A=0|Ui[0],this.B=0|Ui[1],this.C=0|Ui[2],this.D=0|Ui[3],this.E=0|Ui[4],this.F=0|Ui[5],this.G=0|Ui[6],this.H=0|Ui[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:o,G:s,H:a}=this;return[t,e,n,r,i,o,s,a]}set(t,e,n,r,i,o,s,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)Ti[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=Ti[t-15],n=Ti[t-2],r=_i(e,7)^_i(e,18)^e>>>3,i=_i(n,17)^_i(n,19)^n>>>10;Ti[t]=i+Ti[t-7]+r+Ti[t-16]|0}let{A:n,B:r,C:i,D:o,E:s,F:a,G:c,H:l}=this;for(let t=0;t<64;t++){const e=l+(_i(s,6)^_i(s,11)^_i(s,25))+((u=s)&a^~u&c)+Ni[t]+Ti[t]|0,h=(_i(n,2)^_i(n,13)^_i(n,22))+Ii(n,r,i)|0;l=c,c=a,a=s,s=o+e|0,o=i,i=r,r=n,n=e+h|0}var u;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,r,i,o,s,a,c,l)}roundClean(){Ti.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Oi=Bi((()=>new Pi)),Li=(BigInt(0),BigInt(1)),Fi=BigInt(2);function $i(t){return t instanceof Uint8Array||null!=t&&"object"==typeof t&&"Uint8Array"===t.constructor.name}function Di(t){if(!$i(t))throw new Error("Uint8Array expected")}const zi=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function Mi(t){Di(t);let e="";for(let n=0;n<t.length;n++)e+=zi[t[n]];return e}function qi(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}const Hi={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Ki(t){return t>=Hi._0&&t<=Hi._9?t-Hi._0:t>=Hi._A&&t<=Hi._F?t-(Hi._A-10):t>=Hi._a&&t<=Hi._f?t-(Hi._a-10):void 0}function ji(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let e=0,i=0;e<n;e++,i+=2){const n=Ki(t.charCodeAt(i)),o=Ki(t.charCodeAt(i+1));if(void 0===n||void 0===o){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[e]=16*n+o}return r}function Vi(t){return qi(Mi(t))}function Wi(t){return Di(t),qi(Mi(Uint8Array.from(t).reverse()))}function Zi(t,e){return ji(t.toString(16).padStart(2*e,"0"))}function Gi(t,e){return Zi(t,e).reverse()}function Yi(t,e,n){let r;if("string"==typeof e)try{r=ji(e)}catch(n){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${n}`)}else{if(!$i(e))throw new Error(`${t} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function Ji(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];Di(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n}const Qi=t=>(Fi<<BigInt(t-1))-Li,Xi=t=>new Uint8Array(t),to=t=>Uint8Array.from(t);function eo(t,e,n){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=Xi(t),i=Xi(t),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},a=(...t)=>n(i,r,...t),c=(t=Xi())=>{i=a(to([0]),t),r=a(),0!==t.length&&(i=a(to([1]),t),r=a())},l=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const n=[];for(;t<e;){r=a();const e=r.slice();n.push(e),t+=r.length}return Ji(...n)};return(t,e)=>{let n;for(s(),c(t);!(n=e(l()));)c();return s(),n}}const no={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||$i(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function ro(t,e,n={}){const r=(e,n,r)=>{const i=no[n];if("function"!=typeof i)throw new Error(`Invalid validator "${n}", expected function`);const o=t[e];if(!(r&&void 0===o||i(o,t)))throw new Error(`Invalid param ${String(e)}=${o} (${typeof o}), expected ${n}`)};for(const[t,n]of Object.entries(e))r(t,n,!1);for(const[t,e]of Object.entries(n))r(t,e,!0);return t}const io=BigInt(0),oo=BigInt(1),so=BigInt(2),ao=BigInt(3),co=BigInt(4),lo=BigInt(5),uo=BigInt(8);function ho(t,e){const n=t%e;return n>=io?n:e+n}function fo(t,e,n){if(n<=io||e<io)throw new Error("Expected power/modulo > 0");if(n===oo)return io;let r=oo;for(;e>io;)e&oo&&(r=r*t%n),t=t*t%n,e>>=oo;return r}function po(t,e,n){let r=t;for(;e-- >io;)r*=r,r%=n;return r}function yo(t,e){if(t===io||e<=io)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=ho(t,e),r=e,i=io,o=oo,s=oo,a=io;for(;n!==io;){const t=r/n,e=r%n,c=i-s*t,l=o-a*t;r=n,n=e,i=s,o=a,s=c,a=l}if(r!==oo)throw new Error("invert: does not exist");return ho(i,e)}BigInt(9),BigInt(16);const go=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function wo(t,e){const n=void 0!==e?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function bo(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function mo(t){const e=bo(t);return e+Math.ceil(e/2)}class vo extends Si{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");mi(t.outputLen),mi(t.blockLen)}(t);const n=Ai(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?t.create().update(n).digest():n);for(let t=0;t<i.length;t++)i[t]^=54;this.iHash.update(i),this.oHash=t.create();for(let t=0;t<i.length;t++)i[t]^=106;this.oHash.update(i),i.fill(0)}update(t){return Ei(this),this.iHash.update(t),this}digestInto(t){Ei(this),vi(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return t.finished=r,t.destroyed=i,t.blockLen=o,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Eo=(t,e,n)=>new vo(t,e).update(n).digest();Eo.create=(t,e)=>new vo(t,e);const ko=BigInt(0),xo=BigInt(1);function _o(t){return ro(t.Fp,go.reduce(((t,e)=>(t[e]="function",t)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),ro(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...wo(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const{bytesToNumberBE:Ao,hexToBytes:So}=o,Bo={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(t){const{Err:e}=Bo;if(t.length<2||2!==t[0])throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(128&r[0])throw new e("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Ao(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Bo,n="string"==typeof t?So(t):t;Di(n);let r=n.length;if(r<2||48!=n[0])throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:o}=Bo._parseInt(n.subarray(2)),{d:s,l:a}=Bo._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(t){const e=t=>8&Number.parseInt(t[0],16)?"00"+t:t,n=t=>{const e=t.toString(16);return 1&e.length?`0${e}`:e},r=e(n(t.s)),i=e(n(t.r)),o=r.length/2,s=i.length/2,a=n(o),c=n(s);return`30${n(s+o+4)}02${c}${i}02${a}${r}`}},Co=BigInt(0),Io=BigInt(1),Ro=(BigInt(2),BigInt(3));function No(t){const e=function(t){const e=_o(t);return ro(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:n,n:r}=e,i=n.BYTES+1,o=2*n.BYTES+1;function s(t){return ho(t,r)}function a(t){return yo(t,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:h}=function(t){const e=function(t){const e=_o(t);ro(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:n}=e,r=e.toBytes||((t,e,r)=>{const i=e.toAffine();return Ji(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),i=e.fromBytes||(t=>{const e=t.subarray(1);return{x:n.fromBytes(e.subarray(0,n.BYTES)),y:n.fromBytes(e.subarray(n.BYTES,2*n.BYTES))}});function o(t){const{a:r,b:i}=e,o=n.sqr(t),s=n.mul(o,t);return n.add(n.add(s,n.mul(t,r)),i)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(t){return"bigint"==typeof t&&Co<t&&t<e.n}function a(t){if(!s(t))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(t){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:o}=e;if(n&&"bigint"!=typeof t){if($i(t)&&(t=Mi(t)),"string"!=typeof t||!n.includes(t.length))throw new Error("Invalid key");t=t.padStart(2*r,"0")}let s;try{s="bigint"==typeof t?t:Vi(Yi("private key",t,r))}catch(e){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof t}`)}return i&&(s=ho(s,o)),a(s),s}const l=new Map;function u(t){if(!(t instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(t,e,r){if(this.px=t,this.py=e,this.pz=r,null==t||!n.isValid(t))throw new Error("x required");if(null==e||!n.isValid(e))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(t){const{x:e,y:r}=t||{};if(!t||!n.isValid(e)||!n.isValid(r))throw new Error("invalid affine point");if(t instanceof h)throw new Error("projective point not allowed");const i=t=>n.eql(t,n.ZERO);return i(e)&&i(r)?h.ZERO:new h(e,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=n.invertBatch(t.map((t=>t.pz)));return t.map(((t,n)=>t.toAffine(e[n]))).map(h.fromAffine)}static fromHex(t){const e=h.fromAffine(i(Yi("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return h.BASE.multiply(c(t))}_setWindowSize(t){this._WINDOW_SIZE=t,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:t,y:r}=this.toAffine();if(!n.isValid(t)||!n.isValid(r))throw new Error("bad point: x or y not FE");const i=n.sqr(r),s=o(t);if(!n.eql(i,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:t}=this.toAffine();if(n.isOdd)return!n.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){u(t);const{px:e,py:r,pz:i}=this,{px:o,py:s,pz:a}=t,c=n.eql(n.mul(e,a),n.mul(o,i)),l=n.eql(n.mul(r,a),n.mul(s,i));return c&&l}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:t,b:r}=e,i=n.mul(r,Ro),{px:o,py:s,pz:a}=this;let c=n.ZERO,l=n.ZERO,u=n.ZERO,f=n.mul(o,o),d=n.mul(s,s),p=n.mul(a,a),y=n.mul(o,s);return y=n.add(y,y),u=n.mul(o,a),u=n.add(u,u),c=n.mul(t,u),l=n.mul(i,p),l=n.add(c,l),c=n.sub(d,l),l=n.add(d,l),l=n.mul(c,l),c=n.mul(y,c),u=n.mul(i,u),p=n.mul(t,p),y=n.sub(f,p),y=n.mul(t,y),y=n.add(y,u),u=n.add(f,f),f=n.add(u,f),f=n.add(f,p),f=n.mul(f,y),l=n.add(l,f),p=n.mul(s,a),p=n.add(p,p),f=n.mul(p,y),c=n.sub(c,f),u=n.mul(p,d),u=n.add(u,u),u=n.add(u,u),new h(c,l,u)}add(t){u(t);const{px:r,py:i,pz:o}=this,{px:s,py:a,pz:c}=t;let l=n.ZERO,f=n.ZERO,d=n.ZERO;const p=e.a,y=n.mul(e.b,Ro);let g=n.mul(r,s),w=n.mul(i,a),b=n.mul(o,c),m=n.add(r,i),v=n.add(s,a);m=n.mul(m,v),v=n.add(g,w),m=n.sub(m,v),v=n.add(r,o);let E=n.add(s,c);return v=n.mul(v,E),E=n.add(g,b),v=n.sub(v,E),E=n.add(i,o),l=n.add(a,c),E=n.mul(E,l),l=n.add(w,b),E=n.sub(E,l),d=n.mul(p,v),l=n.mul(y,b),d=n.add(l,d),l=n.sub(w,d),d=n.add(w,d),f=n.mul(l,d),w=n.add(g,g),w=n.add(w,g),b=n.mul(p,b),v=n.mul(y,v),w=n.add(w,b),b=n.sub(g,b),b=n.mul(p,b),v=n.add(v,b),g=n.mul(w,v),f=n.add(f,g),g=n.mul(E,v),l=n.mul(m,l),l=n.sub(l,g),g=n.mul(m,w),d=n.mul(E,d),d=n.add(d,g),new h(l,f,d)}subtract(t){return this.add(t.negate())}is0(){return this.equals(h.ZERO)}wNAF(t){return d.wNAFCached(this,l,t,(t=>{const e=n.invertBatch(t.map((t=>t.pz)));return t.map(((t,n)=>t.toAffine(e[n]))).map(h.fromAffine)}))}multiplyUnsafe(t){const r=h.ZERO;if(t===Co)return r;if(a(t),t===Io)return this;const{endo:i}=e;if(!i)return d.unsafeLadder(this,t);let{k1neg:o,k1:s,k2neg:c,k2:l}=i.splitScalar(t),u=r,f=r,p=this;for(;s>Co||l>Co;)s&Io&&(u=u.add(p)),l&Io&&(f=f.add(p)),p=p.double(),s>>=Io,l>>=Io;return o&&(u=u.negate()),c&&(f=f.negate()),f=new h(n.mul(f.px,i.beta),f.py,f.pz),u.add(f)}multiply(t){a(t);let r,i,o=t;const{endo:s}=e;if(s){const{k1neg:t,k1:e,k2neg:a,k2:c}=s.splitScalar(o);let{p:l,f:u}=this.wNAF(e),{p:f,f:p}=this.wNAF(c);l=d.constTimeNegate(t,l),f=d.constTimeNegate(a,f),f=new h(n.mul(f.px,s.beta),f.py,f.pz),r=l.add(f),i=u.add(p)}else{const{p:t,f:e}=this.wNAF(o);r=t,i=e}return h.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(t,e,n){const r=h.BASE,i=(t,e)=>e!==Co&&e!==Io&&t.equals(r)?t.multiply(e):t.multiplyUnsafe(e),o=i(this,e).add(i(t,n));return o.is0()?void 0:o}toAffine(t){const{px:e,py:r,pz:i}=this,o=this.is0();null==t&&(t=o?n.ONE:n.inv(i));const s=n.mul(e,t),a=n.mul(r,t),c=n.mul(i,t);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:t,isTorsionFree:n}=e;if(t===Io)return!0;if(n)return n(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:n}=e;return t===Io?this:n?n(h,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return this.assertValidity(),r(h,this,t)}toHex(t=!0){return Mi(this.toRawBytes(t))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,d=function(t,e){const n=(t,e)=>{const n=e.negate();return t?n:e},r=t=>({windows:Math.ceil(e/t)+1,windowSize:2**(t-1)});return{constTimeNegate:n,unsafeLadder(e,n){let r=t.ZERO,i=e;for(;n>ko;)n&xo&&(r=r.add(i)),i=i.double(),n>>=xo;return r},precomputeWindow(t,e){const{windows:n,windowSize:i}=r(e),o=[];let s=t,a=s;for(let t=0;t<n;t++){a=s,o.push(a);for(let t=1;t<i;t++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(e,i,o){const{windows:s,windowSize:a}=r(e);let c=t.ZERO,l=t.BASE;const u=BigInt(2**e-1),h=2**e,f=BigInt(e);for(let t=0;t<s;t++){const e=t*a;let r=Number(o&u);o>>=f,r>a&&(r-=h,o+=xo);const s=e,d=e+Math.abs(r)-1,p=t%2!=0,y=r<0;0===r?l=l.add(n(p,i[s])):c=c.add(n(y,i[d]))}return{p:c,f:l}},wNAFCached(t,e,n,r){const i=t._WINDOW_SIZE||1;let o=e.get(t);return o||(o=this.precomputeWindow(t,i),1!==i&&e.set(t,r(o))),this.wNAF(i,o,n)}}}(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}({...e,toBytes(t,e,r){const i=e.toAffine(),o=n.toBytes(i.x),s=Ji;return r?s(Uint8Array.from([e.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,n.toBytes(i.y))},fromBytes(t){const e=t.length,r=t[0],s=t.subarray(1);if(e!==i||2!==r&&3!==r){if(e===o&&4===r)return{x:n.fromBytes(s.subarray(0,n.BYTES)),y:n.fromBytes(s.subarray(n.BYTES,2*n.BYTES))};throw new Error(`Point of length ${e} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const t=Vi(s);if(!(Co<(a=t)&&a<n.ORDER))throw new Error("Point is not on curve");const e=u(t);let i;try{i=n.sqrt(e)}catch(t){const e=t instanceof Error?": "+t.message:"";throw new Error("Point is not on curve"+e)}return 1==(1&r)!=((i&Io)===Io)&&(i=n.neg(i)),{x:t,y:i}}var a}}),f=t=>Mi(Zi(t,e.nByteLength));function d(t){return t>r>>Io}const p=(t,e,n)=>Vi(t.slice(e,n));class y{constructor(t,e,n){this.r=t,this.s=e,this.recovery=n,this.assertValidity()}static fromCompact(t){const n=e.nByteLength;return t=Yi("compactSignature",t,2*n),new y(p(t,0,n),p(t,n,2*n))}static fromDER(t){const{r:e,s:n}=Bo.toSig(Yi("DER",t));return new y(e,n)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(t){return new y(this.r,this.s,t)}recoverPublicKey(t){const{r,s:i,recovery:o}=this,l=m(Yi("msgHash",t));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const u=2===o||3===o?r+e.n:r;if(u>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=0==(1&o)?"02":"03",d=c.fromHex(h+f(u)),p=a(u),y=s(-l*p),g=s(i*p),w=c.BASE.multiplyAndAddUnsafe(d,y,g);if(!w)throw new Error("point at infinify");return w.assertValidity(),w}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return ji(this.toDERHex())}toDERHex(){return Bo.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ji(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const g={isValidPrivateKey(t){try{return l(t),!0}catch(t){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const t=mo(e.n);return function(t,e,n=!1){const r=t.length,i=bo(e),o=mo(e);if(r<16||r<o||r>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${r}`);const s=ho(n?Vi(t):Wi(t),e-oo)+oo;return n?Gi(s,i):Zi(s,i)}(e.randomBytes(t),e.n)},precompute:(t=8,e=c.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function w(t){const e=$i(t),n="string"==typeof t,r=(e||n)&&t.length;return e?r===i||r===o:n?r===2*i||r===2*o:t instanceof c}const b=e.bits2int||function(t){const n=Vi(t),r=8*t.length-e.nBitLength;return r>0?n>>BigInt(r):n},m=e.bits2int_modN||function(t){return s(b(t))},v=Qi(e.nBitLength);function E(t){if("bigint"!=typeof t)throw new Error("bigint expected");if(!(Co<=t&&t<v))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Zi(t,e.nByteLength)}const k={lowS:e.lowS,prehash:!1},x={lowS:e.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return c.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,n=!0){if(w(t))throw new Error("first arg must be private key");if(!w(e))throw new Error("second arg must be public key");return c.fromHex(e).multiply(l(t)).toRawBytes(n)},sign:function(t,r,i=k){const{seed:o,k2sig:u}=function(t,r,i=k){if(["recovered","canonical"].some((t=>t in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:u}=e;let{lowS:f,prehash:p,extraEntropy:g}=i;null==f&&(f=!0),t=Yi("msgHash",t),p&&(t=Yi("prehashed msgHash",o(t)));const w=m(t),v=l(r),x=[E(v),E(w)];if(null!=g&&!1!==g){const t=!0===g?u(n.BYTES):g;x.push(Yi("extraEntropy",t))}const _=Ji(...x),A=w;return{seed:_,k2sig:function(t){const e=b(t);if(!h(e))return;const n=a(e),r=c.BASE.multiply(e).toAffine(),i=s(r.x);if(i===Co)return;const o=s(n*s(A+i*v));if(o===Co)return;let l=(r.x===i?0:2)|Number(r.y&Io),u=o;return f&&d(o)&&(u=function(t){return d(t)?s(-t):t}(o),l^=1),new y(i,u,l)}}}(t,r,i),f=e;return eo(f.hash.outputLen,f.nByteLength,f.hmac)(o,u)},verify:function(t,n,r,i=x){const o=t;if(n=Yi("msgHash",n),r=Yi("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:l,prehash:u}=i;let h,f;try{if("string"==typeof o||$i(o))try{h=y.fromDER(o)}catch(t){if(!(t instanceof Bo.Err))throw t;h=y.fromCompact(o)}else{if("object"!=typeof o||"bigint"!=typeof o.r||"bigint"!=typeof o.s)throw new Error("PARSE");{const{r:t,s:e}=o;h=new y(t,e)}}f=c.fromHex(r)}catch(t){if("PARSE"===t.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(l&&h.hasHighS())return!1;u&&(n=e.hash(n));const{r:d,s:p}=h,g=m(n),w=a(p),b=s(g*w),v=s(d*w),E=c.BASE.multiplyAndAddUnsafe(f,b,v)?.toAffine();return!!E&&s(E.x)===d},ProjectivePoint:c,Signature:y,utils:g}}function Uo(t){return{hash:t,hmac:(e,...n)=>Eo(t,e,function(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];vi(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n}(...n)),randomBytes:Ci}}BigInt(4);const To=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Po=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Oo=BigInt(1),Lo=BigInt(2),Fo=(t,e)=>(t+e/Lo)/e;function $o(t){const e=To,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,h=po(u,n,e)*u%e,f=po(h,n,e)*u%e,d=po(f,Lo,e)*l%e,p=po(d,i,e)*d%e,y=po(p,o,e)*p%e,g=po(y,a,e)*y%e,w=po(g,c,e)*g%e,b=po(w,a,e)*y%e,m=po(b,n,e)*u%e,v=po(m,s,e)*p%e,E=po(v,r,e)*l%e,k=po(E,Lo,e);if(!Do.eql(Do.sqr(k),t))throw new Error("Cannot find square root");return k}const Do=function(t,e,n=!1,r={}){if(t<=io)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:o}=wo(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=function(t){if(t%co===ao){const e=(t+oo)/co;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}if(t%uo===lo){const e=(t-lo)/uo;return function(t,n){const r=t.mul(n,so),i=t.pow(r,e),o=t.mul(n,i),s=t.mul(t.mul(o,so),i),a=t.mul(o,t.sub(s,t.ONE));if(!t.eql(t.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(t){const e=(t-oo)/so;let n,r,i;for(n=t-oo,r=0;n%so===io;n/=so,r++);for(i=so;i<t&&fo(i,e,t)!==t-oo;i++);if(1===r){const e=(t+oo)/co;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}const o=(n+oo)/so;return function(t,s){if(t.pow(s,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let a=r,c=t.pow(t.mul(t.ONE,i),n),l=t.pow(s,o),u=t.pow(s,n);for(;!t.eql(u,t.ONE);){if(t.eql(u,t.ZERO))return t.ZERO;let e=1;for(let n=t.sqr(u);e<a&&!t.eql(n,t.ONE);e++)n=t.sqr(n);const n=t.pow(c,oo<<BigInt(a-e-1));c=t.sqr(n),l=t.mul(l,n),u=t.mul(u,c),a=e}return l}}(t)}(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:Qi(i),ZERO:io,ONE:oo,create:e=>ho(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return io<=e&&e<t},is0:t=>t===io,isOdd:t=>(t&oo)===oo,neg:e=>ho(-e,t),eql:(t,e)=>t===e,sqr:e=>ho(e*e,t),add:(e,n)=>ho(e+n,t),sub:(e,n)=>ho(e-n,t),mul:(e,n)=>ho(e*n,t),pow:(t,e)=>function(t,e,n){if(n<io)throw new Error("Expected power > 0");if(n===io)return t.ONE;if(n===oo)return e;let r=t.ONE,i=e;for(;n>io;)n&oo&&(r=t.mul(r,i)),i=t.sqr(i),n>>=oo;return r}(a,t,e),div:(e,n)=>ho(e*yo(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>yo(e,t),sqrt:r.sqrt||(t=>s(a,t)),invertBatch:t=>function(t,e){const n=new Array(e.length),r=e.reduce(((e,r,i)=>t.is0(r)?e:(n[i]=e,t.mul(e,r))),t.ONE),i=t.inv(r);return e.reduceRight(((e,r,i)=>t.is0(r)?e:(n[i]=t.mul(e,n[i]),t.mul(e,r))),i),n}(a,t),cmov:(t,e,n)=>n?e:t,toBytes:t=>n?Gi(t,o):Zi(t,o),fromBytes:t=>{if(t.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${t.length}`);return n?Wi(t):Vi(t)}});return Object.freeze(a)}(To,void 0,void 0,{sqrt:$o}),zo=function(t,e){const n=e=>No({...t,...Uo(e)});return Object.freeze({...n(e),create:n})}({a:BigInt(0),b:BigInt(7),Fp:Do,n:Po,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Po,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Oo*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),a=Fo(o*t,e),c=Fo(-r*t,e);let l=ho(t-a*n-c*i,e),u=ho(-a*r-c*o,e);const h=l>s,f=u>s;if(h&&(l=e-l),f&&(u=e-u),l>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:l,k2neg:f,k2:u}}}},Oi),Mo=BigInt(0),qo=t=>"bigint"==typeof t&&Mo<t&&t<To,Ho=t=>"bigint"==typeof t&&Mo<t&&t<Po,Ko={};function jo(t,...e){let n=Ko[t];if(void 0===n){const e=Oi(Uint8Array.from(t,(t=>t.charCodeAt(0))));n=Ji(e,e),Ko[t]=n}return Oi(Ji(n,...e))}const Vo=t=>t.toRawBytes(!0).slice(1),Wo=t=>Zi(t,32),Zo=t=>ho(t,To),Go=t=>ho(t,Po),Yo=zo.ProjectivePoint,Jo=(t,e,n)=>Yo.BASE.multiplyAndAddUnsafe(t,e,n);function Qo(t){let e=zo.utils.normPrivateKeyToScalar(t),n=Yo.fromPrivateKey(e);return{scalar:n.hasEvenY()?e:Go(-e),bytes:Vo(n)}}function Xo(t){if(!qo(t))throw new Error("bad x: need 0 < x < p");const e=Zo(t*t);let n=$o(Zo(e*t+BigInt(7)));n%Lo!==Mo&&(n=Zo(-n));const r=new Yo(t,n,Oo);return r.assertValidity(),r}function ts(...t){return Go(Vi(jo("BIP0340/challenge",...t)))}function es(t){return Qo(t).bytes}function ns(t,e,n=Ci(32)){const r=Yi("message",t),{bytes:i,scalar:o}=Qo(e),s=Yi("auxRand",n,32),a=Wo(o^Vi(jo("BIP0340/aux",s))),c=jo("BIP0340/nonce",a,i,r),l=Go(Vi(c));if(l===Mo)throw new Error("sign failed: k is zero");const{bytes:u,scalar:h}=Qo(l),f=ts(u,i,r),d=new Uint8Array(64);if(d.set(u,0),d.set(Wo(Go(h+f*o)),32),!rs(d,r,i))throw new Error("sign: Invalid signature produced");return d}function rs(t,e,n){const r=Yi("signature",t,64),i=Yi("message",e),o=Yi("publicKey",n,32);try{const t=Xo(Vi(o)),e=Vi(r.subarray(0,32));if(!qo(e))return!1;const n=Vi(r.subarray(32,64));if(!Ho(n))return!1;const s=ts(Wo(e),Vo(t),i),a=Jo(t,n,Go(-s));return!(!a||!a.hasEvenY()||a.toAffine().x!==e)}catch(t){return!1}}const is=(()=>({getPublicKey:es,sign:ns,verify:rs,utils:{randomPrivateKey:zo.utils.randomPrivateKey,lift_x:Xo,pointToBytes:Vo,numberToBytesBE:Zi,bytesToNumberBE:Vi,taggedHash:jo,mod:ho}}))();var os=n(2653);function ss(t,e){if(t.outboxTracker)return t.outboxTracker.data.get(e)?.writeRelays}function as(t){const e={};return t.forEach((t=>{Object.entries(t).forEach((([t,n])=>{Array.isArray(n)?void 0===e[t]?e[t]=[...n]:e[t]=Array.from(new Set([...e[t],...n])):e[t]=n}))})),e}function cs(t){return!(!t.filter.ids||!function(t){const e=t.filter.ids;return!!e&&e.length===t.eventFirstSeen.size}(t))}function ls(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const[n,r]of Object.entries(t)){const t=e[n];if(!t)return!1;if(Array.isArray(r)&&Array.isArray(t)){const e=r;for(const n of t){const t=n;if(!e.includes(t))return!1}}else if(t!==r)return!1}return!0}n(2632);var us,hs=/^(\d+):([0-9A-Fa-f]+)(?::(.*))?$/,fs=/^n(event|ote|profile|pub|addr)1[\d\w]+$/,ds=class extends wi.EventEmitter{subscriptions;req;debug;constructor(t,e){super(),this.subscriptions=t,this.debug=e||this.subscriptions[0].subscription.debug.extend("grouped");for(const e of t)this.handleSubscriptionClosure(e)}addSubscription(t){this.subscriptions.push(t),this.handleSubscriptionClosure(t)}eventReceived(t){for(const e of this.subscriptions)e.eventReceived(t)}eoseReceived(t){Array.from(this.subscriptions).forEach((async e=>{e.subscription.eoseReceived(t)}))}handleSubscriptionClosure(t){t.subscription.on("close",(()=>{const e=this.subscriptions.findIndex((e=>e.subscription===t.subscription));this.subscriptions.splice(e,1),this.subscriptions.length<=0&&this.emit("close")}))}map(t){return this.subscriptions.map(t)}[Symbol.iterator](){let t=0;const e=this.subscriptions;return{next:()=>t<e.length?{value:e[t++],done:!1}:{value:null,done:!0}}}},ps=class{subscription;filters=[];ndkRelay;constructor(t,e,n){this.subscription=t,this.filters=e,this.ndkRelay=n}eventReceived(t){if(!this.eventMatchesLocalFilter(t))return;const e=new Ms(void 0,t);e.relay=this.ndkRelay,this.subscription.eventReceived(e,this.ndkRelay,!1)}eventMatchesLocalFilter(t){return this.filters.some((e=>Zn(e,t)))}},ys=class extends wi.EventEmitter{url;scores;connectivity;subs;publisher;authPolicy;validationRatio;validatedEventCount=0;skippedEventCount=0;trusted=!1;complaining=!1;debug;constructor(t,e){super(),this.url=t,this.scores=new Map,this.debug=bi(`ndk:relay:${t}`),this.connectivity=new class{ndkRelay;_status;relay;timeoutMs;connectedAt;_connectionStats={attempts:0,success:0,durations:[]};debug;reconnectTimeout;constructor(t){this.ndkRelay=t,this._status=3,this.relay=er(this.ndkRelay.url),this.debug=this.ndkRelay.debug.extend("connectivity"),this.relay.on("notice",(t=>this.handleNotice(t)))}async connect(t){this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0),t??=this.timeoutMs,!this.timeoutMs&&t&&(this.timeoutMs=t);const e=()=>{this.updateConnectionStats.connected(),this._status=1,this.ndkRelay.emit("connect"),this.ndkRelay.emit("ready")},n=()=>{this.updateConnectionStats.disconnected(),1===this._status&&(this._status=3,this.handleReconnection()),this.ndkRelay.emit("disconnect")},r=async t=>{this.debug("Relay requested authentication",{havePolicy:!!this.ndkRelay.authPolicy}),this.ndkRelay.authPolicy?7!==this._status&&(this._status=7,await this.ndkRelay.authPolicy(this.ndkRelay,t),7===this._status&&(this.debug("Authentication policy finished"),this._status=1,this.ndkRelay.emit("authed"))):await this.ndkRelay.emit("auth",t)};try{this.updateConnectionStats.attempt(),3===this._status?this._status=0:this._status=4,this.relay.off("connect",e),this.relay.off("disconnect",n),this.relay.on("connect",e),this.relay.on("disconnect",n),this.relay.on("auth",r),await async function(t,e,n){return e?new Promise(((n,r)=>{const i=setTimeout((()=>{r(new Error("Timed out while connecting"))}),e);t().then(n,r).finally((()=>clearTimeout(i)))})):t()}(this.relay.connect,t)}catch(t){throw this._status=3,this.handleReconnection(),t}}disconnect(){this._status=2,this.relay.close()}get status(){return this._status}isAvailable(){return 1===this._status}isFlapping(){const t=this._connectionStats.durations;if(t.length%3!=0)return!1;const e=t.reduce(((t,e)=>t+e),0)/t.length,n=t.map((t=>Math.pow(t-e,2))).reduce(((t,e)=>t+e),0)/t.length;return Math.sqrt(n)<1e3}async handleNotice(t){(t.includes("oo many")||t.includes("aximum"))&&(this.disconnect(),setTimeout((()=>this.connect()),2e3),this.debug(this.relay.url,"Relay complaining?",t)),this.ndkRelay.emit("notice",this.relay,t)}handleReconnection(t=0){if(this.reconnectTimeout)return;if(this.debug("Attempting to reconnect",{attempt:t}),this.isFlapping())return this.ndkRelay.emit("flapping",this,this._connectionStats),void(this._status=5);const e=this.connectedAt?Math.max(0,6e4-(Date.now()-this.connectedAt)):5e3*(this._connectionStats.attempts+1);this.reconnectTimeout=setTimeout((()=>{this.reconnectTimeout=void 0,this._status=4,this.connect().then((()=>{this.debug("Reconnected")})).catch((e=>{t<5?setTimeout((()=>{this.handleReconnection(t+1)}),1e3*(t+1)^2.5):this.debug("Reconnect failed after 5 attempts")}))}),e),this.debug("Reconnecting in",e),this._connectionStats.nextReconnectAt=Date.now()+e}updateConnectionStats={connected:()=>{this._connectionStats.success++,this._connectionStats.connectedAt=Date.now()},disconnected:()=>{this._connectionStats.connectedAt&&(this._connectionStats.durations.push(Date.now()-this._connectionStats.connectedAt),this._connectionStats.durations.length>100&&this._connectionStats.durations.shift()),this._connectionStats.connectedAt=void 0},attempt:()=>{this._connectionStats.attempts++}};get connectionStats(){return this._connectionStats}}(this),this.subs=new class{ndkRelay;delayedItems=new Map;delayedTimers=new Map;activeSubscriptions=new Map;activeSubscriptionsByGroupId=new Map;executionTimeoutsByGroupId=new Map;debug;groupingDebug;conn;constructor(t){this.ndkRelay=t,this.conn=t.connectivity,this.debug=t.debug.extend("subscriptions"),this.groupingDebug=t.debug.extend("grouping")}subscribe(t,e){const n=function(t,e){const n=[];for(const e of t){if(e.since||e.until)return null;const t=Object.keys(e||{}).sort().join("-");n.push(t)}let r=e?"+":"";return r+=n.join("|"),r}(e,t.closeOnEose),r=new ps(t,e,this.ndkRelay);if(!n||!t.isGroupable())return void this.executeSubscriptions(n,new ds([r]),e);const i=this.activeSubscriptionsByGroupId.get(n);if(i){const n=function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length&&ls(t[n],e[n]);n++)return t[n]}(i.filters,e);if(n){const n=this.activeSubscriptions.get(i.sub);return void n?.addSubscription(new ps(t,e,this.ndkRelay))}}let o=this.delayedItems.get(n);o?o.addSubscription(r):(o=new ds([r]),this.delayedItems.set(n,o),o.once("close",(()=>{this.delayedItems.get(n)&&this.delayedItems.delete(n)})));let s=this.executionTimeoutsByGroupId.get(n);s&&"at-most"!==t.opts.groupableDelayType||(s=setTimeout((()=>{this.executeGroup(n,t)}),t.opts.groupableDelay),this.executionTimeoutsByGroupId.set(n,s)),this.delayedTimers.has(n)?this.delayedTimers.get(n).push(s):this.delayedTimers.set(n,[s])}executeGroup(t,e){const n=this.delayedItems.get(t);this.delayedItems.delete(t);const r=this.delayedTimers.get(t);if(this.delayedTimers.delete(t),r)for(const t of r)clearTimeout(t);if(n){const e=n.subscriptions[0].filters.length,r=[];for(let t=0;t<e;t++){const e=n.map((e=>e.filters[t]));r.push(as(e))}this.executeSubscriptions(t,n,r)}}executeSubscriptionsWhenConnected(t,e,n){const r=()=>{this.executeSubscriptionsConnected(t,e,n)};this.ndkRelay.once("ready",r),e.once("close",(()=>{this.ndkRelay.removeListener("ready",r)}))}executeSubscriptions(t,e,n){this.conn.isAvailable()?this.executeSubscriptionsConnected(t,e,n):this.executeSubscriptionsWhenConnected(t,e,n)}executeSubscriptionsConnected(t,e,n){const r=[];for(const{subscription:t}of e)r.push(t);const i=function(t,e){const n=t.map((t=>t.subId)).filter(Boolean),r=[],i=new Set,o=new Set;if(n.length>0)r.push(Array.from(new Set(n)).join(","));else{for(const t of e)for(const e of Object.keys(t))"kinds"===e?t.kinds?.forEach((t=>o.add(t))):i.add(e);o.size>0&&r.push("kinds:"+Array.from(o).join(",")),i.size>0&&r.push(Array.from(i).join(","))}let s=r.join("-");return s.length>20&&(s=s.substring(0,20)),s+="-"+Math.floor(999*Math.random()).toString(),s}(r,n);e.req=n;const o={id:i,skipVerification:!0},s=this.conn.relay.sub(n,o);return this.activeSubscriptions.set(s,e),t&&this.activeSubscriptionsByGroupId.set(t,{filters:n,sub:s}),s.on("event",(t=>{const e=this.activeSubscriptions.get(s);e?.eventReceived(t)})),s.on("eose",(()=>{const t=this.activeSubscriptions.get(s);t?.eoseReceived(this.ndkRelay)})),e.once("close",(()=>{s.unsub(),this.activeSubscriptions.delete(s),t&&this.activeSubscriptionsByGroupId.delete(t)})),this.executeSubscriptionsWhenConnected(t,e,n),s}executedFilters(){const t=new Map;for(const[,e]of this.activeSubscriptions)t.set(e.req,e.map((t=>t.subscription)));return t}}(this),this.publisher=new class{ndkRelay;constructor(t){this.ndkRelay=t}async publish(t,e=2500){const n=()=>new Promise(((n,r)=>{try{this.publishEvent(t,e).then((t=>n(t))).catch((t=>r(t)))}catch(t){r(t)}})),r=new Promise(((t,n)=>{setTimeout((()=>n(new Error("Timeout"))),e)})),i=()=>{n().then((t=>o(t))).catch((t=>s(t)))};let o,s;return 1===this.ndkRelay.status?Promise.race([n(),r]):Promise.race([new Promise(((t,e)=>{o=t,s=e,this.ndkRelay.once("connect",i)})),r]).finally((()=>{this.ndkRelay.removeListener("connect",i)}))}async publishEvent(t,e){const n=await t.toNostrEvent(),r=this.ndkRelay.connectivity.relay.publish(n);let i;const o=new Promise(((e,n)=>{r.then((()=>{clearTimeout(i),this.ndkRelay.emit("published",t),e(!0)})).catch((e=>{clearTimeout(i),this.ndkRelay.debug("Publish failed",e,t.id),this.ndkRelay.emit("publish:failed",t,e),n(e)}))}));if(!e||t.isEphemeral())return o;const s=new Promise(((n,r)=>{i=setTimeout((()=>{this.ndkRelay.debug("Publish timed out",t.rawEvent()),this.ndkRelay.emit("publish:failed",t,"Timeout"),r(new Error("Publish operation timed out"))}),e)}));return Promise.race([o,s])}async auth(t){return this.ndkRelay.connectivity.relay.auth(t.rawEvent())}}(this),this.authPolicy=e,this.validationRatio=void 0}get status(){return this.connectivity.status}get connectionStats(){return this.connectivity.connectionStats}async connect(t){return this.connectivity.connect(t)}disconnect(){3!==this.status&&this.connectivity.disconnect()}subscribe(t,e){this.subs.subscribe(t,e)}async publish(t,e=2500){return this.publisher.publish(t,e)}async auth(t){return this.publisher.auth(t)}scoreSlowerEvent(t){}tagReference(t){const e=["r",this.url];return t&&e.push(t),e}referenceTags(){return[["r",this.url]]}activeSubscriptions(){return this.subs.executedFilters()}addValidatedEvent(){this.validatedEventCount++}addSkippedEvent(){this.skippedEventCount++}getValidationRatio(){return 0===this.skippedEventCount?1:this.validatedEventCount/(this.validatedEventCount+this.skippedEventCount)}shouldValidateEvent(){return!this.trusted&&(void 0===this.validationRatio||this.getValidationRatio()<this.validationRatio)}},gs=class extends Error{errors;constructor(t,e){super(t),this.errors=e}get relayErrors(){const t=[];for(const[e,n]of this.errors)t.push(`${e.url}: ${n}`);return t.join("\n")}},ws=class t{relays;debug;ndk;constructor(t,e){this.relays=t,this.ndk=e,this.debug=e.debug.extend("relayset")}addRelay(t){this.relays.add(t)}static fromRelayUrls(e,n){const r=new Set;for(const t of e){const e=n.pool.relays.get(t);if(e)r.add(e);else{const e=new ys(t);n.pool.useTemporaryRelay(e),r.add(e)}}return new t(new Set(r),n)}async publish(t,e){const n=new Set,r=new Map,i=t.isEphemeral(),o=Array.from(this.relays).map((o=>new Promise((s=>{o.publish(t,e).then((t=>{n.add(o),s()})).catch((t=>{i||(r.set(o,t),this.debug("error publishing to relay",{relay:o.url,err:t})),s()}))}))));if(await Promise.all(o),0===n.size&&!i)throw new gs("No relay was able to receive the event",r);return n}get size(){return this.relays.size}};function bs(t,e,n){return function(t,e,n){const r=new Map,i=new Set;if(e.forEach((t=>{t.authors&&t.authors.forEach((t=>i.add(t)))})),i.size>0){const o=function(t,e,n,r=2){const i=new Map,{pubkeysToRelays:o,authorsMissingRelays:s}=function(t,e){const n=new Map,r=new Set;return e.forEach((e=>{const i=ss(t,e);i&&i.size>0?(i.forEach((t=>{const r=n.get(t)||new Set;r.add(e),n.set(t,r)})),n.set(e,i)):r.add(e)})),{pubkeysToRelays:n,authorsMissingRelays:r}}(t,e),a=function(t,e){const n=new Map;return e.forEach((e=>{const r=ss(t,e);r&&r.forEach((t=>{const e=n.get(t)||0;n.set(t,e+1)}))})),Array.from(n.entries()).sort(((t,e)=>e[1]-t[1])).map((t=>t[0]))}(t,e),c=(t,e)=>{const n=i.get(e)||[];n.push(t),i.set(e,n)};for(const[t,e]of o.entries()){let o=r;const s=n.connectedRelays();for(const n of s)e.has(n.url)&&(c(t,n.url),o--);for(const n of e)i.has(n)&&(c(t,n),o--);if(!(o<=0))for(const n of a){if(o<=0)break;e.has(n)&&(c(t,n),o--)}}for(const t of s)n.permanentAndConnectedRelays().forEach((e=>{const n=i.get(e.url)||[];n.push(t),i.set(e.url,n)}));return i}(t,Array.from(i),n);for(const t of o.keys())r.set(t,[]);for(const t of e)if(t.authors)for(const[e,n]of o.entries()){const i=t.authors.filter((t=>n.includes(t)));r.set(e,[...r.get(e),{...t,authors:i}])}else for(const e of o.keys())r.set(e,[...r.get(e),t])}else n.permanentAndConnectedRelays().forEach((t=>{r.set(t.url,e)}));return r}(t,e,n)}async function ms(t){return""}function vs(){if(void 0===this.kind)throw new Error("Kind not set");return[0,3].includes(this.kind)||this.kind>=1e4&&this.kind<2e4||this.kind>=3e4&&this.kind<4e4}function Es(){if(void 0===this.kind)throw new Error("Kind not set");return this.kind>=2e4&&this.kind<3e4}function ks(){if(void 0===this.kind)throw new Error("Kind not set");return this.kind>=3e4&&this.kind<4e4}async function xs(t,e){if(!this.ndk)throw new Error("No NDK instance found!");if(e||(await this.ndk.assertSigner(),e=this.ndk.signer),!t){const e=this.getMatchingTags("p");if(1!==e.length)throw new Error("No recipient could be determined and no explicit recipient was provided");t=this.ndk.getUser({pubkey:e[0][1]})}this.content=await(e?.encrypt(t,this.content))}async function _s(t,e){if(!this.ndk)throw new Error("No NDK instance found!");e||(await this.ndk.assertSigner(),e=this.ndk.signer),t||(t=this.author),this.content=await(e?.decrypt(t,this.content))}function As(){let t=[];return this.onRelays.length>0?t=this.onRelays.map((t=>t.url)):this.relay&&(t=[this.relay.url]),this.isParamReplaceable()?nr.naddrEncode({kind:this.kind,pubkey:this.pubkey,identifier:this.replaceableDTag(),relays:t}):t.length>0?nr.neventEncode({id:this.tagId(),relays:t,author:this.pubkey}):nr.noteEncode(this.tagId())}async function Ss(t=!0,e){if(!e&&t){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner(),e=this.ndk.signer}const n=new Ms(this.ndk,{kind:(r=this,1===r.kind?6:16),content:""});var r;return n.tag(this),16===n.kind?n.tags.push(["k",`${this.kind}`]):n.content=JSON.stringify(this.rawEvent()),e&&await n.sign(e),t&&await n.publish(),n}function Bs(t){return t.getMatchingTags("e").some((t=>t[3]))}async function Cs(t,e){if(!this.ndk)throw new Error("NDK instance not found");const n=this.getMatchingTags(t,e);if(0===n.length)return;const[r,i,o]=n[0];return await this.ndk.fetchEvent(i,{},void 0)}async function Is(){if(!this.ndk)throw new Error("NDK instance not found");const t=function(t,e){e??=t.tagType();let n=t.tags.find((t=>"root"===t[3]));if(!n){if(Bs(t))return;const n=t.getMatchingTags(e);if(n.length<3)return n[0]}return n}(this);if(t)return this.ndk.fetchEventFromTag(t)}async function Rs(){if(!this.ndk)throw new Error("NDK instance not found");const t=function(t,e){e??=t.tagType();let n=t.tags.find((t=>"reply"===t[3]));if(n||(n=t.tags.find((t=>"root"===t[3]))),!n){if(Bs(t))return;const n=t.getMatchingTags(e);if(1===n.length)return n[0];if(2===n.length)return n[1]}}(this);if(t)return this.ndk.fetchEventFromTag(t)}function Ns(t=!1,e=!1){const n=[0,this.pubkey,this.created_at,this.kind,this.tags,this.content];return t&&n.push(this.sig),e&&n.push(this.id),JSON.stringify(n)}var Us={},Ts=/^[a-f0-9]{64}$/;function Ps(){if("number"!=typeof this.kind)return!1;if("string"!=typeof this.content)return!1;if("number"!=typeof this.created_at)return!1;if("string"!=typeof this.pubkey)return!1;if(!this.pubkey.match(Ts))return!1;if(!Array.isArray(this.tags))return!1;for(let t=0;t<this.tags.length;t++){const e=this.tags[t];if(!Array.isArray(e))return!1;for(let t=0;t<e.length;t++)if("object"==typeof e[t])return!1}return!0}var Os=new os.LRUCache({maxSize:1e3,entryExpirationTimeInMS:6e4});function Ls(t){if("boolean"==typeof this.signatureVerified)return this.signatureVerified;const e=Os.get(this.id);if(null!==e)return this.signatureVerified=e;try{if(!this.ndk?.asyncSigVerification){const t=(0,s.J)((new TextEncoder).encode(this.serialize())),e=is.verify(this.sig,t,this.pubkey);return Os.set(this.id,e),this.signatureVerified=e}(async function(t,e){return new Promise((e=>{const n=t.serialize();let r=!1;Us[t.id]||(Us[t.id]={event:t,resolves:[]},r=!0),Us[t.id].resolves.push(e),r&&us.postMessage({serialized:n,id:t.id,sig:t.sig,pubkey:t.pubkey})}))})(this).then((e=>{t&&(this.signatureVerified=e,Os.set(this.id,e)),e||this.ndk.emit("event:invalid-sig",this)}))}catch(t){return console.error("Error verifying signature",this.rawEvent(),t),this.signatureVerified=!1}}function Fs(){const t=(0,s.J)((new TextEncoder).encode(this.serialize()));return(0,a.ci)(t)}var $s=bi("ndk:zap"),Ds=["wss://nos.lol","wss://relay.nostr.band","wss://relay.f7z.io","wss://relay.damus.io","wss://nostr.mom","wss://no.str.cr"],zs=class t extends wi.EventEmitter{ndk;zappedEvent;zappedUser;fetch=fetch;constructor(t){super(),this.ndk=t.ndk,this.zappedEvent=t.zappedEvent,this.fetch=t._fetch||fetch,this.zappedUser=t.zappedUser||this.ndk.getUser({pubkey:this.zappedEvent?.pubkey})}static async getZapperPubkey(e,n){const r=e.getUser({pubkey:n}),i=new t({ndk:e,zappedUser:r}),o=await i.getZapSpec();return o?.nostrPubkey}async getZapSpec(){if(!this.zappedUser)throw new Error("No user to zap was provided");return this.zappedUser.getZapConfiguration(this.ndk)}async getZapSpecWithoutCache(){let t,e,n,r;if(this.zappedUser&&(this.zappedUser.profile||await this.zappedUser.fetchProfile({groupable:!1}),r=this.zappedUser.profile,t=(this.zappedUser.profile||{}).lud06,e=(this.zappedUser.profile||{}).lud16),e&&!e.startsWith("LNURL")){const[t,r]=e.split("@");n=`https://${r}/.well-known/lnurlp/${t}`}else if(t){const{words:e}=_t.gW.decode(t,1e3),r=_t.gW.fromWords(e);n=new TextDecoder("utf-8").decode(r)}if(!n)throw $s("No zap endpoint found",r,{lud06:t,lud16:e}),new Error("No zap endpoint found");try{const t=this.fetch||this.ndk.httpFetch,e=await t(n);if(200!==e.status){const t=await e.text();throw new Error(`Unable to fetch zap endpoint ${n}: ${t}`)}return await e.json()}catch(t){throw new Error(`Unable to fetch zap endpoint ${n}: ${t}`)}}async getZapEndpoint(){const t=await this.getZapSpec();if(!t)return;let e;return t?.allowsNostr&&(t?.nostrPubkey||t?.nostrPubkey)&&(e=t.callback),e}async createZapRequest(t,e,n,r,i){const o=await this.generateZapRequest(t,e,n,r);if(!o)return null;const{event:s,zapEndpoint:a}=o;if(!s)throw new Error("No zap request event found");let c;await s.sign(i);try{$s(`Getting invoice for zap request: ${a}`),c=await this.getInvoice(s,t,a)}catch(t){throw new Error("Failed to get invoice: "+t)}return c}async getInvoice(t,e,n){$s(`Fetching invoice from ${n}?`+new URLSearchParams({amount:e.toString(),nostr:encodeURIComponent(JSON.stringify(t.rawEvent()))}));const r=new URL(n);r.searchParams.append("amount",e.toString()),r.searchParams.append("nostr",JSON.stringify(t.rawEvent())),$s(`Fetching invoice from ${r.toString()}`);const i=await fetch(r.toString());if($s(`Got response from zap endpoint: ${n}`,{status:i.status}),200!==i.status){$s(`Received non-200 status from zap endpoint: ${n}`,{status:i.status,amount:e,nostr:JSON.stringify(t.rawEvent())});const r=await i.text();throw new Error(`Unable to fetch zap endpoint ${n}: ${r}`)}return(await i.json()).pr}async generateZapRequest(t,e,n,r,i){const o=await this.getZapEndpoint();if(!o)throw new Error("No zap endpoint found");if(!this.zappedEvent&&!this.zappedUser)throw new Error("No zapped event or user found");const s=si.makeZapRequest({profile:this.zappedUser.pubkey,event:null,amount:t,comment:e||"",relays:r??this.relays()});if(this.zappedEvent){const t=this.zappedEvent.referenceTags().filter((t=>"p"!==t[0]));s.tags.push(...t)}s.tags.push(["lnurl",o]);const a=new Ms(this.ndk,s);return n&&(a.tags=a.tags.concat(n)),{event:a,zapEndpoint:o}}relays(){let t=[];return this.ndk?.pool?.relays&&(t=this.ndk.pool.urls()),t.length||(t=Ds),t}},Ms=class t extends wi.EventEmitter{ndk;created_at;content="";tags=[];kind;id="";sig;pubkey="";signatureVerified;_author=void 0;relay;onRelays=[];constructor(t,e){super(),this.ndk=t,this.created_at=e?.created_at,this.content=e?.content||"",this.tags=e?.tags||[],this.id=e?.id||"",this.sig=e?.sig,this.pubkey=e?.pubkey||"",this.kind=e?.kind}static deserialize(e,n){return new t(e,function(t){const e=JSON.parse(t),n={pubkey:e[1],created_at:e[2],kind:e[3],tags:e[4],content:e[5]};return 7===e.length&&(n.sig=e[6]),8===e.length&&(n.id=e[7]),n}(n))}rawEvent(){return{created_at:this.created_at,content:this.content,tags:this.tags,kind:this.kind,pubkey:this.pubkey,id:this.id,sig:this.sig}}set author(t){this.pubkey=t.pubkey,this._author=void 0}get author(){if(this._author)return this._author;if(!this.ndk)throw new Error("No NDK instance found");const t=this.ndk.getUser({pubkey:this.pubkey});return this._author=t,t}tag(e,n,r,i){let o=[];if(void 0!==e.fetchProfile){i??="p";const t=[i,e.pubkey];n&&t.push("",n),o.push(t)}else if(e instanceof t){const t=e;r??=t?.pubkey===this.pubkey,o=t.referenceTags(n,r,i);for(const e of t.getMatchingTags("p"))e[1]!==this.pubkey&&(this.tags.find((t=>"p"===t[0]&&t[1]===e[1]))||this.tags.push(["p",e[1]]))}else{if(!Array.isArray(e))throw new Error("Invalid argument",e);o=[e]}this.tags=function(t,e){const n=new Map,r=(t,e)=>t.every(((t,n)=>t===e[n]));return t.concat(e).forEach((t=>{for(let[e,i]of n)if(r(i,t)||r(t,i))return void(t.length>=i.length&&n.set(e,t));n.set((t=>t.join(","))(t),t)})),Array.from(n.values())}(this.tags,o)}async toNostrEvent(t){if(!t&&""===this.pubkey){const t=await(this.ndk?.signer?.user());this.pubkey=t?.pubkey||""}this.created_at&&!this.isReplaceable()||(this.created_at=Math.floor(Date.now()/1e3));const e=this.rawEvent(),{content:n,tags:r}=await this.generateTags();e.content=n||"",e.tags=r;try{this.id=this.getEventHash()}catch(t){}return this.id&&(e.id=this.id),this.sig&&(e.sig=this.sig),e}serialize=Ns.bind(this);getEventHash=Fs.bind(this);validate=Ps.bind(this);verifySignature=Ls.bind(this);isReplaceable=vs.bind(this);isEphemeral=Es.bind(this);isParamReplaceable=ks.bind(this);encode=As.bind(this);encrypt=xs.bind(this);decrypt=_s.bind(this);getMatchingTags(t,e){return this.tags.filter((e=>e[0]===t)).filter((t=>!e||t[3]===e))}tagValue(t){const e=this.getMatchingTags(t);if(0!==e.length)return e[0][1]}get alt(){return this.tagValue("alt")}set alt(t){this.removeTag("alt"),t&&this.tags.push(["alt",t])}get dTag(){return this.tagValue("d")}set dTag(t){this.removeTag("d"),t&&this.tags.push(["d",t])}removeTag(t){this.tags=this.tags.filter((e=>e[0]!==t))}async sign(t){t?this.author=await t.user():(this.ndk?.assertSigner(),t=this.ndk.signer);const e=await this.toNostrEvent();return this.sig=await t.sign(e),this.sig}async publish(t,e){if(this.sig||await this.sign(),!this.ndk)throw new Error("NDKEvent must be associated with an NDK instance to publish");t||(t=this.ndk.devWriteRelaySet||function(t,e){const n=new Set;return t.pool?.permanentAndConnectedRelays().forEach((t=>n.add(t))),new ws(n,t)}(this.ndk)),this.ndk.debug(`publish to ${t.size} relays`,this.rawEvent()),5===this.kind&&this.ndk.cacheAdapter?.deleteEvent&&this.ndk.cacheAdapter.deleteEvent(this);const n=await t.publish(this,e);return this.onRelays=Array.from(n),n}async generateTags(){let t=[];const e=await async function(t,e=[]){let n=[];const r=t=>{e.find((e=>["q",t[0]].includes(e[0])&&e[1]===t[1]))||e.push(t)};return t=t.replace(/(@|nostr:)(npub|nprofile|note|nevent|naddr)[a-zA-Z0-9]+/g,(t=>{try{const e=t.split(/(@|nostr:)/)[2],{type:i,data:o}=nr.decode(e);let s;switch(i){case"npub":s=["p",o];break;case"nprofile":s=["p",o.pubkey];break;case"note":n.push(new Promise((async t=>{r(["e",o,await ms(),"mention"]),t()})));break;case"nevent":n.push(new Promise((async t=>{let{id:e,relays:n,author:i}=o;n&&0!==n.length||(n=[await ms()]),r(["e",e,n[0],"mention"]),i&&r(["p",i]),t()})));break;case"naddr":n.push(new Promise((async t=>{const e=[o.kind,o.pubkey,o.identifier].join(":");let n=o.relays??[];0===n.length&&(n=[await ms()]),r(["a",e,n[0],"mention"]),r(["p",o.pubkey]),t()})));break;default:return t}return s&&r(s),`nostr:${e}`}catch(e){return t}})),await Promise.all(n),{content:t=t.replace(/(?<=\s|^)(#[^\s!@#$%^&*()=+.\/,\[{\]};:'"?><]+)/g,((t,n)=>{const r=["t",n];return e.find((t=>t[0]===r[0]&&t[1]===r[1]))||e.push(r),t})),tags:e}}(this.content,this.tags),n=e.content;if(t=e.tags,this.kind&&this.isParamReplaceable()&&!this.getMatchingTags("d")[0]){const e=this.tagValue("title");let n=[...Array(e?6:16)].map((()=>Math.random().toString(36)[2])).join("");e&&e.length>0&&(n=e.replace(/[^a-z0-9]+/gi,"-").replace(/^-|-$/g,"")+"-"+n),t.push(["d",n])}if((this.ndk?.clientName||this.ndk?.clientNip89)&&!this.tagValue("client")){const e=["client",this.ndk.clientName??""];this.ndk.clientNip89&&e.push(this.ndk.clientNip89),t.push(e)}return{content:n||"",tags:t}}muted(){const t=this.ndk?.mutedIds.get(this.pubkey);if(t&&"p"===t)return"author";const e=this.tagReference(),n=this.ndk?.mutedIds.get(e[1]);return n&&n===e[0]?"event":null}replaceableDTag(){if(this.kind&&this.kind>=3e4&&this.kind<=4e4){const t=this.getMatchingTags("d")[0];return t?t[1]:""}throw new Error("Event is not a parameterized replaceable event")}deduplicationKey(){return 0===this.kind||3===this.kind||this.kind&&this.kind>=1e4&&this.kind<2e4?`${this.kind}:${this.pubkey}`:this.tagId()}tagId(){return this.isParamReplaceable()?this.tagAddress():this.id}tagAddress(){if(!this.isParamReplaceable())throw new Error("This must only be called on replaceable events");const t=this.replaceableDTag();return`${this.kind}:${this.pubkey}:${t}`}tagType(){return this.isParamReplaceable()?"a":"e"}tagReference(t){let e;return e=this.isParamReplaceable()?["a",this.tagAddress()]:["e",this.tagId()],this.relay?e.push(this.relay.url):e.push(""),t&&e.push(t),e}referenceTags(t,e,n){let r=[];return r=this.isParamReplaceable()?[[n??"a",this.tagAddress()],[n??"e",this.id]]:[[n??"e",this.id]],this.relay?.url?r=r.map((t=>(t.push(this.relay?.url),t))):t&&(r=r.map((t=>(t.push(""),t)))),t&&r.forEach((e=>e.push(t))),e||r.push(...this.author.referenceTags()),r}filter(){return this.isParamReplaceable()?{"#a":[this.tagId()]}:{"#e":[this.tagId()]}}async zap(t,e,n,r,i){if(!this.ndk)throw new Error("No NDK instance found");i||this.ndk.assertSigner();const o=new zs({ndk:this.ndk,zappedEvent:this,zappedUser:r}),s=Array.from(this.ndk.pool.relays.keys());return await o.createZapRequest(t,e,n,s,i)}async delete(e,n=!0){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner();const r=new t(this.ndk,{kind:5,content:e||""});return r.tag(this),n&&await r.publish(),r}fetchTaggedEvent=Cs.bind(this);fetchRootEvent=Is.bind(this);fetchReplyEvent=Rs.bind(this);repost=Ss.bind(this);async react(e,n=!0){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner();const r=new t(this.ndk,{kind:7,content:e});return r.tag(this),n?await r.publish():await r.sign(),r}get isValid(){return this.validate()}},qs={closeOnEose:!1,cacheUsage:"CACHE_FIRST",groupable:!0,groupableDelay:100,groupableDelayType:"at-most"},Hs=class extends wi.EventEmitter{subId;filters;opts;pool;skipVerification=!1;skipValidation=!1;relayFilters;relaySet;ndk;debug;eoseDebug;eventFirstSeen=new Map;eosesSeen=new Set;eventsPerRelay=new Map;lastEventReceivedAt;internalId;closeOnEose;constructor(t,e,n,r,i){if(super(),this.ndk=t,this.pool=n?.pool||t.pool,this.opts={...qs,...n||{}},this.filters=e instanceof Array?e:[e],this.subId=i||n?.subId,this.internalId=Math.random().toString(36).substring(7),this.relaySet=r,this.debug=t.debug.extend(`subscription[${n?.subId??this.internalId}]`),this.eoseDebug=this.debug.extend("eose"),this.skipVerification=n?.skipVerification||!1,this.skipValidation=n?.skipValidation||!1,this.closeOnEose=n?.closeOnEose||!1,"ONLY_CACHE"===this.opts.cacheUsage&&!this.opts.closeOnEose)throw new Error("Cannot use cache-only options with a persistent subscription")}get filter(){return this.filters[0]}isGroupable(){return this.opts?.groupable||!1}shouldQueryCache(){return"ONLY_RELAY"!==this.opts?.cacheUsage}shouldQueryRelays(){return"ONLY_CACHE"!==this.opts?.cacheUsage}shouldWaitForCache(){return this.opts.closeOnEose&&!!this.ndk.cacheAdapter?.locking&&"PARALLEL"!==this.opts.cacheUsage}async start(){let t;this.shouldQueryCache()&&(t=this.startWithCache(),this.shouldWaitForCache()&&(await t,cs(this)))?this.emit("eose",this):this.shouldQueryRelays()?this.startWithRelays():this.emit("eose",this)}stop(){this.emit("close",this),this.removeAllListeners()}hasAuthorsFilter(){return this.filters.some((t=>t.authors?.length))}async startWithCache(){if(this.ndk.cacheAdapter?.query){const t=this.ndk.cacheAdapter.query(this);this.ndk.cacheAdapter.locking&&await t}}startWithRelays(){if(this.relaySet){this.relayFilters=new Map;for(const t of this.relaySet.relays)this.relayFilters.set(t.url,this.filters)}else this.relayFilters=bs(this.ndk,this.filters,this.pool);if(this.relayFilters&&0!==this.relayFilters.size)for(const[t,e]of this.relayFilters)this.pool.getRelay(t,!0,!0,e).subscribe(this,e);else this.debug("No relays to subscribe to",this.pool.relays.size)}eventReceived(t,e,n=!1){if(e&&(t.relay??=e,t.onRelays.push(e)),e||(e=t.relay),t.ndk??=this.ndk,this.eventFirstSeen.has(t.id)){const n=Date.now()-(this.eventFirstSeen.get(t.id)||0);return e&&e.scoreSlowerEvent(n),this.trackPerRelay(t,e),void this.emit("event:dup",t,e,n,this)}if(!n){if(!this.skipValidation&&!t.isValid)return void this.debug("Event failed validation",t.rawEvent());if(!this.skipVerification&&!t.verifySignature(!0)&&!this.ndk.asyncSigVerification)return void this.debug("Event failed signature validation",t)}!n&&e?(this.trackPerRelay(t,e),this.ndk.cacheAdapter&&this.ndk.cacheAdapter.setEvent(t,this.filters,e),this.eventFirstSeen.set(t.id,Date.now())):this.eventFirstSeen.set(t.id,0),this.emit("event",t,e,this),this.lastEventReceivedAt=Date.now()}trackPerRelay(t,e){let n=this.eventsPerRelay.get(e);n||(n=new Set,this.eventsPerRelay.set(e,n)),n.add(t.id)}eoseTimeout;eoseReceived(t){this.eosesSeen.add(t);let e=this.lastEventReceivedAt?Date.now()-this.lastEventReceivedAt:void 0;const n=this.eosesSeen.size===this.relayFilters?.size;if(cs(this))this.emit("eose"),this.opts?.closeOnEose&&this.stop();else if(n)this.emit("eose"),this.eoseDebug("All EOSEs seen"),this.opts?.closeOnEose&&this.stop();else{let t=1e3;const n=this.eosesSeen.size/this.relayFilters.size;if(this.eosesSeen.size>=2&&n>=.5){t*=1-n,this.eoseTimeout&&clearTimeout(this.eoseTimeout);const r=()=>{e=this.lastEventReceivedAt?Date.now()-this.lastEventReceivedAt:void 0,void 0!==e&&e<20?this.eoseTimeout=setTimeout(r,t):(this.emit("eose"),this.opts?.closeOnEose&&this.stop())};this.eoseTimeout=setTimeout(r,t)}}}};async function Ks(t,e,n=3){if(!this.ndk)throw new Error("NDK not set");const r=await this.ndk.fetchEvent({kinds:[n],authors:[this.pubkey]},t||{groupable:!1});if(r){const t=new Set;return r.tags.forEach((e=>{"p"===e[0]&&t.add(e[1])})),e&&this.ndk?.outboxTracker?.trackUsers(Array.from(t)),[...t].reduce(((t,e)=>{const n=new Zs({pubkey:e});return n.ndk=this.ndk,t.add(n),t}),new Set)}return new Set}function js(t){const e={};for(const[n,r]of Object.entries(t))switch(n){case"username":case"name":e.name=r;break;case"displayName":e.display_name=r;break;case"image":case"picture":e.picture=r;break;case"bio":case"about":e.about=r;break;default:e[n]=r}return JSON.stringify(e)}var Vs=/^(?:([\w.+-]+)@)?([\w.-]+)$/;async function Ws(t,e,n=fetch,r={}){return await t.queuesNip05.add({id:e,func:async()=>{if(t.cacheAdapter&&t.cacheAdapter.loadNip05){const n=await t.cacheAdapter.loadNip05(e);if("missing"!==n){if(n){const e=new Zs({pubkey:n.pubkey,relayUrls:n.relays,nip46Urls:n.nip46});return e.ndk=t,e}if("no-cache"!==r.cache)return null}}const i=e.match(Vs);if(!i)return null;const[o,s="_",a]=i;try{const i=await n(`https://${a}/.well-known/nostr.json?name=${s}`,r),{names:o,relays:c,nip46:l}=function(t){const e={names:{}};for(const[n,r]of Object.entries(t.names))"string"==typeof n&&"string"==typeof r&&(e.names[n.toLowerCase()]=r);if(t.relays){e.relays={};for(const[n,r]of Object.entries(t.relays))"string"==typeof n&&Array.isArray(r)&&(e.relays[n]=r.filter((t=>"string"==typeof t)))}if(t.nip46){e.nip46={};for(const[n,r]of Object.entries(t.nip46))"string"==typeof n&&Array.isArray(r)&&(e.nip46[n]=r.filter((t=>"string"==typeof t)))}return e}(await i.json()),u=o[s.toLowerCase()];let h=null;return u&&(h={pubkey:u,relays:c?.[u],nip46:l?.[u]}),t?.cacheAdapter&&t.cacheAdapter.saveNip05&&t.cacheAdapter.saveNip05(e,h),h}catch(n){return t?.cacheAdapter&&t.cacheAdapter.saveNip05&&t?.cacheAdapter.saveNip05(e,null),console.error("Failed to fetch NIP05 for",e,n),null}}})}var Zs=class t{ndk;profile;_npub;_pubkey;relayUrls=[];nip46Urls=[];constructor(t){t.npub&&(this._npub=t.npub),t.hexpubkey&&(this._pubkey=t.hexpubkey),t.pubkey&&(this._pubkey=t.pubkey),t.relayUrls&&(this.relayUrls=t.relayUrls),t.nip46Urls&&(this.nip46Urls=t.nip46Urls)}get npub(){if(!this._npub){if(!this._pubkey)throw new Error("pubkey not set");this._npub=nr.npubEncode(this.pubkey)}return this._npub}set npub(t){this._npub=t}get hexpubkey(){return this.pubkey}set hexpubkey(t){this._pubkey=t}get pubkey(){if(!this._pubkey){if(!this._npub)throw new Error("npub not set");this._pubkey=nr.decode(this.npub).data}return this._pubkey}set pubkey(t){this._pubkey=t}async getZapConfiguration(t){if(t??=this.ndk,!t)throw new Error("No NDK instance found");return await t.queuesZapConfig.add({id:this.pubkey,func:async()=>{if(this.ndk?.cacheAdapter?.loadUsersLNURLDoc){const t=await this.ndk.cacheAdapter.loadUsersLNURLDoc(this.pubkey);if("missing"!==t){if(null===t)return;if(t)return t}}const e=new zs({ndk:t,zappedUser:this});let n;try{n=await e.getZapSpecWithoutCache()}catch{}if(this.ndk?.cacheAdapter?.saveUsersLNURLDoc&&this.ndk.cacheAdapter.saveUsersLNURLDoc(this.pubkey,n||null),n)return n}})}async getZapperPubkey(){const t=await this.getZapConfiguration();return t?.nostrPubkey}static async fromNip05(e,n,r=!1){if(!n)throw new Error("No NDK instance found");let i={};r&&(i.cache="no-cache");const o=await Ws(n,e,n?.httpFetch,i);if(o){const e=new t({pubkey:o.pubkey,relayUrls:o.relays,nip46Urls:o.nip46});return e.ndk=n,e}}async fetchProfile(t){if(!this.ndk)throw new Error("NDK not set");this.profile||(this.profile={});let e=null;if(this.ndk.cacheAdapter&&this.ndk.cacheAdapter.fetchProfile&&"ONLY_RELAY"!==t?.cacheUsage){const t=await this.ndk.cacheAdapter.fetchProfile(this.pubkey);if(t)return this.profile=t,t}!t&&this.ndk.cacheAdapter&&this.ndk.cacheAdapter.locking&&(e=await this.ndk.fetchEvents({kinds:[0],authors:[this.pubkey]},{cacheUsage:"ONLY_CACHE",closeOnEose:!0,groupable:!1}),t={cacheUsage:"ONLY_RELAY",closeOnEose:!0,groupable:!0,groupableDelay:250}),e&&0!==e.size||(e=await this.ndk.fetchEvents({kinds:[0],authors:[this.pubkey]},t));const n=Array.from(e).sort(((t,e)=>t.created_at-e.created_at));return 0===n.length?null:(this.profile=function(t){const e={};let n;try{n=JSON.parse(t.content)}catch(t){throw new Error(`Failed to parse profile event: ${t}`)}return Object.keys(n).forEach((t=>{switch(t){case"name":e.name=n.name;break;case"display_name":e.displayName=n.display_name;break;case"image":case"picture":e.image=n.picture||n.image;break;case"banner":e.banner=n.banner;break;case"bio":e.bio=n.bio;break;case"nip05":e.nip05=n.nip05;break;case"lud06":e.lud06=n.lud06;break;case"lud16":e.lud16=n.lud16;break;case"about":e.about=n.about;break;case"zapService":e.zapService=n.zapService;break;case"website":e.website=n.website;break;default:e[t]=n[t]}})),e}(n[0]),this.profile&&this.ndk.cacheAdapter&&this.ndk.cacheAdapter.saveProfile&&this.ndk.cacheAdapter.saveProfile(this.pubkey,this.profile),this.profile)}follows=Ks.bind(this);tagReference(){return["p",this.pubkey]}referenceTags(t){const e=[["p",this.pubkey]];return t?(e[0].push("",t),e):e}async publish(){if(!this.ndk)throw new Error("No NDK instance found");if(!this.profile)throw new Error("No profile available");this.ndk.assertSigner();const t=new Ms(this.ndk,{kind:0,content:js(this.profile)});await t.publish()}async follow(t,e,n=3){if(!this.ndk)throw new Error("No NDK instance found");if(this.ndk.assertSigner(),e||(e=await this.follows(void 0,void 0,n)),e.has(t))return!1;e.add(t);const r=new Ms(this.ndk,{kind:n});for(const t of e)r.tag(t);return await r.publish(),!0}async unfollow(t,e,n=3){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner(),e||(e=await this.follows(void 0,void 0,n));const r=new Set;let i=!1;for(const n of e)n.pubkey!==t.pubkey&&(r.add(n),i=!0);if(!i)return!1;const o=new Ms(this.ndk,{kind:n});for(const t of e)o.tag(t);return await o.publish()}async validateNip05(t){if(!this.ndk)throw new Error("No NDK instance found");const e=await Ws(this.ndk,t);return null===e?null:e.pubkey===this.pubkey}async zap(t,e,n,r){if(!this.ndk)throw new Error("No NDK instance found");r||this.ndk.assertSigner();const i=new zs({ndk:this.ndk,zappedUser:this}),o=Array.from(this.ndk.pool.relays.keys());return await i.createZapRequest(t,e,n,o,r)}},Gs=class t extends Ms{_encryptedTags;encryptedTagsLength;constructor(t,e){super(t,e),this.kind??=30001}static from(e){return new t(e.ndk,e.rawEvent())}get title(){const t=this.tagValue("title")||this.tagValue("name");return 3!==this.kind||t?1e4!==this.kind||t?10001!==this.kind||t?10002!==this.kind||t?10003!==this.kind||t?10004!==this.kind||t?10005!==this.kind||t?10006!==this.kind||t?10007!==this.kind||t?10015!==this.kind||t?10030!==this.kind||t?t??this.tagValue("d"):"Emojis":"Interests":"Search Relays":"Blocked Relays":"Public Chats":"Communities":"Bookmarks":"Relay Metadata":"Pinned Notes":"Mute":"Contacts"}set title(t){if(this.removeTag("title"),this.removeTag("name"),!t)throw new Error("Title cannot be empty");this.tags.push(["title",t])}get name(){const t=this.tagValue("name");return 3!==this.kind||t?1e4!==this.kind||t?10001!==this.kind||t?10002!==this.kind||t?10003!==this.kind||t?10004!==this.kind||t?10005!==this.kind||t?10006!==this.kind||t?10007!==this.kind||t?10015!==this.kind||t?10030!==this.kind||t?t??this.tagValue("d"):"Emojis":"Interests":"Search Relays":"Blocked Relays":"Public Chats":"Communities":"Bookmarks":"Relay Metadata":"Pinned Notes":"Mute":"Contacts"}set name(t){if(this.removeTag("name"),!t)throw new Error("Name cannot be empty");this.tags.push(["title",t])}get description(){return this.tagValue("description")}set description(t){t?this.tags.push(["description",t]):this.removeTag("description")}isEncryptedTagsCacheValid(){return!(!this._encryptedTags||this.encryptedTagsLength!==this.content.length)}async encryptedTags(t=!0){if(t&&this.isEncryptedTagsCacheValid())return this._encryptedTags;if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");const e=await this.ndk.signer.user();try{if(this.content.length>0)try{const t=await this.ndk.signer.decrypt(e,this.content),n=JSON.parse(t);return n&&n[0]?(this.encryptedTagsLength=this.content.length,this._encryptedTags=n):(this.encryptedTagsLength=this.content.length,this._encryptedTags=[])}catch(t){console.log(`error decrypting ${this.content}`)}}catch(t){}return[]}validateTag(t){return!0}get items(){return this.tags.filter((t=>!["d","L","l","title","name","description","summary","image","thumb","alt","expiration","subject","client"].includes(t[0])))}async addItem(t,e=void 0,n=!1){if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");let r;if(t instanceof Ms)r=t.referenceTags();else if(t instanceof Zs)r=t.referenceTags();else if(t instanceof ys)r=t.referenceTags();else{if(!Array.isArray(t))throw new Error("Invalid object type");r=[t]}if(e&&r[0].push(e),n){const t=await this.ndk.signer.user(),e=await this.encryptedTags();e.push(...r),this._encryptedTags=e,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(e),await this.encrypt(t)}else this.tags.push(...r);this.created_at=Math.floor(Date.now()/1e3),this.emit("change")}async removeItem(t,e){if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");if(e){const e=await this.ndk.signer.user(),n=await this.encryptedTags();n.splice(t,1),this._encryptedTags=n,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(n),await this.encrypt(e)}else this.tags.splice(t,1);return this.created_at=Math.floor(Date.now()/1e3),this.emit("change"),this}filterForItems(){const t=new Set,e=new Map,n=[];for(const n of this.items)if("e"===n[0]&&n[1])t.add(n[1]);else if("a"===n[0]&&n[1]){const[t,r,i]=n[1].split(":");if(!t||!r)continue;const o=`${t}:${r}`,s=e.get(o)||[];s.push(i||""),e.set(o,s)}if(t.size>0&&n.push({ids:Array.from(t)}),e.size>0)for(const[t,r]of e.entries()){const[e,i]=t.split(":");n.push({kinds:[parseInt(e)],authors:[i],"#d":r})}return n}},Ys=(t,e)=>e.some((e=>e instanceof RegExp?e.test(t):e===t)),Js=new Set(["https:","http:","file:"]),Qs=t=>{try{const{protocol:e}=new URL(t);return e.endsWith(":")&&!e.includes(".")&&!Js.has(e)}catch{return!1}},Xs=(t,{stripHash:e})=>{const n=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!n)throw new Error(`Invalid URL: ${t}`);let{type:r,data:i,hash:o}=n.groups;const s=r.split(";");o=e?"":o;let a=!1;"base64"===s[s.length-1]&&(s.pop(),a=!0);const c=s.shift()?.toLowerCase()??"",l=[...s.map((t=>{let[e,n=""]=t.split("=").map((t=>t.trim()));return"charset"===e&&(n=n.toLowerCase(),"us-ascii"===n)?"":`${e}${n?`=${n}`:""}`})).filter(Boolean)];return a&&l.push("base64"),(l.length>0||c&&"text/plain"!==c)&&l.unshift(c),`data:${l.join(";")},${a?i.trim():i}${o?`#${o}`:""}`};function ta(t){let e=function(t,e){if("string"!=typeof(e={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...e}).defaultProtocol||e.defaultProtocol.endsWith(":")||(e.defaultProtocol=`${e.defaultProtocol}:`),t=t.trim(),/^data:/i.test(t))return Xs(t,e);if(Qs(t))return t;const n=t.startsWith("//");!n&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));const r=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&"https:"===r.protocol&&(r.protocol="http:"),e.forceHttps&&"http:"===r.protocol&&(r.protocol="https:"),e.stripAuthentication&&(r.username="",r.password=""),e.stripHash?r.hash="":e.stripTextFragment&&(r.hash=r.hash.replace(/#?:~:text.*?$/i,"")),r.pathname){const t=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g;let e=0,n="";for(;;){const i=t.exec(r.pathname);if(!i)break;const o=i[0],s=i.index;n+=r.pathname.slice(e,s).replace(/\/{2,}/g,"/"),n+=o,e=s+o.length}n+=r.pathname.slice(e,r.pathname.length).replace(/\/{2,}/g,"/"),r.pathname=n}if(r.pathname)try{r.pathname=decodeURI(r.pathname)}catch{}if(!0===e.removeDirectoryIndex&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let t=r.pathname.split("/");const n=t[t.length-1];Ys(n,e.removeDirectoryIndex)&&(t=t.slice(0,-1),r.pathname=t.slice(1).join("/")+"/")}if(r.hostname&&(r.hostname=r.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(r.hostname)&&(r.hostname=r.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(const t of[...r.searchParams.keys()])Ys(t,e.removeQueryParameters)&&r.searchParams.delete(t);if(Array.isArray(e.keepQueryParameters)||!0!==e.removeQueryParameters||(r.search=""),Array.isArray(e.keepQueryParameters)&&e.keepQueryParameters.length>0)for(const t of[...r.searchParams.keys()])Ys(t,e.keepQueryParameters)||r.searchParams.delete(t);if(e.sortQueryParameters){r.searchParams.sort();try{r.search=decodeURIComponent(r.search)}catch{}}e.removeTrailingSlash&&(r.pathname=r.pathname.replace(/\/$/,"")),e.removeExplicitPort&&r.port&&(r.port="");const i=t;return t=r.toString(),e.removeSingleSlash||"/"!==r.pathname||i.endsWith("/")||""!==r.hash||(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||"/"===r.pathname)&&""===r.hash&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),n&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}(t,{stripAuthentication:!1,stripWWW:!1,stripHash:!0});return e.endsWith("/")||(e+="/"),e}function ea(t){const e=new Set;for(const n of t)try{e.add(ta(n))}catch{}return Array.from(e)}var na="read",ra="write",ia=class t extends Ms{constructor(t,e){super(t,e),this.kind??=10002}static from(e){return new t(e.ndk,e.rawEvent())}static async forUser(t,e){return(await this.forUsers([t],e)).get(t)}static async forUsers(e,n){const r=n.outboxPool||n.pool,i=new Set;for(const t of r.relays.values())i.add(t);const o=new Map,s=new Map,a=new ws(i,n);if(n.cacheAdapter?.locking){const r=await n.fetchEvents({kinds:[3,10002],authors:e},{cacheUsage:"ONLY_CACHE"});for(const e of r)10002===e.kind&&o.set(e.pubkey,t.from(e));for(const t of r)if(3===t.kind){const e=oa(n,t);e&&s.set(t.pubkey,e)}e=e.filter((t=>!o.has(t)&&!s.has(t)))}if(0===e.length)return o;await Promise.all([new Promise((async i=>{const s=await n.fetchEvents({kinds:[10002],authors:e},{closeOnEose:!0,pool:r,groupable:!1},a);for(const e of s)o.set(e.pubkey,t.from(e));i()})),new Promise((async t=>{const i=await n.fetchEvents({kinds:[3],authors:e},{closeOnEose:!0,pool:r,groupable:!1},a);for(const t of i){const e=oa(n,t);e&&s.set(t.pubkey,e)}t()}))]);const c=new Map;for(const t of e){const e=o.get(t)??s.get(t);e&&c.set(t,e)}return c}get readRelayUrls(){return this.tags.filter((t=>"r"===t[0]||"relay"===t[0])).filter((t=>!t[2]||t[2]&&t[2]===na)).map((t=>t[1]))}set readRelayUrls(t){for(const e of t)this.tags.push(["r",e,na])}get writeRelayUrls(){return this.tags.filter((t=>"r"===t[0]||"relay"===t[0])).filter((t=>!t[2]||t[2]&&t[2]===ra)).map((t=>t[1]))}set writeRelayUrls(t){for(const e of t)this.tags.push(["r",e,ra])}get bothRelayUrls(){return this.tags.filter((t=>"r"===t[0]||"relay"===t[0])).filter((t=>!t[2])).map((t=>t[1]))}set bothRelayUrls(t){for(const e of t)this.tags.push(["r",e])}get relays(){return this.tags.filter((t=>"r"===t[0]||"relay"===t[0])).map((t=>t[1]))}};function oa(t,e){try{const n=JSON.parse(e.content),r=new ia(t),i=new Set,o=new Set;for(let[t,e]of Object.entries(n)){try{t=ta(t)}catch{continue}if(e){const n=e;n.write&&o.add(t),n.read&&i.add(t)}else i.add(t),o.add(t)}return r.readRelayUrls=Array.from(i),r.writeRelayUrls=Array.from(o),r}catch{}}async function sa(t){return await this.sendReq("pay_invoice",{invoice:t})}var aa=class t{_user;privateKey;constructor(t){t&&(this.privateKey=t,this._user=new Zs({pubkey:Tn(this.privateKey)}))}static generate(){const e=(0,a.ci)(xt.utils.randomPrivateKey());return new t(e)}async blockUntilReady(){if(!this._user)throw new Error("NDKUser not initialized");return this._user}async user(){return await this.blockUntilReady(),this._user}async sign(t){if(!this.privateKey)throw Error("Attempted to sign without a private key");return Wn(t,this.privateKey)}async encrypt(t,e){if(!this.privateKey)throw Error("Attempted to encrypt without a private key");const n=t.pubkey;return await wr.encrypt(this.privateKey,n,e)}async decrypt(t,e){if(!this.privateKey)throw Error("Attempted to decrypt without a private key");const n=t.pubkey;return await wr.decrypt(this.privateKey,n,e)}};async function ca(t,e){const n=new Ms(this.ndk,{kind:23194,tags:[["p",this.walletService.pubkey]],content:JSON.stringify({method:t,params:e})});return this.debug("Sending request",n.content),await n.encrypt(this.walletService,this.signer),await n.sign(this.signer),this.debug("Request encrypted and signed"),new Promise((async(e,r)=>{try{const i=n.tagId();if(!i)throw new Error("Failed to get e-tag");const o=t=>{this.off(i,o),this.off("event",o),this.debug("Received response",t);try{const n=JSON.parse(t);n.error&&r(n),e(n)}catch(t){this.debug("Failed to parse response",t),r({result_type:"error",error:{code:"failed_to_parse_response",message:t.message}})}},s=this.ndk.subscribe({kinds:[23195],"#e":[i],limit:1},{groupable:!1,subId:`nwc-${t}`},this.relaySet);s.on("event",(async t=>{await t.decrypt(t.author,this.signer),o(t.content),s.stop()})),this.once(i,o),this.once("event",o),this.debug("Sending request to relay",n.rawEvent()),await n.publish(this.relaySet)}catch(t){this.debug("Failed to send request",t,t.relayErrors),r({result_type:"error",error:{code:"failed_to_send_request",message:t.message}})}}))}async function la(){return await this.sendReq("get_balance",{})}async function ua(){return await this.sendReq("get_info",{})}var ha=class t extends wi.EventEmitter{ndk;debug;walletService;relaySet;signer;active=!1;constructor({ndk:t,pubkey:e,relayUrls:n,secret:r}){super(),this.ndk=t,this.walletService=t.getUser({pubkey:e}),this.relaySet=new ws(new Set(n.map((e=>t.pool.getRelay(e)))),t),this.signer=new aa(r),this.debug=t.debug.extend("nwc"),this.debug(`Starting with wallet service ${this.walletService.npub}`)}static async fromURI(e,n){const r=new URL(n);if("nostr+walletconnect:"!==r.protocol)throw new Error("Invalid protocol");return new t({ndk:e,pubkey:r.host??r.pathname,relayUrls:r.searchParams.getAll("relay")??[""],secret:r.searchParams.get("secret")??""})}async blockUntilReady(t){const e=await this.signer.user(),n=new Promise(((e,n)=>{setTimeout((()=>{n(new Error("Timeout"))}),t)})),r=[new Promise((t=>{const n=this.ndk.subscribe({kinds:[23195],"#p":[e.pubkey],limit:1},{groupable:!1,subId:"nwc"},this.relaySet);n.on("event",(async t=>{this.debug("received response",t.rawEvent());const e=t.tagValue("e");if(e){this.debug("received an event",e);try{await t.decrypt(t.author,this.signer),this.emit(e,t.content)}catch(t){return void this.debug("Failed to decrypt event",t)}}else this.debug("Received an event without an e-tag")})),n.on("eose",(()=>{this.debug("Subscription ready"),this.active=!0,t()})),n.on("close",(()=>{this.debug("Subscription closed"),this.active=!1}))}))];return t&&r.push(n),await Promise.race(r)}async sendReq(t,e){return await ca.call(this,t,e)}async payInvoice(t){return await sa.call(this,t)}async getInfo(){return await ua.call(this)}getBalance=la.bind(this)},fa=class{_userPromise;nip04Queue=[];nip04Processing=!1;debug;waitTimeout;constructor(t=1e3){this.debug=bi("ndk:nip07"),this.waitTimeout=t}async blockUntilReady(){await this.waitForExtension();const t=await window.nostr.getPublicKey();if(!t)throw new Error("User rejected access");return new Zs({pubkey:t})}async user(){return this._userPromise||(this._userPromise=this.blockUntilReady()),this._userPromise}async sign(t){return await this.waitForExtension(),(await window.nostr.signEvent(t)).sig}async relays(){await this.waitForExtension();const t=await(window.nostr.getRelays?.())||{},e=[];for(const n of Object.keys(t))t[n].read&&t[n].write&&e.push(n);return e.map((t=>new ys(t)))}async encrypt(t,e){await this.waitForExtension();const n=t.pubkey;return this.queueNip04("encrypt",n,e)}async decrypt(t,e){await this.waitForExtension();const n=t.pubkey;return this.queueNip04("decrypt",n,e)}async queueNip04(t,e,n){return new Promise(((r,i)=>{this.nip04Queue.push({type:t,counterpartyHexpubkey:e,value:n,resolve:r,reject:i}),this.nip04Processing||this.processNip04Queue()}))}async processNip04Queue(t,e=0){if(!t&&0===this.nip04Queue.length)return void(this.nip04Processing=!1);this.nip04Processing=!0;const{type:n,counterpartyHexpubkey:r,value:i,resolve:o,reject:s}=t||this.nip04Queue.shift();this.debug("Processing encryption queue item",{type:n,counterpartyHexpubkey:r,value:i});try{let t;t="encrypt"===n?await window.nostr.nip04.encrypt(r,i):await window.nostr.nip04.decrypt(r,i),o(t)}catch(o){if(o.message&&o.message.includes("call already executing")&&e<5)return this.debug("Retrying encryption queue item",{type:n,counterpartyHexpubkey:r,value:i,retries:e}),void setTimeout((()=>{this.processNip04Queue(t,e+1)}),50*e);s(o)}this.processNip04Queue()}waitForExtension(){return new Promise(((t,e)=>{if(window.nostr)return void t();let n;const r=setInterval((()=>{window.nostr&&(clearTimeout(n),clearInterval(r),t())}),100);n=setTimeout((()=>{clearInterval(r),e(new Error("NIP-07 extension not available"))}),this.waitTimeout)}))}},da=class{type;relayUrlScores;readRelays;writeRelays;constructor(t){this.type=t,this.relayUrlScores=new Map,this.readRelays=new Set,this.writeRelays=new Set}},pa=class extends wi.EventEmitter{data;ndk;debug;constructor(t){super(),this.ndk=t,this.debug=t.debug.extend("outbox-tracker"),this.data=new os.LRUCache({maxSize:1e5,entryExpirationTimeInMS:12e4})}trackUsers(t){for(let e=0;e<t.length;e+=400){let n=t.slice(e,e+400).map((t=>ya(t))).filter((t=>!this.data.has(t)));if(0!==n.length){for(const t of n)this.data.set(t,new da("user"));ia.forUsers(n,this.ndk).then((t=>{for(const[e,n]of t){const t=this.data.get(e);if(n){t.readRelays=new Set(ea(n.readRelayUrls)),t.writeRelays=new Set(ea(n.writeRelayUrls));for(const e of t.readRelays)this.ndk.pool.blacklistRelayUrls.has(e)&&t.readRelays.delete(e);for(const e of t.writeRelays)this.ndk.pool.blacklistRelayUrls.has(e)&&t.writeRelays.delete(e);this.data.set(e,t)}}}))}}}track(t,e){const n=ya(t);e??=function(t){return t instanceof Zs?"user":"kind"}(t);let r=this.data.get(n);return r||(r=new da(e),t instanceof Zs&&this.trackUsers([t])),r}};function ya(t){return t instanceof Zs?t.pubkey:t}var ga=class extends wi.EventEmitter{relays=new Map;blacklistRelayUrls;debug;temporaryRelayTimers=new Map;flappingRelays=new Set;backoffTimes=new Map;constructor(t=[],e=[],n,r){super(),this.debug=r??n.debug.extend("pool");for(const e of t){const t=new ys(e);this.addRelay(t,!1)}this.blacklistRelayUrls=new Set(e)}useTemporaryRelay(t,e=3e4){const n=this.relays.has(t.url);n||this.addRelay(t);const r=this.temporaryRelayTimers.get(t.url);if(r&&clearTimeout(r),!n||r){const n=setTimeout((()=>{this.removeRelay(t.url)}),e);this.temporaryRelayTimers.set(t.url,n)}}addRelay(t,e=!0){const n=t.url;this.blacklistRelayUrls?.has(n)?this.debug(`Relay ${n} is blacklisted`):n.includes("/npub1")?this.debug(`Relay ${n} is a filter relay`):(t.on("notice",(async(t,e)=>this.emit("notice",t,e))),t.on("connect",(()=>this.handleRelayConnect(n))),t.on("ready",(()=>this.handleRelayReady(t))),t.on("disconnect",(async()=>this.emit("relay:disconnect",t))),t.on("flapping",(()=>this.handleFlapping(t))),t.on("auth",(async e=>this.emit("relay:auth",t,e))),t.on("authed",(async()=>this.emit("relay:authed",t))),this.relays.set(n,t),e&&(this.emit("relay:connecting",t),t.connect().catch((t=>{this.debug(`Failed to connect to relay ${n}`,t)}))))}removeRelay(t){const e=this.relays.get(t);if(e)return e.disconnect(),this.relays.delete(t),this.emit("relay:disconnect",e),!0;const n=this.temporaryRelayTimers.get(t);return n&&(clearTimeout(n),this.temporaryRelayTimers.delete(t)),!1}getRelay(t,e=!0,n=!1,r){let i=this.relays.get(t);return i||(i=new ys(t),n?this.useTemporaryRelay(i):this.addRelay(i,e)),i}handleRelayConnect(t){this.emit("relay:connect",this.relays.get(t)),this.stats().connected===this.relays.size&&this.emit("connect")}handleRelayReady(t){this.debug(`Relay ${t.url} ready`),this.emit("relay:ready",t)}async connect(t){const e=[];this.debug(`Connecting to ${this.relays.size} relays${t?`, timeout ${t}...`:""}`);for(const n of this.relays.values()){const r=new Promise(((e,r)=>(this.emit("relay:connecting",n),n.connect(t).then(e).catch(r))));if(t){const i=new Promise(((e,n)=>{setTimeout((()=>n(`Timed out after ${t}ms`)),t)}));e.push(Promise.race([r,i]).catch((t=>{this.debug(`Failed to connect to relay ${n.url}: ${t??"No reason specified"}`)})))}else e.push(r)}t&&setTimeout((()=>{const t=this.stats().connected===this.relays.size,e=this.stats().connected>0;!t&&e&&this.emit("connect")}),t),await Promise.all(e)}checkOnFlappingRelays(){if(this.flappingRelays.size/this.relays.size>=.8)for(const t of this.flappingRelays)this.backoffTimes.set(t,0)}handleFlapping(t){this.debug(`Relay ${t.url} is flapping`);let e=this.backoffTimes.get(t.url)||5e3;e*=2,this.backoffTimes.set(t.url,e),this.debug(`Backoff time for ${t.url} is ${e}ms`),setTimeout((()=>{this.debug(`Attempting to reconnect to ${t.url}`),this.emit("relay:connecting",t),t.connect(),this.checkOnFlappingRelays()}),e),t.disconnect(),this.emit("flapping",t)}size(){return this.relays.size}stats(){const t={total:0,connected:0,disconnected:0,connecting:0};for(const e of this.relays.values())t.total++,1===e.status?t.connected++:3===e.status?t.disconnected++:0===e.status&&t.connecting++;return t}connectedRelays(){return Array.from(this.relays.values()).filter((t=>1===t.status))}permanentAndConnectedRelays(){return Array.from(this.relays.values()).filter((t=>1===t.status||!this.temporaryRelayTimers.has(t.url)))}urls(){return Array.from(this.relays.keys())}};async function wa(t,e,n={type:"timeout"}){const r=this.debug.extend("fetch-event-from-tag"),[i,o,s]=t;let a,c=s&&""!==s?this.pool.getRelay(s,!0,!0,[{ids:[o]}]):void 0;const l=new Promise((t=>{this.fetchEvent(o,e,c).then(t)}));if(""===s||!s||"none"===n.type)return l;let u=new Promise((async t=>{let i=n.relaySet,s=n.timeout??1500,c=new Promise((t=>setTimeout(t,s)));"timeout"===n.type&&await c,a?t(a):(r("fallback fetch triggered"),t(await this.fetchEvent(o,e,i)))}));switch(n.type){case"timeout":return Promise.race([l,u]);case"eose":return a=await l,a||u}}var ba=class{queue=[];maxConcurrency;processing=new Set;promises=new Map;constructor(t,e){this.maxConcurrency=e}add(t){if(this.promises.has(t.id))return this.promises.get(t.id);const e=new Promise(((e,n)=>{this.queue.push({...t,func:()=>t.func().then((t=>(e(t),t)),(t=>{throw n(t),t}))}),this.process()}));return this.promises.set(t.id,e),e.finally((()=>{this.promises.delete(t.id),this.processing.delete(t.id)})),e}process(){if(this.processing.size>=this.maxConcurrency||0===this.queue.length)return;const t=this.queue.shift();t&&!this.processing.has(t.id)&&(this.processing.add(t.id),t.func())}clear(){this.queue=[]}clearProcessing(){this.processing.clear()}clearAll(){this.clear(),this.clearProcessing()}length(){return this.queue.length}},ma=["wss://purplepag.es/","wss://profiles.nos.social/"],va=["wss://brb.io/","wss://nostr.mutinywallet.com/"],Ea=class extends wi.EventEmitter{explicitRelayUrls;pool;outboxPool;_signer;_activeUser;cacheAdapter;debug;devWriteRelaySet;outboxTracker;mutedIds;clientName;clientNip89;queuesZapConfig;queuesNip05;asyncSigVerification=!1;validationRatio=1;relayAuthDefaultPolicy;httpFetch;autoConnectUserRelays=!0;autoFetchUserMutelist=!0;constructor(t={}){super(),this.debug=t.debug||bi("ndk"),this.explicitRelayUrls=t.explicitRelayUrls||[],this.pool=new ga(t.explicitRelayUrls||[],t.blacklistRelayUrls||va,this),this.debug(`Starting with explicit relays: ${JSON.stringify(this.explicitRelayUrls)}`),this.pool.on("relay:auth",(async(t,e)=>{this.relayAuthDefaultPolicy&&await this.relayAuthDefaultPolicy(t,e)})),this.autoConnectUserRelays=t.autoConnectUserRelays??!0,this.autoFetchUserMutelist=t.autoFetchUserMutelist??!0,this.clientName=t.clientName,this.clientNip89=t.clientNip89,this.relayAuthDefaultPolicy=t.relayAuthDefaultPolicy,t.enableOutboxModel&&(this.outboxPool=new ga(t.outboxRelayUrls||ma,t.blacklistRelayUrls||va,this,this.debug.extend("outbox-pool")),this.outboxTracker=new pa(this)),this.signer=t.signer,this.cacheAdapter=t.cacheAdapter,this.mutedIds=t.mutedIds||new Map,t.devWriteRelayUrls&&(this.devWriteRelaySet=ws.fromRelayUrls(t.devWriteRelayUrls,this)),this.queuesZapConfig=new ba("zaps",3),this.queuesNip05=new ba("nip05",10),this.signatureVerificationWorker=t.signatureVerificationWorker,this.validationRatio=t.validationRatio||1;try{this.httpFetch=fetch}catch{}}set signatureVerificationWorker(t){this.asyncSigVerification=!!t,t&&((us=t).onmessage=t=>{const[e,n]=t.data,r=Us[e];if(r){delete Us[e];for(const t of r.resolves)t(n)}else console.error("No record found for event",e)})}addExplicitRelay(t,e,n=!0){let r;return r="string"==typeof t?new ys(t,e):t,this.pool.addRelay(r,n),this.explicitRelayUrls.push(r.url),r}toJSON(){return{relayCount:this.pool.relays.size}.toString()}get activeUser(){return this._activeUser}set activeUser(t){const e=this._activeUser?.pubkey!==t?.pubkey;if(this._activeUser=t,t&&e){const e=async t=>{const e=await ia.forUser(t.pubkey,this);if(e){this.debug("Connecting to user relays",{npub:t.npub,relays:e.relays});for(const t of e.relays){let e=this.pool.relays.get(t);e||(e=new ys(t),this.pool.addRelay(e))}}else this.debug("No relay list found for user",{npub:t.npub})},n=async t=>{const e=await this.fetchEvent({kinds:[1e4],authors:[t.pubkey]});if(e){const t=Gs.from(e);for(const e of t.items)this.mutedIds.set(e[1],e[0])}},r=[async t=>{const e=await this.fetchEvent({kinds:[10006],authors:[t.pubkey]});if(e){const t=Gs.from(e);for(const e of t.items)this.pool.blacklistRelayUrls.add(e[0])}this.debug("Blocked relays",{blockedRelays:e})}];this.autoConnectUserRelays&&r.push(e),this.autoFetchUserMutelist&&r.push(n);const i=async t=>{for(const e of r)await e(t)},o=this.outboxPool||this.pool;o.connectedRelays.length>0?i(t):(this.debug("Waiting for connection to main relays"),o.once("connect",(()=>{i(t)})))}else t||(this.mutedIds=new Map)}get signer(){return this._signer}set signer(t){this._signer=t,t&&this.emit("signer:ready",t),t?.user().then((t=>{t.ndk=this,this.activeUser=t}))}async connect(t){this._signer&&this.autoConnectUserRelays&&(this.debug("Attempting to connect to user relays specified by signer"),this._signer.relays)&&(await this._signer.relays()).forEach((t=>this.pool.addRelay(t)));const e=[this.pool.connect(t)];return this.outboxPool&&e.push(this.outboxPool.connect(t)),this.debug("Connecting to relays",{timeoutMs:t}),Promise.allSettled(e).then((()=>{}))}getUser(t){const e=new Zs(t);return e.ndk=this,e}async getUserFromNip05(t,e=!1){return Zs.fromNip05(t,this,e)}subscribe(t,e,n,r=!0){const i=new Hs(this,t,e,n);if(n)for(const t of n.relays)this.pool.useTemporaryRelay(t);if(this.outboxPool&&i.hasAuthorsFilter()){const t=i.filters.filter((t=>t.authors&&t.authors?.length>0)).map((t=>t.authors)).flat();this.outboxTracker?.trackUsers(t)}return r&&setTimeout((()=>i.start()),0),i}async publish(t,e,n){return this.debug("Deprecated: Use `event.publish()` instead"),t.publish(e,n)}fetchEventFromTag=wa.bind(this);async fetchEvent(t,e,n){let r,i;if(n instanceof ys?i=new ws(new Set([n]),this):n instanceof ws&&(i=n),!n&&"string"==typeof t&&null===t.match(hs)){const e=function(t){try{const e=nr.decode(t);if(["naddr","nevent"].includes(e?.type)){const t=e.data;if(t?.relays)return t.relays.map((t=>new ys(t)))}}catch(t){}return[]}(t);e.length>0&&(i=new ws(new Set(e),this),i=function(t,e){const n=e.connectedRelays();if(!Array.from(t.relays).some((t=>n.map((t=>t.url)).includes(t.url))))for(const e of n)t.addRelay(e);if(0===n.length)for(const n of e.relays.values())t.addRelay(n);return t}(i,this.pool))}if(r="string"==typeof t?function(t){let e;if(t.match(hs)){const[e,n,r]=t.split(":"),i={authors:[n],kinds:[parseInt(e)]};return r&&(i["#d"]=[r]),i}if(t.match(fs))try{switch(e=nr.decode(t),e.type){case"nevent":return{ids:[e.data.id]};case"note":return{ids:[e.data]};case"naddr":return{authors:[e.data.pubkey],"#d":[e.data.identifier],kinds:[e.data.kind]}}}catch(e){console.error("Error decoding",t,e)}return{ids:[t]}}(t):t,!r)throw new Error(`Invalid filter: ${JSON.stringify(t)}`);return new Promise((t=>{let n=null;const o=this.subscribe(r,{...e||{},closeOnEose:!0},i,!1);o.on("event",(e=>{e.ndk=this,e.isReplaceable()?(!n||n.created_at<e.created_at)&&(n=e):t(e)})),o.on("eose",(()=>{t(n)})),o.start()}))}async fetchEvents(t,e,n){return new Promise((r=>{const i=new Map,o=this.subscribe(t,{...e||{},closeOnEose:!0},n,!1),s=t=>{const e=t.deduplicationKey(),n=i.get(e);var r,o;n&&(o=t,t=(r=n).created_at>o.created_at?r:o),t.ndk=this,i.set(e,t)};o.on("event",s),o.on("event:dup",s),o.on("eose",(()=>{r(new Set(i.values()))})),o.start()}))}assertSigner(){if(!this.signer)throw this.emit("signer:required"),new Error("Signer required")}getNip96(t){return new class{ndk;spec;url;nip98Required=!1;constructor(t,e){this.url=`https://${t}/.well-known/nostr/nip96.json`,this.ndk=e}async prepareUpload(t,e="POST"){if(this.validateHttpFetch(),this.spec||await this.fetchSpec(),!this.spec)throw new Error("Failed to fetch NIP96 spec");let n={};return this.nip98Required&&(n={Authorization:await this.generateNip98Header(this.spec.api_url,e,t)}),{url:this.spec.api_url,headers:n}}async xhrUpload(t,e){const n="POST",{url:r,headers:i}=await this.prepareUpload(e,n);t.open(n,r,!0),i.Authorization&&t.setRequestHeader("Authorization",i.Authorization);const o=new FormData;return o.append("file",e),new Promise(((e,n)=>{t.onload=function(){t.status>=200&&t.status<300?e(JSON.parse(t.responseText)):n(new Error(t.statusText))},t.onerror=function(){n(new Error("Network Error"))},t.send(o)}))}async upload(t){const e="POST",{url:n,headers:r}=await this.prepareUpload(t,e),i=new FormData;i.append("file",t);const o=await this.ndk.httpFetch(this.spec.api_url,{method:e,headers:r,body:i});if(200!==o.status)throw new Error(`Failed to upload file to ${n}`);const s=await o.json();if("success"!==s.status)throw new Error(s.message);return s}validateHttpFetch(){if(!this.ndk)throw new Error("NDK is required to fetch NIP96 spec");if(!this.ndk.httpFetch)throw new Error("NDK must have an httpFetch method to fetch NIP96 spec")}async fetchSpec(){this.validateHttpFetch();const t=await this.ndk.httpFetch(this.url);if(200!==t.status)throw new Error(`Failed to fetch NIP96 spec from ${this.url}`);const e=await t.json();if(!e)throw new Error(`Failed to parse NIP96 spec from ${this.url}`);this.spec=e,this.nip98Required=this.spec.plans.free.is_nip98_required}async generateNip98Header(t,e,n){const r=new Ms(this.ndk,{kind:27235,tags:[["u",t],["method",e]]});if(["POST","PUT","PATCH"].includes(e)){const t=await this.calculateSha256(n);r.tags.push(["payload",t])}return await r.sign(),`Nostr ${btoa(JSON.stringify(r.rawEvent()))}`}async calculateSha256(t){const e=await t.arrayBuffer(),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map((t=>t.toString(16).padStart(2,"0"))).join("")}}(t,this)}async nwc(t,e=2e3){const n=await ha.fromURI(this,t);return!1!==e&&await n.blockUntilReady(e),n}}},7410:(t,e,n)=>{"use strict";function r(t){if(!Number.isSafeInteger(t))throw new Error(`Wrong integer: ${t}`)}function i(...t){const e=(t,e)=>n=>t(e(n));return{encode:Array.from(t).reverse().reduce(((t,n)=>t?e(t,n.encode):n.encode),void 0),decode:t.reduce(((t,n)=>t?e(t,n.decode):n.decode),void 0)}}function o(t){return{encode:e=>{if(!Array.isArray(e)||e.length&&"number"!=typeof e[0])throw new Error("alphabet.encode input should be an array of numbers");return e.map((e=>{if(r(e),e<0||e>=t.length)throw new Error(`Digit index outside alphabet: ${e} (alphabet: ${t.length})`);return t[e]}))},decode:e=>{if(!Array.isArray(e)||e.length&&"string"!=typeof e[0])throw new Error("alphabet.decode input should be array of strings");return e.map((e=>{if("string"!=typeof e)throw new Error(`alphabet.decode: not string element=${e}`);const n=t.indexOf(e);if(-1===n)throw new Error(`Unknown letter: "${e}". Allowed: ${t}`);return n}))}}}function s(t=""){if("string"!=typeof t)throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&"string"!=typeof e[0])throw new Error("join.encode input should be array of strings");for(let t of e)if("string"!=typeof t)throw new Error(`join.encode: non-string input=${t}`);return e.join(t)},decode:e=>{if("string"!=typeof e)throw new Error("join.decode input should be string");return e.split(t)}}}function a(t,e="="){if(r(t),"string"!=typeof e)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let t of n)if("string"!=typeof t)throw new Error(`padding.encode: non-string input=${t}`);for(;n.length*t%8;)n.push(e);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let t of n)if("string"!=typeof t)throw new Error(`padding.decode: non-string input=${t}`);let r=n.length;if(r*t%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if(!((r-1)*t%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function c(t){if("function"!=typeof t)throw new Error("normalize fn should be function");return{encode:t=>t,decode:e=>t(e)}}function l(t,e,n){if(e<2)throw new Error(`convertRadix: wrong from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(t))throw new Error("convertRadix: data should be array");if(!t.length)return[];let i=0;const o=[],s=Array.from(t);for(s.forEach((t=>{if(r(t),t<0||t>=e)throw new Error(`Wrong integer: ${t}`)}));;){let t=0,r=!0;for(let o=i;o<s.length;o++){const a=s[o],c=e*t+a;if(!Number.isSafeInteger(c)||e*t/e!==t||c-a!=e*t)throw new Error("convertRadix: carry overflow");if(t=c%n,s[o]=Math.floor(c/n),!Number.isSafeInteger(s[o])||s[o]*n+t!==c)throw new Error("convertRadix: carry overflow");r&&(s[o]?r=!1:i=o)}if(o.push(t),r)break}for(let e=0;e<t.length-1&&0===t[e];e++)o.push(0);return o.reverse()}n.d(e,{Av:()=>E,P6:()=>w,US:()=>b,gW:()=>B});const u=(t,e)=>e?u(e,t%e):t,h=(t,e)=>t+(e-u(t,e));function f(t,e,n,i){if(!Array.isArray(t))throw new Error("convertRadix2: data should be array");if(e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(h(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${h(e,n)}`);let o=0,s=0;const a=2**n-1,c=[];for(const i of t){if(r(i),i>=2**e)throw new Error(`convertRadix2: invalid data word=${i} from=${e}`);if(o=o<<e|i,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=n;s-=n)c.push((o>>s-n&a)>>>0);o&=2**s-1}if(o=o<<n-s&a,!i&&s>=e)throw new Error("Excess padding");if(!i&&o)throw new Error(`Non-zero padding: ${o}`);return i&&s>0&&c.push(o>>>0),c}function d(t){return r(t),{encode:e=>{if(!(e instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return l(Array.from(e),256,t)},decode:e=>{if(!Array.isArray(e)||e.length&&"number"!=typeof e[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(l(e,t,256))}}}function p(t,e=!1){if(r(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(h(8,t)>32||h(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return f(Array.from(n),8,t,!e)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(f(n,t,8,e))}}}function y(t){if("function"!=typeof t)throw new Error("unsafeWrapper fn should be function");return function(...e){try{return t.apply(null,e)}catch(t){}}}function g(t,e){if(r(t),"function"!=typeof e)throw new Error("checksum fn should be function");return{encode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const r=e(n).slice(0,t),i=new Uint8Array(n.length+t);return i.set(n),i.set(r,n.length),i},decode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-t),i=e(r).slice(0,t),o=n.slice(-t);for(let e=0;e<t;e++)if(i[e]!==o[e])throw new Error("Invalid checksum");return r}}}const w={alphabet:o,chain:i,checksum:g,radix:d,radix2:p,join:s,padding:a},b=(i(p(4),o("0123456789ABCDEF"),s("")),i(p(5),o("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),a(5),s("")),i(p(5),o("0123456789ABCDEFGHIJKLMNOPQRSTUV"),a(5),s("")),i(p(5),o("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),s(""),c((t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),i(p(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),a(6),s(""))),m=(i(p(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),a(6),s("")),t=>i(d(58),o(t),s(""))),v=m("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),E=(m("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),m("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),t=>i(g(4,(e=>t(t(e)))),v)),k=i(o("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),s("")),x=[996825010,642813549,513874426,1027748829,705979059];function _(t){const e=t>>25;let n=(33554431&t)<<5;for(let t=0;t<x.length;t++)1==(e>>t&1)&&(n^=x[t]);return n}function A(t,e,n=1){const r=t.length;let i=1;for(let e=0;e<r;e++){const n=t.charCodeAt(e);if(n<33||n>126)throw new Error(`Invalid prefix (${t})`);i=_(i)^n>>5}i=_(i);for(let e=0;e<r;e++)i=_(i)^31&t.charCodeAt(e);for(let t of e)i=_(i)^t;for(let t=0;t<6;t++)i=_(i);return i^=n,k.encode(f([i%2**30],30,5,!1))}function S(t){const e="bech32"===t?1:734539939,n=p(5),r=n.decode,i=n.encode,o=y(r);function s(t,n=90){if("string"!=typeof t)throw new Error("bech32.decode input should be string, not "+typeof t);if(t.length<8||!1!==n&&t.length>n)throw new TypeError(`Wrong string length: ${t.length} (${t}). Expected (8..${n})`);const r=t.toLowerCase();if(t!==r&&t!==t.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=(t=r).lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const o=t.slice(0,i),s=t.slice(i+1);if(s.length<6)throw new Error("Data must be at least 6 characters long");const a=k.decode(s).slice(0,-6),c=A(o,a,e);if(!s.endsWith(c))throw new Error(`Invalid checksum in ${t}: expected "${c}"`);return{prefix:o,words:a}}return{encode:function(t,n,r=90){if("string"!=typeof t)throw new Error("bech32.encode prefix should be string, not "+typeof t);if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof n);const i=t.length+7+n.length;if(!1!==r&&i>r)throw new TypeError(`Length ${i} exceeds limit ${r}`);return`${t=t.toLowerCase()}1${k.encode(n)}${A(t,n,e)}`},decode:s,decodeToBytes:function(t){const{prefix:e,words:n}=s(t,!1);return{prefix:e,words:n,bytes:r(n)}},decodeUnsafe:y(s),fromWords:r,fromWordsUnsafe:o,toWords:i}}const B=S("bech32");S("bech32m");i(p(4),o("0123456789abcdef"),s(""),c((t=>{if("string"!=typeof t||t.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof t} with length ${t.length}`);return t.toLowerCase()})))}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={};__webpack_require__(2451),__webpack_require__(7295),__webpack_require__(3797),__webpack_require__(5284),__webpack_require__(5857),__webpack_require__(8751),__webpack_require__(5123),__webpack_require__(7909),__webpack_require__(6044),__webpack_require__(8423)})();